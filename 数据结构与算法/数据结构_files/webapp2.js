(function(e){var m=function(p,o){return(p<<o)|(p>>>(32-o))};var a=function(s,p){var u,o,r,t,q;r=(s&2147483648);t=(p&2147483648);u=(s&1073741824);o=(p&1073741824);q=(s&1073741823)+(p&1073741823);if(u&o){return(q^2147483648^r^t)}if(u|o){if(q&1073741824){return(q^3221225472^r^t)}else{return(q^1073741824^r^t)}}else{return(q^r^t)}};var n=function(o,q,p){return(o&q)|((~o)&p)};var l=function(o,q,p){return(o&p)|(q&(~p))};var j=function(o,q,p){return(o^q^p)};var i=function(o,q,p){return(q^(o|(~p)))};var g=function(q,p,v,u,o,r,t){q=a(q,a(a(n(p,v,u),o),t));return a(m(q,r),p)};var c=function(q,p,v,u,o,r,t){q=a(q,a(a(l(p,v,u),o),t));return a(m(q,r),p)};var h=function(q,p,v,u,o,r,t){q=a(q,a(a(j(p,v,u),o),t));return a(m(q,r),p)};var d=function(q,p,v,u,o,r,t){q=a(q,a(a(i(p,v,u),o),t));return a(m(q,r),p)};var f=function(r){var v;var q=r.length;var p=q+8;var u=(p-(p%64))/64;var t=(u+1)*16;var w=Array(t-1);var o=0;var s=0;while(s<q){v=(s-(s%4))/4;o=(s%4)*8;w[v]=(w[v]|(r.charCodeAt(s)<<o));s++}v=(s-(s%4))/4;o=(s%4)*8;w[v]=w[v]|(128<<o);w[t-2]=q<<3;w[t-1]=q>>>29;return w};var b=function(r){var q="",o="",s,p;for(p=0;p<=3;p++){s=(r>>>(p*8))&255;o="0"+s.toString(16);q=q+o.substr(o.length-2,2)}return q};var k=function(p){p=p.replace(/\x0d\x0a/g,"\x0a");var o="";for(var r=0;r<p.length;r++){var q=p.charCodeAt(r);if(q<128){o+=String.fromCharCode(q)}else{if((q>127)&&(q<2048)){o+=String.fromCharCode((q>>6)|192);o+=String.fromCharCode((q&63)|128)}else{o+=String.fromCharCode((q>>12)|224);o+=String.fromCharCode(((q>>6)&63)|128);o+=String.fromCharCode((q&63)|128)}}}return o};e.extend({md5:function(o){var v=Array();var G,H,p,u,F,Q,P,N,K;var D=7,B=12,z=17,w=22;var O=5,L=9,J=14,I=20;var t=4,s=11,r=16,q=23;var E=6,C=10,A=15,y=21;o=k(o);v=f(o);Q=1732584193;P=4023233417;N=2562383102;K=271733878;for(G=0;G<v.length;G+=16){H=Q;p=P;u=N;F=K;Q=g(Q,P,N,K,v[G+0],D,3614090360);K=g(K,Q,P,N,v[G+1],B,3905402710);N=g(N,K,Q,P,v[G+2],z,606105819);P=g(P,N,K,Q,v[G+3],w,3250441966);Q=g(Q,P,N,K,v[G+4],D,4118548399);K=g(K,Q,P,N,v[G+5],B,1200080426);N=g(N,K,Q,P,v[G+6],z,2821735955);P=g(P,N,K,Q,v[G+7],w,4249261313);Q=g(Q,P,N,K,v[G+8],D,1770035416);K=g(K,Q,P,N,v[G+9],B,2336552879);N=g(N,K,Q,P,v[G+10],z,4294925233);P=g(P,N,K,Q,v[G+11],w,2304563134);Q=g(Q,P,N,K,v[G+12],D,1804603682);K=g(K,Q,P,N,v[G+13],B,4254626195);N=g(N,K,Q,P,v[G+14],z,2792965006);P=g(P,N,K,Q,v[G+15],w,1236535329);Q=c(Q,P,N,K,v[G+1],O,4129170786);K=c(K,Q,P,N,v[G+6],L,3225465664);N=c(N,K,Q,P,v[G+11],J,643717713);P=c(P,N,K,Q,v[G+0],I,3921069994);Q=c(Q,P,N,K,v[G+5],O,3593408605);K=c(K,Q,P,N,v[G+10],L,38016083);N=c(N,K,Q,P,v[G+15],J,3634488961);P=c(P,N,K,Q,v[G+4],I,3889429448);Q=c(Q,P,N,K,v[G+9],O,568446438);K=c(K,Q,P,N,v[G+14],L,3275163606);N=c(N,K,Q,P,v[G+3],J,4107603335);P=c(P,N,K,Q,v[G+8],I,1163531501);Q=c(Q,P,N,K,v[G+13],O,2850285829);K=c(K,Q,P,N,v[G+2],L,4243563512);N=c(N,K,Q,P,v[G+7],J,1735328473);P=c(P,N,K,Q,v[G+12],I,2368359562);Q=h(Q,P,N,K,v[G+5],t,4294588738);K=h(K,Q,P,N,v[G+8],s,2272392833);N=h(N,K,Q,P,v[G+11],r,1839030562);P=h(P,N,K,Q,v[G+14],q,4259657740);Q=h(Q,P,N,K,v[G+1],t,2763975236);K=h(K,Q,P,N,v[G+4],s,1272893353);N=h(N,K,Q,P,v[G+7],r,4139469664);P=h(P,N,K,Q,v[G+10],q,3200236656);Q=h(Q,P,N,K,v[G+13],t,681279174);K=h(K,Q,P,N,v[G+0],s,3936430074);N=h(N,K,Q,P,v[G+3],r,3572445317);P=h(P,N,K,Q,v[G+6],q,76029189);Q=h(Q,P,N,K,v[G+9],t,3654602809);K=h(K,Q,P,N,v[G+12],s,3873151461);N=h(N,K,Q,P,v[G+15],r,530742520);P=h(P,N,K,Q,v[G+2],q,3299628645);Q=d(Q,P,N,K,v[G+0],E,4096336452);K=d(K,Q,P,N,v[G+7],C,1126891415);N=d(N,K,Q,P,v[G+14],A,2878612391);P=d(P,N,K,Q,v[G+5],y,4237533241);Q=d(Q,P,N,K,v[G+12],E,1700485571);K=d(K,Q,P,N,v[G+3],C,2399980690);N=d(N,K,Q,P,v[G+10],A,4293915773);P=d(P,N,K,Q,v[G+1],y,2240044497);Q=d(Q,P,N,K,v[G+8],E,1873313359);K=d(K,Q,P,N,v[G+15],C,4264355552);N=d(N,K,Q,P,v[G+6],A,2734768916);P=d(P,N,K,Q,v[G+13],y,1309151649);Q=d(Q,P,N,K,v[G+4],E,4149444226);K=d(K,Q,P,N,v[G+11],C,3174756917);N=d(N,K,Q,P,v[G+2],A,718787259);P=d(P,N,K,Q,v[G+9],y,3951481745);Q=a(Q,H);P=a(P,p);N=a(N,u);K=a(K,F)}var M=b(Q)+b(P)+b(N)+b(K);return M.toLowerCase()}})})(jQuery);(function(a){var z="File format is not recognized.";var K="CRC failed.";var A="File contains encrypted entry.";var S="File is using Zip64 (4gb+ file size).";var D="Error while reading zip file.";var n="Error while writing zip file.";var k="Error while writing file data.";var T="Error while reading file data.";var g="File already exists.";var C=512*1024;var c="text/plain";var H;try{H=new Blob([new DataView(new ArrayBuffer(0))]).size===0}catch(R){}function M(){this.crc=-1}M.prototype.append=function E(Y){var X=this.crc|0,W=this.table;for(var Z=0,e=Y.length|0;Z<e;Z++){X=(X>>>8)^W[(X^Y[Z])&255]}this.crc=X};M.prototype.get=function P(){return ~this.crc};M.prototype.table=(function(){var X,e,W,Y=[];for(X=0;X<256;X++){W=X;for(e=0;e<8;e++){if(W&1){W=(W>>>1)^3988292384}else{W=W>>>1}}Y[X]=W}return Y})();function j(){}j.prototype.append=function E(e,W){return e};j.prototype.flush=function i(){};function d(e,W,X){if(W<0||X<0||W+X>e.size){throw new RangeError("offset:"+W+", length:"+X+", size:"+e.size)}if(e.slice){return e.slice(W,W+X)}else{if(e.webkitSlice){return e.webkitSlice(W,W+X)}else{if(e.mozSlice){return e.mozSlice(W,W+X)}else{if(e.msSlice){return e.msSlice(W,W+X)}}}}}function I(X,W){var Y,e;Y=new ArrayBuffer(X);e=new Uint8Array(Y);if(W){e.set(W,0)}return{buffer:Y,array:e,view:new DataView(Y)}}function G(){}function Q(Z){var e=this,X;function Y(ac,aa){var ab=new Blob([Z],{type:c});X=new t(ab);X.init(function(){e.size=X.size;ac()},aa)}function W(ab,ac,ad,aa){X.readUint8Array(ab,ac,ad,aa)}e.size=0;e.init=Y;e.readUint8Array=W}Q.prototype=new G();Q.prototype.constructor=Q;function O(W){var X=this,e;function Z(ab){var aa=W.length;while(W.charAt(aa-1)=="="){aa--}e=W.indexOf(",")+1;X.size=Math.floor((aa-e)*0.75);ab()}function Y(af,ab,ah){var ae,ad=I(ab);var aa=Math.floor(af/3)*4;var ac=Math.ceil((af+ab)/3)*4;var ai=a.atob(W.substring(aa+e,ac+e));var ag=af-Math.floor(aa/4)*3;for(ae=ag;ae<ag+ab;ae++){ad.array[ae-ag]=ai.charCodeAt(ae)}ah(ad.array)}X.size=0;X.init=Z;X.readUint8Array=Y}O.prototype=new G();O.prototype.constructor=O;function t(e){var W=this;function Y(Z){W.size=e.size;Z()}function X(ab,ac,ae,aa){var Z=new FileReader();Z.onload=function(af){ae(new Uint8Array(af.target.result))};Z.onerror=aa;try{Z.readAsArrayBuffer(d(e,ab,ac))}catch(ad){aa(ad)}}W.size=0;W.init=Y;W.readUint8Array=X}t.prototype=new G();t.prototype.constructor=t;function h(){}h.prototype.getData=function(e){e(this.data)};function q(Y){var X=this,W;function aa(ab){W=new Blob([],{type:c});ab()}function Z(ac,ab){W=new Blob([W,H?ac:ac.buffer],{type:c});ab()}function e(ad,ac){var ab=new FileReader();ab.onload=function(ae){ad(ae.target.result)};ab.onerror=ac;ab.readAsText(W,Y)}X.init=aa;X.writeUint8Array=Z;X.getData=e}q.prototype=new h();q.prototype.constructor=q;function o(ab){var W=this,Y="",aa="";function Z(ac){Y+="data:"+(ab||"")+";base64,";ac()}function X(ag,af){var ac,ae=aa.length,ad=aa;aa="";for(ac=0;ac<(Math.floor((ae+ag.length)/3)*3)-ae;ac++){ad+=String.fromCharCode(ag[ac])}for(;ac<ag.length;ac++){aa+=String.fromCharCode(ag[ac])}if(ad.length>2){Y+=a.btoa(ad)}else{aa=ad}af()}function e(ac){ac(Y+a.btoa(aa))}W.init=Z;W.writeUint8Array=X;W.getData=e}o.prototype=new h();o.prototype.constructor=o;function N(aa){var W,X=this;function Z(ab){W=new Blob([],{type:aa});ab()}function Y(ac,ab){W=new Blob([W,H?ac:ac.buffer],{type:aa});ab()}function e(ab){ab(W)}X.init=Z;X.writeUint8Array=Y;X.getData=e}N.prototype=new h();N.prototype.constructor=N;function F(ab,W,X,aj,ac,ah,Z,Y,ak,aa){var e=0,af,ai,al=W.sn,ag;function am(){ab.removeEventListener("message",ad,false);Y(ai,ag)}function ad(ap){var ao=ap.data,aq=ao.data,an=ao.error;if(an){an.toString=function(){return"Error: "+this.message};ak(an);return}if(ao.sn!==al){return}if(typeof ao.codecTime==="number"){ab.codecTime+=ao.codecTime}if(typeof ao.crcTime==="number"){ab.crcTime+=ao.crcTime}switch(ao.type){case"append":if(aq){ai+=aq.length;aj.writeUint8Array(aq,function(){ae()},aa)}else{ae()}break;case"flush":ag=ao.crc;if(aq){ai+=aq.length;aj.writeUint8Array(aq,function(){am()},aa)}else{am()}break;case"progress":if(Z){Z(af+ao.loaded,ah)}break;case"importScripts":case"newTask":case"echo":break;default:console.warn("zip.js:launchWorkerProcess: unknown message: ",ao)}}function ae(){af=e*C;if(af<ah){X.readUint8Array(ac+af,Math.min(C,ah-af),function(ao){if(Z){Z(af,ah)}var an=af===0?W:{sn:al};an.type="append";an.data=ao;ab.postMessage(an,[ao.buffer]);e++},ak)}else{ab.postMessage({sn:al,type:"flush"})}}ai=0;ab.addEventListener("message",ad,false);ae()}function b(e,af,aa,ac,al,W,X,ak,Z,ad){var ai=0,ah,ab=0,aj=W==="input",ae=W==="output",ag=new M();function Y(){var am;ah=ai*C;if(ah<al){af.readUint8Array(ac+ah,Math.min(C,al-ah),function(ap){var ao;try{ao=e.append(ap,function(ar){if(X){X(ah+ar,al)}})}catch(aq){Z(aq);return}if(ao){ab+=ao.length;aa.writeUint8Array(ao,function(){ai++;setTimeout(Y,1)},ad);if(ae){ag.append(ao)}}else{ai++;setTimeout(Y,1)}if(aj){ag.append(ap)}if(X){X(ah,al)}},Z)}else{try{am=e.flush()}catch(an){Z(an);return}if(am){if(ae){ag.append(am)}ab+=am.length;aa.writeUint8Array(am,function(){ak(ab,ag.get())},ad)}else{ak(ab,ag.get())}}}Y()}function m(Y,X,ae,aa,ab,ah,af,ag,W,Z,ad){var e=af?"output":"none";if(a.zip.useWebWorkers){var ac={sn:X,codecClass:"Inflater",crcType:e};F(Y,ac,ae,aa,ab,ah,W,ag,Z,ad)}else{b(new a.zip.Inflater(),ae,aa,ab,ah,e,W,ag,Z,ad)}}function B(Z,Y,ae,aa,e,af,X,ab,ad){var W="input";if(a.zip.useWebWorkers){var ac={sn:Y,options:{level:e},codecClass:"Deflater",crcType:W};F(Z,ac,ae,aa,0,ae.size,X,af,ab,ad)}else{b(new a.zip.Deflater(),ae,aa,0,ae.size,W,X,af,ab,ad)}}function U(Y,X,ae,aa,ab,ah,af,ag,W,Z,ad){var e="input";if(a.zip.useWebWorkers&&af){var ac={sn:X,codecClass:"NOOP",crcType:e};F(Y,ac,ae,aa,ab,ah,W,ag,Z,ad)}else{b(new j(),ae,aa,ab,ah,e,W,ag,Z,ad)}}function J(Z){var Y,X="",W,e=["\u00C7","\u00FC","\u00E9","\u00E2","\u00E4","\u00E0","\u00E5","\u00E7","\u00EA","\u00EB","\u00E8","\u00EF","\u00EE","\u00EC","\u00C4","\u00C5","\u00C9","\u00E6","\u00C6","\u00F4","\u00F6","\u00F2","\u00FB","\u00F9","\u00FF","\u00D6","\u00DC","\u00F8","\u00A3","\u00D8","\u00D7","\u0192","\u00E1","\u00ED","\u00F3","\u00FA","\u00F1","\u00D1","\u00AA","\u00BA","\u00BF","\u00AE","\u00AC","\u00BD","\u00BC","\u00A1","\u00AB","\u00BB","_","_","_","\u00A6","\u00A6","\u00C1","\u00C2","\u00C0","\u00A9","\u00A6","\u00A6","+","+","\u00A2","\u00A5","+","+","-","-","+","-","+","\u00E3","\u00C3","+","+","-","-","\u00A6","-","+","\u00A4","\u00F0","\u00D0","\u00CA","\u00CB","\u00C8","i","\u00CD","\u00CE","\u00CF","+","+","_","_","\u00A6","\u00CC","_","\u00D3","\u00DF","\u00D4","\u00D2","\u00F5","\u00D5","\u00B5","\u00FE","\u00DE","\u00DA","\u00DB","\u00D9","\u00FD","\u00DD","\u00AF","\u00B4","\u00AD","\u00B1","_","\u00BE","\u00B6","\u00A7","\u00F7","\u00B8","\u00B0","\u00A8","\u00B7","\u00B9","\u00B3","\u00B2","_"," "];for(Y=0;Y<Z.length;Y++){W=Z.charCodeAt(Y)&255;if(W>127){X+=e[W-128]}else{X+=String.fromCharCode(W)}}return X}function x(e){return decodeURIComponent(escape(e))}function L(e){var W,X="";for(W=0;W<e.length;W++){X+=String.fromCharCode(e[W])}return X}function s(X){var W=(X&4294901760)>>16,Z=X&65535;try{return new Date(1980+((W&65024)>>9),((W&480)>>5)-1,W&31,(Z&63488)>>11,(Z&2016)>>5,(Z&31)*2,0)}catch(Y){}}function r(Y,Z,X,W,e){Y.version=Z.view.getUint16(X,true);Y.bitFlag=Z.view.getUint16(X+2,true);Y.compressionMethod=Z.view.getUint16(X+4,true);Y.lastModDateRaw=Z.view.getUint32(X+6,true);Y.lastModDate=s(Y.lastModDateRaw);if((Y.bitFlag&1)===1){e(A);return}if(W||(Y.bitFlag&8)!=8){Y.crc32=Z.view.getUint32(X+10,true);Y.compressedSize=Z.view.getUint32(X+14,true);Y.uncompressedSize=Z.view.getUint32(X+18,true)}if(Y.compressedSize===4294967295||Y.uncompressedSize===4294967295){e(S);return}Y.filenameLength=Z.view.getUint16(X+22,true);Y.extraFieldLength=Z.view.getUint16(X+24,true)}function V(W,ab,e){var aa=0;function X(){}X.prototype.getData=function(af,ak,ae,ac){var ai=this;function ad(al){var am=I(4);am.view.setUint32(0,al);return ai.crc32==am.view.getUint32(0)}function aj(al,am){if(ac&&!ad(am)){e(K)}else{af.getData(function(an){ak(an)})}}function ag(al){e(al||T)}function ah(al){e(al||k)}W.readUint8Array(ai.offset,30,function(am){var an=I(am.length,am),al;if(an.view.getUint32(0)!=1347093252){e(z);return}r(ai,an,4,false,e);al=ai.offset+30+ai.filenameLength+ai.extraFieldLength;af.init(function(){if(ai.compressionMethod===0){U(ai._worker,aa++,W,af,al,ai.compressedSize,ac,aj,ae,ag,ah)}else{m(ai._worker,aa++,W,af,al,ai.compressedSize,ac,aj,ae,ag,ah)}},ah)},ag)};function Z(af){var ad=22;if(W.size<ad){e(z);return}var ac=256*256,ae=ad+ac;ag(ad,function(){ag(Math.min(ae,W.size),function(){e(z)})});function ag(ah,ai){W.readUint8Array(W.size-ah,ah,function(aj){for(var ak=aj.length-ad;ak>=0;ak--){if(aj[ak]===80&&aj[ak+1]===75&&aj[ak+2]===5&&aj[ak+3]===6){af(new DataView(aj.buffer,ak,ad));return}}ai()},function(){e(D)})}}var Y={getEntries:function(ad){var ac=this._worker;Z(function(ag){var af,ae;af=ag.getUint32(16,true);ae=ag.getUint16(8,true);if(af<0||af>=W.size){e(z);return}W.readUint8Array(af,W.size-af,function(ai){var al,ak=0,ah=[],am,aj,ao,an=I(ai.length,ai);for(al=0;al<ae;al++){am=new X();am._worker=ac;if(an.view.getUint32(ak)!=1347092738){e(z);return}r(am,an,ak+6,true,e);am.commentLength=an.view.getUint16(ak+32,true);am.directory=((an.view.getUint8(ak+38)&16)==16);am.offset=an.view.getUint32(ak+42,true);aj=L(an.array.subarray(ak+46,ak+46+am.filenameLength));am.filename=((am.bitFlag&2048)===2048)?x(aj):J(aj);if(!am.directory&&am.filename.charAt(am.filename.length-1)=="/"){am.directory=true}ao=L(an.array.subarray(ak+46+am.filenameLength+am.extraFieldLength,ak+46+am.filenameLength+am.extraFieldLength+am.commentLength));am.comment=((am.bitFlag&2048)===2048)?x(ao):J(ao);ah.push(am);ak+=46+am.filenameLength+am.extraFieldLength+am.commentLength}ad(ah)},function(){e(D)})})},close:function(ac){if(this._worker){this._worker.terminate();this._worker=null}if(ac){ac()}},_worker:null};if(!a.zip.useWebWorkers){ab(Y)}else{w("inflater",function(ac){Y._worker=ac;ab(Y)},function(ac){e(ac)})}}function y(e){return unescape(encodeURIComponent(e))}function f(W){var e,X=[];for(e=0;e<W.length;e++){X.push(W.charCodeAt(e))}return X}function v(Y,ae,ad,Z){var e={},ab=[],af=0;var ac=0;function aa(ag){ad(ag||n)}function X(ag){ad(ag||T)}var W={add:function(ai,ao,aq,aj,ar){var an,ah,al;var ak=this._worker;function ap(au){var at;al=ar.lastModDate||new Date();an=I(26);e[ai]={headerArray:an.array,directory:ar.directory,filename:ah,offset:af,comment:f(y(ar.comment||""))};an.view.setUint32(0,335546376);if(ar.version){an.view.setUint8(0,ar.version)}if(!Z&&ar.level!==0&&!ar.directory){an.view.setUint16(4,2048)}an.view.setUint16(6,(((al.getHours()<<6)|al.getMinutes())<<5)|al.getSeconds()/2,true);an.view.setUint16(8,((((al.getFullYear()-1980)<<4)|(al.getMonth()+1))<<5)|al.getDate(),true);an.view.setUint16(22,ah.length,true);at=I(30+ah.length);at.view.setUint32(0,1347093252);at.array.set(an.array,4);at.array.set(ah,30);af+=at.array.length;Y.writeUint8Array(at.array,au,aa)}function ag(at,au){var av=I(16);af+=at||0;av.view.setUint32(0,1347094280);if(typeof au!="undefined"){an.view.setUint32(10,au,true);av.view.setUint32(4,au,true)}if(ao){av.view.setUint32(8,at,true);an.view.setUint32(14,at,true);av.view.setUint32(12,ao.size,true);an.view.setUint32(18,ao.size,true)}Y.writeUint8Array(av.array,function(){af+=16;aq()},aa)}function am(){ar=ar||{};ai=ai.trim();if(ar.directory&&ai.charAt(ai.length-1)!="/"){ai+="/"}if(e.hasOwnProperty(ai)){ad(g);return}ah=f(y(ai));ab.push(ai);ap(function(){if(ao){if(Z||ar.level===0){U(ak,ac++,ao,Y,0,ao.size,true,ag,aj,X,aa)}else{B(ak,ac++,ao,Y,ar.level,ag,aj,X,aa)}}else{ag()}},aa)}if(ao){ao.init(am,X)}else{am()}},close:function(al){if(this._worker){this._worker.terminate();this._worker=null}var ak,aj=0,ah=0,ag,ai;for(ag=0;ag<ab.length;ag++){ai=e[ab[ag]];aj+=46+ai.filename.length+ai.comment.length}ak=I(aj+22);for(ag=0;ag<ab.length;ag++){ai=e[ab[ag]];ak.view.setUint32(ah,1347092738);ak.view.setUint16(ah+4,5120);ak.array.set(ai.headerArray,ah+6);ak.view.setUint16(ah+32,ai.comment.length,true);if(ai.directory){ak.view.setUint8(ah+38,16)}ak.view.setUint32(ah+42,ai.offset,true);ak.array.set(ai.filename,ah+46);ak.array.set(ai.comment,ah+46+ai.filename.length);ah+=46+ai.filename.length+ai.comment.length}ak.view.setUint32(ah,1347093766);ak.view.setUint16(ah+8,ab.length,true);ak.view.setUint16(ah+10,ab.length,true);ak.view.setUint32(ah+12,aj,true);ak.view.setUint32(ah+16,af,true);Y.writeUint8Array(ak.array,function(){Y.getData(al)},aa)},_worker:null};if(!a.zip.useWebWorkers){ae(W)}else{w("deflater",function(ag){W._worker=ag;ae(W)},function(ag){ad(ag)})}}function p(W){var e=document.createElement("a");return W.map(function(X){e.href=X;return e.href})}var l={deflater:["z-worker.js","deflate.js"],inflater:["z-worker.js","inflate.js"]};function w(Y,ab,W){if(a.zip.workerScripts!==null&&a.zip.workerScriptsPath!==null){W(new Error("Either zip.workerScripts or zip.workerScriptsPath may be set, not both."));return}var e;if(a.zip.workerScripts){e=a.zip.workerScripts[Y];if(!Array.isArray(e)){W(new Error("zip.workerScripts."+Y+" is not an array!"));return}e=p(e)}else{e=l[Y].slice(0);e[0]=(a.zip.workerScriptsPath||"")+e[0]}var Z=new Worker(e[0]);Z.codecTime=Z.crcTime=0;Z.postMessage({type:"importScripts",scripts:e.slice(1)});Z.addEventListener("message",aa);function aa(ac){var ad=ac.data;if(ad.error){Z.terminate();W(ad.error);return}if(ad.type==="importScripts"){Z.removeEventListener("message",aa);Z.removeEventListener("error",X);ab(Z)}}Z.addEventListener("error",X);function X(ac){Z.terminate();W(ac)}}function u(e){console.error(e)}a.zip={Reader:G,Writer:h,BlobReader:t,Data64URIReader:O,TextReader:Q,BlobWriter:N,Data64URIWriter:o,TextWriter:q,createReader:function(W,X,e){e=e||u;W.init(function(){V(W,X,e)},e)},createWriter:function(W,Y,e,X){e=e||u;X=!!X;W.init(function(){v(W,Y,e,X)},e)},useWebWorkers:true,workerScriptsPath:null,workerScripts:null}})(this);(function(){var b={application:{"andrew-inset":"ez",annodex:"anx","atom+xml":"atom","atomcat+xml":"atomcat","atomserv+xml":"atomsrv",bbolin:"lin",cap:["cap","pcap"],"cu-seeme":"cu","davmount+xml":"davmount",dsptype:"tsp",ecmascript:["es","ecma"],futuresplash:"spl",hta:"hta","java-archive":"jar","java-serialized-object":"ser","java-vm":"class",javascript:"js",m3g:"m3g","mac-binhex40":"hqx",mathematica:["nb","ma","mb"],msaccess:"mdb",msword:["doc","dot"],mxf:"mxf",oda:"oda",ogg:"ogx",pdf:"pdf","pgp-keys":"key","pgp-signature":["asc","sig"],"pics-rules":"prf",postscript:["ps","ai","eps","epsi","epsf","eps2","eps3"],rar:"rar","rdf+xml":"rdf","rss+xml":"rss",rtf:"rtf",smil:["smi","smil"],"xhtml+xml":["xhtml","xht"],xml:["xml","xsl","xsd"],"xspf+xml":"xspf",zip:"zip","vnd.android.package-archive":"apk","vnd.cinderella":"cdy","vnd.google-earth.kml+xml":"kml","vnd.google-earth.kmz":"kmz","vnd.mozilla.xul+xml":"xul","vnd.ms-excel":["xls","xlb","xlt","xlm","xla","xlc","xlw"],"vnd.ms-pki.seccat":"cat","vnd.ms-pki.stl":"stl","vnd.ms-powerpoint":["ppt","pps","pot"],"vnd.oasis.opendocument.chart":"odc","vnd.oasis.opendocument.database":"odb","vnd.oasis.opendocument.formula":"odf","vnd.oasis.opendocument.graphics":"odg","vnd.oasis.opendocument.graphics-template":"otg","vnd.oasis.opendocument.image":"odi","vnd.oasis.opendocument.presentation":"odp","vnd.oasis.opendocument.presentation-template":"otp","vnd.oasis.opendocument.spreadsheet":"ods","vnd.oasis.opendocument.spreadsheet-template":"ots","vnd.oasis.opendocument.text":"odt","vnd.oasis.opendocument.text-master":"odm","vnd.oasis.opendocument.text-template":"ott","vnd.oasis.opendocument.text-web":"oth","vnd.openxmlformats-officedocument.spreadsheetml.sheet":"xlsx","vnd.openxmlformats-officedocument.spreadsheetml.template":"xltx","vnd.openxmlformats-officedocument.presentationml.presentation":"pptx","vnd.openxmlformats-officedocument.presentationml.slideshow":"ppsx","vnd.openxmlformats-officedocument.presentationml.template":"potx","vnd.openxmlformats-officedocument.wordprocessingml.document":"docx","vnd.openxmlformats-officedocument.wordprocessingml.template":"dotx","vnd.smaf":"mmf","vnd.stardivision.calc":"sdc","vnd.stardivision.chart":"sds","vnd.stardivision.draw":"sda","vnd.stardivision.impress":"sdd","vnd.stardivision.math":["sdf","smf"],"vnd.stardivision.writer":["sdw","vor"],"vnd.stardivision.writer-global":"sgl","vnd.sun.xml.calc":"sxc","vnd.sun.xml.calc.template":"stc","vnd.sun.xml.draw":"sxd","vnd.sun.xml.draw.template":"std","vnd.sun.xml.impress":"sxi","vnd.sun.xml.impress.template":"sti","vnd.sun.xml.math":"sxm","vnd.sun.xml.writer":"sxw","vnd.sun.xml.writer.global":"sxg","vnd.sun.xml.writer.template":"stw","vnd.symbian.install":["sis","sisx"],"vnd.visio":["vsd","vst","vss","vsw"],"vnd.wap.wbxml":"wbxml","vnd.wap.wmlc":"wmlc","vnd.wap.wmlscriptc":"wmlsc","vnd.wordperfect":"wpd","vnd.wordperfect5.1":"wp5","x-123":"wk","x-7z-compressed":"7z","x-abiword":"abw","x-apple-diskimage":"dmg","x-bcpio":"bcpio","x-bittorrent":"torrent","x-cbr":["cbr","cba","cbt","cb7"],"x-cbz":"cbz","x-cdf":["cdf","cda"],"x-cdlink":"vcd","x-chess-pgn":"pgn","x-cpio":"cpio","x-csh":"csh","x-debian-package":["deb","udeb"],"x-director":["dcr","dir","dxr","cst","cct","cxt","w3d","fgd","swa"],"x-dms":"dms","x-doom":"wad","x-dvi":"dvi","x-httpd-eruby":"rhtml","x-font":"pcf.Z","x-freemind":"mm","x-gnumeric":"gnumeric","x-go-sgf":"sgf","x-graphing-calculator":"gcf","x-gtar":["gtar","taz"],"x-hdf":"hdf","x-httpd-php":["phtml","pht","php"],"x-httpd-php-source":"phps","x-httpd-php3":"php3","x-httpd-php3-preprocessed":"php3p","x-httpd-php4":"php4","x-httpd-php5":"php5","x-ica":"ica","x-info":"info","x-internet-signup":["ins","isp"],"x-iphone":"iii","x-iso9660-image":"iso","x-java-jnlp-file":"jnlp","x-jmol":"jmz","x-killustrator":"kil","x-koan":["skp","skd","skt","skm"],"x-kpresenter":["kpr","kpt"],"x-kword":["kwd","kwt"],"x-latex":"latex","x-lha":"lha","x-lyx":"lyx","x-lzh":"lzh","x-lzx":"lzx","x-maker":["frm","maker","frame","fm","fb","book","fbdoc"],"x-ms-wmd":"wmd","x-ms-wmz":"wmz","x-msdos-program":["com","exe","bat","dll"],"x-msi":"msi","x-netcdf":["nc","cdf"],"x-ns-proxy-autoconfig":["pac","dat"],"x-nwc":"nwc","x-object":"o","x-oz-application":"oza","x-pkcs7-certreqresp":"p7r","x-python-code":["pyc","pyo"],"x-qgis":["qgs","shp","shx"],"x-quicktimeplayer":"qtl","x-redhat-package-manager":"rpm","x-ruby":"rb","x-sh":"sh","x-shar":"shar","x-shockwave-flash":["swf","swfl"],"x-silverlight":"scr","x-stuffit":"sit","x-sv4cpio":"sv4cpio","x-sv4crc":"sv4crc","x-tar":"tar","x-tcl":"tcl","x-tex-gf":"gf","x-tex-pk":"pk","x-texinfo":["texinfo","texi"],"x-trash":["~","%","bak","old","sik"],"x-troff":["t","tr","roff"],"x-troff-man":"man","x-troff-me":"me","x-troff-ms":"ms","x-ustar":"ustar","x-wais-source":"src","x-wingz":"wz","x-x509-ca-cert":["crt","der","cer"],"x-xcf":"xcf","x-xfig":"fig","x-xpinstall":"xpi",applixware:"aw","atomsvc+xml":"atomsvc","ccxml+xml":"ccxml","cdmi-capability":"cdmia","cdmi-container":"cdmic","cdmi-domain":"cdmid","cdmi-object":"cdmio","cdmi-queue":"cdmiq","docbook+xml":"dbk","dssc+der":"dssc","dssc+xml":"xdssc","emma+xml":"emma","epub+zip":"epub",exi:"exi","font-tdpfr":"pfr","gml+xml":"gml","gpx+xml":"gpx",gxf:"gxf",hyperstudio:"stk","inkml+xml":["ink","inkml"],ipfix:"ipfix",json:"json","jsonml+json":"jsonml","lost+xml":"lostxml","mads+xml":"mads",marc:"mrc","marcxml+xml":"mrcx","mathml+xml":"mathml",mbox:"mbox","mediaservercontrol+xml":"mscml","metalink+xml":"metalink","metalink4+xml":"meta4","mets+xml":"mets","mods+xml":"mods",mp21:["m21","mp21"],mp4:"mp4s","oebps-package+xml":"opf","omdoc+xml":"omdoc",onenote:["onetoc","onetoc2","onetmp","onepkg"],oxps:"oxps","patch-ops-error+xml":"xer","pgp-encrypted":"pgp",pkcs10:"p10","pkcs7-mime":["p7m","p7c"],"pkcs7-signature":"p7s",pkcs8:"p8","pkix-attr-cert":"ac","pkix-crl":"crl","pkix-pkipath":"pkipath",pkixcmp:"pki","pls+xml":"pls","prs.cww":"cww","pskc+xml":"pskcxml","reginfo+xml":"rif","relax-ng-compact-syntax":"rnc","resource-lists+xml":"rl","resource-lists-diff+xml":"rld","rls-services+xml":"rs","rpki-ghostbusters":"gbr","rpki-manifest":"mft","rpki-roa":"roa","rsd+xml":"rsd","sbml+xml":"sbml","scvp-cv-request":"scq","scvp-cv-response":"scs","scvp-vp-request":"spq","scvp-vp-response":"spp",sdp:"sdp","set-payment-initiation":"setpay","set-registration-initiation":"setreg","shf+xml":"shf","sparql-query":"rq","sparql-results+xml":"srx",srgs:"gram","srgs+xml":"grxml","sru+xml":"sru","ssdl+xml":"ssdl","ssml+xml":"ssml","tei+xml":["tei","teicorpus"],"thraud+xml":"tfi","timestamped-data":"tsd","vnd.3gpp.pic-bw-large":"plb","vnd.3gpp.pic-bw-small":"psb","vnd.3gpp.pic-bw-var":"pvb","vnd.3gpp2.tcap":"tcap","vnd.3m.post-it-notes":"pwn","vnd.accpac.simply.aso":"aso","vnd.accpac.simply.imp":"imp","vnd.acucobol":"acu","vnd.acucorp":["atc","acutc"],"vnd.adobe.air-application-installer-package+zip":"air","vnd.adobe.formscentral.fcdt":"fcdt","vnd.adobe.fxp":["fxp","fxpl"],"vnd.adobe.xdp+xml":"xdp","vnd.adobe.xfdf":"xfdf","vnd.ahead.space":"ahead","vnd.airzip.filesecure.azf":"azf","vnd.airzip.filesecure.azs":"azs","vnd.amazon.ebook":"azw","vnd.americandynamics.acc":"acc","vnd.amiga.ami":"ami","vnd.anser-web-certificate-issue-initiation":"cii","vnd.anser-web-funds-transfer-initiation":"fti","vnd.antix.game-component":"atx","vnd.apple.installer+xml":"mpkg","vnd.apple.mpegurl":"m3u8","vnd.aristanetworks.swi":"swi","vnd.astraea-software.iota":"iota","vnd.audiograph":"aep","vnd.blueice.multipass":"mpm","vnd.bmi":"bmi","vnd.businessobjects":"rep","vnd.chemdraw+xml":"cdxml","vnd.chipnuts.karaoke-mmd":"mmd","vnd.claymore":"cla","vnd.cloanto.rp9":"rp9","vnd.clonk.c4group":["c4g","c4d","c4f","c4p","c4u"],"vnd.cluetrust.cartomobile-config":"c11amc","vnd.cluetrust.cartomobile-config-pkg":"c11amz","vnd.commonspace":"csp","vnd.contact.cmsg":"cdbcmsg","vnd.cosmocaller":"cmc","vnd.crick.clicker":"clkx","vnd.crick.clicker.keyboard":"clkk","vnd.crick.clicker.palette":"clkp","vnd.crick.clicker.template":"clkt","vnd.crick.clicker.wordbank":"clkw","vnd.criticaltools.wbs+xml":"wbs","vnd.ctc-posml":"pml","vnd.cups-ppd":"ppd","vnd.curl.car":"car","vnd.curl.pcurl":"pcurl","vnd.dart":"dart","vnd.data-vision.rdz":"rdz","vnd.dece.data":["uvf","uvvf","uvd","uvvd"],"vnd.dece.ttml+xml":["uvt","uvvt"],"vnd.dece.unspecified":["uvx","uvvx"],"vnd.dece.zip":["uvz","uvvz"],"vnd.denovo.fcselayout-link":"fe_launch","vnd.dna":"dna","vnd.dolby.mlp":"mlp","vnd.dpgraph":"dpg","vnd.dreamfactory":"dfac","vnd.ds-keypoint":"kpxx","vnd.dvb.ait":"ait","vnd.dvb.service":"svc","vnd.dynageo":"geo","vnd.ecowin.chart":"mag","vnd.enliven":"nml","vnd.epson.esf":"esf","vnd.epson.msf":"msf","vnd.epson.quickanime":"qam","vnd.epson.salt":"slt","vnd.epson.ssf":"ssf","vnd.eszigno3+xml":["es3","et3"],"vnd.ezpix-album":"ez2","vnd.ezpix-package":"ez3","vnd.fdf":"fdf","vnd.fdsn.mseed":"mseed","vnd.fdsn.seed":["seed","dataless"],"vnd.flographit":"gph","vnd.fluxtime.clip":"ftc","vnd.framemaker":["fm","frame","maker","book"],"vnd.frogans.fnc":"fnc","vnd.frogans.ltf":"ltf","vnd.fsc.weblaunch":"fsc","vnd.fujitsu.oasys":"oas","vnd.fujitsu.oasys2":"oa2","vnd.fujitsu.oasys3":"oa3","vnd.fujitsu.oasysgp":"fg5","vnd.fujitsu.oasysprs":"bh2","vnd.fujixerox.ddd":"ddd","vnd.fujixerox.docuworks":"xdw","vnd.fujixerox.docuworks.binder":"xbd","vnd.fuzzysheet":"fzs","vnd.genomatix.tuxedo":"txd","vnd.geogebra.file":"ggb","vnd.geogebra.tool":"ggt","vnd.geometry-explorer":["gex","gre"],"vnd.geonext":"gxt","vnd.geoplan":"g2w","vnd.geospace":"g3w","vnd.gmx":"gmx","vnd.grafeq":["gqf","gqs"],"vnd.groove-account":"gac","vnd.groove-help":"ghf","vnd.groove-identity-message":"gim","vnd.groove-injector":"grv","vnd.groove-tool-message":"gtm","vnd.groove-tool-template":"tpl","vnd.groove-vcard":"vcg","vnd.hal+xml":"hal","vnd.handheld-entertainment+xml":"zmm","vnd.hbci":"hbci","vnd.hhe.lesson-player":"les","vnd.hp-hpgl":"hpgl","vnd.hp-hpid":"hpid","vnd.hp-hps":"hps","vnd.hp-jlyt":"jlt","vnd.hp-pcl":"pcl","vnd.hp-pclxl":"pclxl","vnd.hydrostatix.sof-data":"sfd-hdstx","vnd.ibm.minipay":"mpy","vnd.ibm.modcap":["afp","listafp","list3820"],"vnd.ibm.rights-management":"irm","vnd.ibm.secure-container":"sc","vnd.iccprofile":["icc","icm"],"vnd.igloader":"igl","vnd.immervision-ivp":"ivp","vnd.immervision-ivu":"ivu","vnd.insors.igm":"igm","vnd.intercon.formnet":["xpw","xpx"],"vnd.intergeo":"i2g","vnd.intu.qbo":"qbo","vnd.intu.qfx":"qfx","vnd.ipunplugged.rcprofile":"rcprofile","vnd.irepository.package+xml":"irp","vnd.is-xpr":"xpr","vnd.isac.fcs":"fcs","vnd.jam":"jam","vnd.jcp.javame.midlet-rms":"rms","vnd.jisp":"jisp","vnd.joost.joda-archive":"joda","vnd.kahootz":["ktz","ktr"],"vnd.kde.karbon":"karbon","vnd.kde.kchart":"chrt","vnd.kde.kformula":"kfo","vnd.kde.kivio":"flw","vnd.kde.kontour":"kon","vnd.kde.kpresenter":["kpr","kpt"],"vnd.kde.kspread":"ksp","vnd.kde.kword":["kwd","kwt"],"vnd.kenameaapp":"htke","vnd.kidspiration":"kia","vnd.kinar":["kne","knp"],"vnd.koan":["skp","skd","skt","skm"],"vnd.kodak-descriptor":"sse","vnd.las.las+xml":"lasxml","vnd.llamagraphics.life-balance.desktop":"lbd","vnd.llamagraphics.life-balance.exchange+xml":"lbe","vnd.lotus-1-2-3":"123","vnd.lotus-approach":"apr","vnd.lotus-freelance":"pre","vnd.lotus-notes":"nsf","vnd.lotus-organizer":"org","vnd.lotus-screencam":"scm","vnd.lotus-wordpro":"lwp","vnd.macports.portpkg":"portpkg","vnd.mcd":"mcd","vnd.medcalcdata":"mc1","vnd.mediastation.cdkey":"cdkey","vnd.mfer":"mwf","vnd.mfmp":"mfm","vnd.micrografx.flo":"flo","vnd.micrografx.igx":"igx","vnd.mif":"mif","vnd.mobius.daf":"daf","vnd.mobius.dis":"dis","vnd.mobius.mbk":"mbk","vnd.mobius.mqy":"mqy","vnd.mobius.msl":"msl","vnd.mobius.plc":"plc","vnd.mobius.txf":"txf","vnd.mophun.application":"mpn","vnd.mophun.certificate":"mpc","vnd.ms-artgalry":"cil","vnd.ms-cab-compressed":"cab","vnd.ms-excel.addin.macroenabled.12":"xlam","vnd.ms-excel.sheet.binary.macroenabled.12":"xlsb","vnd.ms-excel.sheet.macroenabled.12":"xlsm","vnd.ms-excel.template.macroenabled.12":"xltm","vnd.ms-fontobject":"eot","vnd.ms-htmlhelp":"chm","vnd.ms-ims":"ims","vnd.ms-lrm":"lrm","vnd.ms-officetheme":"thmx","vnd.ms-powerpoint.addin.macroenabled.12":"ppam","vnd.ms-powerpoint.presentation.macroenabled.12":"pptm","vnd.ms-powerpoint.slide.macroenabled.12":"sldm","vnd.ms-powerpoint.slideshow.macroenabled.12":"ppsm","vnd.ms-powerpoint.template.macroenabled.12":"potm","vnd.ms-project":["mpp","mpt"],"vnd.ms-word.document.macroenabled.12":"docm","vnd.ms-word.template.macroenabled.12":"dotm","vnd.ms-works":["wps","wks","wcm","wdb"],"vnd.ms-wpl":"wpl","vnd.ms-xpsdocument":"xps","vnd.mseq":"mseq","vnd.musician":"mus","vnd.muvee.style":"msty","vnd.mynfc":"taglet","vnd.neurolanguage.nlu":"nlu","vnd.nitf":["ntf","nitf"],"vnd.noblenet-directory":"nnd","vnd.noblenet-sealer":"nns","vnd.noblenet-web":"nnw","vnd.nokia.n-gage.data":"ngdat","vnd.nokia.n-gage.symbian.install":"n-gage","vnd.nokia.radio-preset":"rpst","vnd.nokia.radio-presets":"rpss","vnd.novadigm.edm":"edm","vnd.novadigm.edx":"edx","vnd.novadigm.ext":"ext","vnd.oasis.opendocument.chart-template":"otc","vnd.oasis.opendocument.formula-template":"odft","vnd.oasis.opendocument.image-template":"oti","vnd.olpc-sugar":"xo","vnd.oma.dd2+xml":"dd2","vnd.openofficeorg.extension":"oxt","vnd.openxmlformats-officedocument.presentationml.slide":"sldx","vnd.osgeo.mapguide.package":"mgp","vnd.osgi.dp":"dp","vnd.osgi.subsystem":"esa","vnd.palm":["pdb","pqa","oprc"],"vnd.pawaafile":"paw","vnd.pg.format":"str","vnd.pg.osasli":"ei6","vnd.picsel":"efif","vnd.pmi.widget":"wg","vnd.pocketlearn":"plf","vnd.powerbuilder6":"pbd","vnd.previewsystems.box":"box","vnd.proteus.magazine":"mgz","vnd.publishare-delta-tree":"qps","vnd.pvi.ptid1":"ptid","vnd.quark.quarkxpress":["qxd","qxt","qwd","qwt","qxl","qxb"],"vnd.realvnc.bed":"bed","vnd.recordare.musicxml":"mxl","vnd.recordare.musicxml+xml":"musicxml","vnd.rig.cryptonote":"cryptonote","vnd.rn-realmedia":"rm","vnd.rn-realmedia-vbr":"rmvb","vnd.route66.link66+xml":"link66","vnd.sailingtracker.track":"st","vnd.seemail":"see","vnd.sema":"sema","vnd.semd":"semd","vnd.semf":"semf","vnd.shana.informed.formdata":"ifm","vnd.shana.informed.formtemplate":"itp","vnd.shana.informed.interchange":"iif","vnd.shana.informed.package":"ipk","vnd.simtech-mindmapper":["twd","twds"],"vnd.smart.teacher":"teacher","vnd.solent.sdkm+xml":["sdkm","sdkd"],"vnd.spotfire.dxp":"dxp","vnd.spotfire.sfs":"sfs","vnd.stepmania.package":"smzip","vnd.stepmania.stepchart":"sm","vnd.sus-calendar":["sus","susp"],"vnd.svd":"svd","vnd.syncml+xml":"xsm","vnd.syncml.dm+wbxml":"bdm","vnd.syncml.dm+xml":"xdm","vnd.tao.intent-module-archive":"tao","vnd.tcpdump.pcap":["pcap","cap","dmp"],"vnd.tmobile-livetv":"tmo","vnd.trid.tpt":"tpt","vnd.triscape.mxs":"mxs","vnd.trueapp":"tra","vnd.ufdl":["ufd","ufdl"],"vnd.uiq.theme":"utz","vnd.umajin":"umj","vnd.unity":"unityweb","vnd.uoml+xml":"uoml","vnd.vcx":"vcx","vnd.visionary":"vis","vnd.vsf":"vsf","vnd.webturbo":"wtb","vnd.wolfram.player":"nbp","vnd.wqd":"wqd","vnd.wt.stf":"stf","vnd.xara":"xar","vnd.xfdl":"xfdl","vnd.yamaha.hv-dic":"hvd","vnd.yamaha.hv-script":"hvs","vnd.yamaha.hv-voice":"hvp","vnd.yamaha.openscoreformat":"osf","vnd.yamaha.openscoreformat.osfpvg+xml":"osfpvg","vnd.yamaha.smaf-audio":"saf","vnd.yamaha.smaf-phrase":"spf","vnd.yellowriver-custom-menu":"cmp","vnd.zul":["zir","zirz"],"vnd.zzazz.deck+xml":"zaz","voicexml+xml":"vxml",widget:"wgt",winhlp:"hlp","wsdl+xml":"wsdl","wspolicy+xml":"wspolicy","x-ace-compressed":"ace","x-authorware-bin":["aab","x32","u32","vox"],"x-authorware-map":"aam","x-authorware-seg":"aas","x-blorb":["blb","blorb"],"x-bzip":"bz","x-bzip2":["bz2","boz"],"x-cfs-compressed":"cfs","x-chat":"chat","x-conference":"nsc","x-dgc-compressed":"dgc","x-dtbncx+xml":"ncx","x-dtbook+xml":"dtb","x-dtbresource+xml":"res","x-eva":"eva","x-font-bdf":"bdf","x-font-ghostscript":"gsf","x-font-linux-psf":"psf","x-font-otf":"otf","x-font-pcf":"pcf","x-font-snf":"snf","x-font-ttf":["ttf","ttc"],"x-font-type1":["pfa","pfb","pfm","afm"],"x-font-woff":"woff","x-freearc":"arc","x-gca-compressed":"gca","x-glulx":"ulx","x-gramps-xml":"gramps","x-install-instructions":"install","x-lzh-compressed":["lzh","lha"],"x-mie":"mie","x-mobipocket-ebook":["prc","mobi"],"x-ms-application":"application","x-ms-shortcut":"lnk","x-ms-xbap":"xbap","x-msbinder":"obd","x-mscardfile":"crd","x-msclip":"clp","x-msdownload":["exe","dll","com","bat","msi"],"x-msmediaview":["mvb","m13","m14"],"x-msmetafile":["wmf","wmz","emf","emz"],"x-msmoney":"mny","x-mspublisher":"pub","x-msschedule":"scd","x-msterminal":"trm","x-mswrite":"wri","x-nzb":"nzb","x-pkcs12":["p12","pfx"],"x-pkcs7-certificates":["p7b","spc"],"x-research-info-systems":"ris","x-silverlight-app":"xap","x-sql":"sql","x-stuffitx":"sitx","x-subrip":"srt","x-t3vm-image":"t3","x-tads":"gam","x-tex":"tex","x-tex-tfm":"tfm","x-tgif":"obj","x-xliff+xml":"xlf","x-xz":"xz","x-zmachine":["z1","z2","z3","z4","z5","z6","z7","z8"],"xaml+xml":"xaml","xcap-diff+xml":"xdf","xenc+xml":"xenc","xml-dtd":"dtd","xop+xml":"xop","xproc+xml":"xpl","xslt+xml":"xslt","xv+xml":["mxml","xhvml","xvml","xvm"],yang:"yang","yin+xml":"yin",envoy:"evy",fractals:"fif","internet-property-stream":"acx",olescript:"axs","vnd.ms-outlook":"msg","vnd.ms-pkicertstore":"sst","x-compress":"z","x-compressed":"tgz","x-gzip":"gz","x-perfmon":["pma","pmc","pml","pmr","pmw"],"x-pkcs7-mime":["p7c","p7m"],"ynd.ms-pkipko":"pko"},audio:{amr:"amr","amr-wb":"awb",annodex:"axa",basic:["au","snd"],flac:"flac",midi:["mid","midi","kar","rmi"],mpeg:["mpga","mpega","mp2","mp3","m4a","mp2a","m2a","m3a"],mpegurl:"m3u",ogg:["oga","ogg","spx"],"prs.sid":"sid","x-aiff":["aif","aiff","aifc"],"x-gsm":"gsm","x-ms-wma":"wma","x-ms-wax":"wax","x-pn-realaudio":"ram","x-realaudio":"ra","x-sd2":"sd2","x-wav":"wav",adpcm:"adp",mp4:"mp4a",s3m:"s3m",silk:"sil","vnd.dece.audio":["uva","uvva"],"vnd.digital-winds":"eol","vnd.dra":"dra","vnd.dts":"dts","vnd.dts.hd":"dtshd","vnd.lucent.voice":"lvp","vnd.ms-playready.media.pya":"pya","vnd.nuera.ecelp4800":"ecelp4800","vnd.nuera.ecelp7470":"ecelp7470","vnd.nuera.ecelp9600":"ecelp9600","vnd.rip":"rip",webm:"weba","x-aac":"aac","x-caf":"caf","x-matroska":"mka","x-pn-realaudio-plugin":"rmp",xm:"xm",mid:["mid","rmi"]},chemical:{"x-alchemy":"alc","x-cache":["cac","cache"],"x-cache-csf":"csf","x-cactvs-binary":["cbin","cascii","ctab"],"x-cdx":"cdx","x-chem3d":"c3d","x-cif":"cif","x-cmdf":"cmdf","x-cml":"cml","x-compass":"cpa","x-crossfire":"bsd","x-csml":["csml","csm"],"x-ctx":"ctx","x-cxf":["cxf","cef"],"x-embl-dl-nucleotide":["emb","embl"],"x-gamess-input":["inp","gam","gamin"],"x-gaussian-checkpoint":["fch","fchk"],"x-gaussian-cube":"cub","x-gaussian-input":["gau","gjc","gjf"],"x-gaussian-log":"gal","x-gcg8-sequence":"gcg","x-genbank":"gen","x-hin":"hin","x-isostar":["istr","ist"],"x-jcamp-dx":["jdx","dx"],"x-kinemage":"kin","x-macmolecule":"mcm","x-macromodel-input":["mmd","mmod"],"x-mdl-molfile":"mol","x-mdl-rdfile":"rd","x-mdl-rxnfile":"rxn","x-mdl-sdfile":["sd","sdf"],"x-mdl-tgf":"tgf","x-mmcif":"mcif","x-mol2":"mol2","x-molconn-Z":"b","x-mopac-graph":"gpt","x-mopac-input":["mop","mopcrt","mpc","zmt"],"x-mopac-out":"moo","x-ncbi-asn1":"asn","x-ncbi-asn1-ascii":["prt","ent"],"x-ncbi-asn1-binary":["val","aso"],"x-pdb":["pdb","ent"],"x-rosdal":"ros","x-swissprot":"sw","x-vamas-iso14976":"vms","x-vmd":"vmd","x-xtel":"xtel","x-xyz":"xyz"},image:{gif:"gif",ief:"ief",jpeg:["jpeg","jpg","jpe"],pcx:"pcx",png:"png","svg+xml":["svg","svgz"],tiff:["tiff","tif"],"vnd.djvu":["djvu","djv"],"vnd.wap.wbmp":"wbmp","x-canon-cr2":"cr2","x-canon-crw":"crw","x-cmu-raster":"ras","x-coreldraw":"cdr","x-coreldrawpattern":"pat","x-coreldrawtemplate":"cdt","x-corelphotopaint":"cpt","x-epson-erf":"erf","x-icon":"ico","x-jg":"art","x-jng":"jng","x-nikon-nef":"nef","x-olympus-orf":"orf","x-photoshop":"psd","x-portable-anymap":"pnm","x-portable-bitmap":"pbm","x-portable-graymap":"pgm","x-portable-pixmap":"ppm","x-rgb":"rgb","x-xbitmap":"xbm","x-xpixmap":"xpm","x-xwindowdump":"xwd",bmp:"bmp",cgm:"cgm",g3fax:"g3",ktx:"ktx","prs.btif":"btif",sgi:"sgi","vnd.dece.graphic":["uvi","uvvi","uvg","uvvg"],"vnd.dwg":"dwg","vnd.dxf":"dxf","vnd.fastbidsheet":"fbs","vnd.fpx":"fpx","vnd.fst":"fst","vnd.fujixerox.edmics-mmr":"mmr","vnd.fujixerox.edmics-rlc":"rlc","vnd.ms-modi":"mdi","vnd.ms-photo":"wdp","vnd.net-fpx":"npx","vnd.xiff":"xif",webp:"webp","x-3ds":"3ds","x-cmx":"cmx","x-freehand":["fh","fhc","fh4","fh5","fh7"],"x-pict":["pic","pct"],"x-tga":"tga","cis-cod":"cod",pipeg:"jfif"},message:{rfc822:["eml","mime","mht","mhtml","nws"]},model:{iges:["igs","iges"],mesh:["msh","mesh","silo"],vrml:["wrl","vrml"],"x3d+vrml":["x3dv","x3dvz"],"x3d+xml":["x3d","x3dz"],"x3d+binary":["x3db","x3dbz"],"vnd.collada+xml":"dae","vnd.dwf":"dwf","vnd.gdl":"gdl","vnd.gtw":"gtw","vnd.mts":"mts","vnd.vtu":"vtu"},text:{"cache-manifest":["manifest","appcache"],calendar:["ics","icz","ifb"],css:"css",csv:"csv",h323:"323",html:["html","htm","shtml","stm"],iuls:"uls",mathml:"mml",plain:["txt","text","brf","conf","def","list","log","in","bas"],richtext:"rtx",scriptlet:["sct","wsc"],texmacs:["tm","ts"],"tab-separated-values":"tsv","vnd.sun.j2me.app-descriptor":"jad","vnd.wap.wml":"wml","vnd.wap.wmlscript":"wmls","x-bibtex":"bib","x-boo":"boo","x-c++hdr":["h++","hpp","hxx","hh"],"x-c++src":["c++","cpp","cxx","cc"],"x-component":"htc","x-dsrc":"d","x-diff":["diff","patch"],"x-haskell":"hs","x-java":"java","x-literate-haskell":"lhs","x-moc":"moc","x-pascal":["p","pas"],"x-pcs-gcd":"gcd","x-perl":["pl","pm"],"x-python":"py","x-scala":"scala","x-setext":"etx","x-tcl":["tcl","tk"],"x-tex":["tex","ltx","sty","cls"],"x-vcalendar":"vcs","x-vcard":"vcf",n3:"n3","prs.lines.tag":"dsc",sgml:["sgml","sgm"],troff:["t","tr","roff","man","me","ms"],turtle:"ttl","uri-list":["uri","uris","urls"],vcard:"vcard","vnd.curl":"curl","vnd.curl.dcurl":"dcurl","vnd.curl.scurl":"scurl","vnd.curl.mcurl":"mcurl","vnd.dvb.subtitle":"sub","vnd.fly":"fly","vnd.fmi.flexstor":"flx","vnd.graphviz":"gv","vnd.in3d.3dml":"3dml","vnd.in3d.spot":"spot","x-asm":["s","asm"],"x-c":["c","cc","cxx","cpp","h","hh","dic"],"x-fortran":["f","for","f77","f90"],"x-opml":"opml","x-nfo":"nfo","x-sfv":"sfv","x-uuencode":"uu",webviewhtml:"htt"},video:{"3gpp":"3gp",annodex:"axv",dl:"dl",dv:["dif","dv"],fli:"fli",gl:"gl",mpeg:["mpeg","mpg","mpe","m1v","m2v","mp2","mpa","mpv2"],mp4:["mp4","mp4v","mpg4"],quicktime:["qt","mov"],ogg:"ogv","vnd.mpegurl":["mxu","m4u"],"x-flv":"flv","x-la-asf":["lsf","lsx"],"x-mng":"mng","x-ms-asf":["asf","asx","asr"],"x-ms-wm":"wm","x-ms-wmv":"wmv","x-ms-wmx":"wmx","x-ms-wvx":"wvx","x-msvideo":"avi","x-sgi-movie":"movie","x-matroska":["mpv","mkv","mk3d","mks"],"3gpp2":"3g2",h261:"h261",h263:"h263",h264:"h264",jpeg:"jpgv",jpm:["jpm","jpgm"],mj2:["mj2","mjp2"],"vnd.dece.hd":["uvh","uvvh"],"vnd.dece.mobile":["uvm","uvvm"],"vnd.dece.pd":["uvp","uvvp"],"vnd.dece.sd":["uvs","uvvs"],"vnd.dece.video":["uvv","uvvv"],"vnd.dvb.file":"dvb","vnd.fvt":"fvt","vnd.ms-playready.media.pyv":"pyv","vnd.uvvu.mp4":["uvu","uvvu"],"vnd.vivo":"viv",webm:"webm","x-f4v":"f4v","x-m4v":"m4v","x-ms-vob":"vob","x-smv":"smv"},"x-conference":{"x-cooltalk":"ice"},"x-world":{"x-vrml":["vrm","vrml","wrl","flr","wrz","xaf","xof"]}};var a=(function(){var f,c,g,d,e={};for(f in b){if(b.hasOwnProperty(f)){for(c in b[f]){if(b[f].hasOwnProperty(c)){g=b[f][c];if(typeof g=="string"){e[g]=f+"/"+c}else{for(d=0;d<g.length;d++){e[g[d]]=f+"/"+c}}}}}}return e})();zip.getMimeType=function(d){var c="application/octet-stream";return d&&a[d.split(".").pop().toLowerCase()]||c}})();var global=this;var isWebApp=false;var WebAppMenuEnabled=false;function LOCAL(a){return NSBundle.mainBundle().localizedStringForKey(a,null,null)}function isMobileDevice(){if(isWebApp){var a=window.navigator.userAgent.toLowerCase();return a.indexOf("iphone")!=-1||a.indexOf("ipad")!=-1||a.indexOf("android")!=-1}return false}Array.prototype.remove=function(b){var a=this.indexOf(b);if(a!=-1){this.splice(a,1)}};function pathSeparator(){return isWebApp?"/":(process.platform=="win32"?"\\":"/")}function systemLanguage(){var c=navigator.language;if(!c){c=navigator.userLanguage}if(!c){c=navigator.systemLanguage}if(c){var b=c.toLowerCase();if(b.indexOf("zh")!=-1||b.indexOf("cn")!=-1){return"zh"}else{var a=b.indexOf("-");if(a!=-1){return b.substring(0,a)}else{return b}}}return"zh"}function defineClass(a){var d=a.init;if(!d){d=function(){}}var c=a.superClass;if(c){d.prototype=new c();d.prototype.constructor=d}var e=a.statics;if(e){for(var b in e){d[b]=e[b]}}for(var b in a){d.prototype[b]=a[b]}return d}function UIApplicationMain(a,c){if(a==null){a=UIApplication}var d=new a();var b=new c();d.setDelegate(b);$(document).ready(function(){d._applicationDidFinishLaunching()})}NSObject=defineClass({superClass:Object});CGPoint=defineClass({init:function(a,b){if(arguments.length==1){this.x=arguments[0].x;this.y=arguments[0].y}else{this.x=(a!=null)?a:0;this.y=(a!=null)?b:0}},isEqual:function(a){return this.x==a.x&&this.y==a.y},initWithCoder:function(a){this.x=a.decodeObjectForKey("x");this.y=a.decodeObjectForKey("y")},encodeWithCoder:function(a){a.encodeObjectForKey(this.x,"x");a.encodeObjectForKey(this.y,"y")}});CGSize=defineClass({init:function(b,a){if(arguments.length==1){this.width=arguments[0].width;this.height=arguments[0].height}else{this.width=(b!=null)?b:0;this.height=(a!=null)?a:0}},isEqual:function(a){return this.width==a.width&&this.height==a.height},initWithCoder:function(a){this.width=a.decodeObjectForKey("width");this.height=a.decodeObjectForKey("height")},encodeWithCoder:function(a){a.encodeObjectForKey(this.width,"width");a.encodeObjectForKey(this.height,"height")}});CGRect=defineClass({init:function(b,d,c,a){if(arguments.length==1){this.origin=new CGPoint(arguments[0].origin);this.size=new CGSize(arguments[0].size)}else{this.origin=new CGPoint(b,d);this.size=new CGSize(c,a)}},isEqual:function(a){return this.origin.isEqual(a.origin)&&this.size.isEqual(a.size)},initWithCoder:function(a){this.origin=a.decodeObjectForKey("origin");this.size=a.decodeObjectForKey("size")},encodeWithCoder:function(a){a.encodeObjectForKey(this.origin,"origin");a.encodeObjectForKey(this.size,"size")},toString:function(){return"["+this.origin.x+","+this.origin.y+","+this.size.width+","+this.size.height+"]"}});NSRange=defineClass({init:function(a,b){this.location=a?a:0;this.length=b?b:0},initWithCoder:function(a){this.location=a.decodeObjectForKey("location");this.length=a.decodeObjectForKey("length")},encodeWithCoder:function(a){a.encodeObjectForKey(this.location,"location");a.encodeObjectForKey(this.length,"length")}});UIEdgeInsets=defineClass({init:function(d,c,a,b){if(arguments.length==1){this.top=arguments[0].top;this.left=arguments[0].left;this.bottom=arguments[0].bottom;this.right=arguments[0].right}else{this.top=d!=null?d:0;this.left=c!=null?c:0;this.bottom=a!=null?a:0;this.right=b!=null?b:0}}});UIColor=defineClass({statics:{systemThemeColor:"rgb(0,122,255)",lightGrayColor:"rgb(170,170,170)"},init:function(f,e,c,d){this.red=f!=null?f:0;this.green=e!=null?e:0;this.blue=c!=null?c:0;this.alpha=d!=null?d:1},rgba:function(){return"rgba("+this.red*255+","+this.green*255+","+this.blue*255+","+this.alpha+")"}});UIImage=defineClass({init:function(c,b,a){this.src=c;this.width=b?b:0;this.height=a?a:0},size:function(){return new CGSize(this.width,this.height)}});UIApplication=defineClass({statics:{sharedApplication:function(){return UIApplication.sInstance}},init:function(){UIApplication.sInstance=this;this.mWindows=[]},setDelegate:function(a){this.mDelegate=a},delegate:function(){return this.mDelegate},_applicationDidFinishLaunching:function(){var a=0;if(WebAppMenuEnabled){var c=WebAppMenuManager.defaultManager().menuBar();c.setFrame(new CGRect(0,0,$(window).width(),25));c.setAutoresizingMask(UIView.Autoresizing.FlexibleWidth);$("body").append(c.layer());a=c.height()}var b=this;window.onresize=function(){if(WebAppMenuEnabled){var d=WebAppMenuManager.defaultManager().menuBar();d.setFrame(new CGRect(0,0,$(window).width(),a))}b.mWindows.forEach(function(f){f.setFrame(UIScreen.mainScreen().bounds());var e=f.rootViewController();if(e){e.onWindowResize()}})};if(this.mDelegate.applicationDidFinishLaunching){this.mDelegate.applicationDidFinishLaunching(this)}},_addWindow:function(a){this.mWindows.push(a);$("body").width(UIScreen.mainScreen().bounds().size.width);$("body").append(a.layer())},_removeWindow:function(a){this.mWindows.remove(a);a.layer().detach()},_setKeyWindow:function(a){this.mKeyWindow=a},keyWindow:function(){return this.mKeyWindow}});UIScreen=defineClass({statics:{mainScreen:function(){if(!UIScreen.sInstance){UIScreen.sInstance=new UIScreen()}return UIScreen.sInstance}},init:function(){this.mMinWidth=this.mMinHeight=0},setMinWidth:function(a){this.mMinWidth=a},setMinHeight:function(a){this.mMinHeight=a},bounds:function(){var a=WebAppMenuEnabled?WebAppMenuManager.defaultManager().menuBar().height():0;return new CGRect(0,a,$(window).width(),$(window).height()-a)},scale:function(){if(!this.mScale){var a=(window.devicePixelRatio/this.deviceZoom())||1;var b=$("<canvas/>")[0].getContext("2d");var c=b.webkitBackingStorePixelRatio||b.mozBackingStorePixelRatio||b.msBackingStorePixelRatio||b.oBackingStorePixelRatio||b.backingStorePixelRatio||1;var d=a/c;this.mScale=Math.ceil(d)}return this.mScale},deviceZoom:function(){if(window.outerWidth>0&&window.innerWidth>0){return window.outerWidth/window.innerWidth}return 1}});CGAffineTransform=defineClass({statics:{Translation:function(b,a){return new CGAffineTransform([1,0,b,0,1,a,0,0,1])},Scale:function(b,a){return new CGAffineTransform([b,0,0,0,a,0,0,0,1])},Rotation:function(a){return new CGAffineTransform([Math.cos(a),-Math.sin(a),0,Math.sin(a),Math.cos(a),0,0,0,1])}},init:function(a){if(a==null){this.mValues=[1,0,0,0,1,0,0,0,1]}else{if(a.constructor==CGAffineTransform){var b=a;this.mValues=b.values().slice()}else{this.mValues=a}}},values:function(){return this.mValues},translate:function(b,a){this.concat(CGAffineTransform.Translation(b,a))},scale:function(b,a){this.concat(CGAffineTransform.Scale(b,a))},rotate:function(a){this.concat(CGAffineTransform.Rotation(a))},concat:function(c){var a=this.values();var b=c.values();this.mValues=[a[0]*b[0]+a[1]*b[3]+a[2]*b[6],a[0]*b[1]+a[1]*b[4]+a[2]*b[7],a[0]*b[2]+a[1]*b[5]+a[2]*b[8],a[3]*b[0]+a[4]*b[3]+a[5]*b[6],a[3]*b[1]+a[4]*b[4]+a[5]*b[7],a[3]*b[2]+a[4]*b[5]+a[5]*b[8],a[6]*b[0]+a[7]*b[3]+a[8]*b[6],a[6]*b[1]+a[7]*b[4]+a[8]*b[7],a[6]*b[2]+a[7]*b[5]+a[8]*b[8]]},css3:function(){return"matrix("+this.mValues[0]+","+this.mValues[3]+","+this.mValues[1]+","+this.mValues[4]+","+this.mValues[2]+","+this.mValues[5]+")"}});UIView=defineClass({init:function(a){this.mLayer=this.layerClass();this.mLayer.css("position","absolute");this.mSubviews=[];this.mFrame=new CGRect();this.mBounds=new CGRect();this.mAlpha=1;this.mTransform=new CGAffineTransform();this.mUserInteractionEnabled=true;if(this.drawRect){this.mCanvas=$("<canvas/>");this.mCanvas.css("position","absolute");this.mLayer.append(this.mCanvas)}if(a){this.setFrame(a)}},layerClass:function(){return $("<div/>")},layer:function(){return this.mLayer},canvas:function(){return this.mCanvas},frame:function(){return new CGRect(this.mFrame)},setFrame:function(c){if(UIView.AnimationGroup){var b=new UIAnimation(this,"frame",this.mFrame,c);UIView.AnimationGroup.addAnimation(b);return}var d=this.mFrame;this.mFrame=new CGRect(c);this.mBounds.size=new CGSize(c.size);this.mLayer.css({left:c.origin.x,top:c.origin.y,width:c.size.width>0?c.size.width:"auto",height:c.size.height>0?c.size.height:"auto"});if(this.mCanvas){var a=UIScreen.mainScreen().scale();this.mCanvas.attr("width",c.size.width>0?c.size.width*a+"px":"auto");this.mCanvas.attr("height",c.size.height>0?c.size.height*a+"px":"auto");this.mCanvas.css("width",c.size.width>0?c.size.width+"px":"auto");this.mCanvas.css("height",c.size.height>0?c.size.height+"px":"auto")}if(d){this._autoresizeSubviews(c,d)}this.setNeedsLayout();this.setNeedsDisplay()},setPosition:function(a){this.setFrame(new CGRect(a.x,a.y,this.mFrame.size.width,this.mFrame.size.height))},setSize:function(a){this.setFrame(new CGRect(this.mFrame.origin.x,this.mFrame.origin.y,a.width,a.height))},bounds:function(){this.mBounds.origin.x=this.layer()[0].scrollLeft;this.mBounds.origin.y=this.layer()[0].scrollTop;return new CGRect(this.mBounds)},setBounds:function(a){if(UIView.AnimationGroup){var b=new UIAnimation(this,"bounds",this.mBounds,a);UIView.AnimationGroup.addAnimation(b);return}this.layer()[0].scrollLeft=a.origin.x;this.layer()[0].scrollTop=a.origin.y;a.origin.x=this.layer()[0].scrollLeft;a.origin.y=this.layer()[0].scrollTop;this.mBounds=new CGRect(a)},center:function(){return new CGPoint(this.mFrame.origin.x+this.mFrame.size.width/2,this.mFrame.origin.y+this.mFrame.size.height/2)},setCenter:function(a){this.setFrame(new CGRect(a.x-this.mFrame.size.width/2,a.y-this.mFrame.size.height/2,this.mFrame.size.width,this.mFrame.size.height))},size:function(){return new CGSize(this.mFrame.size)},width:function(){return this.mFrame.size.width},height:function(){return this.mFrame.size.height},left:function(){return this.mFrame.origin.x},top:function(){return this.mFrame.origin.y},right:function(){return this.mFrame.origin.x+this.mFrame.size.width},bottom:function(){return this.mFrame.origin.y+this.mFrame.size.height},setBackgroundColor:function(a){this.mBackgroundColor=a;if(a){if(typeof a=="string"){this.layer().css("background-color",a)}else{this.layer().css("background-color",a.rgba())}}else{this.layer().css("background-color","")}},backgroundColor:function(){return this.mBackgroundColor},addSubview:function(a){this.insertSubviewAtIndex(a,-1)},insertSubviewBelow:function(a,c){var b=this.mSubviews.indexOf(c);this.insertSubviewAtIndex(a,b)},insertSubviewAbove:function(a,c){var b=this.mSubviews.indexOf(c);this.insertSubviewAtIndex(a,b+1)},insertSubviewAtIndex:function(b,c){var f=b.superview();if(f){if(f==this){var a=f.subviews().indexOf(b);if(a<c){c-=1}}b.removeFromSuperview()}if(c<0||c>=this.mSubviews.length){this.mLayer.append(b.layer());this.mSubviews.push(b)}else{var e=this.mSubviews[c];e.layer().before(b.layer());this.mSubviews.splice(c,0,b)}b.mSuperview=this;b.setNeedsDisplay();var d=this.window();if(d){b.notifyMoveToWindow()}},notifyMoveToWindow:function(){if(this.mViewController){this.mViewController.viewDidAppear()}for(var a=0;a<this.mSubviews.length;a++){this.mSubviews[a].notifyMoveToWindow()}},removeFromSuperview:function(){if(this.mSuperview){var b=this.mSuperview;b.mSubviews.remove(this);this.layer().detach();var a=this.window();this.mSuperview=null;if(a){this.notifyDetachFromWindow()}}},notifyDetachFromWindow:function(){if(this.mViewController){this.mViewController.viewDidDisappear()}for(var a=0;a<this.mSubviews.length;a++){this.mSubviews[a].notifyDetachFromWindow()}},superview:function(){return this.mSuperview},subviews:function(){return this.mSubviews.slice()},viewWithTag:function(a){if(this.mTag==a){return this}var b=null;for(var c=0;c<this.mSubviews.length;c++){var d=this.mSubviews[c];b=d.viewWithTag(a);if(b!=null){break}}return b},setNeedsDisplay:function(){if(this.mCanvas){var a=this.mCanvas[0].getContext("2d");a.save();var b=UIScreen.mainScreen().scale();a.scale(b,b);a.clearRect(0,0,this.mFrame.size.width,this.mFrame.size.height);this.drawRect(a);a.restore()}},setHidden:function(a){this.mHidden=a;if(a){this.mLayer.css("visibility","hidden")}else{this.mLayer.css("visibility","visible")}},isHidden:function(){return this.mHidden},_setViewController:function(a){this.mViewController=a},sendSubviewToBack:function(a){if(this.mCanvas){this.mCanvas.after(a.layer())}else{this.mLayer.prepend(a.layer())}},bringSubviewToFront:function(a){this.mLayer.append(a.layer())},sizeThatFits:function(a){return this.frame().size},sizeToFit:function(){var a=this.frame();a.size=this.sizeThatFits(Number.MAX_VALUE,Number.MAX_VALUE);this.setFrame(a)},setNeedsLayout:function(){this.layoutSubviews()},layoutSubviews:function(){},setAutoresizingMask:function(a){this.mAutoresizingMask=a},autoresizingMask:function(){return this.mAutoresizingMask},_autoresizeSubviews:function(g,d){var l=d.size;var m=g.size;if(m.width!=l.width||m.height!=l.height){for(var f=0;f<this.mSubviews.length;f++){var j=this.mSubviews[f];var b=j.frame();var e=j.autoresizingMask();var c=m.width-l.width;var k=0;if((e&UIView.Autoresizing.FlexibleLeftMargin)==UIView.Autoresizing.FlexibleLeftMargin){k+=j.left()}if((e&UIView.Autoresizing.FlexibleWidth)==UIView.Autoresizing.FlexibleWidth){k+=j.width()}if((e&UIView.Autoresizing.FlexibleRightMargin)==UIView.Autoresizing.FlexibleRightMargin){k+=(l.width-j.right())}if((e&UIView.Autoresizing.FlexibleLeftMargin)==UIView.Autoresizing.FlexibleLeftMargin){if(k==0){b.origin.x+=c}else{b.origin.x+=c/k*j.left()}}if((e&UIView.Autoresizing.FlexibleWidth)==UIView.Autoresizing.FlexibleWidth){if(k==0){b.size.width+=c}else{b.size.width+=c/k*j.width()}}var a=m.height-l.height;var h=0;if((e&UIView.Autoresizing.FlexibleTopMargin)==UIView.Autoresizing.FlexibleTopMargin){h+=j.top()}if((e&UIView.Autoresizing.FlexibleHeight)==UIView.Autoresizing.FlexibleHeight){h+=j.height()}if((e&UIView.Autoresizing.FlexibleBottomMargin)==UIView.Autoresizing.FlexibleBottomMargin){h+=(l.height-j.bottom())}if((e&UIView.Autoresizing.FlexibleTopMargin)==UIView.Autoresizing.FlexibleTopMargin){if(h==0){b.origin.y+=a}else{b.origin.y+=a/h*j.top()}}if((e&UIView.Autoresizing.FlexibleHeight)==UIView.Autoresizing.FlexibleHeight){if(h==0){b.size.height+=a}else{b.size.height+=a/h*j.height()}}j.setFrame(b)}}},alpha:function(){return this.mAlpha},setAlpha:function(b){if(UIView.AnimationGroup){var a=new UIAnimation(this,"alpha",this.mAlpha,b);UIView.AnimationGroup.addAnimation(a);return}this.mAlpha=b;this.layer().css("opacity",b)},window:function(){var a=this.mSuperview;while(a!=null&&a.constructor!=UIWindow){a=a.superview()}return a},tag:function(){return this.mTag},setTag:function(a){this.mTag=a},convertRectFromView:function(d,c){var a=this.convertPointFromView(d.origin,c);var b=new CGRect(d);b.origin=a;return b},convertRectToView:function(d,c){var a=this.convertPointToView(d.origin,c);var b=new CGRect(d);b.origin=a;return b},convertPointToView:function(b,c){var a=(c!=null)?c:this.window();return a.convertPointFromView(b,this)},convertPointFromView:function(j,i){var g=new CGPoint(j);var c=new CGPoint();var f=(i!=null)?i:this.window();if(f==null){return g}do{var d=f.frame();c.x+=d.origin.x;c.y+=d.origin.y;if(f!=i){var b=f.bounds();c.x-=b.origin.x;c.y-=b.origin.y}f=f.superview()}while(f!=null);var k=new CGPoint();var h=this;do{var e=h.frame();k.x+=e.origin.x;k.y+=e.origin.y;if(h!=i){var a=h.bounds();k.x-=a.origin.x;k.y-=a.origin.y}h=h.superview()}while(h!=null);g.x+=c.x;g.y+=c.y;g.x-=k.x;g.y-=k.y;return g},transform:function(){return new CGAffineTransform(this.mTransform)},setTransform:function(a){if(UIView.AnimationGroup){var b=new UIAnimation(this,"transform",this.mTransform,a);UIView.AnimationGroup.addAnimation(b);return}this.mTransform=new CGAffineTransform(a);this.layer().css("transform",a.css3())},userData:function(){return this.mUserData},setUserData:function(a){this.mUserData=a},isUserInteractionEnabled:function(){return this.mUserInteractionEnabled},setUserInteractionEnabled:function(a){this.mUserInteractionEnabled=a},isFirstResponder:function(){return document.activeElement==this.mLayer[0]},becomeFirstResponder:function(){this.mLayer.focus()},resignFirstResponder:function(){this.mLayer.blur()},statics:{DarkMode:false,Autoresizing:{None:0,FlexibleLeftMargin:1<<0,FlexibleWidth:1<<1,FlexibleRightMargin:1<<2,FlexibleTopMargin:1<<3,FlexibleHeight:1<<4,FlexibleBottomMargin:1<<5,FlexibleSize:(1<<1)|(1<<4),FlexibleMargin:(1<<0)|(1<<2)|(1<<3)|(1<<5)},animate:function(c,b,a){UIView.AnimationGroup=new UIAnimationGroup(c,a);b();UIView.AnimationGroup.start();UIView.AnimationGroup=null}}});UIWindow=defineClass({superClass:UIView,init:function(a){UIView.call(this,a);if(!a){this.setFrame(UIScreen.mainScreen().bounds())}UIApplication.sharedApplication()._addWindow(this);this.setHidden(true)},makeKeyAndVisible:function(){UIApplication.sharedApplication()._setKeyWindow(this);this.setHidden(false)},setRootViewController:function(b){if(this.mRootViewController){this.mRootViewController.view().removeFromSuperview()}if(b){var a=b.view();a.setFrame(this.bounds());a.setAutoresizingMask(UIView.Autoresizing.FlexibleSize);this.addSubview(a)}this.mRootViewController=b},rootViewController:function(){return this.mRootViewController},recycle:function(){UIApplication.sharedApplication()._removeWindow(this)},window:function(){return this}});UILabel=defineClass({superClass:UIView,init:function(a){UIView.call(this,a);this.mNumberOfLines=1},layerClass:function(){var a=$("<div style='display: table'><span style='display: table-cell;vertical-align: middle;cursor: default;user-select:none'></span></div>");if(process.platform==="darwin"){$("span",this.layer()).css("font-family","PingFangSC-Regular")}else{if(process.platform=="win32"){$("span",this.layer()).css("font-family","Microsoft Yahei")}}return a},setText:function(a){$("span",this.layer()).text(a)},text:function(){return $("span",this.layer()).text()},setTextAlignment:function(a){this.layer().css("text-align",a)},setFont:function(a){this.layer().css("font",a)},setFontSize:function(a){this.layer().css("font-size",a)},font:function(){var a=this.layer().css("font");if(!a){a=this.layer().css("font-size");if(a){a=a+" normal"}}return a},setBold:function(a){if(a){this.layer().css("font-weight","bold")}else{this.layer().css("font-weight","normal")}},setTextColor:function(a){this.layer().css("color",a)},textColor:function(){return this.layer().css("color")},sizeThatFits:function(d){var c=this.font();var f=$("<span/>").text(this.text());if(c){f.css("font",this.font())}var b=this.layer().css("white-space");if(b){f.css("white-space",b)}$("body").append(f);var e=f.width();var a=f.height();if(this.mNumberOfLines!=1){if(e>d.width){var g=$("<div/>").text(this.text());if(c){g.css("font",this.font())}if(b){g.css("white-space",b)}g.width(d.width);$("body").append(g);e=g.width();a=g.height();g.remove()}}f.remove();return new CGSize(e+4,a+4)},setNumberOfLines:function(a){this.mNumberOfLines=a},lineHeight:function(){return this.layer().css("line-height")},setLineHeight:function(a){return this.layer().css("line-height",a)}});UIImageView=defineClass({superClass:UIView,init:function(a){UIView.call(this,a)},layerClass:function(){return $("<img crossOrigin=\"Anonymous\" style='user-select:none' draggable='false'/>")},setImage:function(a){if(typeof a=="string"){this.mImage=new UIImage(a);this.layer().attr("src",a)}else{this.mImage=a;if(a){this.layer().attr("src",a.src)}else{this.layer().removeAttr("src")}}},image:function(){return this.mImage},sizeThatFits:function(a){return this.mImage?this.mImage.size():new CGSize()}});UIControl=defineClass({superClass:UIView,init:function(b){UIView.call(this,b);this.mEnabled=true;this.mActionSet=[];var a=this;this.layer().mousedown(function(){if(a.isUserInteractionEnabled()){a.mTouchDown=true;a.setHighlighted(true)}});this.layer().mouseup(function(){if(a.isUserInteractionEnabled()&&a.mTouchDown){a.mTouchDown=false;a.setHighlighted(false);a.sendActionsForControlEvents(UIControl.Events.TouchUpInside)}});this.layer().mouseleave(function(){if(a.isUserInteractionEnabled()&&a.mTouchDown){a.mTouchDown=false;a.setHighlighted(false)}})},isEnabled:function(){return this.mEnabled},setEnabled:function(b){var a=this.state();this.mEnabled=b;var c=this.state();if(c!=a){this.onStateChange(c);this.setNeedsDisplay()}},isHighlighted:function(){return this.mHighlighted},setHighlighted:function(b){var a=this.state();this.mHighlighted=b;var c=this.state();if(c!=a){this.onStateChange(c);this.setNeedsDisplay()}},isSelected:function(){return this.mSelected},setSelected:function(b){var a=this.state();this.mSelected=b;var c=this.state();if(c!=a){this.onStateChange(c);this.setNeedsDisplay()}},state:function(){if(this.mSelected){return UIControl.State.Selected}else{if(this.mHighlighted){return UIControl.State.Highlighted}else{if(this.mEnabled){return UIControl.State.Normal}else{return UIControl.State.Disabled}}}},onStateChange:function(a){},addTarget:function(b,a){this.mActionSet.push({action:b,events:a})},removeTarget:function(b,a){this.mActionSet.forEach(function(d,c){if(d.action==b&&d.events==a){this.mActionSet.splice(c,1)}})},sendActionsForControlEvents:function(b){var a=this;this.mActionSet.forEach(function(c){if(c.events==b){if(c.action){c.action(a)}}})},statics:{State:{Normal:0,Highlighted:1,Selected:2,Disabled:3},Events:{TouchDown:0,TouchDragInside:1,TouchUpInside:2,TouchUpOutside:3,TouchCancel:4,ValueChanged:5}}});UIButton=defineClass({superClass:UIControl,init:function(b,a){UIControl.call(this,b);this.mTitleMap={};this.mTitleColorMap={};this.mImageMap={};this.mBackgroundImageMap={};this.mBackgroundColorMap={};this.mTitleEdgeInsets=new UIEdgeInsets();this.mImageEdgeInsets=new UIEdgeInsets();this.mButtonType=a?a:UIButton.Type.Custom},titleLabel:function(){if(!this.mTitleLabel){this.mTitleLabel=new UILabel(this.bounds());this.mTitleLabel.setTextAlignment("center");this.addSubview(this.mTitleLabel);if(this.mButtonType==UIButton.Type.System){this.setTitleColor(UIColor.systemThemeColor,UIControl.State.Normal);this.setTitleColor("rgba(0,122,255,0.5)",UIControl.State.Highlighted)}}return this.mTitleLabel},setTitle:function(b,a){this.mTitleMap[a]=b;if(a==this.state()){this.titleLabel().setText(b);this.setNeedsLayout()}},setTitleColor:function(a,b){this.mTitleColorMap[b]=a;if(b==this.state()){this.titleLabel().setTextColor(a)}},setTitleEdgeInsets:function(a){this.mTitleEdgeInsets=new UIEdgeInsets(a)},imageView:function(){if(!this.mImageView){this.mImageView=new UIImageView(this.bounds());this.addSubview(this.mImageView)}return this.mImageView},imageForState:function(a){return this.mImageMap[a]},setImage:function(b,a){this.mImageMap[a]=b;if(a==this.state()){this.imageView().setImage(b);this.setNeedsLayout()}},setImageEdgeInsets:function(a){this.mImageEdgeInsets=new UIEdgeInsets(a)},backgroundView:function(){if(!this.mBackgroundView){this.mBackgroundView=new UIImageView(this.bounds());this.mBackgroundView.setAutoresizingMask(UIView.Autoresizing.FlexibleSize);this.addSubview(this.mBackgroundView);this.sendSubviewToBack(this.mBackgroundView)}return this.mBackgroundView},setBackgroundImage:function(b,a){this.mBackgroundImageMap[a]=b;if(a==this.state()){this.backgroundView().setImage(b)}},setBackgroundColorOnState:function(a,b){this.mBackgroundColorMap[b]=a;if(b==this.state()){this.setBackgroundColor(a)}},onStateChange:function(d){var f=this.mTitleMap[d];if(f){this.titleLabel().setText(f)}var c=this.mTitleColorMap[d];if(c){this.titleLabel().setTextColor(c)}var e=this.mImageMap[d];if(e){this.imageView().setImage(e)}var b=this.mBackgroundImageMap[d];if(b){this.backgroundView().setImage(b)}var a=this.mBackgroundColorMap[d];if(a){this.setBackgroundColor(a)}},sizeThatFits:function(a){var c=new CGSize(0,0);if(this.mTitleLabel!=null){c=this.mTitleLabel.sizeThatFits(a)}var b=new CGSize(0,0);if(this.mImageView!=null){b=this.mImageView.sizeThatFits(a)}return new CGSize(Math.max(c.width+this.mTitleEdgeInsets.left+this.mTitleEdgeInsets.right,b.width+this.mImageEdgeInsets.left+this.mImageEdgeInsets.right),Math.max(c.height+this.mTitleEdgeInsets.top+this.mTitleEdgeInsets.bottom,b.height+this.mImageEdgeInsets.top+this.mImageEdgeInsets.bottom))},layoutSubviews:function(){var f=this.bounds().size.width;var c=this.bounds().size.height;if(this.mTitleLabel!=null){var e=this.mTitleLabel.sizeThatFits(new CGSize(f,c));var b=Math.min((f-e.width)/2+this.mTitleEdgeInsets.left-this.mTitleEdgeInsets.right,f-e.width);var g=Math.min((c-e.height)/2+this.mTitleEdgeInsets.top-this.mTitleEdgeInsets.bottom,c-e.height);this.mTitleLabel.setFrame(new CGRect(b,g,e.width,e.height))}if(this.mImageView!=null){var e=this.mImageView.sizeThatFits(new CGSize(f,c));var b=Math.min((f-e.width)/2+this.mImageEdgeInsets.left-this.mImageEdgeInsets.right,f-e.width);var g=Math.min((c-e.height)/2+this.mImageEdgeInsets.top-this.mImageEdgeInsets.bottom,c-e.height);this.mImageView.setFrame(new CGRect(b,g,e.width,e.height))}if(this.mTitleLabel!=null&&this.mImageView!=null){var a=this.mImageView.center();a.x=(f-this.mImageView.width()-this.mTitleLabel.width())/2+this.mImageView.width()/2+this.mImageEdgeInsets.left-this.mImageEdgeInsets.right;this.mImageView.setCenter(a);var d=this.mTitleLabel.center();d.x=(f-this.mImageView.width()-this.mTitleLabel.width())/2+this.mImageView.width()+this.mTitleLabel.width()/2+this.mTitleEdgeInsets.left-this.mTitleEdgeInsets.right;this.mTitleLabel.setCenter(d)}},statics:{Type:{Custom:0,System:1}}});UITextField=defineClass({superClass:UIView,init:function(a){UIView.call(this,a)},layerClass:function(){var a=$("<input type='text'/>");if(process.platform==="darwin"){a.css("font-family","PingFangSC-Regular")}else{if(process.platform=="win32"){a.css("font-family","Microsoft Yahei")}}a.css("border-color","#D2D2D2");a.css("border-width","1");return a},text:function(){return this.layer().val()},setText:function(a){this.layer().val(a)},setTextAlignment:function(a){this.layer().css("text-align",a)},setFont:function(a){this.layer().css("font",a)},setFontSize:function(a){this.layer().css("font-size",a)},font:function(){var a=this.layer().css("font");if(!a){a=this.layer().css("font-size");if(a){a=a+" normal"}}return a},setTextColor:function(a){this.layer().css("color",a)},placeholder:function(){return this.layer().attr("placeholder")},setPlaceholder:function(a){this.layer().attr("placeholder",a)},setSecureTextEntry:function(a){if(a){this.layer().attr("type","password")}else{this.layer().attr("type","text")}}});UITextView=defineClass({superClass:UIView,init:function(a){UIView.call(this,a)},layerClass:function(){var a=$("<textarea/>");if(process.platform==="darwin"){a.css("font-family","PingFangSC-Regular")}else{if(process.platform=="win32"){a.css("font-family","Microsoft Yahei")}}return a},text:function(){return this.layer().val()},setText:function(a){this.layer().val(a)},setTextAlignment:function(a){this.layer().css("text-align",a)},setFontSize:function(a){this.layer().css("font-size",a)},fontSize:function(){return this.layer().css("font-size")},setFont:function(a){this.layer().css("font",a)},font:function(){var a=this.layer().css("font-size");if(a){a=a+" normal"}else{a=this.layer().css("font")}return a},setBold:function(a){this.mBold=a;if(a){this.layer().css("font-weight","bold")}else{this.layer().css("font-weight","normal")}},isBold:function(){return this.mBold},setUnderline:function(a){this.mUnderline=a;this.mStrikethrough=false;if(a){this.layer().css("text-decoration","underline")}else{this.layer().css("text-decoration","none")}},isUnderline:function(){return this.mUnderline},setStrikethrough:function(a){this.mStrikethrough=a;this.mUnderline=false;if(a){this.layer().css("text-decoration","line-through")}else{this.layer().css("text-decoration","none")}},isStrikethrough:function(){return this.mStrikethrough},lineHeight:function(){return this.layer().css("line-height")},setLineHeight:function(a){return this.layer().css("line-height",a)},setTextColor:function(a){this.layer().css("color",a)},sizeThatFits:function(d){var b=this.text().split("\n");var e=0;var a=0;var c=this;b.forEach(function(g){var h=$("<span/>").text(g);h.css("font-size",c.fontSize());$("body").append(h);e=Math.max(e,h.width());a+=h.height();h.detach()});if(e>d.width){var f=$("<div/>").text(this.text());f.css("font-size",this.fontSize());f.css("line-height",this.lineHeight());f.width(d.width);$("body").append(f);e=f.width();a=f.height();f.detach()}return new CGSize(e+4,a+4)},sizeToFit:function(){var d=this.frame();var c=0;var a=0;if(!this.window()){var b=this;while(b&&b.superview()){b=b.superview()}$("body").append(b.layer());c=this.layer()[0].scrollHeight;a=this.layer()[0].scrollWidth;b.layer().detach()}else{c=this.layer()[0].scrollHeight;a=this.layer()[0].scrollWidth}if(c>0){d.size.height=c}if(a>d.size.width+6){d.size.width=a}this.setFrame(d)}});UIScrollView=defineClass({superClass:UIView,init:function(b){UIView.call(this,b);this.layer().css("overflow","scroll");this.layer().css("scrollbar-width","none");this.layer().css("-ms-overflow-style","none");var a=this;this.layer().scroll(function(){if(a.mDelegate&&a.mDelegate.scrollViewDidScroll){a.mDelegate.scrollViewDidScroll(a)}});this.mScrollEnabled=true;this.layer().mousedown(function(c){a.mDragging=true;a.mBeginDraggingX=c.pageX;a.mBeginDraggingY=c.pageY;a.mBeginOffset=a.contentOffset()});this.layer().mouseup(function(){a.mDragging=false});this.layer().mouseout(function(){a.mDragging=false});this.layer().mouseleave(function(){a.mDragging=false});this.layer().mousemove(function(c){if(a.mDragging&&a.mScrollEnabled){var d=new CGPoint(a.mBeginOffset.x+a.mBeginDraggingX-c.pageX,a.mBeginOffset.y+a.mBeginDraggingY-c.pageY);a.setContentOffset(d)}})},setScrollEnabled:function(a){this.mDragging=false;this.mScrollEnabled=a},contentOffset:function(){return this.bounds().origin},setContentOffset:function(c,b){var a=this.bounds();a.origin=new CGPoint(c);this.setBounds(a)},scrollRectToVisible:function(a){var b=this.contentOffset();if(b.x+this.width()<a.origin.x+a.size.width){b.x=a.origin.x+a.size.width-this.width()}else{if(b.x>a.origin.x){b.x=a.origin.x}}if(b.y+this.height()<a.origin.y+a.size.height){b.y=a.origin.y+a.size.height-this.height()}else{if(b.y>a.origin.y){b.y=a.origin.y}}this.setContentOffset(b)},delegate:function(){return this.mDelegate},setDelegate:function(a){this.mDelegate=a}});UIViewController=defineClass({view:function(){if(!this.mView){this.loadView()}return this.mView},setView:function(a){this.mView=a;a._setViewController(this);this.viewDidLoad()},loadView:function(){if(!this.mView){var a=new UIView(UIScreen.mainScreen().bounds());a.setBackgroundColor("#ffffff");this.setView(a)}},isViewLoad:function(){return this.mView!=null},viewDidLoad:function(){},viewDidAppear:function(){},viewDidDisappear:function(){},navigationItem:function(){if(this.mNavigationItem==null){this.mNavigationItem=new UINavigationItem()}return this.mNavigationItem},addChildViewController:function(a){a.removeFromParentViewController();if(!this.mChildViewControllers){this.mChildViewControllers=[]}this.mChildViewControllers.push(a);a.mParentViewController=this},removeFromParentViewController:function(){if(this.mParentViewController!=null){this.mParentViewController.mChildViewControllers.remove(this);this.mParentViewController=null}},_setNavigationController:function(a){this.mNaviCtrl=a},navigationController:function(){return this.mNaviCtrl},title:function(){return this.mTitle},setTitle:function(b){var c=this.mTitle;this.mTitle=b;var a=this.navigationItem();if(a.title()==null||a.title()==c){a.setTitle(b)}},parentViewController:function(){return this.mParentViewController},_parentViewControllerForRoot:function(){var a=this;var b=this.mParentViewController;while(b!=null){a=b;b=b.parentViewController()}return a},presentedViewController:function(){return this._parentViewControllerForRoot().mPresentedViewController},presentingViewController:function(){return this._parentViewControllerForRoot().mPresentingViewController},presentViewController:function(e,d){var b=this._parentViewControllerForRoot();var f=b.view().window();if(f!=null){b.mPresentedViewController=e;e.mPresentingViewController=b;var g=new UIView(f.bounds());g.setAutoresizingMask(UIView.Autoresizing.FlexibleSize);if(e.modalPresentationAutoDismiss){g.layer().click(function(){e.dismissViewController(false)})}var a=e.view();var c=e.modalPresentationSize?e.modalPresentationSize:g.size();if(e.modalPresentationOrigin){a.setFrame(new CGRect(e.modalPresentationOrigin.x,e.modalPresentationOrigin.y,c.width,c.height))}else{a.setFrame(new CGRect(g.width()/2-c.width/2,g.height()/2-c.height/2,c.width,c.height))}if(e.modalPresentationSize){a.layer().css("border-style","solid");if(process.platform=="darwin"){a.layer().css("border-radius","5px");a.layer().css("overflow","hidden");a.layer().css("border-color","#CCCCCC");a.layer().css("border-width","1")}else{a.layer().css("border-color","rgb(0,100,200)");a.layer().css("border-width","0.5")}}g.addSubview(a);f.addSubview(g);if(d){g.setAlpha(0);UIView.animate(0.2,function(){g.setAlpha(1)})}}},dismissViewController:function(c){var b=null;var d=this.presentedViewController();if(d!=null){b=d.mPresentingViewController}else{b=this.presentingViewController();if(b!=null){d=b.mPresentedViewController}}if(d!=null){var a=d.view();var e=a.superview();if(c){UIView.animate(0.2,function(){e.setAlpha(0)},function(){e.setAlpha(1);e.removeFromSuperview()})}else{e.removeFromSuperview()}d.mPresentingViewController=null;b.mPresentedViewController=null}},onWindowResize:function(){if(this.mChildViewControllers){this.mChildViewControllers.forEach(function(a){a.onWindowResize()})}}});UIBarButtonItem=defineClass({init:function(d,b,a,c){this.mTitle=d;this.mImage=b;this.mAction=a;this.mTintColor=c},title:function(){return this.mTitle},image:function(){return this.mImage},action:function(){return this.mAction},tintColor:function(){return this.mTintColor}});UINavigationItem=defineClass({init:function(a){this.mTitle=a;this.mLeftBarButtonItems=[];this.mRightBarButtonItems=[]},title:function(){return this.mTitle},setTitle:function(a){this.mTitle=a;if(this.mDelegate){this.mDelegate.titleViewDidChange(this)}},titleView:function(){return this.mTitleView},setTitleView:function(a){this.mTitleView=a;if(this.mDelegate){this.mDelegate.titleViewDidChange(this)}},setRightBarButtonItems:function(a){this.mRightBarButtonItems=a?a.slice():[];if(this.mDelegate){this.mDelegate.rightBarButtonItemsDidChange(this)}},rightBarButtonItems:function(){return this.mRightBarButtonItems.slice()},setLeftBarButtonItems:function(a){this.mLeftBarButtonItems=a?a.slice():[];if(this.mDelegate){this.mDelegate.leftBarButtonItemsDidChange(this)}},leftBarButtonItems:function(){return this.mLeftBarButtonItems.slice()},backBarButtonItem:function(){return this.mBackBarButtonItem},setBackBarButtonItem:function(a){this.mBackBarButtonItem=a},delegate:function(){return this.mDelegate},setDelegate:function(a){this.mDelegate=a}});UINavigationBar=defineClass({superClass:UIView,init:function(a){UIView.call(this,a);this.mItems=[];this.setBackgroundColor("white");this.mBottomLineView=new UIView(new CGRect(0,this.height()-1,this.width(),1));this.mBottomLineView.setAutoresizingMask(UIView.Autoresizing.FlexibleTopMargin|UIView.Autoresizing.FlexibleWidth);this.mBottomLineView.setBackgroundColor("#B2B2B2");this.addSubview(this.mBottomLineView)},topItem:function(){var a=this.mItems.length;return a>0?this.mItems[a-1]:null},backItem:function(){var a=this.mItems.length;return a>1?this.mItems[a-2]:null},pushNavigationItem:function(d,c){var b=this.topItem();this.mItems.push(d);var a=new UINavigationSubBar(this.bounds());a.setAutoresizingMask(UIView.Autoresizing.FlexibleSize);a.setNavigationItem(d,b);this.addSubview(a);var e=this.mSubBar;if(c){a.setAlpha(0);UIView.animate(0.2,function(){a.setAlpha(1);if(e){e.setAlpha(0)}},function(){if(e){e.removeFromSuperview()}})}else{if(e){e.removeFromSuperview()}}this.mSubBar=a;this.bringSubviewToFront(this.mBottomLineView)},popNavigationItem:function(e){if(this.mItems.length>1){var d=this.mItems.pop();var c=this.topItem();var b=this.backItem();var a=new UINavigationSubBar(this.bounds());a.setNavigationItem(c,b);this.addSubview(a);var f=this.mSubBar;if(e){a.setAlpha(0);UIView.animate(0.2,function(){a.setAlpha(1);if(f){f.setAlpha(0)}},function(){if(f){f.removeFromSuperview()}})}else{if(f){f.removeFromSuperview()}}this.mSubBar=a;this.bringSubviewToFront(this.mBottomLineView);return d}return null},backButtonDidClick:function(){if(this.mDelegate){this.mDelegate.navigationBarBackButtonDidClick(this)}else{this.popNavigationItem(true)}},setDelegate:function(a){this.mDelegate=a},leftBarButtonAtIndex:function(a){return this.mSubBar.mLeftBarButtons[a]},rightBarButtonAtIndex:function(a){return this.mSubBar.mRightBarButtons[a]}});UINavigationSubBar=defineClass({superClass:UIView,init:function(a){UIView.call(this,a);this.mLeftBarButtons=[];this.mRightBarButtons=[]},setNavigationItem:function(d,a){this.mItem=d;d.setDelegate(this);if(a){var c=new UIButton(null,UIButton.Type.System);var e=null;if(a.backBarButtonItem()){e=a.backBarButtonItem().title()}else{e=a.title()?a.title():LOCAL("Back")}c.setTitle(e,UIControl.State.Normal);c.setImage(new UIImage("res/cocoa_navi_back.png",9,15),UIControl.State.Normal);var b=this;c.addTarget(function(){var f=b.superview();f.backButtonDidClick()},UIControl.Events.TouchUpInside);this.addSubview(c);this.mBackButton=c}this.updateTitleView(d);this.updateRightBarButtons(d);this.updateLeftBarButtons(d);this.setNeedsLayout()},updateTitleView:function(b){if(this.mTitleView){this.mTitleView.removeFromSuperview()}var a=b.titleView();if(a){this.addSubview(a);this.mTitleView=a}else{var c=new UILabel();c.setFontSize("18px");c.setBold(true);c.setText(b.title());this.addSubview(c);this.mTitleView=c}},updateRightBarButtons:function(c){this.mRightBarButtons.forEach(function(d){d.removeFromSuperview()});this.mRightBarButtons=[];var b=c.rightBarButtonItems();var a=this;b.forEach(function(f){var d=new UIButton(null,UIButton.Type.System);var e=f.image();if(e!=null){d.setImage(e,UIControl.State.Normal)}else{d.setTitle(f.title(),UIControl.State.Normal)}d.addTarget(f.action(),UIControl.Events.TouchUpInside);a.addSubview(d);a.mRightBarButtons.push(d)})},updateLeftBarButtons:function(c){this.mLeftBarButtons.forEach(function(d){d.removeFromSuperview()});this.mLeftBarButtons=[];var a=c.leftBarButtonItems();var b=this;a.forEach(function(f){var d=new UIButton(null,UIButton.Type.System);var e=f.image();if(e!=null){d.setImage(e,UIControl.State.Normal)}else{d.setTitle(f.title(),UIControl.State.Normal)}d.addTarget(f.action(),UIControl.Events.TouchUpInside);b.addSubview(d);b.mLeftBarButtons.push(d)})},titleViewDidChange:function(a){this.updateTitleView(a);this.setNeedsLayout()},rightBarButtonItemsDidChange:function(a){this.updateRightBarButtons(a);this.setNeedsLayout()},leftBarButtonItemsDidChange:function(a){this.updateLeftBarButtons(a);this.setNeedsLayout()},layoutSubviews:function(){var c=this.frame().size.width;var a=this.frame().size.height;if(this.mTitleView){if(this.mItem.titleView()==this.mTitleView){this.mTitleView.setCenter(new CGPoint(c/2,a/2))}else{var b=this.mTitleView.sizeThatFits(new CGSize(c,a));this.mTitleView.setFrame(new CGRect((c-b.width)/2,(a-b.height)/2,b.width,b.height))}}var d=10;if(this.mBackButton){var b=this.mBackButton.sizeThatFits(new CGSize(200,a));this.mBackButton.setFrame(new CGRect(d,(a-b.height)/2,b.width,b.height));d+=b.width+10}if(this.mLeftBarButtons){this.mLeftBarButtons.forEach(function(g){var f=g.sizeThatFits(new CGSize(100,44));g.setFrame(new CGRect(d,(a-f.height)/2,f.width,f.height));d+=f.width+10})}var e=10;if(this.mRightBarButtons){this.mRightBarButtons.forEach(function(g){var f=g.sizeThatFits(new CGSize(100,44));g.setFrame(new CGRect(c-f.width-e,(a-f.height)/2,f.width,f.height));e+=f.width+10})}}});UINavigationController=defineClass({superClass:UIViewController,init:function(a){UIViewController.call(this);this.mViewControllers=[];if(a){this.mViewControllers.push(a)}},viewDidLoad:function(){UIViewController.prototype.viewDidLoad.call(this);var a=this.view();this.mNaviBar=new UINavigationBar(new CGRect(0,0,a.width(),40));this.mNaviBar.setAutoresizingMask(UIView.Autoresizing.FlexibleWidth);this.mNaviBar.setDelegate(this);if(this.mNaviBarHidden){this.mNaviBar.setHidden(true)}a.addSubview(this.mNaviBar);var b=this.topViewController();if(b){this.mNaviBar.pushNavigationItem(b.navigationItem(),false);this.attachViewController(b)}},navigationBar:function(){return this.mNaviBar},setNavigationBarHidden:function(b){this.mNaviBarHidden=b;if(this.mNaviBar){this.mNaviBar.setHidden(b);var a=this.topViewController();if(a){a.view().setFrame(this.view().bounds())}}},topViewController:function(){var a=this.mViewControllers.length;return a>0?this.mViewControllers[a-1]:null},attachViewController:function(c){this.addChildViewController(c);c._setNavigationController(this);var a=this.view();var b=c.view();b.setAutoresizingMask(UIView.Autoresizing.FlexibleSize);if(this.mNaviBarHidden){b.setFrame(a.bounds())}else{b.setFrame(new CGRect(0,this.mNaviBar.bottom(),a.width(),a.height()-this.mNaviBar.bottom()))}a.addSubview(b);a.bringSubviewToFront(this.mNaviBar)},pushViewController:function(d,c){this.mNaviBar.pushNavigationItem(d.navigationItem(),c);var a=this.topViewController();var b=a?a.view():null;this.mViewControllers.push(d);this.attachViewController(d);if(c){d.view().setAlpha(0);UIView.animate(0.2,function(){d.view().setAlpha(1);if(b){b.setAlpha(0)}},function(){if(b){b.setAlpha(1);b.removeFromSuperview()}})}else{if(b){b.removeFromSuperview()}}},popViewController:function(d){if(this.mViewControllers.length>1){this.mNaviBar.popNavigationItem(d);var a=this.topViewController();var b=a.view();this.mViewControllers.remove(a);a.removeFromParentViewController();a._setNavigationController(null);var c=this.topViewController();this.attachViewController(c);if(d){c.view().setAlpha(0);UIView.animate(0.2,function(){c.view().setAlpha(1);b.setAlpha(0)},function(){b.setAlpha(1);b.removeFromSuperview()})}else{b.removeFromSuperview()}}},navigationBarBackButtonDidClick:function(a){this.popViewController(true)}});UIAnimation=defineClass({init:function(e,f,d,a,g,c){this.mObject=e;if(f){var b="set"+f.substring(0,1).toUpperCase()+f.substring(1);this.mSetter=e[b]}this.mStartValue=d;this.mEndValue=a;this.mDuration=g;this.mCompletion=c},start:function(){var c=1/60;var b=0;var a=this;var d=setInterval(function(){b+=c;var e=Math.min(1,b/a.mDuration);a.evolve(e);if(e==1){clearInterval(d);if(a.mCompletion){a.mCompletion()}}},c*1000)},evolve:function(a){var b=this.value(a);this.mSetter.call(this.mObject,b)},value:function(f){var e=this.mStartValue;if(typeof e=="number"){return this.mStartValue+(this.mEndValue-this.mStartValue)*f;this.mSetter.call(this.mObject,value)}else{if(typeof e=="object"){if(e.constructor==CGRect){var d=this.mStartValue;var a=this.mEndValue;return new CGRect(d.origin.x+(a.origin.x-d.origin.x)*f,d.origin.y+(a.origin.y-d.origin.y)*f,d.size.width+(a.size.width-d.size.width)*f,d.size.height+(a.size.height-d.size.height)*f)}else{if(e.constructor==CGAffineTransform){var g=this.mStartValue.values();var c=this.mEndValue.values();var b=[];b[0]=g[0]+(c[0]-g[0])*f;b[1]=g[1]+(c[1]-g[1])*f;b[2]=g[2]+(c[2]-g[2])*f;b[3]=g[3]+(c[3]-g[3])*f;b[4]=g[4]+(c[4]-g[4])*f;b[5]=g[5]+(c[5]-g[5])*f;b[6]=g[6]+(c[6]-g[6])*f;b[7]=g[7]+(c[7]-g[7])*f;b[8]=g[8]+(c[8]-g[8])*f;return new CGAffineTransform(b)}}}}return this.mEndValue},setDuration:function(a){this.mDuration=a}});UIAnimationGroup=defineClass({superClass:UIAnimation,init:function(b,a){UIAnimation.call(this,null,null,null,null,b,a);this.mAnimations=[]},addAnimation:function(b){this.mAnimations.push(b)},evolve:function(a){for(var b=0;b<this.mAnimations.length;b++){var c=this.mAnimations[b];c.evolve(a)}}});UIMenuController=defineClass({statics:{MENU_H:40,MENU_PADDING:10,TITLE_PADDING:10,ARROW_H:6,sharedMenuController:function(){if(!UIMenuController.object){UIMenuController.object=new UIMenuController()}return UIMenuController.object}},init:function(){this.mTargetRect=new CGRect()},setMenuItems:function(a){this.mMenuItems=a},setTargetRectInView:function(b,a){this.mTargetRect=new CGRect(b);this.mTargetView=a},setMenuVisible:function(e,n){if(e){if(!this.mMenuView&&this.mTargetView&&this.mTargetView.window()&&this.mMenuItems&&this.mMenuItems.length>0){var f=this.mTargetView.window();var o=new UIView(new CGRect(0,0,0,UIMenuController.MENU_H));this.mTargetView.window().addSubview(o);var a=new UIScrollView(new CGRect(0,0,0,UIMenuController.MENU_H-UIMenuController.ARROW_H));a.setAutoresizingMask(UIView.Autoresizing.FlexibleSize);o.addSubview(a);var k=0;var h=this;var d=[];for(var l=0;l<this.mMenuItems.length;l++){var r=this.mMenuItems[l];var c=new UIButton();c.setTitle(r.title,UIControl.State.Normal);c.setTitleColor("white",UIControl.State.Normal);c.titleLabel().setFontSize("13px");c.sizeToFit();c.setFrame(new CGRect(k,0,c.width()+UIMenuController.TITLE_PADDING*2,a.height()));c.setTag(l);var h=this;c.addTarget(function(i){var t=h.mMenuItems[i.tag()];t.action();h.setMenuVisible(false,true)},UIControl.Events.TouchUpInside);a.addSubview(c);k+=c.width();if(l!=this.mMenuItems.length-1){var p=new UIView(new CGRect(k,0,0.5,a.height()));p.setBackgroundColor("#666666");a.addSubview(p)}d.push(c)}this.mMenuButtons=d;var j=this.mTargetView.convertRectToView(this.mTargetRect,f);var b=Math.min(k,f.width()-UIMenuController.MENU_PADDING*2);var g=j.origin.x+j.size.width/2-b/2;if(g<UIMenuController.MENU_PADDING){g=UIMenuController.MENU_PADDING}else{if(g+b+UIMenuController.MENU_PADDING>f.width()){g=f.width()-b-UIMenuController.MENU_PADDING}}var q=new CGPoint(j.origin.x+j.size.width/2-g,UIMenuController.MENU_H);var s=j.origin.y-UIMenuController.MENU_H;if(s<0){s=j.origin.y+j.size.height;q.y=0;a.setPosition(new CGPoint(0,UIMenuController.ARROW_H))}o.setFrame(new CGRect(g,s,b,UIMenuController.MENU_H));var m=new _UIMenuBackgroundView(o.bounds());m.setArrowPoint(q);o.addSubview(m);o.sendSubviewToBack(m);if(n){o.setAlpha(0);UIView.animate(0.1,function(){o.setAlpha(1)})}this.mMenuView=o}}else{if(this.mMenuView!=null){var o=this.mMenuView;this.mMenuView=null;if(n){UIView.animate(0.1,function(){o.setAlpha(0)},function(){o.removeFromSuperview()})}else{o.removeFromSuperview()}}}},menuButtons:function(){return this.mMenuButtons},menuButtonAtIndex:function(a){return a<this.mMenuButtons.length?this.mMenuButtons[a]:null},isMenuVisible:function(){return this.mMenuView!=null}});UIMenuItem=defineClass({init:function(b,a){this.title=b;this.action=a}});_UIMenuBackgroundView=defineClass({superClass:UIView,init:function(a){this.mArrowPoint=new CGPoint();UIView.call(this,a)},setArrowPoint:function(a){this.mArrowPoint=new CGPoint(a)},drawRect:function(b){b.fillStyle="rgba(0,0,0,0.9)";var a=UIMenuController.ARROW_H;if(this.mArrowPoint.y==0){b.beginPath();this.roundRect(b,0,a,this.width(),this.height()-a,5);b.moveTo(this.mArrowPoint.x-a,a);b.lineTo(this.mArrowPoint.x,0);b.lineTo(this.mArrowPoint.x+a,a);b.fill()}else{b.beginPath();this.roundRect(b,0,0,this.width(),this.height()-a,5);b.moveTo(this.mArrowPoint.x-a,this.height()-a);b.lineTo(this.mArrowPoint.x,this.height());b.lineTo(this.mArrowPoint.x+a,this.height()-a);b.fill()}},roundRect:function(c,b,f,d,a,e){c.moveTo(b,f+a-e);c.lineTo(b,f+e);c.arcTo(b,f,b+e,f,e);c.lineTo(b+d-e,f);c.arcTo(b+d,f,b+d,f+e,e);c.lineTo(b+d,f+a-e);c.arcTo(b+d,f+a,b+d-e,f+a,e);c.lineTo(b+e,f+a);c.arcTo(b,f+a,b,f+a-e,e)}});UIAlertView=defineClass({superClass:UIView,statics:{Style:{Default:0,SecureTextInput:1,PlainTextInput:2,LoginAndPasswordInput:3},SHADOW_ENABLED:true},init:function(c,b){UIView.call(this);this.mTitle=c;this.mMessage=b;this.mButtonTitles=[];for(var a=2;a<arguments.length;a++){this.mButtonTitles.push(arguments[a])}this.mAlertViewStyle=UIAlertView.Style.Default;this.mTextFields=[]},addButtonTitle:function(a){this.mButtonTitles.push(a)},setDelegate:function(a){this.mDelegate=a},setAlertViewStyle:function(a){this.mAlertViewStyle=a},setLeftButtonTitles:function(a){this.mLeftButtonTitles=a},setDetailView:function(a){this.mDetailView=a},detailView:function(){return this.mDetailView},buildNormalButton:function(e,a){var d;var c=UIView.DarkMode;if(process.platform=="darwin"){d=new UIButton();d.setBackgroundColor(c?"#5C5C5C":"white");d.layer().css("border-style","solid");d.layer().css("border-width","1");d.layer().css("border-color",c?"#232323":"#CCCCCC");d.layer().css("border-radius","5px")}else{d=new UIButton(null,UIButton.Type.System)}d.setTitleColor(c?"#E6E6E6":"black",UIControl.State.Normal);d.setTag(a);var b=this;d.addTarget(function(f){b.dismiss(function(){if(b.mDelegate){b.mDelegate.alertViewClickedButtonAtIndex(b,f.tag())}})},UIControl.Events.TouchUpInside);d.setTitle(e,UIControl.State.Normal);d.titleLabel().setFontSize("15px");return d},show:function(){if(this.window()==null){var g=UIApplication.sharedApplication().keyWindow();this.setFrame(g.bounds());this.setAutoresizingMask(UIView.Autoresizing.FlexibleSize);g.addSubview(this);var p=20;var f=Math.min(450,UIScreen.mainScreen().bounds().size.width-20);var j=0;if(this.mDetailView){if(this.mDetailView.width()>f){f=this.mDetailView.width()}}var r=f-p*2;var e=new UIView(new CGRect(0,0,f,j));e.layer().css("border-style","solid");var d=null;var h=23;var b=UIView.DarkMode;if(process.platform=="darwin"){e.setBackgroundColor(b?"#232323":"#F6F6F6");e.layer().css("border-radius","5px");e.layer().css("overflow","hidden");e.layer().css("border-color",b?"#4A4A4A":"#CCCCCC");e.layer().css("border-width","1");d=new UIView(new CGRect(0,0,e.width(),h));d.setBackgroundColor(b?"#383838":"#FAFAFA");e.addSubview(d);var o=new UIView(new CGRect(0,h-1,e.width(),1));o.setBackgroundColor(b?"#0D0D0D":"#D2D2D2");e.addSubview(o)}else{e.setBackgroundColor(b?"#232323":"white");e.layer().css("border-color","rgb(0,100,200)");e.layer().css("border-width","0.5")}j+=h;if(this.mTitle!=null){var m=new UILabel();m.setFontSize("13px");m.setText(this.mTitle);m.setTextColor(b?"#B4B4B4":"#555555");var s=m.sizeThatFits(new CGSize(r,Number.MAX_VALUE));s.width+=20;if(d){m.setFrame(new CGRect((d.width()-s.width)/2,0,s.width,h))}else{m.setFrame(new CGRect(5,0,s.width,h))}e.addSubview(m)}if(this.mDetailView){this.mDetailView.setFrame(new CGRect(0,j,f,this.mDetailView.height()));e.addSubview(this.mDetailView);j+=this.mDetailView.height()}else{if(this.mMessage!=null){j+=p;var m=new UILabel();m.setFontSize("16px");m.setTextColor(b?"white":"black");m.setText(this.mMessage);m.setNumberOfLines(20);m.setLineHeight(1.3);var s=m.sizeThatFits(new CGSize(r,Number.MAX_VALUE));m.setFrame(new CGRect(p,j,s.width,s.height));e.addSubview(m);j+=s.height+p}else{j+=p}}var v=0;switch(this.mAlertViewStyle){case UIAlertView.Style.PlainTextInput:case UIAlertView.Style.SecureTextInput:v=1;break;case UIAlertView.Style.LoginAndPasswordInput:v=2;break}for(var u=0;u<v;u++){var k=new UITextField(new CGRect(p,j,r,30));k.setFontSize("16px");k.setBackgroundColor(b?"#393939":"white");k.setTextColor(b?"white":"black");e.addSubview(k);this.mTextFields.push(k);if(u==0){this.mActiveTextField=k}j+=k.height()+p/2}if(v>0){j+=p/2}var n=this.mButtonTitles.length;if(n>0&&n<=4){var t=r/n;var l=0;var c=f-p;var q=this;for(var u=n-1;u>=0;u--){var a=this.buildNormalButton(this.mButtonTitles[u],u);a.sizeToFit();a.setFrame(new CGRect(c-a.width()-12,j,a.width()+12,a.height()+4));c-=a.width()+p;l=a.height();e.addSubview(a)}if(this.mLeftButtonTitles){c=p;var w=n;this.mLeftButtonTitles.forEach(function(x){var i=q.buildNormalButton(x,w);i.sizeToFit();i.setFrame(new CGRect(c,j,i.width()+12,i.height()+4));c+=i.width()+p;e.addSubview(i);w+=1})}j+=l+p}else{if(n>2){var l=40;for(var u=0;u<n;u++){var a=this.buildNormalButton(this.mButtonTitles[u],u);a.sizeToFit();a.setFrame(new CGRect(p,j,r,l));e.addSubview(a);j+=l+10}j+=p/2}}e.setFrame(new CGRect((g.width()-f)/2,(g.height()-j)/2,f,j));e.setAutoresizingMask(UIView.Autoresizing.FlexibleMargin);this.addSubview(e);this.mContentView=e;if(this.mActiveTextField){var q=this;setTimeout(function(){q.mActiveTextField.layer().focus()},200)}}},dismiss:function(a){if(this.window()){this.mContentView.removeFromSuperview();this.removeFromSuperview();if(a){a()}else{if(this.mDelegate){this.mDelegate.alertViewClickedButtonAtIndex(this,-1)}}}},textFieldAtIndex:function(a){return this.mTextFields[a]}});NSUserDefaults=defineClass({statics:{standardUserDefaults:function(){if(!NSUserDefaults.object){NSUserDefaults.object=isWebApp?new NSUserDefaultsWeb():new NSUserDefaults();NSUserDefaults.object.reload()}return NSUserDefaults.object}},reload:function(){var f=this.path();var b;try{var c=fs.readFileSync(f);if(c){var a=new NSKeyedUnarchiver(c.toString());b=a.decodeObjectForKey("root")}}catch(d){}this.mRoot=b?b:{}},setObjectForKey:function(b,a){this.mRoot[a]=b},removeObjectForKey:function(a){delete this.mRoot[a]},objectForKey:function(a){return this.mRoot[a]},synchronize:function(){var b=this.path();var c={root:this.mRoot};var a=NSKeyedArchiver.archivedDataWithRootObject(c);fs.writeFileSync(b,a)},path:function(){return app.getPath("userData")+pathSeparator()+"defaults.json"},execOnceOnKey:function(a,c){var b=this.objectForKey(a);if(!b){c();this.setObjectForKey(true,a);this.synchronize()}return !b}});NSUserDefaultsWeb=defineClass({superClass:NSUserDefaults,reload:function(){},setObjectForKey:function(b,a){if(b){localStorage.setItem(a,JSON.stringify(b))}else{localStorage.removeItem(a)}},removeObjectForKey:function(a){localStorage.removeItem(a)},objectForKey:function(a){var b=localStorage.getItem(a);return b?JSON.parse(b):null},synchronize:function(){},path:function(){return""}});NSKeyedMapper=defineClass({statics:{defaultMapper:function(){if(!NSKeyedMapper.object){NSKeyedMapper.object=new NSKeyedMapper()}return NSKeyedMapper.object}},init:function(){this.table={};this.table2={};this.registerClass(Object,"NSDictionary",true);this.registerClass(Array,"NSArray",true);this.registerClass(NSRange,"NSRange",true);this.registerClass(CGPoint,"CGPoint",true);this.registerClass(CGSize,"CGSize",true);this.registerClass(CGRect,"CGRect",true);this.registerClass(Object,"apple.cocoatouch.foundation.NSDictionary");this.registerClass(Object,"apple.cocoatouch.foundation.NSMutableDictionary");this.registerClass(Array,"apple.cocoatouch.foundation.NSArray");this.registerClass(Array,"apple.cocoatouch.foundation.NSMutableArray");this.registerClass(NSRange,"apple.cocoatouch.foundation.NSRange");this.registerClass(CGPoint,"apple.cocoatouch.coregraphics.CGPoint");this.registerClass(CGSize,"apple.cocoatouch.coregraphics.CGSize");this.registerClass(CGRect,"apple.cocoatouch.coregraphics.CGRect")},registerClass:function(c,b,a){this.table[b]=c;if(a){this.table2[c]=b}},classForName:function(a){return this.table[a]},className:function(a){return this.table2[a]}});NSKeyedArchiver=defineClass({statics:{archivedDataWithRootObject:function(b){var a=new NSKeyedArchiver();a.encodeObjectForKey(b,"root");return JSON.stringify(a.jsonObj()["root"])}},init:function(){this.mJsonObj={}},setObjectClass:function(a){this.mJsonObj.objectClass=a},encodeBoolForKey:function(a,c){var d=a?a:false;this.encodeObjectForKey(d,c)},encodeIntForKey:function(b,a){var c=b?b:0;this.encodeObjectForKey(c,a)},encodeFloatForKey:function(b,a){var c=b?b:0;this.encodeObjectForKey(c,a)},encodeObjectForKey:function(f,d){if(typeof f=="object"){if(f){var b=new NSKeyedArchiver();var e=NSKeyedMapper.defaultMapper().className(f.constructor);if(e){b.setObjectClass(e)}if(f.encodeWithCoder){f.encodeWithCoder(b)}else{if(f.constructor==Array){for(var c=0;c<f.length;c++){b.encodeObjectForKey(f[c],c)}}else{for(var a in f){if(f.hasOwnProperty(a)){b.encodeObjectForKey(f[a],a)}}}}this.mJsonObj[d]=b.mJsonObj}}else{this.mJsonObj[d]=f}},setObjectForKey:function(b,a){this.mJsonObj[a]=b},jsonObj:function(){return this.mJsonObj},toString:function(){return JSON.stringify(this.mJsonObj)}});NSKeyedUnarchiver=defineClass({init:function(a){if(typeof a=="string"){this.mJsonObj=JSON.parse(a)}else{this.mJsonObj=a}},decodeBoolForKey:function(a){var b=this.decodeObjectForKey(a);return b?b:false},decodeIntForKey:function(a){var c=this.decodeObjectForKey(a);var b=parseInt(c);return b?b:0},decodeFloatForKey:function(a){var c=this.decodeObjectForKey(a);var b=parseFloat(c);return b?b:0},decodeObjectForKey:function(a){var b=this.objectForKey(a);return this.decodeObject(b)},objectForKey:function(a){return this.mJsonObj[a]},decodeObject:function(h){if(h!=null){if(typeof h=="object"){var f=h.objectClass;if(f!=null){var d=NSKeyedMapper.defaultMapper().classForName(f);if(d){var b;var a=new NSKeyedUnarchiver(h);if(d==Object){b={};for(key in h){if(h.hasOwnProperty(key)){if(key=="objectClass"){continue}b[key]=a.decodeObjectForKey(key)}}}else{if(d==Array){b=[];var g=0;for(key in h){if(h.hasOwnProperty(key)){var c=parseInt(key);if(c>=0){if(c>=g){g=c+1}}}}for(var e=0;e<g;e++){b[e]=a.decodeObjectForKey(e)}}else{b=new d();b.initWithCoder(a)}}return b}}}}return h},jsonObj:function(){return this.mJsonObj}});UITableView=defineClass({superClass:UIScrollView,init:function(a){UIScrollView.call(this,a);this.mCells=[];this.mRowHeight=44},dataSource:function(){return this.mDataSource},setDataSource:function(a){this.mDataSource=a},rowHeight:function(){return this.mRowHeight},setRowHeight:function(a){this.mRowHeight=a},reloadData:function(){this.mCells.forEach(function(j){j.removeFromSuperview()});this.mCells=[];if(this.mDataSource){var a=0;var c=this.mDataSource.numberOfSectionsInTableView;var g=c?c.call(this.mDataSource,this):1;for(var i=0;i<g;i++){var h=this.mDataSource.tableViewNumberOfRowsInSection(this,i);for(var b=0;b<h;b++){var d=new NSIndexPath(i,b);var e=this.mDataSource.tableViewCellForRowAtIndexPath(this,d);var f=this.mRowHeight;if(this.mDelegate){var c=this.mDelegate.tableViewHeightForRowAtIndexPath;if(c){f=c.call(this.mDelegate,this,d)}}e.setFrame(new CGRect(0,a,this.width(),f));e.setAutoresizingMask(UIView.Autoresizing.FlexibleWidth);e.setIndexPath(d);e.setDelegate(this);this.addSubview(e);a+=f;this.mCells.push(e)}}}},tableViewCellDidClick:function(a){if(this.mDelegate){var c=this.mDelegate.tableViewDidSelectRowAtIndexPath;if(c){var b=a.indexPath();c.call(this.mDelegate,this,b)}}},cellForRowAtIndexPath:function(b){var a=null;this.mCells.forEach(function(e){var d=e.indexPath();if(d.section==b.section&&d.row==b.row){a=e}});return a}});UITableViewCell=defineClass({superClass:UIControl,statics:{AccessoryType:{None:0,DisclosureIndicator:1},SelectionStyle:{None:0,Default:1}},init:function(b){UIControl.call(this,b);this.mSelectionView=new UIView(this.bounds());this.mSelectionView.setAutoresizingMask(UIView.Autoresizing.FlexibleSize);this.mSelectionView.setHidden(true);this.addSubview(this.mSelectionView);this.mTextLabel=new UILabel();this.addSubview(this.mTextLabel);this.mDetailTextLabel=new UILabel();this.addSubview(this.mDetailTextLabel);this.mImageView=new UIImageView();this.addSubview(this.mImageView);this.mAccessoryView=new UIImageView();this.addSubview(this.mAccessoryView);this.mSeparatorView=new UIView(new CGRect(20,this.height()-1,this.width()-20,1));this.mSeparatorView.setAutoresizingMask(UIView.Autoresizing.FlexibleTopMargin|UIView.Autoresizing.FlexibleWidth);this.mSeparatorView.setBackgroundColor("#E3E3E3");this.addSubview(this.mSeparatorView);this.setAccessoryType(UITableViewCell.AccessoryType.None);this.setSelectionStyle(UITableViewCell.SelectionStyle.Default);var a=this;this.addTarget(function(){if(a.mDelegate){a.mDelegate.tableViewCellDidClick(a)}},UIControl.Events.TouchUpInside)},layoutSubviews:function(){var f=this.bounds().size;var c=this.mImageView.sizeThatFits(new CGSize(f.width-20,f.height));this.mImageView.setFrame(new CGRect(20,(f.height-c.height)/2,c.width,c.height));var e=this.mAccessoryView.sizeThatFits(new CGSize(f.width-20,f.height));this.mAccessoryView.setFrame(new CGRect(f.width-e.width-20,(f.height-e.height)/2,e.width,e.height));var a=this.mImageView.width()==0?20:this.mImageView.right()+10;var d=this.mAccessoryView.width()==0?f.width-20:this.mAccessoryView.left()-10;var b=this.mDetailTextLabel.text();if(b&&b.length>0){this.mDetailTextLabel.setHidden(false);this.mTextLabel.setFrame(new CGRect(a,0,d-a,f.height));this.mDetailTextLabel.setTextAlignment("right");this.mDetailTextLabel.setFrame(new CGRect(a,0,d-a,f.height))}else{this.mDetailTextLabel.setHidden(true);this.mTextLabel.setFrame(new CGRect(a,0,d-a,f.height))}},textLabel:function(){return this.mTextLabel},detailTextLabel:function(){return this.mDetailTextLabel},imageView:function(){return this.mImageView},accessoryView:function(){return this.mAccessoryView},accessoryType:function(){return this.mAccessoryType},setAccessoryType:function(a){this.mAccessoryType=a;if(a==UITableViewCell.AccessoryType.DisclosureIndicator){this.mAccessoryView.setImage(new UIImage("res/cocoa_table_cell_indicator.png",7,13))}else{this.mAccessoryView.setImage(null)}},selectionStyle:function(){return this.mSelectionStyle},setSelectionStyle:function(a){this.mSelectionStyle=a;if(a==UITableViewCell.SelectionStyle.Default){this.mSelectionView.setBackgroundColor("#D9D9D9")}else{this.mSelectionView.setBackgroundColor(null)}},setSeparatorVisible:function(a){this.mSeparatorView.setHidden(!a)},setSeparatorColor:function(a){this.mSeparatorView.setBackgroundColor(a)},onStateChange:function(a){if(a==UIControl.State.Highlighted||a==UIControl.State.Selected){this.mSelectionView.setHidden(false)}else{this.mSelectionView.setHidden(true)}},delegate:function(){return this.mDelegate},setDelegate:function(a){this.mDelegate=a},indexPath:function(){return this.mIndexPath},setIndexPath:function(a){this.mIndexPath=a}});NSIndexPath=defineClass({init:function(a,b){this.section=a;this.row=b}});NSNotificationCenter=defineClass({statics:{defaultCenter:function(){if(!NSNotificationCenter.object){NSNotificationCenter.object=new NSNotificationCenter()}return NSNotificationCenter.object}},init:function(){this.mObservers=[]},addObserver:function(d,c,b){var a={o:d,action:c,name:b};this.mObservers.push(a)},removeObserver:function(c){var b=this.mObservers.slice();var a=this;b.forEach(function(d){if(d.o==c){a.mObservers.remove(d)}})},postNotificationName:function(c,b,a){var d=new NSNotification(c,b,a);this.postNotification(d)},postNotification:function(e){var d=this.mObservers.slice();var c=[];for(var b=0;b<d.length;b++){var a=d[b];if(a.name==e.name){if(c.indexOf(a)>=0){continue}a.action.call(a.o,e);c.push(a)}}}});NSNotification=defineClass({init:function(c,b,a){this.name=c;this.object=b;this.userInfo=a}});NSBundle=defineClass({statics:{mainBundle:function(){if(!NSBundle.object){NSBundle.object=new NSBundle()}return NSBundle.object}},init:function(){this.mDir="res";this.mLocalizedTable={}},setResouceDir:function(a){this.mDir=a},localizedStringForKey:function(g,e,f){if(!f){f="Localizable.strings"}var h=this.mLocalizedTable[f];if(!h){var a=systemLanguage();var d=this.mDir;if(!isWebApp){d=__dirname+pathSeparator()+this.mDir}var i=d+pathSeparator()+a+".lproj"+pathSeparator()+f;if(!fs.existsSync(i)){i=d+pathSeparator()+f;if(!fs.existsSync(i)){i=d+pathSeparator()+"en.lproj"+pathSeparator()+f}}var h={};if(fs.existsSync(i)){var b=fs.readFileSync(i);h=this.praseLocalizedTable(b.toString())}this.mLocalizedTable[f]=h}var c;if(g){c=h[g];if(!c){c=e?e:g}}else{c=e}return c},praseLocalizedTable:function(c){var b={};var a=c.split("\n");a.forEach(function(h){if(h.lastIndexOf(";")==h.length-1){h=h.substring(0,h.length-1);var g=h.split("=");if(g.length>=2){var e=null;var f=null;var i=g[0].indexOf('"');var d=g[0].lastIndexOf('"');if(i!=-1&&d!=-1){e=g[0].substring(i+1,d)}i=g[1].indexOf('"');d=g[1].lastIndexOf('"');if(i!=-1&&d!=-1){f=g[1].substring(i+1,d)}if(e&&f){e=e.replace(/\\n/g,"\n");f=f.replace(/\\n/g,"\n");b[e]=f}}}});return b}});UIToast=defineClass({superClass:UIView,init:function(b){UIView.call(this,b);var a=new UIView(this.bounds());a.setAutoresizingMask(UIView.Autoresizing.FlexibleSize);a.setBackgroundColor("black");a.setAlpha(0.7);this.addSubview(a);a.layer().css("border-radius","5px")},setText:function(c){if(!this.mLabel){var a=new UILabel(this.bounds());a.setAutoresizingMask(UIView.Autoresizing.FlexibleSize);a.setTextColor("white");a.setTextAlignment("center");a.setFontSize("12px");this.addSubview(a);this.mLabel=a}this.mLabel.setText(c);var b=this.mLabel.sizeThatFits();this.setSize(new CGSize(b.width+10,b.height+10))},showInView:function(b,c){this.setAlpha(0);b.addSubview(this);var a=this;UIView.animate(0.25,function(){a.setAlpha(1)},function(){setTimeout(function(){a.dismiss()},c*1000)})},dismiss:function(){var a=this;UIView.animate(0.25,function(){a.setAlpha(0)},function(){a.setAlpha(1);a.removeFromSuperview()})}});isWebApp=true;WebAppMenuEnabled=true;var process={};var webapp_electron_remote_main={log:function(a){console.log(a)},setPendingOpenFile:function(a){this.mPendingOpenFile=a},getPendingOpenFile:function(){return this.mPendingOpenFile},appVersion:function(){return"2.9.2"},windows:function(){return[webapp_electron_remote_BrowserWindow]},broadcast:function(b,a){webapp_electron_ipcRenderer.callbacks[b](null,a)},handleShortcutKeyOperation:function(a){if(a.ctrlKey){switch(a.keyCode){case 13:this.broadcast("addBranch");break;case 73:this.broadcast("insertBranch");break;case 8:this.broadcast("deleteBranch");break;case 90:this.broadcast(a.shiftKey?"redo":"undo");break;case 77:this.broadcast("buildNewTopic");break;case 48:this.broadcast("pageActualSize");break;case 187:this.broadcast("pageZoomIn");break;case 189:this.broadcast("pageZoomOut");break;case 78:this.broadcast("createNewFile");break;case 79:this.broadcast("openFile");break;case 83:this.broadcast(a.shiftKey?"saveFileAs":"saveFile");break}}else{if(a.altKey){if(a.keyCode==13){this.broadcast("addBranch2")}}}}};var webapp_electron_remote_app={getPath:function(a){return""},addRecentDocument:function(a){},clearRecentDocuments:function(){}};var webapp_electron_remote_dialog={showMessageBox:function(c,a,d){var b=new UIAlertView(a.title,a.message);if(a.buttons){a.buttons.forEach(function(e){b.addButtonTitle(e)})}b.setDelegate({alertViewClickedButtonAtIndex:function(f,e){if(d){d(e)}}});b.show()},showOpenDialog:function(d,l,j){var c=UserSessionManager.defaultManager();if(c.isLogin()){var a=new GraphFileListController();a.handler={onMindFileOpen:function(m){if(j){j(null,m)}}};var h=new UINavigationController(a);var e=UIApplication.sharedApplication().keyWindow();var b=Math.min(600,e.width()-40);var i=Math.min(400,e.height()-40);h.modalPresentationSize=new CGSize(b,i);var g=e.rootViewController();g.presentViewController(h,false)}else{var a=new LoginViewController(true);var b=Math.min(450,screen_width()-20);a.setView(new UIView(new CGRect(0,0,b,230)));var f=new UIAlertView(LOCAL("My Account"),null,LOCAL("Back"));f.setDetailView(a.view());var k=this;f.setDelegate({alertViewClickedButtonAtIndex:function(n,m){if(c.isLogin()){k.showOpenDialog(d,l,j)}else{if(j){j()}}}});f.show();a.setDelegate(f)}},showSaveDialog:function(c,i,h){var f=new UIAlertView(i.title,i.message,LOCAL("Save"),LOCAL("Cancel"));f.setAlertViewStyle(UIAlertView.Style.PlainTextInput);f.setDelegate({alertViewClickedButtonAtIndex:function(l,k){if(h){if(k==0){var j="/";if(i.defaultPath){var k=i.defaultPath.lastIndexOf("/");if(k!=-1){j=i.defaultPath.substring(0,k+1)}}var n=l.textFieldAtIndex(0);var o=j+n.text();if(i&&i.filters){var m=i.filters[0].extensions[0];o+=("."+m)}main.log("save file path: "+o);h(o)}else{h()}}}});f.show();var g="";if(i.defaultPath){var b=f.textFieldAtIndex(0);var d=i.defaultPath.lastIndexOf(pathSeparator());g=i.defaultPath.substring(d+1)}if(i&&i.filters){var a="."+i.filters[0].extensions[0];var e=g.lastIndexOf(a);if(e+a.length==g.length){g=g.substring(0,e)}}b.setText(g)}};var webapp_electron_remote_Menu={setApplicationMenu:function(a){WebAppMenuManager.defaultManager().setMenuTemplate(a)},buildFromTemplate:function(a){a.popup=function(c){if(c&&c.view){if(isMobileDevice()){var b=[];a.forEach(function(f){if(f.type!="separator"){var g=new UIMenuItem(f.label,f.click);b.push(g)}});var e=UIMenuController.sharedMenuController();e.setMenuVisible(false);e.setMenuItems(b);e.setTargetRectInView(new CGRect(c.view.width()/2,0,1,1),c.view);e.setMenuVisible(true,true)}else{var e={submenu:a};var d;if(c.position){d=c.position}else{d=new CGPoint(c.view.width()/2,c.view.height()/2)}WebAppMenuManager.defaultManager().showMenu(e,c.view,d)}}};return a}};var webapp_electron_remote_globalShortcut={register:function(a,b){},unregisterAll:function(){}};var webapp_electron_remote_nativeImage={};var webapp_electron_remote_BrowserWindow={setTitle:function(a){},isFocused:function(){return true},on:function(a,b){},setRepresentedFilename:function(a){},show:function(){},webContents:{send:function(b,a){webapp_electron_ipcRenderer.callbacks[b](a)}}};var webapp_electron_remote={app:webapp_electron_remote_app,dialog:webapp_electron_remote_dialog,Menu:webapp_electron_remote_Menu,globalShortcut:webapp_electron_remote_globalShortcut,nativeImage:webapp_electron_remote_nativeImage,BrowserWindow:webapp_electron_remote_BrowserWindow,require:function(a){if(a=="./main.js"){return webapp_electron_remote_main}},getCurrentWindow:function(){return webapp_electron_remote_BrowserWindow}};var webapp_electron_ipcRenderer={callbacks:{},on:function(a,b){this.callbacks[a]=b}};var webapp_electron_shell={openExternal:function(a){window.open(a)}};var webapp_fs={existsSync:function(b){var a=false;$.ajax({url:b,complete:function(d,c){a=(c=="success")},async:false});return a},readFileSync:function(b){var a="";$.ajax({url:b,success:function(d,c){a=d},async:false});return a},writeFile:function(b,a,c){},writeFileSync:function(b,a){},mkdir:function(a){},mkdirSync:function(a){},statSync:function(a){return{mtimeMs:0}},unlink:function(a){}};var webapp_electron={remote:webapp_electron_remote,ipcRenderer:webapp_electron_ipcRenderer,shell:webapp_electron_shell};var webapp_modules={electron:webapp_electron,fs:webapp_fs};var require=function(a){return webapp_modules[a]};function electron_web_init(){var a=window.navigator.userAgent.toLowerCase();if(a.indexOf("windows")!=-1){process.platform="win32";process.device="windows"}else{process.platform="darwin";if(a.indexOf("iphone")!=-1){process.device="iphone"}else{if(a.indexOf("ipad")!=-1){process.device="ipad"}else{if(a.indexOf("mac")!=-1){process.device="mac"}else{if(a.indexOf("android")!=-1){process.device="android"}}}}}document.addEventListener("keyup",function(b){main.handleShortcutKeyOperation(b)})};WebAppMenu=defineClass({superClass:UITableView,init:function(g){UITableView.call(this);this.mMenu=g;this.mMenuArray=[];var e=[];var a=this;var b=0;var f="";g.submenu.forEach(function(h){if(h.type=="separator"){a.mMenuArray.push(e);e=[]}else{h.parent=g;e.push(h);b+=1;var i=h.label+a.acceleratorForShort(h.accelerator);if(i.length>f.length){f=i}}});if(e.length>0){this.mMenuArray.push(e)}var d=new UILabel();d.setFontSize("12px");d.setText(f);d.sizeToFit();var c=UIView.DarkMode;this.setRowHeight(35);this.setFrame(new CGRect(0,0,d.width()+70,this.rowHeight()*b));this.setBackgroundColor(c?"#282828":"#f0f0f0");this.setDataSource(this);this.setDelegate(this);this.reloadData();this.layer().css("border-style","solid");this.layer().css("border-color",c?"#535353":"#d2d2d2");this.layer().css("border-width","1px")},menu:function(){return this.mMenu},numberOfSectionsInTableView:function(a){return this.mMenuArray.length},tableViewNumberOfRowsInSection:function(a,b){return this.mMenuArray[b].length},tableViewCellForRowAtIndexPath:function(b,c){var g=this.mMenuArray[c.section];var f=g[c.row];var a=new UITableViewCell();a.textLabel().setFontSize("13px");a.textLabel().setText(f.label);if(f.accelerator){var e=this.acceleratorForShort(f.accelerator);a.detailTextLabel().setFontSize("12px");a.detailTextLabel().setText(e)}var d=UIView.DarkMode;if(f.hasOwnProperty("enabled")&&!f.enabled){a.textLabel().setTextColor("#aaaaaa");a.detailTextLabel().setTextColor("#aaaaaa")}else{a.textLabel().setTextColor(d?"white":"black");a.detailTextLabel().setTextColor(d?"white":"black")}if(f.type=="checkbox"&&f.checked){a.accessoryView().setImage(new UIImage("res/web_menu_checkbox.png",20,20))}if(c.row<g.length-1){a.setSeparatorVisible(false)}else{a.setSeparatorColor(d?"#505050":"#E3E3E3")}if(f.submenu){a.setAccessoryType(UITableViewCell.AccessoryType.DisclosureIndicator)}return a},tableViewDidSelectRowAtIndexPath:function(b,c){var e=this.mMenuArray[c.section][c.row];if(e.submenu){var a=b.cellForRowAtIndexPath(c);var d=new CGPoint(a.width(),0);WebAppMenuManager.defaultManager().showMenu(e,a,d,true)}else{if(e.click){e.click()}WebAppMenuManager.defaultManager().dismissMenu()}},acceleratorForShort:function(a){var b="";if(a){if(process.platform=="darwin"&&process.device!="android"){b=a.replace("CommandOrControl+","⌃").replace("Shift+","⇧").replace("Alt+","⌥").replace("Backspace","⌫").replace("Return","↩︎").replace("Plus","+︎")}else{b=a.replace("CommandOrControl","Ctrl")}}return b}});WebAppMenuBar=defineClass({superClass:UIView,init:function(){UIView.call(this)},setTemplate:function(c){var b=this.mTemplate;this.mTemplate=c;if(!b||!c||c.length!=b.length){this.reload()}else{for(var a=0;a<c.length;a++){var e=c[a];var d=b[a];if(e.label!=d.label){this.reload();return}}}},reload:function(){var d=this.subviews();d.forEach(function(e){e.removeFromSuperview()});var c=UIView.DarkMode;this.setBackgroundColor(c?"#413d39":"#ececec");this.mMenuBtns=[];if(this.mTemplate){var a=10;var b=this;this.mTemplate.forEach(function(e){let btn=new UIButton();btn.setBackgroundColorOnState(c?"#413d39":"#ececec",UIControl.State.Normal);btn.setBackgroundColorOnState("#cccccc",UIControl.State.Highlighted);btn.setTitle(e.label,UIControl.State.Normal);btn.setTitleColor(c?"white":"black",UIControl.State.Normal);btn.titleLabel().setFontSize("13px");btn.sizeToFit();btn.setFrame(new CGRect(a,0,Math.max(50,btn.width()),b.height()));b.addSubview(btn);a+=btn.width();btn.addTarget(function(){b.menuDidClick(btn)},UIControl.Events.TouchUpInside);b.mMenuBtns.push(btn)})}},menuDidClick:function(b){var c=new CGPoint(0,b.height());var a=this.mMenuBtns.indexOf(b);var d=this.mTemplate[a];WebAppMenuManager.defaultManager().showMenu(d,b,c)}});WebAppMenuManager=defineClass({statics:{defaultManager:function(){if(!WebAppMenuManager.object){WebAppMenuManager.object=new WebAppMenuManager()}return WebAppMenuManager.object}},init:function(){this.mMenuBar=new WebAppMenuBar();this.mCurrentMenuViews=[]},menuBar:function(){return this.mMenuBar},setMenuTemplate:function(a){this.mMenuBar.setTemplate(a)},showMenu:function(g,f,e){var d=this;if(!this.mMenuWindow){this.mMenuWindow=new UIWindow();var h=new UIView(this.mMenuWindow.bounds());this.mMenuWindow.addSubview(h);h.layer().click(function(){d.dismissMenu()})}var b=this.mCurrentMenuViews.slice();b.forEach(function(j){var i=true;var k=g.parent;while(k){if(k==j.menu()){i=false;break}k=k.parent}if(i){j.removeFromSuperview();d.mCurrentMenuViews.remove(j)}});this.mMenuWindow.setHidden(false);var a=new WebAppMenu(g);var c=this.mMenuWindow.convertPointFromView(e,f);a.setPosition(c);this.mMenuWindow.addSubview(a);this.mCurrentMenuViews.push(a)},menuViews:function(){return this.mCurrentMenuViews},dismissMenu:function(){this.mMenuWindow.setHidden(true);this.mCurrentMenuViews.forEach(function(a){a.removeFromSuperview()});this.mCurrentMenuViews=[]}});GraphFileDidRenameNotification="GraphFileDidRenameNotification";GraphFileListController=defineClass({superClass:UIViewController,init:function(a){if(a){this.mDir=a;this.mRoot=false}else{this.mDir=new MindFile("",true);this.mRoot=true}this.mFileList=[]},viewDidLoad:function(){UIViewController.prototype.viewDidLoad.call(this);if(this.mRoot){this.setTitle(LOCAL("Select File"));var b=this;var c=new UIBarButtonItem(LOCAL("Back"),null,function(){b.handler.onMindFileOpen();NSNotificationCenter.defaultCenter().removeObserver(b);b.dismissViewController(false)});this.navigationItem().setLeftBarButtonItems([c])}else{this.setTitle(this.mDir.name())}this.navigationItem().setBackBarButtonItem(new UIBarButtonItem(LOCAL("Back"),null,null));var a=new UIBarButtonItem(LOCAL("Local Files"),null,function(){});this.navigationItem().setRightBarButtonItems([a]);this.installFileInputElement();this.mTableView=new UITableView(this.view().bounds());this.mTableView.setAutoresizingMask(UIView.Autoresizing.FlexibleSize);this.mTableView.setDataSource(this);this.mTableView.setDelegate(this);this.mTableView.layer().addClass("scrollView");this.mTableView.layer().css("scrollbar-width","auto");this.mTableView.layer().css("-ms-overflow-style","auto");this.view().addSubview(this.mTableView);NSNotificationCenter.defaultCenter().addObserver(this,this.handleUserHasLogin,UserHasLoginNotification);this.view().layer().mousedown(function(){UIMenuController.sharedMenuController().setMenuVisible(false)});this.loadUserFileDir()},viewDidDisappear:function(){UIViewController.prototype.viewDidDisappear.call(this);UIMenuController.sharedMenuController().setMenuVisible(false)},handleUserHasLogin:function(a){this.loadUserFileDir()},loadUserFileDir:function(){var b=UserSessionManager.defaultManager();var a=this;b.listFiles(this.mDir,function(d,e){if(d==0){a.mFileList=e;a.mTableView.reloadData()}else{if(d==2){b.loadFiles()}var c=new UILabel(a.view().bounds());c.setAutoresizingMask(UIView.Autoresizing.FlexibleSize);c.setFontSize(15);c.setTextAlignment("center");c.setTextColor(UIColor.lightGrayColor);c.setText(LOCAL("Failed to load the file list, please try again."));a.view().addSubview(c)}})},forwardUserLogin:function(){var a=new LoginViewController();this.navigationController().pushViewController(a,false)},scrollViewDidScroll:function(a){UIMenuController.sharedMenuController().setMenuVisible(false)},numberOfSectionsInTableView:function(a){return 1},tableViewNumberOfRowsInSection:function(a,b){return this.mFileList.length},tableViewCellForRowAtIndexPath:function(b,f){var a=new UITableViewCell();var g=this.mFileList[f.row];var e=g.name();if(g.isDir()){a.textLabel().setText(e);a.imageView().setImage(new UIImage("res/folder.png",30,30))}else{var d=e.indexOf(".mm");if(d>=0){a.textLabel().setText(e.substring(0,d))}else{a.textLabel().setText(e)}}var c=this;a.layer().contextmenu(function(){c.showContextMenu(g,a);if(c.mSelectedTimeoutId){clearTimeout(c.mSelectedTimeoutId);c.mSelectedTimeoutId=null}else{c.mShowingContextMenu=true}return false});return a},showContextMenu:function(e,b){var d=this;var f=new UIMenuItem(LOCAL("Delete"),function(){d.onMenuItemDelete(e)});var c=new UIMenuItem(LOCAL("Rename"),function(){d.onMenuItemRename(e)});var a=new UIMenuItem(LOCAL("Save As"),function(){d.onMenuItemSaveAs(e)});var g=UIMenuController.sharedMenuController();if(e.isDir()){g.setMenuItems([f,c])}else{g.setMenuItems([f,c,a])}g.setMenuVisible(false);g.setTargetRectInView(new CGRect(b.width()/2,5,1,1),b);g.setMenuVisible(true)},onMenuItemDelete:function(b){var a=new UIAlertView(LOCAL("Tips"),LOCAL("Delete this file ?"),LOCAL("Cancel"),LOCAL("Confirm"));a.setDelegate(this);a.setTag(100);a.setUserData(b);a.show()},onMenuItemRename:function(c){var b=new UIAlertView(LOCAL("Enter Title"),null,LOCAL("Cancel"),LOCAL("Confirm"));b.setTag(101);b.setUserData(c);b.setDelegate(this);b.setAlertViewStyle(UIAlertView.Style.PlainTextInput);b.show();var d=b.textFieldAtIndex(0);var a=c.name();if(!c.isDir()){a=a.substring(0,a.lastIndexOf("."))}d.setPlaceholder(a)},onMenuItemSaveAs:function(c){var b=new UIAlertView(LOCAL("Enter Title"),null,LOCAL("Cancel"),LOCAL("Confirm"));b.setTag(102);b.setUserData(c);b.setDelegate(this);b.setAlertViewStyle(UIAlertView.Style.PlainTextInput);b.show();var d=b.textFieldAtIndex(0);var a=c.name();if(!c.isDir()){a=a.substring(0,a.lastIndexOf("."))}d.setPlaceholder(a)},alertViewClickedButtonAtIndex:function(e,c){if(e.tag()==100){if(c==1){var d=e.userData();var f=new HttpRequest("fileDelete",{path:encodeURIComponent(d.path())});var a=this;HttpAjax.sendRequest(f,function(h,k){var i=-1;if(h=="success"){var l=JSON.parse(k);i=l.rtn;if(i==0){a.mFileList.remove(d);a.mTableView.reloadData();return}}var j=new UIAlertView(LOCAL("Tips"),LOCAL("Delete file failed, please try again."),LOCAL("OK"))})}}else{if(e.tag()==101){if(c==1){var b=e.textFieldAtIndex(0).text();if(b){b=b.replace(/<|>|:|\*|\?|\\|\||"|\n/g,"");if(b.length>0){var d=e.userData();if(!d.isDir()){var g=d.name();b+=g.substring(g.lastIndexOf("."))}var f=new HttpRequest("fileRename",{path:encodeURIComponent(d.path()),name:b});var a=this;HttpAjax.sendRequest(f,function(i,l){var j=-1;if(i=="success"){var n=JSON.parse(l);if(n.rtn==0){var o=d.path();d.setName(b);var m=d.path();a.mTableView.reloadData();var h={old:o,"new":m};NSNotificationCenter.defaultCenter().postNotificationName(GraphFileDidRenameNotification,null,h);return}}var k=new UIAlertView(LOCAL("Tips"),LOCAL("Rename file failed, please try again."),LOCAL("OK"))})}}}}else{if(e.tag()==102){if(c==1){var b=e.textFieldAtIndex(0).text();if(b){b=b.replace(/<|>|:|\*|\?|\\|\||"|\n/g,"");if(b.length>0){var d=e.userData();if(!d.isDir()){var g=d.name();b+=g.substring(g.lastIndexOf("."))}var f=new HttpRequest("fileSaveAs",{path:encodeURIComponent(d.path()),name:b});var a=this;HttpAjax.sendRequest(f,function(h,n){var j=-1;if(h=="success"){var o=JSON.parse(n);if(o.rtn==0){var m=new MindFile(b,d.isDir(),d.isLocal());a.mDir.addFile(m);var i=0;var l=false;a.mFileList.forEach(function(p){if(!l){if(!p.isDir()){a.mFileList.splice(i,0,m);l=true}i+=1}});if(!l){a.mFileList.push(m)}a.mTableView.reloadData();return}}var k=new UIAlertView(LOCAL("Tips"),LOCAL("Save as file failed, please try again."),LOCAL("OK"))})}}}}}}},tableViewDidSelectRowAtIndexPath:function(a,c){var b=this;if(this.mShowingContextMenu){this.mShowingContextMenu=false;return}this.mSelectedTimeoutId=setTimeout(function(){b.didSelectRowAtIndexPath(a,c)},200)},didSelectRowAtIndexPath:function(a,c){var e=this.mFileList[c.row];if(e.isDir()){var f=new GraphFileListController(e);f.handler=this.handler;this.navigationController().pushViewController(f,false)}else{var b=this;var d=UserSessionManager.defaultManager();d.getFile(e.path(),function(g,i){if(g==0){e.setData(i);b.handler.onMindFileOpen(e);b.dismissViewController(false)}else{var h=new UIAlertView(LOCAL("Tips"),LOCAL("Failed to open file."),LOCAL("OK"));h.show()}})}},installFileInputElement:function(){var c=this.navigationController().navigationBar().rightBarButtonAtIndex(0);var b=$("<input id='browser' type='file' accept='.mm,.xmind'/>");b.css({position:"absolute",left:0,top:0,width:c.width(),height:c.height(),opacity:0});c.layer().append(b);var a=this;b.change(function(){if(this.files.length>0){var g=b.val();var e=this.files[0];if(/.+\.xmind/.test(g)){var f;zip.createReader(new zip.BlobReader(e),function(h){h.getEntries(function(i){f=i;f.forEach(function(j){if(j.filename=="content.xml"){j.getData(new zip.TextWriter(),function(n){var l=g.lastIndexOf("\\");var k=g.substring(l+1);var m=new MindFile(k,false,true);m.setData(n);a.handler.onMindFileOpen(m);a.dismissViewController(false)})}})})},function(h){console.log("unzip error: "+h)})}else{var d=new FileReader();d.readAsText(e);d.onload=function(){var i=g.lastIndexOf("\\");var h=g.substring(i+1);var j=new MindFile(h,false,true);j.setData(this.result);a.handler.onMindFileOpen(j);a.dismissViewController(false)}}}})}});/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/src/FileSaver.js */
;var saveAs=saveAs||(function(h){if(typeof h==="undefined"||typeof navigator!=="undefined"&&/MSIE [1-9]\./.test(navigator.userAgent)){return}var r=h.document,m=function(){return h.URL||h.webkitURL||h},p=r.createElementNS("http://www.w3.org/1999/xhtml","a"),f="download" in p,k=function(t){var s=new MouseEvent("click");t.dispatchEvent(s)},b=/constructor/i.test(h.HTMLElement)||h.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent),o=h.setImmediate||h.setTimeout,n=function(s){o(function(){throw s},0)},c="application/octet-stream",i=1000*40,j=function(t){var s=function(){if(typeof t==="string"){m().revokeObjectURL(t)}else{t.remove()}};setTimeout(s,i)},q=function(t,s,w){s=[].concat(s);var v=s.length;while(v--){var x=t["on"+s[v]];if(typeof x==="function"){try{x.call(t,w||t)}catch(u){n(u)}}}},g=function(s){if(/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)){return new Blob([String.fromCharCode(65279),s],{type:s.type})}return s},e=function(s,t,u){if(!u){s=g(s)}var w=this,z=s.type,v=z===c,x,y=function(){q(w,"writestart progress write writeend".split(" "))},A=function(){if((l||(v&&b))&&h.FileReader){var B=new FileReader();B.onloadend=function(){var E=l?B.result:B.result.replace(/^data:[^;]*;/,"data:attachment/file;");var D=h.open(E,"_blank");if(!D){h.location.href=E}E=undefined;w.readyState=w.DONE;y()};B.readAsDataURL(s);w.readyState=w.INIT;return}if(!x){x=m().createObjectURL(s)}if(v){h.location.href=x}else{var C=h.open(x,"_blank");if(!C){h.location.href=x}}w.readyState=w.DONE;y();j(x)};w.readyState=w.INIT;if(f){x=m().createObjectURL(s);o(function(){p.href=x;p.download=t;k(p);y();j(x);w.readyState=w.DONE},0);return}A()},d=e.prototype,a=function(t,u,s){return new e(t,u||t.name||"download",s)};if(typeof navigator!=="undefined"&&navigator.msSaveOrOpenBlob){return function(t,u,s){u=u||t.name||"download";if(!s){t=g(t)}return navigator.msSaveOrOpenBlob(t,u)}}d.abort=function(){};d.readyState=d.INIT=0;d.WRITING=1;d.DONE=2;d.error=d.onwritestart=d.onprogress=d.onwrite=d.onabort=d.onerror=d.onwriteend=null;return a}(typeof self!=="undefined"&&self||typeof window!=="undefined"&&window||this));MindNode=defineClass({statics:{MIN_TEXT_LEN:100,MAX_TEXT_LEN:305,MIN_TEXT_HEIGHT:25,DEFAULT_NODE_MARGIN:30,MarkType:{None:0,Highlight:1,StrikeThrough:2,Underline:3,Tick:4,Close:5,Remind:6,Warn:7,Bulb:8,Start:9},Style:{Default:100,WireFrameLine:200,WireFrameLine2:300,WireFrameAll:400,WireFrameVertical:500,WireFrameBracket:600},DisplayStyle:0,DisplayDark:false,MinTextHeightTable:{}},init:function(){this.mID=stringRandom(5);this.mParent=null;this.mRootPoint=new CGPoint();this.mGraphPoint=new CGPoint();this.mChildren=[];this.mChildren2=[];this.mStyles2={};this.mTextEdgeInsets=new UIEdgeInsets(12,0,6,15);this.mImageEdgeInsets=new UIEdgeInsets(16,0,10,15);var c=displayStyleBasic();this.mLineWidth=this.calculateLineWidth();this.mAddBtn=new UIButton(new CGRect(0,0,30,30));var b=this;this.mAddBtn.addTarget(function(d){b.onAddBtnClick(d)},UIControl.Events.TouchUpInside);this.mAddBtn.layer().mouseover(function(d){b.textViewDidMouseOver()});this.mAddBtn.layer().mouseleave(function(d){b.textViewDidMouseLeave()});var a=NSUserDefaults.standardUserDefaults().objectForKey("hideAddBtn");this.setAddBtnAutoHidden(a);this.mMaxWidthLine=0;this.mTextView=new UITextView();this.mTextView.setTextColor(this.textColor());this.updateTextFontSize();this.mOriginText=this.mTextView.text();this.mFirstKeyDown=true;this.mTextView.layer().keydown(function(d){var f=b.mTextView.text();if(b.mFirstKeyDown){if(f==""&&d.which==8){b.textViewDeleteKeyEnter()}}b.mFirstKeyDown=false;if(f!=b.mOriginText){b.mOriginText=f;b.textViewDidChange()}});this.mTextView.layer().keyup(function(d){b.mFirstKeyDown=true;var f=b.mTextView.text();if(f!=b.mOriginText){b.mOriginText=f;b.textViewDidChange()}});this.mTextView.layer().focusin(function(){b.textViewDidBeginEditing()});this.mTextView.layer().focusout(function(){b.textViewDidEndEditing()});this.mTextView.layer().contextmenu(function(d){d.preventDefault();b.textViewDidContextMenu()});this.mTextView.layer().mouseover(function(d){b.textViewDidMouseOver()});this.mTextView.layer().mouseleave(function(d){b.textViewDidMouseLeave()});this.mTextView.layer()[0].ondrop=function(d){b.handleFileCopyEvent(d,true)};this.mTextView.layer()[0].onpaste=function(d){b.handleFileCopyEvent(d,false)};this.mTextView.layer().css("border","0");this.mTextView.layer().css("background-image","none");this.mTextView.layer().css("outline","none");this.mTextView.layer().css("resize","none");this.mTextView.setBackgroundColor("transparent");this.mShrink=false;this.mLeft=false;this.mChildrenTotalHeight=0;this.mChildrenTotalHeightTop=0;this.mChildrenTotalHeightBottom=0;this.mChildrenTotalHeight2=0;this.mChildrenTotalHeightTop2=0;this.mChildrenTotalHeightBottom2=0;this.mExpandLeftEnable=(c==MindNode.Style.WireFrameLine||c==MindNode.Style.WireFrameLine2||c==MindNode.Style.WireFrameAll);this.mLinkPaths=[];this.mSummaries=[];this.mMarkType=0;this.mStyleContext=new MindStyleContext();this.handleBranchStretchEvent()},initWithCoder:function(h){var q=h.decodeObjectForKey("ID");if(q){this.mID=q}var t=h.decodeObjectForKey("rootPoint");if(t){this.mRootPoint=t}this.mLineColorHex=h.decodeObjectForKey("lineColor");this.mExpandLeftEnable=h.decodeBoolForKey("expandLeftEnable");var f=h.decodeBoolForKey("isLeft");this.setLeft(f);var z=h.decodeBoolForKey("shrink");var p=this;if(z){this.mShrinkChildrenData=h.objectForKey("children")}else{var e=h.decodeObjectForKey("children");if(e!=null){this.mChildren=e;e.forEach(function(A){A.mParent=p;A.setLeft(p.mLeft)})}}var k=h.decodeObjectForKey("children2");if(k!=null&&k.length>0){this.mChildren2=k;k.forEach(function(A){A.mParent=p;A.setLeft(true)});this.mExpandLeftEnable=true}if(z){this.setShrink(true)}this.mMaxWidthLine=h.decodeFloatForKey("maxWidthLine");var n=h.decodeObjectForKey("text");this.mTextView.setText(n);this.mOriginText=n;var o=this.textViewFitSize();this.setTextViewFrame(new CGRect(0,0,o.width,o.height));this.setTextViewFrame(new CGRect(0,0,o.width,o.height));var r=h.decodeObjectForKey("remark");if(r){this.setRemark(r)}var s=h.decodeBoolForKey("remarkDisplay");if(s){this.setRemarkDisplay(true)}this.mImageResize=h.decodeObjectForKey("imageResize");var j=h.decodeObjectForKey("imageSize");if(j){var v=h.decodeObjectForKey("imageName");if(v){this.setImage(v,j)}}var u=h.decodeObjectForKey("linkPaths");if(u){this.mLinkPaths=u;u.forEach(function(B){B.setNode(p);var A=B.textView();if(A){A.layer().click(function(){if(p.mDelegate){p.mDelegate.mindNodeLinkTextViewDidBeginEdit(p,B)}})}})}else{var a=h.decodeObjectForKey("linkedNodeIDs");if(a){for(var l in a){this.attachLinkTo(l,null)}}}var g=h.decodeObjectForKey("markType");if(g){var c=parseInt(g);if(c>=1000){this.setMarkType(c)}else{if(c>=4){this.setMarkType(c+1011)}}}var d=h.decodeObjectForKey("url");if(d){this.setURL(d)}var x=h.decodeObjectForKey("fileName");if(x){this.setFileName(x)}var i=h.decodeObjectForKey("summaries");if(i){this.mSummaries=i;i.forEach(function(A){A.setNode(p);var B=A.textView();if(B){B.layer().click(function(){if(p.mDelegate){p.mDelegate.mindNodeSummarizedViewDidBeginEdit(p,A)}})}})}else{var w=h.decodeObjectForKey("summarizedNodeID");if(w){var y=h.decodeObjectForKey("summarizedText");this.summarizeToNid(w,y)}}var b=h.decodeObjectForKey("latex");if(b){this.setLatex(b)}var m=h.decodeObjectForKey("style2");if(m){this.mStyles2=m;this.praseRichTextStyles(m)}this.mSelectedRange=h.decodeObjectForKey("selectedRange");this.mAudioName=h.decodeObjectForKey("audioName");this.mLinkedText=h.decodeObjectForKey("linkedText");this.mLinkedFile=h.decodeObjectForKey("linkedFile");this.mFontSize=h.decodeObjectForKey("fontSize");this.mStyles=h.decodeObjectForKey("style");this.mPhotoNames=h.decodeObjectForKey("photoNames");this.mRemarkStyles=h.decodeObjectForKey("remarkStyle")},encodeWithCoder:function(a){a.encodeObjectForKey(this.mID,"ID");if(this.mRootPoint.x!=0||this.mRootPoint.y!=0){a.encodeObjectForKey(this.mRootPoint,"rootPoint")}a.encodeObjectForKey(this.mLineColorHex,"lineColor");if(this.mShrinkChildrenData){a.setObjectForKey(this.mShrinkChildrenData,"children")}else{if(this.mChildren.length>0){a.encodeObjectForKey(this.mChildren,"children")}}if(this.mChildren2.length>0){a.encodeObjectForKey(this.mChildren2,"children2")}a.encodeObjectForKey(this.mTextView.text(),"text");if(this.mShrink){a.encodeObjectForKey(this.mShrink,"shrink")}if(this.mLeft){a.encodeObjectForKey(this.mLeft,"isLeft")}if(this.mExpandLeftEnable){a.encodeObjectForKey(this.mExpandLeftEnable,"expandLeftEnable")}a.encodeObjectForKey(this.mRemark,"remark");if(this.mImageName){a.encodeObjectForKey(this.mImageName,"imageName");a.encodeObjectForKey(this.mImageSize,"imageSize");a.encodeObjectForKey(this.mImageResize,"imageResize")}if(this.mLinkPaths.length>0){a.encodeObjectForKey(this.mLinkPaths,"linkPaths")}if(this.mMarkType!=0){a.encodeObjectForKey(this.mMarkType,"markType")}a.encodeObjectForKey(this.mURL,"url");a.encodeObjectForKey(this.mFileName,"fileName");if(this.mSummaries.length>0){a.encodeObjectForKey(this.mSummaries,"summaries")}a.encodeObjectForKey(this.mSelectedRange,"selectedRange");a.encodeObjectForKey(this.mAudioName,"audioName");a.encodeObjectForKey(this.mLinkedText,"linkedText");a.encodeObjectForKey(this.mLinkedFile,"linkedFile");a.encodeObjectForKey(this.mFontSize,"fontSize");a.encodeObjectForKey(this.mStyles,"style");a.encodeObjectForKey(this.mRemarkStyles,"remarkStyle");if(this.mMaxWidthLine>0){a.encodeObjectForKey(this.mMaxWidthLine,"maxWidthLine")}a.encodeObjectForKey(this.mPhotoNames,"photoNames");a.encodeObjectForKey(this.mLatex,"latex");if(Object.keys(this.mStyles2).length>0){a.encodeObjectForKey(this.mStyles2,"style2")}if(this.mRemarkDisplay){a.encodeBoolForKey(true,"remarkDisplay")}},lineColorHex:function(){return this.mLineColorHex},setLineColorHex:function(a){this.mLineColorHex=a},rootPoint:function(){return new CGPoint(this.mRootPoint)},presentPoint:function(){return new CGPoint(this.mGraphPoint)},isRoot:function(){return this.mRoot},setRoot:function(b){this.mRoot=b;if(b){this.mTextEdgeInsets.left=15;this.mImageEdgeInsets.left=15;if(this.mTextView.width()<this.minTextWidth()){var c=this.mTextView.frame();c.size.width=this.minTextWidth();this.mTextView.setFrame(c)}this.mTextView.setTextAlignment("center");if(this.mAddBtn2==null){this.mAddBtn2=new UIButton(new CGRect(0,0,30,30));this.mAddBtn2.setImage(new UIImage("res/btn_add.png",24,24),UIControl.State.Normal);var a=this;this.mAddBtn2.addTarget(function(d){a.onAddBtnClick(d)},UIControl.Events.TouchUpInside);this.mAddBtn2.layer().mouseover(function(d){a.textViewDidMouseOver()});this.mAddBtn2.layer().mouseleave(function(d){a.textViewDidMouseLeave()});this.mAddBtn2.setHidden(!this.mExpandLeftEnable)}}else{this.mTextEdgeInsets.left=0;this.mImageEdgeInsets.left=0;this.mTextView.setTextAlignment(this.textAlign())}this.setAddBtnAutoHidden(this.mAddBtnAutoHidden);this.updateTextFontSizeForWireFrame()},setRootPoint:function(a){this.mRootPoint=new CGPoint(a)},setGraphPoint:function(a){this.mGraphPoint=new CGPoint(a);this.setUIViewPosWithGraphPoint(a)},graphPoint:function(){return new CGPoint(this.mGraphPoint)},minTextWidth:function(){return this.mRoot?MindNode.MIN_TEXT_LEN+10:MindNode.MIN_TEXT_LEN},maxTextWidth:function(){var a=AppSettings.defaultSettings().maxWidthPerLine(this.fontSize());return Math.max(this.mMaxWidthLine,a)},updateGraphPointX:function(){var a=this.graphPoint();a.x=this.contentSize().width;if(this.mParent&&!this.mRoot){a.x+=this.marginHorizontal()}if(this.mLeft){a.x*=-1}this.setGraphPoint(a)},layout:function(){if(this.mRoot){this.setGraphPoint(new CGPoint(this.contentSize().width,0));this.calculateChildrenTotalHeight();this.calculateChildrenTotalHeight2()}this.layoutSubnodes();this.updateLineWidthAndButton(false)},layoutSubnodes:function(){if(!this.mShrink){this.layoutSubnodes2(false);if(this.mRoot){this.layoutSubnodes2(true)}}},layoutSubnodes2:function(d){var b=-(d?this.mChildrenTotalHeightTop2:this.mChildrenTotalHeightTop);var c=d?this.mChildren2.slice():this.mChildren.slice();var a=this;c.forEach(function(h){var g=new CGPoint();var f=h.contentSize();g.x=f.width+h.marginHorizontal();var e=h.isWireFrameStyle();if(e){g.y=b+Math.max(f.height/2,h.mChildrenTotalHeightTop)}else{if(c.length==1){g.y=0}else{g.y=b+Math.max(f.height,h.mChildrenTotalHeightTop)}}if(a.mLeft||d){g.x*=-1}h.setGraphPoint(g);h.layout();if(e){b=g.y+Math.max(f.height/2,h.mChildrenTotalHeightBottom)}else{b=g.y+h.mChildrenTotalHeightBottom}b+=e?20:10})},updateLinkTextViewPosition:function(){if(this.mLinkPaths.length>0){var b;var c=7;if(this.imageView()){if(this.isLeft()){b=new CGPoint(this.imageView().left()-c,this.imageView().center().y)}else{b=new CGPoint(this.imageView().right()+c,this.imageView().center().y)}}else{if(this.latexView()){if(this.isLeft()){b=new CGPoint(this.latexView().left()-c,this.latexView().center().y)}else{b=new CGPoint(this.latexView().right()+c,this.latexView().center().y)}}else{if(this.isLeft()){b=new CGPoint(this.textView().left()-c,this.textView().center().y)}else{b=new CGPoint(this.textView().right()+c,this.textView().center().y)}}}var a=this;this.mLinkPaths.forEach(function(g){var p=g.textView();if(p){var d=g.toNodeID();var j=a.rootParent().findNodeWithID(d);if(j!=null){var o;if(j.imageView()){if(j.isLeft()){o=new CGPoint(j.imageView().left()-c,j.imageView().center().y)}else{o=new CGPoint(j.imageView().right()+c,j.imageView().center().y)}}else{if(j.latexView()){if(j.isLeft()){o=new CGPoint(j.latexView().left()-c,j.latexView().center().y)}else{o=new CGPoint(j.latexView().right()+c,j.latexView().center().y)}}else{if(j.isLeft()){o=new CGPoint(j.textView().left()-c,j.textView().center().y)}else{o=new CGPoint(j.textView().right()+c,j.textView().center().y)}}}var q;if(j.isLeft()){q=new CGPoint(Math.min(b.x,o.x)-100,(b.y+o.y)/2)}else{q=new CGPoint(Math.max(b.x,o.x)+100,(b.y+o.y)/2)}var m=new CGPoint(q.x+g.ctrlPoint().x,q.y+g.ctrlPoint().y);var k=-1,h=-1;var e=1/(Math.abs(o.y-b.y)/6);for(var f=0;f<=1.01;f+=e){var n=(1-f)*(1-f)*b.x+2*(1-f)*f*m.x+f*f*o.x;var l=(1-f)*(1-f)*b.y+2*(1-f)*f*m.y+f*f*o.y;if(k==-1&&h==-1){k=n;h=l}else{if(Math.abs(n-m.x)<Math.abs(k-m.x)){k=n;h=l}}}var r=p.size();if(k>m.x){p.setPosition(new CGPoint(k-r.width-10,h-r.height/2))}else{p.setPosition(new CGPoint(k+10,h-r.height/2))}p.setHidden(false)}else{p.setHidden(true)}}})}},updateSummarizedTextViewPosition:function(){if(this.mSummaries.length>0){var a=this;this.mSummaries.forEach(function(d){var c=a.rootParent().findNodeWithID(d.toNodeID());if(c!=null){var b=a.summarizedBoundsWithNode(c);b.origin.x+=d.offset().x;b.origin.y+=d.offset().y;var i=b.origin;var h=new CGPoint(i.x,i.y+b.size.height);var j=d.textView().frame().size;if(j.width==0||j.height==0){j=d.textView().sizeThatFits(new CGSize(MindNode.MAX_TEXT_LEN,Number.MAX_VALUE))}if(a.isLeft()){var g=new CGPoint(Math.min(i.x,h.x)-24,Math.min(i.y,h.y));var f=new CGPoint(Math.min(i.x,h.x)-24,Math.max(i.y,h.y));var e=new CGPoint(g.x-20,(g.y+f.y)/2);d.textView().setFrame(new CGRect(e.x-j.width-5,e.y-j.height/2,j.width,j.height))}else{var g=new CGPoint(Math.max(i.x,h.x)+24,Math.min(i.y,h.y));var f=new CGPoint(Math.max(i.x,h.x)+24,Math.max(i.y,h.y));var e=new CGPoint(g.x+20,(g.y+f.y)/2);d.textView().setFrame(new CGRect(e.x+5,e.y-j.height/2,j.width,j.height))}d.setSummarizedTextBounds(b);d.textView().setHidden(false)}else{d.textView().setHidden(true)}})}},traverseUpdateRelatedUIViews:function(){this.updateRelatedUIViews();if(!this.mShrink){this.mChildren.forEach(function(a){a.traverseUpdateRelatedUIViews()});this.mChildren2.forEach(function(a){a.traverseUpdateRelatedUIViews()})}},updateRelatedUIViews:function(){this.updateSummarizedTextViewPosition();this.updateLinkTextViewPosition()},calculateChildrenTotalHeight:function(){if(this.mShrink){this.mChildrenTotalHeight=0;this.mChildrenTotalHeightTop=0;this.mChildrenTotalHeightBottom=0}else{var b=0;var c=0;var a=false;this.mChildren.forEach(function(k){var i=k.calculateChildrenTotalHeight();var j=k.contentSize();a=k.isWireFrameStyle();if(a){b+=Math.max(j.height/2,k.mChildrenTotalHeightTop)+Math.max(j.height/2,k.mChildrenTotalHeightBottom)}else{b+=Math.max(j.height,k.mChildrenTotalHeightTop)+k.mChildrenTotalHeightBottom}if(c>=1){b+=a?20:10}c+=1});if(b>0){if(a){this.mChildrenTotalHeightTop=b/2;this.mChildrenTotalHeightBottom=b/2}else{if(this.mChildren.length==1){var g=this.mChildren[0];this.mChildrenTotalHeightTop=Math.max(g.contentSize().height,g.mChildrenTotalHeightTop);this.mChildrenTotalHeightBottom=g.mChildrenTotalHeightBottom}else{var f=this.mChildren[parseInt(this.mChildren.length/2)];var d=f.minTextHeight()+f.mTextEdgeInsets.top+f.mTextEdgeInsets.bottom;var e=d/2;this.mChildrenTotalHeightTop=b/2+e;this.mChildrenTotalHeightBottom=b/2-e}}}else{this.mChildrenTotalHeightTop=0;this.mChildrenTotalHeightBottom=0}this.mChildrenTotalHeight=this.mChildrenTotalHeightTop+this.mChildrenTotalHeightBottom}return this.mChildrenTotalHeight},calculateChildrenTotalHeight2:function(){if(this.mShrink){this.mChildrenTotalHeight2=0;this.mChildrenTotalHeightTop2=0;this.mChildrenTotalHeightBottom2=0}else{var b=0;var c=0;var a=false;this.mChildren2.forEach(function(k){var i=k.calculateChildrenTotalHeight();var j=k.contentSize();a=k.isWireFrameStyle();if(a){b+=Math.max(j.height/2,k.mChildrenTotalHeightTop)+Math.max(j.height/2,k.mChildrenTotalHeightBottom)}else{b+=Math.max(j.height,k.mChildrenTotalHeightTop)+k.mChildrenTotalHeightBottom}if(c>=1){b+=a?20:10}c+=1});if(b>0){if(a){this.mChildrenTotalHeightTop2=b/2;this.mChildrenTotalHeightBottom2=b/2}else{if(this.mChildren2.length==1){var g=this.mChildren2[0];this.mChildrenTotalHeightTop2=Math.max(g.contentSize().height,g.mChildrenTotalHeightTop);this.mChildrenTotalHeightBottom2=g.mChildrenTotalHeightBottom}else{var f=this.mChildren2[parseInt(this.mChildren2.length/2)];var d=f.minTextHeight()+f.mTextEdgeInsets.top+f.mTextEdgeInsets.bottom;var e=d/2;this.mChildrenTotalHeightTop2=b/2+e;this.mChildrenTotalHeightBottom2=b/2-e}}}else{this.mChildrenTotalHeightTop2=0;this.mChildrenTotalHeightBottom2=0}this.mChildrenTotalHeight2=this.mChildrenTotalHeightTop2+this.mChildrenTotalHeightBottom2}return this.mChildrenTotalHeight2},contentSize:function(){var e=0;var b=0;if(this.mImageView){e=this.mImageView.width();b=Math.max(this.mImageView.height(),this.minTextHeight())}if(this.mLatexView){e=Math.max(e,this.mLatexView.width());b+=this.mLatexView.height();if(this.mImageView){b+=this.mImageEdgeInsets.bottom}}if(this.mRemarkView){e=Math.max(e,this.mRemarkView.width());b+=this.mRemarkView.height()}var f;if(e>0){e=Math.max(e,this.minTextWidth());if(this.mTextView.text().length>0||this.mTextView.isFirstResponder()||this.mRemarkView){var d=Math.max(this.mTextView.size().width+this.mTextEdgeInsets.left+this.mTextEdgeInsets.right,e+this.mImageEdgeInsets.left+this.mImageEdgeInsets.right);var a=this.mTextView.size().height+b+this.mImageEdgeInsets.top+this.mTextEdgeInsets.bottom;f=new CGSize(d,a)}else{f=new CGSize(e+this.mImageEdgeInsets.left+this.mImageEdgeInsets.right,b+this.mImageEdgeInsets.top+this.mImageEdgeInsets.bottom)}}else{var c=this.mTextView.size();f=new CGSize(c.width+this.mTextEdgeInsets.left+this.mTextEdgeInsets.right,c.height+this.mTextEdgeInsets.top+this.mTextEdgeInsets.bottom)}if(this.mMarkView!=null){f.width+=this.mMarkView.width()}return f},onAddBtnClick:function(a){if(this.mDelegate){this.mDelegate.mindNodeAddBtnDidClick(this,a)}},isShrink:function(){return this.mShrink},setShrink:function(c){this.mShrink=c;this.setChildrenUIViewHidden(c);if(c){this.mAddBtn.setImage(this.imageForExpandBtn(),UIControl.State.Normal);if(this.mAddBtn2){this.mAddBtn2.setImage(this.imageForExpandBtn(),UIControl.State.Normal)}}else{this.mAddBtn.setImage(this.imageForAddBtn(),UIControl.State.Normal);if(this.mAddBtn2){this.mAddBtn2.setImage(this.imageForAddBtn(),UIControl.State.Normal)}}if(!c&&this.mShrinkChildrenData){var d=new NSKeyedUnarchiver();var b=d.decodeObject(this.mShrinkChildrenData);if(b!=null){this.mChildren=b;var a=this;b.forEach(function(e){e.mParent=a;e.setLeft(a.mLeft)})}if(this.mRoot&&this.isWireFrameStyle()){this.updateTextFontSizeForWireFrame()}if(this.mDelegate){this.mDelegate.mindNodeChildrenDidExpand(this,b)}this.mShrinkChildrenData=null}this.setAddBtnAutoHidden(this.mAddBtnAutoHidden)},isMarked:function(){return this.mMarked},setMarked:function(a){this.mMarked=a;this.mTextView.setTextColor(a?"red":"black")},setChildrenUIViewHidden:function(b){var a=this.mChildren.slice();a=a.concat(this.mChildren2);a.forEach(function(g){var f=g.imageView();if(f){f.setHidden(b)}g.textView().setHidden(b);g.addBtn().setHidden(b);if(g.remarkBtn()){if(b){g.remarkBtn().setHidden(true)}else{g.remarkBtn().setHidden(g.remark()==null)}}if(g.urlBtn()){if(b){g.urlBtn().setHidden(true)}else{g.urlBtn().setHidden(g.url()==null)}}var d=g.markView();if(d){d.setHidden(b)}var c=g.latexView();if(c){c.setHidden(b)}var e=g.remarkView();if(e){e.setHidden(b)}g.linkPaths().forEach(function(h){if(h.textView()){h.textView().setHidden(b)}});g.summaries().forEach(function(h){if(h.textView()){h.textView().setHidden(b)}});if(!g.isShrink()){g.setChildrenUIViewHidden(b)}})},children:function(){return this.mChildren},children2:function(){return this.mChildren2},isLeft:function(){return this.mLeft},setLeft:function(a){this.mLeft=a;this.mTextView.setTextAlignment(this.textAlign());this.mChildren.forEach(function(b){b.setLeft(a)})},setDelegate:function(a){this.mDelegate=a},delegate:function(){return this.mDelegate},addNode:function(a){a.mParent=this;a.setLeft(this.mLeft);this.mChildren.push(a);if(this.mRoot){a.updateTextFontSize()}if(this.mDelegate){this.mDelegate.mindNodeChildDidAdd(this,a)}},parent:function(){return this.mParent},addNode2:function(a){a.mParent=this;a.setLeft(true);this.mChildren2.push(a);if(this.mRoot){a.updateTextFontSize()}if(this.mDelegate){this.mDelegate.mindNodeChildDidAdd(this,a)}},insertNodeAtIndex:function(b,a){b.mParent=this;b.setLeft(this.mLeft);this.mChildren.splice(a,0,b);if(this.mRoot){b.updateTextFontSize()}if(this.mDelegate){this.mDelegate.mindNodeChildDidAdd(this,b)}},insertNode2AtIndex:function(b,a){b.mParent=this;b.setLeft(true);this.mChildren2.splice(a,0,b);if(this.mRoot){b.updateTextFontSize()}if(this.mDelegate){this.mDelegate.mindNodeChildDidAdd(this,b)}},addBtn:function(){return this.mAddBtn},addBtn2:function(){return this.mAddBtn2},textEdgeInsets:function(){return new UIEdgeInsets(this.mTextEdgeInsets)},imageEdgeInsets:function(){return new UIEdgeInsets(this.mImageEdgeInsets)},setUIViewPosWithGraphPoint:function(l){var q=this.getGlobalGraphPoint(l);var h=new CGPoint(q);var g=this.isWireFrameStyle();if(g){h.y+=this.contentSize().height/2-5}this.mAddBtn.setCenter(q);if(this.mAddBtn2!=null){this.mAddBtn2.setCenter(new CGPoint(q.x-this.mGraphPoint.x,q.y))}if(this.mLeft){if(g){h.x-=l.x+this.marginHorizontal()}else{h.x-=l.x+this.marginHorizontal()/2+2}}var a=this.mTextView.frame();if(g){var d=this.mRoot?0:7.5;var c=this.mRoot||(this.mParent&&this.mParent.isRoot())?6:4;a.origin=new CGPoint(h.x-a.size.width-this.mTextEdgeInsets.right+d,h.y-a.size.height-this.mTextEdgeInsets.bottom+c)}else{a.origin=new CGPoint(h.x-a.size.width-this.mTextEdgeInsets.right,h.y-a.size.height-this.mTextEdgeInsets.bottom)}this.mTextView.setFrame(a);var u=this.mTextView.right();if(this.mRemarkView){var n=h.y-this.mImageEdgeInsets.bottom;var b=this.mRemarkView.frame();if(g){var d=this.mRoot?0:7.5;var p=Math.max(0,(this.minTextWidth()-b.size.width)/2);var o=0;b.origin=new CGPoint(h.x-b.size.width-p-this.mImageEdgeInsets.right+d,n-b.size.height-o)}else{var p=Math.max(0,this.minTextWidth()-b.size.width);var o=0;b.origin=new CGPoint(h.x-b.size.width-p-this.mImageEdgeInsets.right,n-b.size.height-o)}a.origin.y=b.origin.y-a.size.height;if(this.mRoot||g){var s=b.origin.x+b.size.width/2-(a.origin.x+a.size.width/2);if(s>0){b.origin.x-=s}else{a.origin.x+=s}}else{var s=b.origin.x-a.origin.x;if(s>0){b.origin.x-=s}else{a.origin.x+=s}}this.mTextView.setFrame(a);this.mRemarkView.setFrame(b);u=Math.max(this.mRemarkView.right(),u)}if(this.mLatexView){var n=(this.mTextView.text().length>0||this.mTextView.isFirstResponder()||this.mRemarkView)?a.origin.y:h.y-this.mImageEdgeInsets.bottom;var k=this.mLatexView.frame();var b=this.mRemarkView?this.mRemarkView.frame():new CGRect();if(g){var d=this.mRoot?0:7.5;var p=Math.max(0,(this.minTextWidth()-k.size.width)/2);var o=0;k.origin=new CGPoint(h.x-k.size.width-p-this.mImageEdgeInsets.right+d,n-k.size.height-o)}else{var p=Math.max(0,this.minTextWidth()-k.size.width);var o=0;k.origin=new CGPoint(h.x-k.size.width-p-this.mImageEdgeInsets.right,n-k.size.height-o)}if(this.mRoot||g){var s=k.origin.x+k.size.width/2-(a.origin.x+a.size.width/2);if(s>0){k.origin.x-=s}else{a.origin.x+=s;b.origin.x+=s}}else{var s=k.origin.x-a.origin.x;if(s>0){k.origin.x-=s}else{a.origin.x+=s;b.origin.x+=s}}this.mTextView.setFrame(a);this.mLatexView.setFrame(k);if(this.mRemarkView){this.mRemarkView.setFrame(b)}u=Math.max(this.mLatexView.right(),u)}if(this.mImageView){var n;if(this.mLatexView){n=this.mLatexView.top()-this.mImageEdgeInsets.bottom}else{n=(this.mTextView.text().length>0||this.mTextView.isFirstResponder()||this.mRemarkView)?a.origin.y:h.y-this.mImageEdgeInsets.bottom}var j=this.mImageView.frame();var k=(this.mLatexView!=null)?this.mLatexView.frame():new CGRect();var b=(this.mRemarkView!=null)?this.mRemarkView.frame():new CGRect();if(g){var d=this.mRoot?0:7.5;var p=Math.max(0,(this.minTextWidth()-j.size.width)/2);var o=Math.max(0,(this.minTextHeight()-j.size.height)/2);j.origin=new CGPoint(h.x-j.size.width-p-this.mImageEdgeInsets.right+d,n-j.size.height-o)}else{var p=Math.max(0,this.minTextWidth()-j.size.width);var o=Math.max(0,this.minTextHeight()-j.size.height);j.origin=new CGPoint(h.x-j.size.width-p-this.mImageEdgeInsets.right,n-j.size.height-o)}if(this.mRoot||g){var s=j.origin.x+j.size.width/2-(a.origin.x+a.size.width/2);if(s>0){j.origin.x-=s}else{a.origin.x+=s;k.origin.x+=s;b.origin.x+=s}}else{var s=j.origin.x-a.origin.x;if(s>0){j.origin.x-=s}else{a.origin.x+=s;k.origin.x+=s;b.origin.x+=s}}this.mTextView.setFrame(a);this.mImageView.setFrame(j);if(this.mLatexView){this.mLatexView.setFrame(k)}if(this.mLatexView){this.mLatexView.setFrame(k)}if(this.mRemarkView){this.mRemarkView.setFrame(b)}u=Math.max(this.mImageView.right(),u)}u+=2;var m=this.level()<2?8:(process.platform=="darwin"?8:6);if(this.mRemarkBtn){var r=this.mRemarkBtn.frame();r.origin=new CGPoint(u,this.mTextView.bottom()-r.size.height-m);this.mRemarkBtn.setFrame(r);u+=r.size.width}if(this.mURLBtn){var t=this.mURLBtn.frame();t.origin=new CGPoint(u,this.mTextView.bottom()-t.size.height-m);this.mURLBtn.setFrame(t);u+=t.size.width}if(this.mFileBtn){var e=this.mFileBtn.frame();e.origin=new CGPoint(u,this.mTextView.bottom()-e.size.height-m);this.mFileBtn.setFrame(e);u+=e.size.width}if(this.mMarkView!=null){var f=this.contentSize();var i=this.mMarkView.frame();var d=this.isWireFrameStyle()?10:0;var c=this.isWireFrameStyle()?3:0;i.origin=new CGPoint(h.x-f.width+d,h.y-f.height/2-i.size.height/2+2+c);this.mMarkView.setFrame(i)}this.updateRelatedUIViews()},rootParent:function(){var a=this;while(a.mParent!=null){a=a.mParent}return a},getGlobalGraphPoint:function(b){var d=new CGPoint(b);var c=this.mParent;if(c==null){d.x+=this.mRootPoint.x;d.y+=this.mRootPoint.y}while(c!=null){d.x+=c.presentPoint().x;d.y+=c.presentPoint().y;var a=c.mParent;if(a==null){d.x+=c.mRootPoint.x;d.y+=c.mRootPoint.y;if(this.mLeft){d.x-=c.presentPoint().x}}c=a}return d},nodeWidth:function(c){var e=Math.abs(this.mGraphPoint.x);var f=0;if(!this.mShrink){var d=this.mChildren.slice();d.forEach(function(g){f=Math.max(f,g.nodeWidth(c))})}if(c){var b=this;if(this.mSummaries.length>0){this.mSummaries.forEach(function(h){var i=h.textView();if(i){if(!i.isHidden()&&i.width()>0){var g=i.convertRectToView(i.bounds(),b.mTextView);f=Math.max(f,g.origin.x>0?g.origin.x+g.size.width-b.mTextView.width():-g.origin.x)}}})}if(this.mLinkPaths.length>0){this.mLinkPaths.forEach(function(i){var h=i.textView();if(h){if(!h.isHidden()&&h.width()>0){var g=h.convertRectToView(h.bounds(),b.mTextView);f=Math.max(f,g.origin.x>0?g.origin.x+g.size.width-b.mTextView.width():-g.origin.x)}}})}}e+=f;var a=0;if(!this.mShrink){var d=this.mChildren2.slice();d.forEach(function(g){a=Math.max(a,g.nodeWidth(c))})}e+=a;return e},nodeLeftWidth:function(a){var c=0;if(!this.mShrink){var b=this.mChildren2.slice();b.forEach(function(d){c=Math.max(c,d.nodeWidth(a))})}return c},nodeHeight:function(){return this.nodeHeightTop()+this.nodeHeightBottom()},nodeHeightTop:function(){if(this.isWireFrameStyle()){return Math.max(this.contentSize().height/2,Math.max(this.mChildrenTotalHeightTop,this.mChildrenTotalHeightTop2))}else{return Math.max(this.contentSize().height,Math.max(this.mChildrenTotalHeightTop,this.mChildrenTotalHeightTop2))}},nodeHeightBottom:function(){if(this.isWireFrameStyle()){return Math.max(this.contentSize().height/2,Math.max(this.mChildrenTotalHeightBottom,this.mChildrenTotalHeightBottom2))}else{return Math.max(this.mChildrenTotalHeightBottom,this.mChildrenTotalHeightBottom2)}},updateUIViewPosition:function(){this.setUIViewPosWithGraphPoint(this.mGraphPoint);if(!this.mShrink){this.mChildren.forEach(function(a){a.updateUIViewPosition()});this.mChildren2.forEach(function(a){a.updateUIViewPosition()})}},childrenTotalHeight:function(){return this.mChildrenTotalHeight},textView:function(){return this.mTextView},setText:function(a){this.mOriginText=a;this.mTextView.setText(a)},text:function(){return this.mTextView.text()},textViewDidChange:function(){if(this.mDelegate){this.mDelegate.mindNodeTextViewDidChange(this,this.mTextView)}},textViewDidBeginEditing:function(){if(this.mDelegate){this.mDelegate.mindNodeTextViewDidBeginEditing(this,this.mTextView)}},textViewDidEndEditing:function(){if(this.mDelegate){this.mDelegate.mindNodeTextViewDidEndEditing(this,this.mTextView)}},textViewDidContextMenu:function(){if(this.mDelegate){this.mDelegate.mindNodeTextViewDidContextMenu(this,this.mTextView)}},textViewDeleteKeyEnter:function(){if(this.mDelegate){this.mDelegate.mindNodeTextViewDeleteKeyEnter(this,this.mTextView)}},textViewDidMouseOver:function(){if(isMobileDevice()){return}clearTimeout(this.mAddBtnHideTimeoutId);clearTimeout(this.mAddBtnShowTimeoutId);if(!this.mAddBtn.imageForState(UIControl.State.Normal)){var a=this;this.mAddBtnShowTimeoutId=setTimeout(function(){a.mAddBtn.setImage(a.imageForAddBtn(),UIControl.State.Normal);a.mAddBtn.setAlpha(0);if(a.mAddBtn2){a.mAddBtn2.setImage(a.imageForAddBtn(),UIControl.State.Normal);a.mAddBtn2.setAlpha(0)}UIView.animate(0.2,function(){a.mAddBtn.setAlpha(1);if(a.mAddBtn2){a.mAddBtn2.setAlpha(1)}});a.mFocusAddBtn=true},300)}},textViewDidMouseLeave:function(){if(isMobileDevice()){return}clearTimeout(this.mAddBtnShowTimeoutId);clearTimeout(this.mAddBtnHideTimeoutId);if(this.mFocusAddBtn){var a=this;this.mAddBtnHideTimeoutId=setTimeout(function(){if(!a.mShrink){UIView.animate(0.2,function(){a.mAddBtn.setAlpha(0);if(a.mAddBtn2){a.mAddBtn2.setAlpha(0)}},function(){a.mAddBtn.setAlpha(1);if(!a.mShrink){a.mAddBtn.setImage(null,UIControl.State.Normal)}if(a.mAddBtn2){a.mAddBtn2.setAlpha(1);if(!a.mShrink){a.mAddBtn2.setImage(null,UIControl.State.Normal)}}})}a.mFocusAddBtn=false},300)}},textViewFitSize:function(a){if(!a){a=this.mTextView}var b=a.sizeThatFits(new CGSize(this.maxTextWidth(),Number.MAX_VALUE));b.width=Math.max(Math.min(b.width+10,this.maxTextWidth()),this.minTextWidth());b.height=Math.max(b.height,MindNode.MIN_TEXT_HEIGHT);return b},setTextViewFrame:function(a){this.mTextView.setFrame(a);this.mTextView.sizeToFit();if(a.size.height<=this.minTextHeight()){this.mTextView.layer().css("white-space","nowrap")}else{this.mTextView.layer().css("white-space","")}},isExpandLeftEnable:function(){return this.mExpandLeftEnable},setExpandLeftEnable:function(a){this.mExpandLeftEnable=a;if(a){this.mAddBtn2.setHidden(false)}else{this.mAddBtn2.setHidden(true);var b=this.mChildren2.slice();b.forEach(function(c){c.removeFromParent()})}this.setAddBtnAutoHidden(this.mAddBtnAutoHidden)},removeFromParent:function(){var a=this.mParent;if(a!=null){if(a.mChildren.indexOf(this)>=0){a.mChildren.remove(this)}else{a.mChildren2.remove(this)}if(this.mDelegate!=null){this.mDelegate.mindNodeChildDidRemove(a,this)}this.mParent=null}},globalSelectionRect:function(){var f=this.mTextView;if(this.mLatexView){f=this.mLatexView}if(this.mImageView){f=this.mImageView}var a=f.frame().origin;var c=this.getGlobalGraphPoint(this.mGraphPoint);var b=Math.max(this.mChildrenTotalHeight,this.mChildrenTotalHeight2);var d=(this.mShrink?Math.abs(this.mGraphPoint.x):this.nodeWidth())-MindNode.DEFAULT_NODE_MARGIN+this.mAddBtn.width()/2;var e=new CGRect(this.mLeft?(a.x+f.width()-d+6):a.x,c.y-this.nodeHeightTop(),d,this.nodeHeight()+this.mAddBtn.height()/2);return e},copy:function(){var a=new MindNode();a.setRootPoint(this.mRootPoint);a.setLineColorHex(this.mLineColorHex);a.setMaxWidthLine(this.mMaxWidthLine);a.textView().setText(this.mTextView.text());a.textView().setFrame(new CGRect(0,0,this.mTextView.width(),this.mTextView.height()));a.addBtn().setHidden(this.mAddBtn.isHidden());a.setLeft(this.mLeft);a.setRoot(this.mRoot);a.setRemark(this.mRemark);a.setRemarkDisplay(this.mRemarkDisplay);a.setMarkType(this.mMarkType);a.setLatex(this.mLatex);a.setFileName(this.mFileName);a.setURL(this.mURL);if(this.mLinkPaths.length>0){a.mLinkPaths=this.mLinkPaths.slice()}if(this.mImageName){a.setImageResize(this.mImageResize);a.setImage(this.mImageName,this.mImageSize)}if(this.mShrinkChildrenData){a.mShrinkChildrenData=this.mShrinkChildrenData}else{this.mChildren.forEach(function(c){var b=c.copy();a.addNode(b)})}a.setShrink(this.mShrink);return a},linkPaths:function(){return this.mLinkPaths},isEmpty:function(){return this.mChildren.length==0&&this.mChildren2.length==0&&(!this.mTextView.text()||this.mTextView.text().length==0)&&!this.mRemark&&!this.mURL&&!this.mFileName&&!this.mLatex&&!this.mImageName},remark:function(){return this.mRemark},setRemark:function(a){this.mRemark=a;this.updateRemarkBtnDisplay();this.updateRemarkDisplay()},remarkView:function(){return this.mRemarkView},isRemarkDisplay:function(){return this.mRemarkDisplay},setRemarkDisplay:function(a){this.mRemarkDisplay=a;this.updateRemarkBtnDisplay();this.updateRemarkDisplay()},updateRemarkDisplay:function(){if(this.mRemark&&this.mRemarkDisplay){if(!this.mRemarkView){this.mRemarkView=new UILabel();this.mRemarkView.setFontSize("12px");this.mRemarkView.setBackgroundColor(MindNode.DisplayDark?"#191919":"#E5E5E5");this.mRemarkView.setTextColor(MindNode.DisplayDark?"#B2B2B2":"#555555");this.mRemarkView.setNumberOfLines(0);this.mRemarkView.layer().css("border-radius","3px");this.mRemarkView.layer().css("padding-left","5px");this.mRemarkView.layer().css("padding-right","2px");this.mRemarkView.layer().css("white-space","pre-wrap");var b=this;this.mRemarkView.layer().click(function(){b.onRemarkBtnClick()})}this.mRemarkView.setText(this.mRemark);var a=this.mRemarkView.sizeThatFits(new CGSize(this.maxTextWidth()-10,Number.MAX_VALUE));this.mRemarkView.setSize(a)}else{if(this.mRemarkView){this.mRemarkView.removeFromSuperview();this.mRemarkView=null}}if(this.mDelegate){this.mDelegate.mindNodeRemarkViewDidUpdate(this,this.mRemarkView)}},updateRemarkBtnDisplay:function(){var d=(this.mRemark==null||this.mRemarkDisplay);var c=(this.mRemarkBtn==null);if(d!=c){if(d){if(this.mRemarkBtn){this.mRemarkBtn.removeFromSuperview();this.mRemarkBtn=null}}else{if(!this.mRemarkBtn){this.mRemarkBtn=new UIButton(new CGRect(0,0,20,20));this.mRemarkBtn.setImage(new UIImage("res/remark.png",20,20),UIControl.State.Normal);var b=this;this.mRemarkBtn.addTarget(function(){b.onRemarkBtnClick()},UIControl.Events.TouchUpInside)}}var a=this.mTextEdgeInsets.right;var f=this.calculateContentRightEdge();this.mTextEdgeInsets.right=f;this.mImageEdgeInsets.right=f;if(this.mParent!=null||this.mRoot){var e=this.graphPoint();if(this.mLeft){e.x-=f-a}else{e.x+=f-a}this.setGraphPoint(e);this.layoutSubnodes();if(this.mDelegate!=null){this.mDelegate.mindNodeAttachBtnDidUpdate(this,this.mRemarkBtn)}}}},calculateContentRightEdge:function(){var a=15;if(this.mRemarkBtn){a+=this.mRemarkBtn.width()}if(this.mURLBtn){a+=this.mURLBtn.width()}if(this.mFileBtn){a+=this.mFileBtn.width()}return a},onRemarkBtnClick:function(){if(this.mDelegate!=null){this.mDelegate.mindNodeRemarkBtnDidClick(this)}},remarkBtn:function(){return this.mRemarkBtn},setFileName:function(b){this.mFileName=b;var f=(this.mFileName==null);var d=(this.mFileBtn==null);if(f!=d){if(f){if(this.mFileBtn){this.mFileBtn.removeFromSuperview();this.mFileBtn=null}}else{if(!this.mFileBtn){this.mFileBtn=new UIButton(new CGRect(0,0,20,20));this.mFileBtn.setImage(new UIImage("res/file.png",20,20),UIControl.State.Normal);var i=this;this.mFileBtn.addTarget(function(){i.onFileBtnClick()},UIControl.Events.TouchUpInside)}}var c=this.mTextEdgeInsets.right;var h=this.calculateContentRightEdge();this.mTextEdgeInsets.right=h;this.mImageEdgeInsets.right=h;if(this.mParent!=null||this.mRoot){var j=this.graphPoint();if(this.mLeft){j.x-=h-c}else{j.x+=h-c}this.setGraphPoint(j);this.layoutSubnodes();if(this.mDelegate!=null){this.mDelegate.mindNodeAttachBtnDidUpdate(this,this.mFileBtn)}}}if(b&&this.mTextView.text().length==0){var g=b.lastIndexOf(pathSeparator());var e=(g>=0)?b.substr(g+1):b;this.mTextView.setText(e);if(this.mDelegate){this.mDelegate.mindNodeTextDidChangeFromAttachView(this)}else{var a=this.textViewFitSize();this.setTextViewFrame(new CGRect(0,0,a.width,a.height));this.setTextViewFrame(new CGRect(0,0,a.width,a.height))}}},fileName:function(){return this.mFileName},fileBtn:function(){return this.mFileBtn},resolvedFilePath:function(){var a=this.mFileName.indexOf(pathSeparator());if(a>=0){return this.mFileName}else{return app.getPath("userData")+pathSeparator()+"Attachments"+pathSeparator()+this.mFileName}},onFileBtnClick:function(){shell.openItem(this.resolvedFilePath())},setURL:function(b){this.mURL=b;var e=(this.mURL==null);var d=(this.mURLBtn==null);if(e!=d){if(e){if(this.mURLBtn){this.mURLBtn.removeFromSuperview();this.mURLBtn=null}}else{if(!this.mURLBtn){this.mURLBtn=new UIButton(new CGRect(0,0,20,20));this.mURLBtn.setImage(new UIImage("res/url.png",20,20),UIControl.State.Normal);var h=this;this.mURLBtn.addTarget(function(){h.onURLBtnClick()},UIControl.Events.TouchUpInside)}}var c=this.mTextEdgeInsets.right;var g=this.calculateContentRightEdge();this.mTextEdgeInsets.right=g;this.mImageEdgeInsets.right=g;if(this.mParent!=null||this.mRoot){var i=this.graphPoint();if(this.mLeft){i.x-=g-c}else{i.x+=g-c}this.setGraphPoint(i);this.layoutSubnodes();if(this.mDelegate!=null){this.mDelegate.mindNodeAttachBtnDidUpdate(this,this.mURLBtn)}}}if(b&&this.mTextView.text().length==0){var f=b;if(b.indexOf("http://")==0){f=b.substr(7)}else{if(b.indexOf("https://")==0){f=b.substr(8)}}this.mTextView.setText(f);if(this.mDelegate){this.mDelegate.mindNodeTextDidChangeFromAttachView(this)}else{var a=this.textViewFitSize();this.setTextViewFrame(new CGRect(0,0,a.width,a.height));this.setTextViewFrame(new CGRect(0,0,a.width,a.height))}}},url:function(){return this.mURL},urlBtn:function(){return this.mURLBtn},onURLBtnClick:function(){window.open(this.mURL)},imageView:function(){return this.mImageView},imageSize:function(){return new CGSize(this.mImageSize)},imageName:function(){return this.mImageName},setImage:function(c,p,d){var l=this.mImageName;this.mImageName=c;this.mImageSize=p?p:new CGSize();if(c){if(!this.mImageView){var f=new UIImageView();var o=this;f.layer().click(function(){if(!o.mImageClickCancelled){if(o.mDelegate){o.mDelegate.mindNodeImageViewDidClick(o,f)}f.becomeFirstResponder()}});f.layer().contextmenu(function(q){if(o.mDelegate){o.mDelegate.mindNodeImageViewDidContextMenu(o,f)}});f.layer().mouseover(function(){if(o.mDelegate){o.mDelegate.mindNodeImageDidFocusIn(o)}});f.layer().mousedown(function(r){var q=new CGPoint(r.pageX,r.pageY);var s=f.convertPointToView(new CGPoint(),f.window());if(Math.abs(q.x-s.x)<30||Math.abs(q.y-s.y)<30||Math.abs(q.x-(s.x+f.width()))<30||Math.abs(q.y-(s.y+f.height()))<30){if(o.mDelegate){o.mDelegate.mindNodeDidBeginResizeImage(o,r)}}o.mImageMouseDownLocation=q});f.layer().mousemove(function(t){var r=new CGPoint(t.pageX,t.pageY);if(o.mImageMouseDownLocation){var s=r.x-o.mImageMouseDownLocation.x;var q=r.y-o.mImageMouseDownLocation.y;if(Math.abs(s)>30||Math.abs(q)>30){o.mImageClickCancelled=true}}});f.layer().mouseleave(function(q){o.mImageClickCancelled=false;o.mImageMouseDownLocation=null;if(o.mDelegate){o.mDelegate.mindNodeImageDidFocusOut(o)}});this.mImageView=f}var b=null;if(d){b=d}else{if(c.indexOf("#")==0){var i=c.indexOf("-");if(i>0){b="res/sticker/"+c.substring(1,i)+"/"+c.substring(i+1)}}else{if(c.indexOf("s_")==0){b="http://mindline-image.qiniu.mindline.cn/"+c.substring(2)}else{var k=imageCachePath()+c;if(fs.existsSync(k)){var g=fs.readFileSync(k);var j=toArrayBuffer(g);var a=new Blob([j]);var m=window.URL||window.webkitURL;b=m.createObjectURL(a)}else{b="http://mindline-image.qiniu.mindline.cn/"+c}}}}var n;if(this.mImageResize){n=this.mImageResize}else{n=(c.indexOf("#")==0)?new CGSize(64,64):this.preferredSizeForImageSize(p)}var e=new UIImage(b,n.width,n.height);this.mImageView.setImage(e);this.mImageView.setFrame(new CGRect(0,0,n.width,n.height))}else{if(this.mImageView){this.mImageView.removeFromSuperview();this.mImageView=null}}if(this.mDelegate){this.mDelegate.mindNodeImageDidUpdate(this)}if(l&&l!=c){var h=imageCachePath()+l;fs.unlink(h,function(){})}},preferredSizeForImageSize:function(g){var f=240;var e=240;var h=UIScreen.mainScreen().scale();var b=new CGSize(g.width/h,g.height/h);if(b.width>f||b.height>e){var d,a;var c=b.width/b.height;if(c>f/e){d=f;a=d/c}else{a=e;d=a*c}return new CGSize(d,a)}else{return b}},deletePhotos:function(){if(this.mImageName){var a=imageCachePath()+this.mImageName;fs.unlink(a,function(){})}this.mChildren.forEach(function(b){b.deletePhotos()})},ID:function(){return this.mID},findLinkPath:function(c){for(var a=0;a<this.mLinkPaths.length;a++){var b=this.mLinkPaths[a];if(b.toNodeID()==c){return b}}return null},attachLinkTo:function(c,b){var a=new NodeLinkPath(this,c,b);this.attachLinkPath(a);return a},attachLinkPath:function(c){this.mLinkPaths.push(c);var b=c.textView();if(b){var a=this;b.layer().click(function(){if(a.mDelegate){a.mDelegate.mindNodeLinkTextViewDidBeginEdit(a,c)}});this.updateLinkTextViewPosition()}if(this.mDelegate){this.mDelegate.mindNodelinkTextViewDidUpdate(this,c)}},updateLinkPath:function(a,b){a.setText(b);this.updateLinkTextViewPosition();if(this.mDelegate){this.mDelegate.mindNodelinkTextViewDidUpdate(this,a)}},detachLinkPath:function(a){this.mLinkPaths.remove(a);if(a.textView()){a.textView().removeFromSuperview()}if(this.mDelegate){this.mDelegate.mindNodelinkTextViewDidUpdate(this,null)}},findNodeWithID:function(d){if(this.mID==d){return this}if(this.mShrink){return null}for(var a=0;a<this.mChildren.length;a++){var c=this.mChildren[a];var b=c.findNodeWithID(d);if(b!=null){return b}}for(var a=0;a<this.mChildren2.length;a++){var c=this.mChildren2[a];var b=c.findNodeWithID(d);if(b!=null){return b}}return null},markType:function(){return this.mMarkType},setMarkType:function(a){this.mMarkType=a;var b=this.imageWithMarkType(a);if(b){this.mMarkView=new UIImageView(new CGRect(0,0,30,30));this.mMarkView.setImage(b)}if(this.mDelegate){this.mDelegate.mindNodeMarkTypeDidUpdate(this,a)}},imageWithMarkType:function(b){if(b>=1000){var a=MarkViewController.TAG_INFO_ARRAY[b-1000];return new UIImage("res/tags/"+a+".png")}return null},markView:function(){return this.mMarkView},setMarkView:function(a){this.mMarkView=a},summaries:function(){return this.mSummaries},summarizeToNid:function(c,b){var a=new NodeSummary(this,c,b);this.summarizeTo(a);return a},summarizeTo:function(b){this.mSummaries.push(b);var a=this;b.textView().layer().click(function(){if(a.mDelegate!=null){a.mDelegate.mindNodeSummarizedViewDidBeginEdit(a,b)}});this.updateSummarizedTextViewPosition();if(this.mDelegate){this.mDelegate.mindNodeSummarizedViewDidUpdate(this,b)}},detachSummary:function(a){this.mSummaries.remove(a);a.textView().removeFromSuperview();if(this.mDelegate){this.mDelegate.mindNodeSummarizedViewDidUpdate(this,null)}},updateSummary:function(a,b){a.setText(b);this.updateSummarizedTextViewPosition();if(this.mDelegate){this.mDelegate.mindNodeSummarizedViewDidUpdate(this,a)}},findSummary:function(c){for(var b=0;b<this.mSummaries.length;b++){var a=this.mSummaries[b];if(a.toNodeID()==c){return a}}return null},summarizedBoundsWithNode:function(t){var y=new CGRect(0,0,0,0);var w=[];var r=this;while(r!=null){w.splice(0,0,r);r=r.parent()}var b=[];var a=t;while(a!=null){b.splice(0,0,a);a=a.parent()}var l=null,g=null,q=null;var h=Math.max(w.length,b.length);for(var u=0;u<h;u++){if(u>w.length-1){l=b[u-1];g=b[u];if(l.children().indexOf(g)>=0){q=l.children()[0]}else{q=l.children2()[0]}break}else{if(u>b.length-1){l=w[u-1];g=w[u];if(l.children().indexOf(g)>=0){q=l.children()[0]}else{q=l.children2()[0]}break}else{if(w[u]!=b[u]){l=w[u-1];g=w[u];q=b[u];break}}}}var j=0;var f=0;var d=false;j=l.children().indexOf(g);if(j!=-1){f=l.children().indexOf(q);if(f==-1){f=l.children().length-1}}else{j=l.children2().indexOf(g);f=l.children2().indexOf(q);if(f==-1){f=l.children2().length-1}d=true}if(j<f){y.origin.y=this.getGlobalGraphPoint(this.presentPoint()).y-this.nodeHeightTop();y.size.height=t.getGlobalGraphPoint(t.presentPoint()).y+t.nodeHeightBottom()-y.origin.y+10}else{y.origin.y=t.getGlobalGraphPoint(t.presentPoint()).y-t.nodeHeightTop();y.size.height=this.getGlobalGraphPoint(this.presentPoint()).y+this.nodeHeightBottom()-y.origin.y+10}var e=Math.min(j,f);var c=Math.max(j,f);var o=y.origin.y;var k=y.origin.y+y.size.height;var v=-1;if(!d){for(var u=e;u<=c;u++){var s=l.children()[u];var m=s.findMaxOriginXForSummary(o,k);if(m!=-1){if(v==-1){v=m}else{v=l.isLeft()?Math.min(m,v):Math.max(m,v)}}}if(l.isLeft()){y.origin.x=v+25}else{y.origin.x=v-25}}else{for(var u=e;u<=c;u++){var s=l.children2()[u];var m=s.findMaxOriginXForSummary(o,k);if(m!=-1){if(v==-1){v=m}else{v=Math.min(m,v)}}}y.origin.x=v+25}return y},findMaxOriginXForSummary:function(d,c){var a=-1;var b=this;if(!this.mShrink&&this.mChildren.length>0){this.mChildren.forEach(function(g){var f=g.findMaxOriginXForSummary(d,c);if(a==-1){a=f}else{a=b.mLeft?Math.min(a,f):Math.max(a,f)}})}else{var e=this.mAddBtn.center().y;if(e>=d&&e<=c){a=this.mLeft?this.mAddBtn.left():this.mAddBtn.right()}}return a},hasShrinkChildrenData:function(){return this.mShrinkChildrenData!=null},traverseExpnadChildrenForExport:function(){if(this.mShrinkChildrenData){var c=new NSKeyedUnarchiver();var b=c.decodeObject(this.mShrinkChildrenData);if(b!=null){this.mChildren=b;var a=this;b.forEach(function(d){d.mParent=a;d.setLeft(a.mLeft)})}}},shortcutToAddBranch:function(){if(this.mDelegate){var a=this.parent();if(a){var b=a.isRoot()&&this.isLeft();this.mDelegate.addBranch(a,b)}}},shortcutToAddBranch2:function(){if(this.mDelegate){this.mDelegate.addBranch(this,false)}},shortcutToInsertBranch:function(){if(this.mDelegate){this.mDelegate.insertBranch(this)}},shortcutToShowMenuItems:function(){if(this.mDelegate){this.mDelegate.showMenuItemsForNode(this)}},shortcutToBack:function(){if(UIMenuController.sharedMenuController().isMenuVisible()){UIMenuController.sharedMenuController().setMenuVisible(false)}else{this.textView().resignFirstResponder()}},traverseSetAddButtonHidden:function(a){this.setAddBtnAutoHidden(a);this.mChildren.forEach(function(b){b.traverseSetAddButtonHidden(a)});this.mChildren2.forEach(function(b){b.traverseSetAddButtonHidden(a)})},setAddBtnAutoHidden:function(b){this.mAddBtnAutoHidden=b;var a=displayStyleBasic();var d=(a!=MindNode.Style.Default);if(d){if(this.mShrink){this.mAddBtn.setImage(this.imageForBadgeBtn(),UIControl.State.Normal)}else{this.mAddBtn.setImage(null,UIControl.State.Normal)}if(this.mExpandLeftEnable&&this.mAddBtn2){if(this.mShrink){this.mAddBtn2.setImage(this.imageForBadgeBtn(),UIControl.State.Normal)}else{this.mAddBtn2.setImage(null,UIControl.State.Normal)}}}else{if(this.mRoot){if(b){if(this.mShrink){this.mAddBtn.setImage(this.imageForBadgeBtn(),UIControl.State.Normal)}else{var c=MindNode.DisplayStyle-displayStyleBasic();if(c>0){this.mAddBtn.setImage(null,UIControl.State.Normal)}else{this.mAddBtn.setImage(this.imageForBadgeBtn(),UIControl.State.Normal)}}}else{if(this.mShrink){this.mAddBtn.setImage(this.imageForExpandBtn(),UIControl.State.Normal)}else{this.mAddBtn.setImage(this.imageForAddBtn(),UIControl.State.Normal)}}if(this.mExpandLeftEnable&&this.mAddBtn2){if(b){if(this.mShrink){this.mAddBtn2.setImage(this.imageForBadgeBtn(),UIControl.State.Normal)}else{var c=MindNode.DisplayStyle-displayStyleBasic();if(c>0){this.mAddBtn2.setImage(null,UIControl.State.Normal)}else{this.mAddBtn2.setImage(this.imageForBadgeBtn(),UIControl.State.Normal)}}}else{if(this.mShrink){this.mAddBtn2.setImage(this.imageForExpandBtn(),UIControl.State.Normal)}else{this.mAddBtn2.setImage(this.imageForAddBtn(),UIControl.State.Normal)}}}}else{if(b){if(this.mShrink){this.mAddBtn.setImage(this.imageForBadgeBtn(),UIControl.State.Normal)}else{this.mAddBtn.setImage(null,UIControl.State.Normal)}}else{if(this.mShrink){this.mAddBtn.setImage(this.imageForExpandBtn(),UIControl.State.Normal)}else{this.mAddBtn.setImage(this.imageForAddBtn(),UIControl.State.Normal)}}}}},traverseFitTextSize:function(){var b=this.textViewFitSize();var a=this.mTextView.frame();a.size=b;this.setTextViewFrame(a);this.setTextViewFrame(a);this.mChildren.forEach(function(c){c.traverseFitTextSize()});this.mChildren2.forEach(function(c){c.traverseFitTextSize()})},traverseUpdateFontSize:function(){this.updateTextFontSize();this.mChildren.forEach(function(a){a.traverseUpdateFontSize()});this.mChildren2.forEach(function(a){a.traverseUpdateFontSize()})},calculateLineWidth:function(){var b=displayStyleBasic();switch(b){case MindNode.Style.WireFrameLine2:case MindNode.Style.WireFrameAll:return this.mRoot?5:3;case MindNode.Style.WireFrameVertical:case MindNode.Style.WireFrameBracket:return 3;default:var a=0;var c=this;while(!c.isRoot()&&c.parent()!=null&&a<2){c=c.parent();a+=1}return 5-a}},lineWidth:function(){return this.mLineWidth},imageForAddBtn:function(){if(this.mLineWidth<=3){var a=MindNode.DisplayDark?"res/btn_add_dark_min.png":"res/btn_add_min.png";return new UIImage(a,20,20)}else{var a=MindNode.DisplayDark?"res/btn_add_dark.png":"res/btn_add.png";return new UIImage(a,24,24)}},imageForExpandBtn:function(){if(this.mLineWidth<=3){var a=MindNode.DisplayDark?"res/btn_expand_dark_min.png":"res/btn_expand_min.png";return new UIImage(a,20,20)}else{var a=MindNode.DisplayDark?"res/btn_expand_dark.png":"res/btn_expand.png";return new UIImage(a,24,24)}},imageForBadgeBtn:function(){if(this.mLineWidth<=3){var a=MindNode.DisplayDark?"res/btn_badge_dark_min.png":"res/btn_badge_min.png";return new UIImage(a,20,20)}else{var a=MindNode.DisplayDark?"res/btn_badge_dark.png":"res/btn_badge.png";return new UIImage(a,24,24)}},textColor:function(){var a=this.mStyles2.color;if(!a||a=="black"||a=="#000000"||a=="#e2e1e1"||a=="#E2E1E1"){a=MindNode.DisplayDark?"#E2E1E1":"#000000"}return a},updateWithDisplayMode:function(a){this.updateLineWidthAndButton(true);this.setLeft(this.mLeft);this.setAddBtnAutoHidden(this.mAddBtnAutoHidden);this.mTextView.setTextColor(this.textColor());if(this.mLatexView){this.mLatexView.setTextColor(MindNode.DisplayDark?"#E2E1E1":"#000000")}if(this.mRemarkView){this.mRemarkView.setBackgroundColor(MindNode.DisplayDark?"#191919":"#E5E5E5");this.mRemarkView.setTextColor(MindNode.DisplayDark?"#B2B2B2":"#555555")}this.mLinkPaths.forEach(function(b){b.textView().setTextColor(b.colorOnDraw(MindNode.DisplayDark))});this.mSummaries.forEach(function(b){b.textView().setTextColor(b.colorOnDraw(MindNode.DisplayDark))});this.mChildren.forEach(function(b){b.updateWithDisplayMode()});this.mChildren2.forEach(function(b){b.updateWithDisplayMode()});if(!a&&this.mRoot){this.updateTextFontSizeForWireFrame()}},updateLineWidthAndButton:function(b){var a=this.mLineWidth;this.mLineWidth=this.calculateLineWidth();if(a!=this.mLineWidth||b){if(this.mAddBtn.imageForState(UIControl.State.Normal)){if(this.mAddBtnAutoHidden){if(this.mShrink||this.mRoot){this.mAddBtn.setImage(this.imageForBadgeBtn(),UIControl.State.Normal)}}else{if(this.mShrink){this.mAddBtn.setImage(this.imageForExpandBtn(),UIControl.State.Normal)}else{this.mAddBtn.setImage(this.imageForAddBtn(),UIControl.State.Normal)}}}if(this.mAddBtn2&&this.mAddBtn.imageForState(UIControl.State.Normal)){if(this.mAddBtnAutoHidden){this.mAddBtn2.setImage(this.imageForBadgeBtn(),UIControl.State.Normal)}else{if(this.mShrink){this.mAddBtn2.setImage(this.imageForExpandBtn(),UIControl.State.Normal)}else{this.mAddBtn2.setImage(this.imageForAddBtn(),UIControl.State.Normal)}}}}},isWireFrameStyle:function(){var a=displayStyleBasic();if(a==MindNode.Style.WireFrameLine){return this.mRoot}else{if(a==MindNode.Style.WireFrameLine2||a==MindNode.Style.WireFrameVertical){return this.mRoot||(this.mParent&&this.mParent.isRoot())}else{if(a==MindNode.Style.WireFrameBracket||a==MindNode.Style.WireFrameAll){return true}}}return false},minTextHeight:function(){var e=this.fontSize();var a=MindNode.MinTextHeightTable[e];if(!a){var b=new UITextView();b.setText("国");b.setFontSize(e+"px");b.setLineHeight((e+5)+"px");var c=this.textViewFitSize(b);var d=new CGRect(0,0,c.width,c.height);b.setFrame(d);b.sizeToFit();b.setFrame(d);b.sizeToFit();a=Math.max(b.height(),MindNode.MIN_TEXT_HEIGHT);MindNode.MinTextHeightTable[e]=a}return a},fontSize:function(){var a=AppSettings.defaultSettings().fontSize();if(this.mRoot){a+=4}else{if(this.mParent&&this.mParent.isRoot()){a+=2}}var b=this.mStyles2.fontSize;if(b){a+=b*2}return a},updateTextFontSize:function(){var b=this.fontSize();this.mTextView.setFontSize(b+"px");this.mTextView.setLineHeight((b+5)+"px");if(this.mStyles2.bold!=undefined){if(this.mStyles2.bold==1){this.mTextView.setBold(true)}else{if(this.mStyles2.bold==0){this.mTextView.setBold(false)}}}var a=this.textViewFitSize();this.setTextViewFrame(new CGRect(0,0,a.width,a.height));this.setTextViewFrame(new CGRect(0,0,a.width,a.height))},updateTextFontSizeForWireFrame:function(){this.updateTextFontSize();var a=this.mChildren.slice();a=a.concat(this.mChildren2);a.forEach(function(b){b.updateTextFontSize();b.textView().setTextAlignment(b.textAlign())})},praseRichTextStyles:function(a){if(a.bold==1){this.mTextView.setBold(true)}else{if(a.bold==0){this.mTextView.setBold(false)}}if(a.underline==1){this.mTextView.setUnderline(true)}else{if(a.underline==0){this.mTextView.setUnderline(false)}}if(a.strikethrough==1){this.mTextView.setStrikethrough(true)}else{if(a.strikethrough==0){this.mTextView.setStrikethrough(false)}}if(a.color){this.mTextView.setTextColor(this.textColor())}if(a.fontSize){this.updateTextFontSize()}},styles:function(){return this.mStyles2},setMaxWidthLine:function(a){this.mMaxWidthLine=a},handleBranchStretchEvent:function(){var a=this;this.mAddBtn.layer().mousedown(function(b){if(a.mDelegate){a.mDelegate.mindNodeDidBeginStretching(a,b)}})},latexView:function(){return this.mLatexView},latex:function(){return this.mLatex},setLatex:function(b){this.mLatex=b;if(b){if(!this.mLatexView){this.mLatexView=new LatexView();var a=this;this.mLatexView.layer().click(function(){if(a.mDelegate){a.mDelegate.mindNodeLatexViewDidClick(a,a.mLatexView)}a.mLatexView.becomeFirstResponder()});this.mLatexView.layer().contextmenu(function(c){if(a.mDelegate){a.mDelegate.mindNodeLatexViewDidContextMenu(a,a.mLatexView)}})}this.mLatexView.setTextColor(MindNode.DisplayDark?"#E2E1E1":"#000000");this.mLatexView.setLatex(b,true);this.mLatexView.sizeToFit();if(!isWebApp){this.mLatexView.generateImageUrl()}if(this.mDelegate!=null){this.mDelegate.mindNodeLatexDidUpdate(this,b)}}else{if(this.mLatexView){this.mLatexView.removeFromSuperview();this.mLatexView=null;if(this.mDelegate!=null){this.mDelegate.mindNodeLatexDidUpdate(this,null)}}}},setImageResize:function(a){this.mImageResize=a},imageResize:function(){return this.mImageResize},marginHorizontal:function(){var b=MindNode.DEFAULT_NODE_MARGIN;var a=displayStyleBasic();if(this.isWireFrameStyle()){if(a==MindNode.Style.WireFrameVertical){b+=MindNode.DEFAULT_NODE_MARGIN/2}else{if(a==MindNode.Style.WireFrameBracket){var c=this.level();if(c==1){b+=MindNode.DEFAULT_NODE_MARGIN/2}else{if(c>=3){b-=10}}}}}else{if(this.mParent&&this.mParent.isWireFrameStyle()){if(a==MindNode.Style.WireFrameLine2){b+=MindNode.DEFAULT_NODE_MARGIN/2}}}return b},level:function(){var b=0;var a=this;while(a!=null&&!a.isRoot()){a=a.parent();b+=1}return b},textAlign:function(){if(this.mRoot){return"center"}else{if(this.isWireFrameStyle()){if(displayStyleBasic()==MindNode.Style.WireFrameBracket){if(this.level()<2){return"center"}else{return this.mLeft?"right":"left"}}else{return"center"}}}return"left"},handleFileCopyEvent:function(b,e){var c=this;var f=e?b.dataTransfer:b.clipboardData;if(f&&f.files){if(f.files.length>0){var d=f.files[0];main.log("copy file: "+d.name+" "+d.type);if(d.type.indexOf("image/")==0){if(isWebApp){c.mDelegate.showImageAtNodeForProVersion(c,d.name,d,null)}else{var a=new FileReader();a.readAsArrayBuffer(d);a.onload=function(){var g=Buffer.from(this.result);c.mDelegate.showImageAtNodeForProVersion(c,d.name,d,g)}}b.preventDefault()}else{if(!isWebApp){var a=new FileReader();a.readAsArrayBuffer(d);a.onload=function(){var h=Buffer.from(this.result);var i=app.getPath("userData")+pathSeparator()+"Attachments";fs.mkdirSync(i,{recursive:true});var g=i+pathSeparator()+d.name;fs.writeFile(g,h,function(j){})};c.setFileName(d.name);b.preventDefault()}}}}},setStyleContext:function(a){this.mStyleContext=a;this.mChildren.forEach(function(b){b.setStyleContext(a)});this.mChildren2.forEach(function(b){b.setStyleContext(a)})},styleContext:function(){return this.mStyleContext}});function displayStyleBasic(b){var a=b?b:MindNode.DisplayStyle;return parseInt(a/100)*100};CanvasRenderingContext2D.prototype.fillTextAutoLine=function(g,j,h,b,k,f,n){var e=0;var a=0;var c=0;var m=j;var l=h;for(var d=0;d<g.length;d++){a=e;e+=this.measureText(g[d]).width;if(e>b||g[d]=="\n"){if(f=="center"){m=j+(b-a)/2}else{if(f=="right"){m=j+(b-a)}}this.fillText(g.substring(c,d),m,l+k);if(n=="underline"){this.lineWidth=1;this.beginPath();this.moveTo(m,l+k+2);this.lineTo(m+a,l+k+2);this.stroke()}else{if(n=="strikethrough"){this.lineWidth=1;this.beginPath();this.moveTo(m,l+k/2+5);this.lineTo(m+a,l+k/2+5);this.stroke()}}l+=k;e-=a;a=0;c=d;if(g[d]=="\n"){c+=1}}if(d==g.length-1){if(f=="center"){m=j+(b-e)/2}else{if(f=="right"){m=j+(b-e)}}this.fillText(g.substring(c,d+1),m,l+k);if(n=="underline"){this.lineWidth=1;this.beginPath();this.moveTo(m,l+k+2);this.lineTo(m+e,l+k+2);this.stroke()}else{if(n=="strikethrough"){this.lineWidth=1;this.beginPath();this.moveTo(m,l+k/2+5);this.lineTo(m+e,l+k/2+5);this.stroke()}}}}};CanvasRenderingContext2D.prototype.roundRect=function(b,e,c,a,d){this.moveTo(b,e+a-d);this.lineTo(b,e+d);this.arcTo(b,e,b+d,e,d);this.lineTo(b+c-d,e);this.arcTo(b+c,e,b+c,e+d,d);this.lineTo(b+c,e+a-d);this.arcTo(b+c,e+a,b+c-d,e+a,d);this.lineTo(b+d,e+a);this.arcTo(b,e+a,b,e+a-d,d)};NodeGraphView=defineClass({superClass:UIView,init:function(b){UIView.call(this,b);this.mRootNode=null;this.mNodeLeftWidth=0;this.mNodeHeight=0;var a=this.canvas();if(a){a.css("visibility","hidden")}this.mUndoManager=new UndoManager(this);this.handleMouseEvents();this.mLatexViewArray=[];this.mLinkPathArray=[];this.mScale=1},snapshotSize:function(){return this.mSnapshotSize},setRenderSnapshot:function(b,g){this.mRenderSnapshot=b;var f=this.mDisplayNight;this.mDisplayNight=false;var d=this.canvas();if(d){if(b){d.css("visibility","visible");if(!g){g=2}var e=50;var a=new CGSize(this.mRootNode.nodeWidth(true)+e*2,this.mRootNode.nodeHeight()+e*2);d.attr("width",a.width*g+"px");d.attr("height",a.height*g+"px");d.css("width",a.width+"px");d.css("height",a.height+"px");var c=d[0].getContext("2d");c.save();c.scale(g,g);c.fillStyle="white";c.fillRect(0,0,a.width,a.height);c.translate(-(this.mRootNode.rootPoint().x-this.mRootNode.nodeLeftWidth(true)-e),-(this.mRootNode.rootPoint().y-a.height/2-(this.mRootNode.nodeHeightTop()-this.mRootNode.nodeHeightBottom())/2));this.drawRect(c);c.restore();this.mSnapshotSize=a}else{d.css("visibility","hidden")}}this.mDisplayNight=f},setFrame:function(c){if(!this.mCanvasList){this.mCanvasList=[]}this.mCanvasRects=[];var f=0;var e=0;var d=(process.device=="iphone")?1024:4096;var g=0;while(e<c.size.height){var j=Math.min(d,c.size.height-e);while(f<c.size.width){var a=Math.min(d,c.size.width-f);var i=new CGRect(f,e,a,j);var b;if(g<this.mCanvasList.length){b=this.mCanvasList[g]}else{b=$("<canvas/>");b.css("position","absolute");this.canvas().after(b);this.mCanvasList.push(b)}var h=UIScreen.mainScreen().scale();b.attr("width",i.size.width>0?i.size.width*h+"px":"auto");b.attr("height",i.size.height>0?i.size.height*h+"px":"auto");b.css({left:i.origin.x,top:i.origin.y,width:i.size.width>0?i.size.width+"px":"auto",height:i.size.height>0?i.size.height+"px":"auto"});this.mCanvasRects.push(i);f+=a;g+=1}e+=j;f=0}UIView.prototype.setFrame.call(this,c)},setNeedsDisplay:function(){if(this.mCanvasRects){var a=this;var b=0;this.mCanvasRects.forEach(function(e){var d=a.mCanvasList[b];var c=d[0].getContext("2d");c.save();var f=UIScreen.mainScreen().scale();c.scale(f,f);c.clearRect(0,0,e.size.width,e.size.height);c.translate(-e.origin.x,-e.origin.y);a.drawRect(c);c.restore();b+=1})}},canvasList:function(){return this.mCanvasList},canvasRects:function(){return this.mCanvasRects},drawRect:function(a){if(this.mRootNode){this.mLinkedNodes=[];this.mSummarizedNodes=[];a.globalAlpha=1;a.lineJoin="round";a.lineCap="round";a.save();var b=this.mRootNode;var d=b.rootPoint();a.translate(d.x,d.y);this.drawNode(a,b);var c=b.presentPoint();if(b.isWireFrameStyle()){this.drawWireFramePath(a,b,0,c)}else{a.lineWidth=b.lineWidth();a.strokeStyle=this.rootLineColor();a.beginPath();a.moveTo(0,0);a.lineTo(c.x,c.y);a.stroke()}if(this.mRenderSnapshot){this.drawNodeUIElements(a,this.mRootNode,c)}a.restore();this.drawLinkedNodes(a,this.mLinkedNodes);this.drawSummarizedNodes(a,this.mSummarizedNodes)}},drawNode:function(a,e,f){if(!e.isShrink()){a.save();var c=e.presentPoint();a.translate(c.x,c.y);var g=null;if(!f){g=e.styleContext().themeColorHexs;if(!g){g=e.styleContext().defaultThemeColorHexs()}}var d=e.children().slice();var b=this;d.forEach(function(k){var j=f;if(!j){var i=d.indexOf(k);var h=g[i%g.length];j=h}b.drawNode2(a,e,k,e.isLeft(),j)});a.restore();if(e.isRoot()&&e.children2().length>0){c.x=0;a.save();a.translate(c.x,c.y);var d=e.children2().slice();var b=this;d.forEach(function(k){var j=f;if(!j){var i=d.indexOf(k);var h=g[i%g.length];j=h}b.drawNode2(a,e,k,true,j)});a.restore()}}if(e.linkPaths().length>0){this.mLinkedNodes.push(e)}if(e.summaries().length>0){this.mSummarizedNodes.push(e)}},drawNode2:function(p,j,g,f,b){var i=g.lineColorHex()?g.lineColorHex():b;this.drawNode(p,g,i);p.lineWidth=j.lineWidth();p.strokeStyle=i;var r=displayStyleBasic();var q=g.presentPoint();var k=f?Math.max(-g.marginHorizontal(),q.x):Math.min(g.marginHorizontal(),q.x);p.beginPath();p.moveTo(0,0);if(r==MindNode.Style.WireFrameBracket){var e=null;var h=j.children().length;if(h>0&&g==j.children()[h-1]){e=j.children()}else{h=j.children2().length;if(h>0&&g==j.children2()[h-1]){e=j.children2()}}if(e!=null){if(j.isRoot()){p.strokeStyle=this.rootLineColor()}var m=g.level()>=3?0:10;var d=10;var s,a;if(e.length==1){s=q.y-g.contentSize().height/2;a=q.y+g.contentSize().height/2}else{var o=e[0];s=o.presentPoint().y;if(e.length>=2){var n=e[e.length-2];a=Math.max(q.y,n.presentPoint().y)}else{a=q.y}}if(!f){p.moveTo(m,0);p.quadraticCurveTo(m+d,0,m+d,-d);p.lineTo(m+d,s+d);p.quadraticCurveTo(m+d,s,m+d*2,s);p.moveTo(m,0);p.quadraticCurveTo(m+d,0,m+d,d);p.lineTo(m+d,a-d);p.quadraticCurveTo(m+d,a,m+d*2,a)}else{p.moveTo(-m,0);p.quadraticCurveTo(-m-d,0,-m-d,-d);p.lineTo(-m-d,s+d);p.quadraticCurveTo(-m-d,s,-m-d*2,s);p.moveTo(-m,0);p.quadraticCurveTo(-m-d,0,-m-d,d);p.lineTo(-m-d,a-d);p.quadraticCurveTo(-m-d,a,-m-d*2,a)}p.stroke()}if(j.isRoot()){this.drawWireFramePath(p,g,k,q)}}else{if(r==MindNode.Style.WireFrameVertical){if(j.isRoot()){p.strokeStyle=this.rootLineColor()}var c=f?-MindNode.DEFAULT_NODE_MARGIN/2:MindNode.DEFAULT_NODE_MARGIN/2;if(Math.abs(c)>Math.abs(k)){c=k/3}p.lineTo(c,0);var d=Math.min(10,(Math.abs(k)-Math.abs(c))/2);if(q.y>d){p.lineTo(c,q.y-d);p.quadraticCurveTo(c,q.y,c+(f?-d:d),q.y)}else{if(q.y<-d){p.lineTo(c,q.y+d);p.quadraticCurveTo(c,q.y,c+(f?-d:d),q.y)}else{p.lineTo(c,q.y)}}p.lineTo(k,q.y);if(j.isRoot()){p.stroke();this.drawWireFramePath(p,g,k,q)}else{p.lineTo(q.x,q.y);p.stroke()}}else{if(r==MindNode.Style.WireFrameLine||r==MindNode.Style.WireFrameLine2||r==MindNode.Style.WireFrameAll){var l=20*Math.abs(q.y)/60;if(l+10>j.contentSize().width/2){l=j.contentSize().width/2-10}if(j.isRoot()||r==MindNode.Style.WireFrameAll){p.moveTo(f?l:-l,0);p.quadraticCurveTo(0,q.y,k,q.y);if(g.isWireFrameStyle()){p.stroke();this.drawWireFramePath(p,g,k,q)}else{p.lineTo(q.x,q.y);p.stroke()}}else{if(j!=null&&j.isWireFrameStyle()){var c=f?-MindNode.DEFAULT_NODE_MARGIN/2:MindNode.DEFAULT_NODE_MARGIN/2;if(Math.abs(c)>Math.abs(k)){c=k/3}p.lineTo(c,0);p.quadraticCurveTo((k+c)/2,q.y,k,q.y);p.lineTo(q.x,q.y);p.stroke()}else{p.quadraticCurveTo(k/2,q.y,k,q.y);p.lineTo(q.x,q.y);p.stroke()}}}else{p.quadraticCurveTo(k/2,q.y,k,q.y);p.lineTo(q.x,q.y);p.stroke()}}}if(this.mRenderSnapshot){this.drawNodeUIElements(p,g,q)}},drawWireFramePath:function(i,c,f,b){var a=Math.abs(b.x-f);var h=c.contentSize().height;var g=Math.min(10,Math.min(a/2,h/2));var d=MindNode.DisplayStyle-displayStyleBasic();if(d==0){i.beginPath();i.roundRect(Math.min(b.x,f),b.y-h/2,a,h,g);i.strokeStyle=UIColor.lightGrayColor;i.lineWidth=1;i.stroke();i.beginPath();i.roundRect(Math.min(b.x,f)+0.2,b.y-h/2+0.2,a-0.4,h-0.4,g);var e=i.globalAlpha;i.globalAlpha=1;i.fillStyle=this.backgroundColorForWireFrame();i.fill();i.globalAlpha=e}else{i.beginPath();i.roundRect(Math.min(b.x,f),b.y-h/2,a,h,g);var e=i.globalAlpha;i.globalAlpha=1;i.fillStyle=this.backgroundColorForWireFrame();i.fill();i.globalAlpha=e}},drawNodeUIElements:function(m,l,t){try{var c=l.getGlobalGraphPoint(l.graphPoint());if(l.isShrink()||(l.isRoot()&&MindNode.DisplayStyle==MindNode.Style.Default)){m.fillStyle="rgb(0,122,255)";m.beginPath();m.arc(t.x,t.y,5,0,Math.PI*2);m.fill();if(l.children2().length>0){m.beginPath();m.arc(t.x-l.contentSize().width,t.y,5,0,Math.PI*2);m.fill()}}var q;if(process.platform==="darwin"){q="PingFangSC-Regular"}else{q="Microsoft Yahei"}var g=l.textView();var a=l.fontSize();var b=a+5;var i=l.textView().isBold()?"bold":"normal";i+=" "+a+"px "+q;var f=null;if(l.textView().isUnderline()){f="underline"}else{if(l.textView().isStrikethrough()){f="strikethrough"}}m.font=i;m.fillStyle=l.textColor();m.strokeStyle=l.textColor();var o=l.textEdgeInsets();var n=l.textAlign();var u=n=="center"?-3:0;m.fillTextAutoLine(g.text(),t.x+(g.left()-c.x),t.y+(g.top()-c.y)+u,g.width(),b,n,f);var k=l.remarkView();if(k){m.fillStyle=k.backgroundColor();m.beginPath();m.roundRect(t.x+(k.left()-c.x),t.y+(k.top()-c.y),k.width(),k.height(),3);m.fill();m.font="normal 12px "+q;m.fillStyle=k.textColor();if(l.isRoot()||l.isWireFrameStyle()){m.fillTextAutoLine(k.text(),t.x+(k.left()-c.x),t.y+(k.top()-c.y),k.width(),15,"center",f)}else{m.fillTextAutoLine(k.text(),t.x+(k.left()-c.x),t.y+(k.top()-c.y),k.width(),15,"left",f)}}var d=l.imageView();if(d){var j=d.layer()[0];var o=l.imageEdgeInsets();m.drawImage(j,t.x+(d.left()-c.x),t.y+(d.top()-c.y),d.width(),d.height())}var h=l.latexView();if(h){var p=h.imageView();if(p){var j=p.layer()[0];try{m.drawImage(j,t.x+(h.left()-c.x),t.y+(h.top()-c.y),h.width(),h.height())}catch(r){main.log("draw latex exception: "+r+" "+l.latex())}}}var s=l.markView();if(s){var j=s.layer()[0];m.drawImage(j,t.x+(s.left()-c.x),t.y+(s.top()-c.y),s.width(),s.height())}if(l.linkPaths().length>0){m.font="normal 15px "+q;l.linkPaths().forEach(function(w){var e=w.textView();m.fillStyle=e.textColor();if(l.isLeft()){var v=Math.min(m.measureText(e.text()).width,e.width());m.fillTextAutoLine(e.text(),t.x+(e.left()-c.x)+e.width()-v,t.y+(e.top()-c.y),e.width(),20)}else{m.fillTextAutoLine(e.text(),t.x+(e.left()-c.x),t.y+(e.top()-c.y),e.width(),20)}})}if(l.summaries().length>0){m.font="normal 15px "+q;l.summaries().forEach(function(e){var v=e.textView();m.fillStyle=v.textColor();if(l.isLeft()){var w=Math.min(m.measureText(v.text()).width,v.width());m.fillTextAutoLine(v.text(),t.x+(v.left()-c.x)+v.width()-w,t.y+(v.top()-c.y),v.width(),20)}else{m.fillTextAutoLine(v.text(),t.x+(v.left()-c.x),t.y+(v.top()-c.y),v.width(),20)}})}}catch(r){main.log("DrawNodeUIElements Exception: "+r)}},drawLinkedNodes:function(q,o){this.mLinkPathArray=[];if(o.length>0){var n=7;for(var u=0;u<o.length;u++){q.lineWidth=2;var p=o[u];var w=p.linkPaths().slice();var e;if(p.imageView()){if(p.isLeft()){e=new CGPoint(p.imageView().left()-n,p.imageView().center().y)}else{e=new CGPoint(p.imageView().right()+n,p.imageView().center().y)}}else{if(p.latexView()){if(p.isLeft()){e=new CGPoint(p.latexView().left()-n,p.latexView().center().y)}else{e=new CGPoint(p.latexView().right()+n,p.latexView().center().y)}}else{if(p.isLeft()){e=new CGPoint(p.textView().left()-n,p.textView().center().y)}else{e=new CGPoint(p.textView().right()+n,p.textView().center().y)}}}for(var s=0;s<w.length;s++){var a=w[s];var l=a.toNodeID();var g=this.mRootNode.findNodeWithID(l);if(g!=null){q.strokeStyle=a.colorOnDraw(this.mDisplayNight);var d;if(g.imageView()){if(g.isLeft()){d=new CGPoint(g.imageView().left()-n,g.imageView().center().y)}else{d=new CGPoint(g.imageView().right()+n,g.imageView().center().y)}}else{if(g.latexView()){if(g.isLeft()){d=new CGPoint(g.latexView().left()-n,g.latexView().center().y)}else{d=new CGPoint(g.latexView().right()+n,g.latexView().center().y)}}else{if(g.isLeft()){d=new CGPoint(g.textView().left()-n,g.textView().center().y)}else{d=new CGPoint(g.textView().right()+n,g.textView().center().y)}}}var m;if(g.isLeft()){m=new CGPoint(Math.min(e.x,d.x)-100,(e.y+d.y)/2)}else{m=new CGPoint(Math.max(e.x,d.x)+100,(e.y+d.y)/2)}var c=new CGPoint(m.x+a.ctrlPoint().x,m.y+a.ctrlPoint().y);q.beginPath();q.moveTo(e.x,e.y);q.quadraticCurveTo(c.x,c.y,d.x,d.y);q.stroke();q.save();q.beginPath();q.translate(d.x,d.y);var z=Math.atan((c.y-d.y)/(c.x-d.x));q.rotate(z);q.translate(-d.x,-d.y);if(g.isLeft()){q.moveTo(d.x-10,d.y+5)}else{q.moveTo(d.x+10,d.y+5)}q.lineTo(d.x,d.y);if(g.isLeft()){q.moveTo(d.x-10,d.y-5)}else{q.moveTo(d.x+10,d.y-5)}q.lineTo(d.x,d.y);q.stroke();q.restore();var t=[];var b=1/(Math.abs(d.y-e.y)/6);for(var r=0;r<=1.01;r+=b){var h=(1-r)*(1-r)*e.x+2*(1-r)*r*c.x+r*r*d.x;var f=(1-r)*(1-r)*e.y+2*(1-r)*r*c.y+r*r*d.y;t.push(new CGPoint(h,f))}a.setPoints(t);a.setCtrlPointBase(m);this.mLinkPathArray.push(a);if(a==this.mEditingLinkPath){var v=q.globalAlpha;q.globalAlpha=0.5;q.moveTo(c.x,c.y);q.lineTo(e.x,e.y);q.moveTo(c.x,c.y);q.lineTo(d.x,d.y);q.strokeStyle="red";q.stroke();q.globalAlpha=v}}}q.lineWidth=p.lineWidth()}}},drawSummarizedNodes:function(n,b){if(b.length>0){for(var e=0;e<b.length;e++){n.lineWidth=2;var c=b[e];for(var d=0;d<c.summaries().length;d++){var g=c.summaries()[d];var f=this.mRootNode.findNodeWithID(g.toNodeID());if(f!=null){n.strokeStyle=g.colorOnDraw(this.mDisplayNight);var a=g.summarizedTextBounds();var o=a.origin;var m=new CGPoint(o.x,o.y+a.size.height);n.beginPath();if(c.isLeft()){var l=new CGPoint(Math.min(o.x,m.x)-24,Math.min(o.y,m.y)+8);var k=new CGPoint(Math.min(o.x,m.x)-24,Math.max(o.y,m.y)-2);var h=new CGPoint(l.x-20,(l.y+k.y)/2);n.moveTo(l.x,l.y);n.arcTo(l.x-10,l.y,l.x-10,l.y+10,10);n.lineTo(h.x+10,h.y-10);n.arcTo(h.x+10,h.y,h.x,h.y,10);n.arcTo(h.x+10,h.y,h.x+10,h.y+10,10);n.lineTo(k.x-10,k.y-10);n.arcTo(k.x-10,k.y,k.x,k.y,10)}else{var l=new CGPoint(Math.max(o.x,m.x)+24,Math.min(o.y,m.y)+8);var k=new CGPoint(Math.max(o.x,m.x)+24,Math.max(o.y,m.y)-2);var h=new CGPoint(l.x+20,(l.y+k.y)/2);n.moveTo(l.x,l.y);n.arcTo(l.x+10,l.y,l.x+10,l.y+10,10);n.lineTo(h.x-10,h.y-10);n.arcTo(h.x-10,h.y,h.x,h.y,10);n.arcTo(h.x-10,h.y,h.x-10,h.y+10,10);n.lineTo(k.x+10,k.y-10);n.arcTo(k.x+10,k.y,k.x,k.y,10)}n.stroke()}}n.lineWidth=c.lineWidth()}}},setRootNode:function(a){var b=this.mRootNode;if(b){this.removeObserverWithNode(b)}this.mRootNode=a;this.mActiveNode=null;a.setRoot(true);this.addObserverWithNode(a);this.layoutNodeTree(null,false,true)},rootNode:function(){return this.mRootNode},layoutNodeTree:function(c,b,a){this.mRootNode.layout();this.displayNodeTree(c,b,a)},displayNodeTree:function(e,i,d){var j=this.sizeThatFits();if(!j.isEqual(this.size())){var a=this.size();var c=this.frame();c.size=j;this.setFrame(c)}var g=this.mRootNode.nodeLeftWidth();var b=this.mRootNode.nodeHeight();if(this.mNodeHeight!=b||this.mNodeLeftWidth!=g||d){var h=g+NodeGraphView.horizontalPadding();var f=(j.height+this.mRootNode.nodeHeightTop()-this.mRootNode.nodeHeightBottom())/2;this.mRootNode.setRootPoint(new CGPoint(h,f));this.mRootNode.updateUIViewPosition();this.mNodeLeftWidth=g;this.mNodeHeight=b}this.mRootNode.traverseUpdateRelatedUIViews();if(e){this.scrollToDisplayNode(e)}this.setNeedsDisplay()},scrollToDisplayNode:function(b){if(this.mScrollView&&this.mScale==1){var a=b.textView().frame();a.origin.x-=20;a.origin.y+=80;a.size.width=10;this.mScrollView.scrollRectToVisible(a)}},sizeThatFits:function(c){if(this.mRootNode){var b=this.mScrollView.width();var f=this.mScrollView.height();var e=Math.max(NodeGraphView.horizontalPadding()*2,b-(MindNode.MIN_TEXT_LEN+10+20));var d=Math.max(b,this.mRootNode.nodeWidth()+e);var a=Math.max(f+100,this.mRootNode.nodeHeight()+164);return new CGSize(d,a)}else{return new CGSize()}},addObserverWithNode:function(b){b.setDelegate(this);this.addSubview(b.addBtn());this.addSubview(b.textView());var e=b.remarkBtn();if(e){this.addSubview(e)}var i=b.urlBtn();if(i){this.addSubview(i)}var j=b.fileBtn();if(j){this.addSubview(j)}var a=b.addBtn2();if(a){this.addSubview(a)}var d=b.imageView();if(d){this.addSubview(d)}var f=b.markView();if(f){this.addSubview(f)}var h=b.latexView();if(h){this.addSubview(h);this.mLatexViewArray.push(h)}var c=b.remarkView();if(c){this.addSubview(c)}var g=this;b.linkPaths().forEach(function(k){if(k.textView()){g.addSubview(k.textView())}});b.summaries().forEach(function(k){if(k.textView()){g.addSubview(k.textView())}});b.children().forEach(function(k){g.addObserverWithNode(k)});b.children2().forEach(function(k){g.addObserverWithNode(k)})},removeObserverWithNode:function(b){b.setDelegate(null);b.addBtn().removeFromSuperview();b.textView().removeFromSuperview();var e=b.remarkBtn();if(e){e.removeFromSuperview()}var i=b.urlBtn();if(i){i.removeFromSuperview()}var j=b.fileBtn();if(j){j.removeFromSuperview()}var a=b.addBtn2();if(a){a.removeFromSuperview()}var d=b.imageView();if(d){d.removeFromSuperview()}var f=b.markView();if(f){f.removeFromSuperview()}var h=b.latexView();if(h){h.removeFromSuperview();this.mLatexViewArray.remove(h)}var c=b.remarkView();if(c){c.removeFromSuperview()}var g=this;b.linkPaths().forEach(function(k){if(k.textView()){k.textView().removeFromSuperview()}});b.summaries().forEach(function(k){if(k.textView()){k.textView().removeFromSuperview()}});b.children().forEach(function(k){g.removeObserverWithNode(k)});b.children2().forEach(function(k){g.removeObserverWithNode(k)})},mindNodeChildrenDidExpand:function(c,b){var a=this;b.forEach(function(d){a.addObserverWithNode(d)})},mindNodeChildDidAdd:function(a,b){this.addObserverWithNode(b)},mindNodeAddBtnDidClick:function(e,c){if(this.mSelectionView){var d=this.mSelectionView.type();if(d==NodeSelectionView.TYPE_CUT||d==NodeSelectionView.TYPE_COPY){if(e.isShrink()){e.setShrink(false)}var g=this.mSelectionView.node();if(d==NodeSelectionView.TYPE_CUT){this.mUndoManager.pushUndoNode(g,UndoType.kUndoMove);g.removeFromParent()}else{g=g.copy();this.mUndoManager.pushUndoNode(g,UndoType.kUndoCopy)}if(c==e.addBtn()){e.addNode(g)}else{e.addNode2(g)}this.layoutNodeTree(null,true);this.dismissSelectionView()}return}if(main.getSharedData){var b=main.getSharedData("copyNode");if(b){var a=new NSKeyedUnarchiver(b);var g=a.decodeObjectForKey("root");this.mUndoManager.pushUndoNode(g,UndoType.kUndoCopy);if(e.isShrink()){e.setShrink(false)}if(c==e.addBtn()){e.addNode(g)}else{e.addNode2(g)}this.layoutNodeTree(null,true);main.removeSharedData("copyNode");return}}if(e.isShrink()){e.setShrink(false);this.layoutNodeTree(e,true);this.mUndoManager.pushUndoNode(e,UndoType.kUndoExpand)}else{var f=(c!=e.addBtn());this.addBranch(e,null,f)}},addBranch:function(d,c,f){var g=new MindNode();var b;if(c){var a=d.children().indexOf(c);if(a>=0){d.insertNodeAtIndex(g,a+1);b=d.children()}else{var e=d.children2().indexOf(c);if(e>=0){d.insertNode2AtIndex(g,e+1);b=d.children2()}else{d.addNode(g);b=d.children()}}}else{if(!f){d.addNode(g);b=d.children()}else{if(!d.isExpandLeftEnable()){d.setExpandLeftEnable(true)}d.addNode2(g);b=d.children2()}}this.layoutNodeTree(g,true);this.mNotShowBranchMenu=true;g.textView().layer().focus();this.mUndoManager.pushUndoNode(g,UndoType.kUndoAddNode);UIMenuController.sharedMenuController().setMenuVisible(false,true);return g},insertBranch:function(a){var c=new MindNode();var b=a.children().concat();a.addNode(c);b.forEach(function(d){d.removeFromParent();c.addNode(d)});this.layoutNodeTree(c,true);this.mNotShowBranchMenu=true;c.textView().layer().focus();this.mUndoManager.pushUndoNode(c,UndoType.kUndoInsertNode);UIMenuController.sharedMenuController().setMenuVisible(false,true);return c},setScrollView:function(a){this.mScrollView=a},mindNodeTextViewDidBeginEditing:function(c,b){var a=this.handleSelectionViewClick(c);if(!a){if((c.imageView()||c.latexView())&&c.textView().text().length==0){this.layoutNodeTree(null,true)}if(!this.mNotShowBranchMenu){if(isMobileDevice()){this.showMenuItemsForNode(c)}}else{this.mNotShowBranchMenu=false}this.scrollToDisplayNode(c)}this.mActiveNode=c;this.mDelegate.createApplicationMenu();this.mScrollView.setScrollEnabled(false);this.mTextEditUndo=new UndoOperation(c,UndoType.kUndoText);this.mDelegate.mindNodeTextViewDidBeginEditing(c)},mindNodeTextViewDidChange:function(c,b){UIMenuController.sharedMenuController().setMenuVisible(false,true);this.layoutTextViewWithNode(c,false);if(this.mTextEditUndo){var a=this.mUndoManager.lastUndo();if(!a||this.mTextEditUndo.node()!=a.node()||this.mTextEditUndo.prevText()!=a.prevText()){this.mUndoManager.pushUndo(this.mTextEditUndo)}}this.mDelegate.mindNodeTextViewDidChange(c)},mindNodeTextViewDidEndEditing:function(c,b){this.mTimeoutId=setTimeout(function(){UIMenuController.sharedMenuController().setMenuVisible(false,true)},3000);this.layoutTextViewWithNode(c,true);if(c==this.mActiveNode){if(!isWebApp){this.mActiveNode=null}this.mDelegate.mindNodeTextViewDidEndEditing(c)}this.mScrollView.setScrollEnabled(true);var a=this.mUndoManager.lastUndo();if(a&&c.textView().text()==a.prevText()){this.mUndoManager.removeUndo(a)}else{this.mUndoManager.cleanRedos()}this.mTextEditUndo=null;if(b.width()==c.maxTextWidth()){var d=NSUserDefaults.standardUserDefaults();if(!this.mShowStretchTips){this.mShowStretchTips=d.objectForKey("show_stretch_tips")}if(!this.mShowStretchTips&&c.addBtn().imageView().image()){this.mShowStretchTips=true;dialog.showMessageBoxV2(null,{type:"info",title:LOCAL("Tips"),message:LOCAL("You can drag the adding button to adjust the width of branch when the text has two or more lines."),buttons:[LOCAL("OK"),LOCAL("Don't Remind Me")],defaultId:0,cancelId:0},function(e){if(e==1){d.setObjectForKey(true,"show_stretch_tips");d.synchronize()}})}}},handleSelectionViewClick:function(b){if(!b.isRoot()){if(this.mSelectionView){var i=this.mSelectionView.node();if(i==b){this.dismissSelectionView()}else{var e=this.mSelectionView.type();if(e==NodeSelectionView.TYPE_LINK){var h=this;setTimeout(function(){h.showLinkedTextInput(i,b)},50)}else{if(e==NodeSelectionView.TYPE_SUMMARY){var h=this;setTimeout(function(){h.showSummarizedTextInput(i,b)},50)}else{var f=b.parent();var a=i;if(e==NodeSelectionView.TYPE_CUT){this.mUndoManager.pushUndoNode(a,UndoType.kUndoMove);a.removeFromParent()}else{a=a.copy();this.mUndoManager.pushUndoNode(a,UndoType.kUndoCopy)}var d=f.children().indexOf(b);if(d>=0){f.insertNodeAtIndex(a,d)}else{d=f.children2().indexOf(b);if(d>=0){f.insertNode2AtIndex(a,d)}else{f.addNode(a)}}this.layoutNodeTree(a,true)}}this.dismissSelectionView()}return true}else{if(main.getSharedData){var g=main.getSharedData("copyNode");if(g){var c=new NSKeyedUnarchiver(g);var a=c.decodeObjectForKey("root");this.mUndoManager.pushUndoNode(a,UndoType.kUndoCopy);var f=b.parent();var d=f.children().indexOf(b);if(d>=0){f.insertNodeAtIndex(a,d)}else{d=f.children2().indexOf(b);if(d>=0){f.insertNode2AtIndex(a,d)}else{f.addNode(a)}}this.layoutNodeTree(a,true);if(main.removeSharedData){main.removeSharedData("copyNode")}return true}}}}return false},mindNodeLatexViewDidClick:function(c,a){var b=this.handleSelectionViewClick(c);if(!b){if(c.textView().text().length>0){this.onMenuItemLatex(c)}else{c.textView().becomeFirstResponder()}}},mindNodeLatexViewDidContextMenu:function(c,e){var b=this.buildContextMenuTemplate(c,true);var d=Menu.buildFromTemplate(b);var a=isWebApp?{view:e}:{};d.popup(a);this.installImagePickerOnContextMenu(c)},mindNodeImageViewDidClick:function(c,b){if(this.mImageDidResize){return}this.mindNodeImageDidFocusOut(c);var a=this.handleSelectionViewClick(c);if(!a){if(c.textView().text().length>0){this.onMenuItemImagePreview(c)}else{c.textView().becomeFirstResponder()}}},mindNodeImageViewDidContextMenu:function(d,b){var c=this.buildContextMenuTemplate(d,true);var e=Menu.buildFromTemplate(c);var a=isWebApp?{view:b}:{};e.popup(a);this.installImagePickerOnContextMenu(d)},mindNodeTextViewDidContextMenu:function(b,a){a.resignFirstResponder();this.showMenuItemsForNode(b)},showMenuItemsForNode:function(c){var b=this.buildContextMenuTemplate(c,false);var d=Menu.buildFromTemplate(b);var a=isWebApp?{view:c.textView()}:{};d.popup(a);if(this.mTimeoutId){clearTimeout(this.mTimeoutId);this.mTimeoutId=null}this.installImagePickerOnContextMenu(c)},mindNodeTextViewDeleteKeyEnter:function(b,a){this.mDelegate.mindNodeTextViewDeleteKeyEnter(b)},activeNode:function(){return this.mActiveNode},buildContextMenuTemplate:function(d,f){var s=[];var b={type:"separator"};var c=this;var a={label:LOCAL("Move"),click:function(){c.onMenuItemCut(d)}};var p={label:LOCAL("Copy"),click:function(){c.onMenuItemCopy(d)}};var n={label:LOCAL("Delete"),click:function(){c.onMenuItemDelete(d)}};var l={label:LOCAL("Photo"),click:function(){c.onMenuItemImage(d)}};var j={label:LOCAL("Remark"),click:function(){c.onMenuItemRemark(d)}};var k={label:LOCAL("Color"),click:function(){c.onMenuItemColor(d)}};var i={label:d.isShrink()?LOCAL("Expand"):LOCAL("Shrink"),click:function(){c.onMenuItemExpand(d)}};var h={label:d.markType()>0?LOCAL("Un-Mark"):LOCAL("Mark"),click:function(){c.onMenuItemMark(d)}};var g={label:LOCAL("Connect"),click:function(){c.onMenuItemLink(d)}};var e={label:LOCAL("Summary"),click:function(){c.onMenuItemSummary(d)}};var u={label:LOCAL("Latex"),click:function(){c.onMenuItemLatex(d)}};var t={label:d.url()?LOCAL("Un-URL"):LOCAL("URL"),click:function(){c.onMenuItemURL(d)}};var r={label:d.fileName()?LOCAL("Un-Attachment"):LOCAL("Attachment"),click:function(){c.onMenuItemFile(d)}};var q={label:d.isExpandLeftEnable()?LOCAL("Disable Expanding Left"):LOCAL("Enable Expanding Left"),click:function(){c.onMenuItemLeftExpand(d)}};var o={label:LOCAL("Style"),click:function(){c.onMenuItemStyle(d)}};var m={label:LOCAL("New Topic"),click:function(){c.onMenuItemNewTopic(d)}};if(isMobileDevice()){if(!d.isRoot()){s.push({label:LOCAL("Branch"),click:function(){c.onMenuItemAddBranch(d)}},b)}s.push({label:LOCAL("Sub-Branch"),click:function(){c.onMenuItemAddSubBranch(d)}},b)}if(f){s.push({label:LOCAL("Preview"),click:function(){c.onMenuItemImagePreview(d)}},b);s.push({label:LOCAL("Save"),click:function(){c.onMenuItemImageSave(d)}},b)}if(d.isRoot()){if(d.children().length>0||d.children2().length>0){s.push(o,b,l,b,j,b,i,b,h,b,u,b,t,b,r,b,q,b,m)}else{s.push(o,b,l,b,j,b,h,b,u,b,t,b,r,b,q,b,m)}}else{if(d.children().length>0){s.push(a,b,p,b,n,b,l,b,j,b,i,b,h,b,g,b,e,b,u,b,t,b,r)}else{s.push(a,b,p,b,n,b,l,b,j,b,h,b,g,b,e,b,u,b,t,b,r)}if(MindNode.DisplayStyle-displayStyleBasic()==0){s.splice(10,0,k)}}return s},installImagePickerOnMenuBtn:function(d,a){var c=$("<input id='browser' type='file' accept='.jpg,.jpeg,.png'/>");c.css({position:"absolute",left:0,top:0,width:a.width(),height:a.height(),opacity:0});a.setUserInteractionEnabled(false);a.layer().append(c);var b=this;c.change(function(){if(this.files.length>0){var f=c.val();var e=this.files[0];b.showImageAtNode(d,f,e)}})},uploadPhotoToQiniu:function(e,c,b){var f=new FormData();f.append("file",c);var d=new HttpRequest("photoUpload",f,{key:b},"POST",true);var a=this;main.log("begin upload image: "+b+" "+c.size);HttpAjax.sendRequest(d,function(g,i){main.log("upload image result: "+g+" "+i);if(g=="success"){var j=JSON.parse(i);if(j.rtn==0){var h=j.data.key;e.mImageName=h}}})},layoutTextViewWithNode:function(e,d){var c=e.textView();var f=e.textViewFitSize();if(!d){if(f.width>c.width()){f.width+=e.minTextWidth();var g=e.maxTextWidth();if(f.width>g){f.width=g}}else{f.width=c.width()}}else{if(e.imageView()||e.latexView()){var b=c.frame();b.size=f;e.setTextViewFrame(b);this.layoutNodeTree();return}}var a=c.size();var b=c.frame();b.size=f;e.setTextViewFrame(b);if(!a.isEqual(c.size())){if(d){this.layoutNodeTree()}else{this.layoutNodeTree(e)}}},onMenuItemCut:function(b){this.showSelectionViewWithNode(b,NodeSelectionView.TYPE_CUT);b.textView().resignFirstResponder();var c=NSUserDefaults.standardUserDefaults();var a=c.objectForKey("show_cut_tipsV2");if(!a){dialog.showMessageBoxV2(null,{type:"info",title:LOCAL("Tips"),message:LOCAL("Click other branch to move to it above, or click the adding button to move to branches bottom, otherwise click self to cancel."),buttons:[LOCAL("OK"),LOCAL("Don't Remind Me")],defaultId:0,cancelId:0},function(d){if(d==1){c.setObjectForKey(true,"show_cut_tipsV2");c.synchronize()}})}},onMenuItemCopy:function(b){this.showSelectionViewWithNode(b,NodeSelectionView.TYPE_COPY);b.textView().resignFirstResponder();var c=NSUserDefaults.standardUserDefaults();var a=c.objectForKey("show_copy_tipsV2");if(!a){dialog.showMessageBoxV2(null,{type:"info",title:LOCAL("Tips"),message:LOCAL("Click other branch to copy to it above, or click the adding button to copy to branches bottom, otherwise click self to cancel."),buttons:[LOCAL("OK"),LOCAL("Don't Remind Me")],defaultId:0,cancelId:0},function(d){if(d==1){c.setObjectForKey(true,"show_copy_tipsV2");c.synchronize()}})}},onMenuItemDelete:function(a){if(!a.isRoot()){this.mUndoManager.pushUndoNode(a,UndoType.kUndoDeleteNode);a.removeFromParent();a.deletePhotos();this.layoutNodeTree(null,true);if(a==this.mActiveNode){this.mActiveNode=null}}},onMenuItemExpand:function(b){var a=b.isShrink();b.setShrink(!a);this.layoutNodeTree(null,true);if(b.isShrink()){this.mUndoManager.pushUndoNode(b,UndoType.kUndoShrink)}else{this.mUndoManager.pushUndoNode(b,UndoType.kUndoExpand)}},onMenuItemText:function(a){a.textView().becomeFirstResponder()},onMenuItemImage:function(b){if(!this.mDelegate.checkIfUserProValid()){return}var c=remote.getCurrentWindow();if(b.imageView()){var a=this;if(isWebApp){dialog.showMessageBoxV2(c,{type:"question",title:LOCAL("Tips"),message:LOCAL("Delete the photo?"),buttons:[LOCAL("Delete"),LOCAL("Back")],defaultId:1,cancelId:1},function(d){if(d==0){a.mUndoManager.pushUndoNode(b,UndoType.kUndoDeletePhoto);b.setImage(null)}})}else{dialog.showMessageBoxV2(c,{type:"question",title:LOCAL("Tips"),message:LOCAL("Delete or re-select photo."),buttons:[LOCAL("Select Photo"),LOCAL("Delete Photo"),LOCAL("Back")],defaultId:2,cancelId:2},function(d){if(d==0){a.showImagePicker(b)}else{if(d==1){a.mUndoManager.pushUndoNode(b,UndoType.kUndoDeletePhoto);b.setImage(null)}}})}}else{if(!isWebApp){this.showImagePicker(b)}}},showImagePicker:function(b){var c=remote.getCurrentWindow();var a=this;dialog.showOpenDialogV2(c,{properties:["openFile"],filters:[{name:"Image Files",extensions:["jpg","jpeg","png","gif"]}]},function(e){if(e&&e.length>0){var d=e[0];a.showImageAtNode(b,d)}})},showImageAtNodeForProVersion:function(b,d,c,a){if(!this.mDelegate.checkIfUserProValid()){return}this.showImageAtNode(b,d,c,a)},showImageAtNode:function(a,j,d,h){var e=null;var c=null;var g=window.URL||window.webkitURL;if(d){e=g.createObjectURL(d);c=h}else{c=h?h:fs.readFileSync(j);var f=toArrayBuffer(c);d=new Blob([f]);e=g.createObjectURL(d)}var b=new Image();var i=this;b.onload=function(){var l=new CGSize(b.width,b.height);if(l.width>0&&l.height>0){var m="jpg";if(j){var p=j.lastIndexOf(".");if(p!=-1){m=j.substring(p+1)}}var n=stringRandom(10)+"."+m;a.setImage(n,l,e);if(c){var o=imageCachePath();if(!fs.existsSync(o)){fs.mkdirSync(o,{recursive:true})}var k=imageCachePath()+n;fs.writeFile(k,c,function(q){if(q){main.log("pic error: "+q)}})}i.uploadPhotoToQiniu(a,d,n);i.mUndoManager.pushUndoNode(a,UndoType.kUndoAddPhoto)}};b.src=e},onMenuItemImagePreview:function(a){var d=this.window();var c=new ImagePreviewView(d.bounds());var b=a.imageView().image();c.setImage(b,a.imageSize());d.addSubview(c)},onMenuItemImageSave:function(c){var d=c.imageView().image().src;main.log("save image src: "+d);var b=$("<a>").attr("href",d).attr("download","image.png").appendTo("body");b[0].click();b.remove()},onMenuItemLink:function(c){var a=this;this.showSelectionViewWithNode(c,NodeSelectionView.TYPE_LINK);var d=NSUserDefaults.standardUserDefaults();var b=d.objectForKey("show_link_tipsV2");if(!b){dialog.showMessageBoxV2(null,{type:"info",title:LOCAL("Tips"),message:LOCAL("Click other branch to connect."),buttons:[LOCAL("OK"),LOCAL("Don't Remind Me")],defaultId:0,cancelId:0},function(e){if(e==1){d.setObjectForKey(true,"show_link_tipsV2");d.synchronize()}})}},onMenuItemSummary:function(b){this.showSelectionViewWithNode(b,NodeSelectionView.TYPE_SUMMARY);var c=NSUserDefaults.standardUserDefaults();var a=c.objectForKey("show_summary_tipsV2");if(!a){dialog.showMessageBoxV2(null,{type:"info",title:LOCAL("Tips"),message:LOCAL("Click other branch to summary."),buttons:[LOCAL("OK"),LOCAL("Don't Remind Me")],defaultId:0,cancelId:0},function(d){if(d==1){c.setObjectForKey(true,"show_summary_tipsV2");c.synchronize()}})}},onMenuItemURL:function(a){if(a.url()){this.mUndoManager.pushUndoNode(a,UndoType.kUndoDeleteURL);a.setURL(null)}else{if(this.mDelegate){this.mDelegate.mindNodeURLWillAdd(a)}}},onMenuItemFile:function(a){if(a.fileName()){this.mUndoManager.pushUndoNode(a,UndoType.kUndoDeleteFile);a.setFileName(null)}else{if(this.mDelegate){this.mDelegate.mindNodeFileWillAdd(a)}}},onMenuItemColor:function(a){this.mDelegate.mindNodeColorPickerWillShow(a)},onMenuItemMark:function(b){var a=b.markType();if(a!=0){this.mUndoManager.pushUndoNode(b,UndoType.kUndoUnmark);b.setMarkType(0)}else{this.mDelegate.mindNodeMarkPickerWillShow(b)}},onMenuItemLeftExpand:function(c){var b=!c.isExpandLeftEnable();if(!b){if(c.children2().length>0){var d=remote.getCurrentWindow();var a=this;dialog.showMessageBoxV2(d,{type:"info",title:LOCAL("Tips"),message:LOCAL("The branches on left would be removed."),buttons:[LOCAL("Confirm"),LOCAL("Cancel")]},function(e){if(e==0){c.setExpandLeftEnable(false);a.layoutNodeTree(null,true)}})}else{c.setExpandLeftEnable(false)}}else{c.setExpandLeftEnable(true);this.addBranch(this.mRootNode,null,true)}if(this.mDelegate){this.mDelegate.createApplicationMenu()}},onMenuItemRemark:function(a){if(this.mDelegate){this.mDelegate.mindNodeRemarkWillShow(a)}},onMenuItemStyle:function(a){if(this.mDelegate){this.mDelegate.mindNodeStylePickerWillShow(a)}},onMenuItemNewTopic:function(a){if(this.mDelegate){this.mDelegate.mindNodeWillNewTopic(a)}},onMenuItemLatex:function(a){if(this.mDelegate){this.mDelegate.mindNodeLatexWillShow(a)}},onMenuItemAddBranch:function(a){this.addBranch(a.parent(),a)},onMenuItemAddSubBranch:function(a){if(a.isShrink()){a.setShrink(false);this.layoutNodeTree(a,true)}this.addBranch(a)},mindNodeChildDidRemove:function(a,b){this.removeObserverWithNode(b)},alertViewClickedButtonAtIndex:function(c,d){var k=c.tag();if(k==100){if(d==1){var b=c.userData();b.removeFromParent();this.layoutNodeTree(null,true)}}else{if(k==101){if(d==1){this.mRootNode.setExpandLeftEnable(false);this.layoutNodeTree(null,true)}}else{if(k==102){if(d==1){var h=c.textFieldAtIndex(0).text();if(!h||h.length==0){return}var a=c.userData();var b=a.n;var i=a.n2;var f=b.findSummary(i.ID());if(f){b.updateSummary(f,h)}else{var f=b.summarizeToNid(i.ID(),h);var g=this.mUndoManager.pushUndoNode(b,UndoType.kUndoAddSummary);g.setSummary(f);var e=NSUserDefaults.standardUserDefaults();e.execOnceOnKey("show_summary_edit_tips",function(){var l=remote.getCurrentWindow();dialog.showMessageBoxV2(l,{type:"info",title:LOCAL("Tips"),message:LOCAL("Click the text of summary to edit and adjust the position."),buttons:[LOCAL("OK")],defaultId:0,cancelId:0},function(m){})})}}}else{if(k==103){if(d==1){var b=c.userData();b.removeFromParent();this.layoutNodeTree(null,true)}else{if(d==2){var b=c.userData();this.mUndoManager.pushUndoNode(b,UndoType.kUndoDeletePhoto);b.setImage(null)}}}else{if(k==104){if(d==1){var h=c.textFieldAtIndex(0).text();var a=c.userData();var b=a.n;var i=a.n2;var j=b.findLinkPath(i.ID());if(j){b.updateLinkPath(j,h)}else{j=b.attachLinkTo(i.ID(),h);var g=this.mUndoManager.pushUndoNode(b,UndoType.kUndoAddLink);g.setLinkPath(j);var e=NSUserDefaults.standardUserDefaults();e.execOnceOnKey("show_link_edit_tips",function(){var l=remote.getCurrentWindow();dialog.showMessageBoxV2(l,{type:"info",title:LOCAL("Tips"),message:LOCAL("Click the link path to edit text and adjust the shape."),buttons:[LOCAL("OK")],defaultId:0,cancelId:0},function(m){})})}}}}}}}},showSelectionViewWithNode:function(e,c){if(!this.mSelectionView){var d=e.globalSelectionRect();var a=new NodeSelectionView(d,c);a.setNode(e);var b=this;a.layer().click(function(){b.dismissSelectionView()});this.addSubview(a);this.mSelectionView=a;if(main.setSharedData){var f=NSKeyedArchiver.archivedDataWithRootObject({root:e});main.setSharedData("copyNode",f)}}},dismissSelectionView:function(){if(this.mSelectionView){var a=this.mSelectionView.node();this.mSelectionView.removeFromSuperview();this.mSelectionView=null;if(main.removeSharedData){main.removeSharedData("copyNode")}}},setDelegate:function(a){this.mDelegate=a},delegate:function(){return this.mDelegate},mindNodeAttachBtnDidUpdate:function(b,a){if(a){this.addSubview(a)}this.setNeedsDisplay()},mindNodeRemarkViewDidUpdate:function(b,a){if(a){this.addSubview(a)}this.layoutNodeTree()},mindNodeRemarkBtnDidClick:function(a){if(this.mDelegate){this.mDelegate.mindNodeRemarkWillShow(a)}},mindNodeImageDidUpdate:function(b){var a=b.imageView();if(a){this.addSubview(a)}this.layoutNodeTree(b)},mindNodeMarkTypeDidUpdate:function(b,c){var a=b.markView();if(a){if(c>0){this.addSubview(a)}else{a.removeFromSuperview();b.setMarkView(null)}this.layoutNodeTree(b,true)}},mindNodelinkTextViewDidUpdate:function(a,b){if(b){this.addSubview(b.textView())}this.setNeedsDisplay()},mindNodeSummarizedViewDidUpdate:function(b,a){if(a){this.addSubview(a.textView())}this.setNeedsDisplay()},mindNodeLinkTextViewDidBeginEdit:function(c,k){var i=this;var d={type:"separator"};var a={label:LOCAL("Text"),click:function(){var l=i.mRootNode.findNodeWithID(k.toNodeID());if(l){i.showLinkedTextInput(c,l)}}};var h={label:LOCAL("Adjust"),click:function(){i.finishEditingLinkPath();i.mEditingLinkPath=k;i.setNeedsDisplay();var o=new UIButton(new CGRect(0,0,30,30));o.setImage(new UIImage("res/btn_ctrl.png",25,25),UIControl.State.Normal);o.layer().mousedown(function(q){i.mLinkCtrlMouseDown=true;i.mScrollView.setScrollEnabled(false);clearTimeout(i.mEditingLinkTimeoutId)});var l=new CGPoint(k.ctrlPointBase().x+k.ctrlPoint().x,k.ctrlPointBase().y+k.ctrlPoint().y);o.setCenter(l);i.addSubview(o);i.mEditingLinkCtrlBtn=o;var p=NSUserDefaults.standardUserDefaults();var n=p.execOnceOnKey("show_link_adjust_tips",function(){var q=remote.getCurrentWindow();dialog.showMessageBoxV2(q,{type:"info",title:LOCAL("Tips"),message:LOCAL("Drag the red control point to change the shape of curve."),buttons:[LOCAL("OK")],defaultId:0,cancelId:0},function(r){})});var m=n?6:3;i.mEditingLinkTimeoutId=setTimeout(function(){i.finishEditingLinkPath()},m*1000)}};var f={label:LOCAL("Color"),click:function(){var l=remote.getCurrentWindow();dialog.showMessageBoxV2(l,{type:"info",title:LOCAL("Tips"),message:LOCAL("Please select the color of link path."),buttons:[LOCAL("Red"),LOCAL("Green"),LOCAL("Blue"),LOCAL("Gray"),LOCAL("Cancel")]},function(n){var m=null;switch(n){case 0:m="#FF0000";break;case 1:m="#32CD32";break;case 2:m="#1E90FF";break;case 3:m="gray";break;default:break}if(m){k.setColor(m);k.textView().setTextColor(k.colorOnDraw(i.mDisplayNight));i.setNeedsDisplay()}})}};var e={label:LOCAL("Delete"),click:function(){c.detachLinkPath(k);var l=i.mUndoManager.pushUndoNode(c,UndoType.kUndoDeleteLink);l.setLinkPath(k)}};var g;if(isMobileDevice()){g=[a,d,f,d,e]}else{g=[a,d,h,d,f,d,e]}var b=Menu.buildFromTemplate(g);var j=isWebApp?{view:k.textView()}:{};b.popup(j)},mindNodeSummarizedViewDidBeginEdit:function(c,e){var j=this;var d={type:"separator"};var a={label:LOCAL("Text"),click:function(){var l=j.mRootNode.findNodeWithID(e.toNodeID());if(l){j.showSummarizedTextInput(c,l)}}};var i={label:LOCAL("Adjust"),click:function(){j.finishEditingSummary();var o=e.node();var q=e.adjustingSelectionBounds(o.isLeft());var l=new NodeSelectionView(q,NodeSelectionView.TYPE_SUMMARY_ADJUST,"rgba(255,0,0,0.5)",true);j.addSubview(l);l.layer().mousedown(function(r){j.mSummaryMouseDown=true;j.mSummaryMouseDownLocation=new CGPoint(r.pageX,r.pageY);j.mSummaryOffx=e.offset().x;j.mScrollView.setScrollEnabled(false);clearTimeout(j.mEditingSummaryTimeoutId)});j.mEditingSummary=e;j.mSummarySelectionView=l;var p=NSUserDefaults.standardUserDefaults();var n=p.execOnceOnKey("show_summary_adjust_tips",function(){var r=remote.getCurrentWindow();dialog.showMessageBoxV2(r,{type:"info",title:LOCAL("Tips"),message:LOCAL("Drag the selection area to adjust the position of summary."),buttons:[LOCAL("OK")],defaultId:0,cancelId:0},function(s){})});var m=n?6:3;j.mEditingSummaryTimeoutId=setTimeout(function(){j.finishEditingSummary()},m*1000)}};var g={label:LOCAL("Color"),click:function(){var l=remote.getCurrentWindow();dialog.showMessageBoxV2(l,{type:"info",title:LOCAL("Tips"),message:LOCAL("Please select the color of summary."),buttons:[LOCAL("Red"),LOCAL("Green"),LOCAL("Blue"),LOCAL("Gray"),LOCAL("Cancel")]},function(n){var m=null;switch(n){case 0:m="#FF0000";break;case 1:m="#32CD32";break;case 2:m="#1E90FF";break;case 3:m="gray";break;default:break}if(m){e.setColor(m);e.textView().setTextColor(e.colorOnDraw(j.mDisplayNight));j.setNeedsDisplay()}})}};var f={label:LOCAL("Delete"),click:function(){c.detachSummary(e);var l=j.mUndoManager.pushUndoNode(c,UndoType.kUndoDeleteSummary);l.setSummary(e)}};var h;if(isMobileDevice()){h=[a,d,g,d,f]}else{h=[a,d,i,d,g,d,f]}var b=Menu.buildFromTemplate(h);var k=isWebApp?{view:e.textView()}:{};b.popup(k)},mindNodeLatexDidUpdate:function(a,b){if(b){this.addSubview(a.latexView())}this.layoutNodeTree()},mindNodeTextDidChangeFromAttachView:function(a){this.layoutTextViewWithNode(a,true)},showLinkedTextInput:function(c,b){var a=new UIAlertView(LOCAL("Add Connection"),null,LOCAL("Cancel"),LOCAL("Confirm"));a.setAlertViewStyle(UIAlertView.Style.PlainTextInput);a.setTag(104);a.setDelegate(this);a.setUserData({n:c,n2:b});a.show();a.textFieldAtIndex(0).setPlaceholder(LOCAL("The content could be empty."));var d=c.findLinkPath(b.ID());if(d&&d.text()){a.textFieldAtIndex(0).setText(d.text())}},showSummarizedTextInput:function(d,c){var b=new UIAlertView(LOCAL("Add Summary"),null,LOCAL("Cancel"),LOCAL("Confirm"));b.setAlertViewStyle(UIAlertView.Style.PlainTextInput);b.setTag(102);b.setDelegate(this);b.setUserData({n:d,n2:c});b.show();var a=d.findSummary(c.ID());if(a){b.textFieldAtIndex(0).setText(a.text())}},updateWithDisplayNight:function(a){this.mDisplayNight=a;if(this.mRootNode){this.mRootNode.updateWithDisplayMode(true);this.setNeedsDisplay()}},updateWithDisplayMode:function(){this.mRootNode.updateWithDisplayMode();this.layoutNodeTree()},undoManager:function(){return this.mUndoManager},mindNodeImageDidFocusIn:function(e){if(this.mImageSelectionView){this.mImageSelectionView.removeFromSuperview()}var b=e.imageView();var d=new CGRect(b.left()-4,b.top()-4,b.width()+8,b.height()+8);var a=new ImageSelectionView(d);this.insertSubviewBelow(a,e.imageView());this.mImageSelectionView=a;var f=NSUserDefaults.standardUserDefaults();var c=this.mShowImageResizeTips;if(!c){c=f.objectForKey("show_resize_tips")}if(!c){this.mShowImageResizeTips=true;dialog.showMessageBoxV2(null,{type:"info",title:LOCAL("Tips"),message:LOCAL("Drag the edge of image to resize it."),buttons:[LOCAL("OK"),LOCAL("Don't Remind Me")],defaultId:0,cancelId:0},function(g){if(g==1){f.setObjectForKey(true,"show_resize_tips");f.synchronize()}})}},mindNodeImageDidFocusOut:function(a){if(!this.mAddBtnMouseDown&&!this.mImageMouseDown&&this.mImageSelectionView){this.mImageSelectionView.removeFromSuperview();this.mImageSelectionView=null}},mindNodeDidBeginResizeImage:function(a,b){this.mScrollView.setScrollEnabled(false);this.mImageMouseDown=true;this.mImageMouseDownLocation=new CGPoint(b.pageX,b.pageY);this.mImageOriginSize=a.imageView().size();this.mResizeImageNode=a},mindNodeDidBeginStretching:function(a,b){this.mScrollView.setScrollEnabled(false);this.mAddBtnMouseDown=true;this.mAddBtnMouseDownLocation=new CGPoint(b.pageX,b.pageY);this.mOriginTextWidth=a.textView().width();this.mStretchingNode=a},finishEditingLinkPath:function(){if(this.mEditingLinkPath){this.mEditingLinkPath=null;this.setNeedsDisplay()}if(this.mEditingLinkCtrlBtn){this.mEditingLinkCtrlBtn.removeFromSuperview();this.mEditingLinkCtrlBtn=null}},finishEditingSummary:function(){this.mEditingSummary=null;if(this.mSummarySelectionView){this.mSummarySelectionView.removeFromSuperview();this.mSummarySelectionView=null}},handleMouseEvents:function(){var a=this;var b=function(h){if(a.mAddBtnMouseDown||a.mImageMouseDown||a.mLinkCtrlMouseDown||a.mSummaryMouseDown){if(a.mImageDidResize){a.layoutNodeTree();if(a.mImageSelectionView){var c=a.mResizeImageNode.imageView();var k=new CGRect(c.left()-4,c.top()-4,c.width()+8,c.height()+8);a.mImageSelectionView.setFrame(k)}setTimeout(function(){a.mImageDidResize=false},200)}if(a.mImageSelectionView){a.mImageSelectionView.removeFromSuperview();a.mImageSelectionView=null}a.mAddBtnMouseDown=false;a.mImageMouseDown=false;a.mLinkCtrlMouseDown=false;a.mLayerMouseDown=false;a.mSummaryMouseDown=false;if(!a.mActiveNode){a.mScrollView.setScrollEnabled(true)}a.finishEditingLinkPath();a.finishEditingSummary()}else{if(a.mLayerMouseDown){a.mLayerMouseDown=false;if(a.mLinkPathArray.length>0){var l=new CGPoint(h.pageX,h.pageY);var g=a.convertPointFromView(l,a.window());for(var f=0;f<a.mLinkPathArray.length;f++){var o=a.mLinkPathArray[f];var n=o.points();if(n){for(var d=0;d<n.length;d++){var m=n[d];if(Math.abs(m.x-g.x)<10&&Math.abs(m.y-g.y)<10){a.mindNodeLinkTextViewDidBeginEdit(o.node(),o);return}}}}}}}};this.layer().mousedown(function(c){a.mLayerMouseDown=true});this.layer().mouseup(b);this.layer().mouseleave(b);this.layer().mousemove(function(k){if(a.mAddBtnMouseDown){var f=a.mStretchingNode;var j=k.pageX-a.mAddBtnMouseDownLocation.x;if(f.isLeft()){j*=-1}var d=a.mOriginTextWidth+j;var c=f.maxTextWidth();if(d<c){f.setMaxWidthLine(0)}else{f.setMaxWidthLine(d)}a.layoutTextViewWithNode(f,true);if(f.textView().width()>c){f.setMaxWidthLine(f.textView().width())}else{f.setMaxWidthLine(0)}if(f.remarkView()){var o=f.remarkView().sizeThatFits(new CGSize(f.maxTextWidth(),Number.MAX_VALUE));f.remarkView().setSize(o)}}else{if(a.mImageMouseDown){if(!a.mImageDidResize){a.mImageDidResize=true;a.mUndoManager.pushUndoNode(a.mResizeImageNode,UndoType.kUndoResizePhoto)}var j=k.pageX-a.mImageMouseDownLocation.x;var i=k.pageY-a.mImageMouseDownLocation.y;var d,q;if(Math.abs(j)>Math.abs(i)){d=a.mImageOriginSize.width+j;if(d<50){d=Math.min(50,a.mImageOriginSize.width)}q=a.mImageOriginSize.height*(d/a.mImageOriginSize.width)}else{q=a.mImageOriginSize.height+i;if(q<50){q=Math.min(50,a.mImageOriginSize.height)}d=a.mImageOriginSize.width*(q/a.mImageOriginSize.height)}var g=a.mResizeImageNode.imageView();g.setFrame(new CGRect(g.left(),g.top(),d,q));if(a.mImageSelectionView){var n=new CGRect(g.left()-4,g.top()-4,g.width()+8,g.height()+8);a.mImageSelectionView.setFrame(n)}a.mResizeImageNode.setImageResize(new CGSize(d,q))}else{if(a.mLinkCtrlMouseDown){var p=new CGPoint(k.pageX,k.pageY);var h=a.convertPointFromView(p,a.window());var m=a.mEditingLinkPath.ctrlPointBase();a.mEditingLinkPath.setCtrlPoint(new CGPoint(h.x-m.x,h.y-m.y));a.mEditingLinkCtrlBtn.setCenter(h);var f=a.mEditingLinkPath.node();f.updateLinkTextViewPosition();a.setNeedsDisplay()}else{if(a.mSummaryMouseDown){var j=k.pageX-a.mSummaryMouseDownLocation.x+a.mSummaryOffx;var l=a.mEditingSummary;var f=l.node();if((!f.isLeft()&&j>=0)||(f.isLeft()&&j<=0)){l.setOffset(new CGPoint(j,0));f.updateSummarizedTextViewPosition();a.setNeedsDisplay();a.mSummarySelectionView.setFrame(l.adjustingSelectionBounds(f.isLeft()))}}}}}})},latexViewArray:function(){return this.mLatexViewArray},setScale:function(a){this.mScale=a;this.layer().css("transform","scale("+a+","+a+")")},scale:function(){return this.mScale},backgroundColorForWireFrame:function(){var b=displayStyleBasic();var c=MindNode.DisplayStyle-b;if(c>0){var a;switch(c){case 1:a="#F2F0FE";break;case 2:a="#E3E8E2";break;case 3:default:a="#E5E5E5";break}return this.mDisplayNight?"#262626":a}else{return this.mDisplayNight?"#262626":"#FFFFFF"}},rootLineColor:function(){var a=this.mRootNode.lineColorHex();if(!a){var c=this.mRootNode.styleContext().themeColorHexs;if(!c){c=this.mRootNode.styleContext().defaultThemeColorHexs()}if(c.length==1){a=c[0]}else{var b=this.mRootNode.styleContext().displayStyleBasic();if(b==MindNode.Style.WireFrameVertical||b==MindNode.Style.WireFrameBracket){a="#FF8C00"}else{a="#BBBBBB"}}}return a},lineColorWithNode:function(b){var d=null;var a=displayStyleBasic();var c=MindNode.DisplayStyle-a;if(c>0){switch(c){case 1:d="#836FFF";break;case 2:d="#90A58D";break;case 3:default:d="#444444";break}}else{if(a==MindNode.Style.WireFrameVertical||a==MindNode.Style.WireFrameBracket){d=b.parent().lineColorHex()}else{d=b.lineColorHex()}}if(!d){d=this.mRootNode.lineColorHex()}return d},installImagePickerOnContextMenu:function(b){if(!isWebApp||b.imageView()){return}var d=UserSessionManager.defaultManager().account();if(!d||!d.isProVersionValid()){return}if(isMobileDevice()){var i=this;var c=UIMenuController.sharedMenuController().menuButtons();c.forEach(function(j){if(j.titleLabel().text()==LOCAL("Photo")){i.installImagePickerOnMenuBtn(b,j)}})}else{var h=WebAppMenuManager.defaultManager().menuViews()[0];var a=h.menu().submenu;var f=-1;var e=0;a.forEach(function(j){if(j.label==LOCAL("Photo")){f=e}if(j.type!="separator"){e+=1}});if(f!=-1){var g=$("<input id='browser' type='file' accept='.png,.jpg,.jpeg,.gif'/>");g.css({position:"absolute",left:0,top:h.height()/e*f,width:h.width(),height:h.height()/e,opacity:0});h.layer().append(g);var i=this;g.change(function(){if(this.files.length>0){var k=g.val();var j=this.files[0];i.showImageAtNode(b,k,j)}})}}},statics:{horizontalPadding:function(){return 360},LineColorHexArray:["#DC306C","#BF58F5","#26BBFF","#37C45A","#1BD6E7","#FFC700"]}});RootViewController=defineClass({superClass:UIViewController,viewDidLoad:function(){UIViewController.prototype.viewDidLoad.call(this);this.setTitle(LOCAL("MindLine"));var c=NSKeyedMapper.defaultMapper();c.registerClass(MindNode,"MindNode",true);c.registerClass(MindNode,"czh.mindnode.MindNode");c.registerClass(NodeLinkPath,"NodeLinkPath",true);c.registerClass(NodeLinkPath,"czh.mindnode.NodeLinkPath");c.registerClass(NodeSummary,"NodeSummary",true);c.registerClass(NodeSummary,"czh.mindnode.NodeSummary");this.mGraphViewCtrls=[];this.mTabBar=new GraphViewTabBar(new CGRect(0,0,this.view().width(),25),this);this.mTabBar.setAutoresizingMask(UIView.Autoresizing.FlexibleWidth);this.mTabBar.setHidden(true);this.view().addSubview(this.mTabBar);NSNotificationCenter.defaultCenter().addObserver(this,this.handleUserLoginStatusChange,UserHasLoginNotification);NSNotificationCenter.defaultCenter().addObserver(this,this.handleUserLoginStatusChange,UserHasLogoutNotification);NSNotificationCenter.defaultCenter().addObserver(this,this.handleCloudFilesDidUpdate,CloudFilesDidUpdateNotification);NSNotificationCenter.defaultCenter().addObserver(this,this.handleUndoStatusDidChange,UndoStatusDidChangeNotification);if(isWebApp){NSNotificationCenter.defaultCenter().addObserver(this,this.handleGraphFileDidRename,GraphFileDidRenameNotification)}var a=UserSessionManager.defaultManager();var b=a.account();if(a.isLogin()){a.syncUser()}this.mWindowFocus=true;this.mWindows=[];this.loadRecentDocuments();this.createApplicationMenu();this.handleShortcutKeyOperation();this.handleMainProcessMessages();this.createDocumentDir();this.requestUpdateIfNeed();this.handleWindowWillCloseEvent();this.syncPaymentOrderIfNeed();this.updateWithDisplayNight();this.updateWithDisplayMode();this.initContentOffsetTable();this.reportUserActive();this.scheduleFileAutoSave();this.showAddBtnDisplayButton()},viewDidAppear:function(){UIViewController.prototype.viewDidAppear.call(this);if(!this.mFirstAppear){this.mFirstAppear=true;var c=main.getPendingOpenFile();if(c){main.setPendingOpenFile(null);if(c.endsWith(".mm")||c.endsWith(".xmind")){this.openFile(c,true)}else{if(c.startsWith("mindline_")){var b=parseInt(c.substring(9));if(b>=0){MindNode.DisplayStyle=b;this.createNewFile()}}else{this.showMindStylePickerView(true,true)}}}else{var a=GetQueryString("file");if(a&&a.length>0){this.loadFileFromQiniu(a);this.showOpenAppBanner(a)}else{this.showMindStylePickerView(true,true)}}}},showRatingAppStoreAwardTips:function(){if(isWinStoreVersion()&&!isWinStoreForReview()&&systemLanguage()=="zh"){var e=UserSessionManager.defaultManager().account();if(e&&e.vipPeriod==1000){return}var f=NSUserDefaults.standardUserDefaults();var c="showRatingAppStoreAwardTips";var d=f.objectForKey(c);var b=new Date().getTime()/1000;main.log("showRatingAppStoreAwardTips: "+d);if(d){var g=b-d;if(d==-1||(g>0&&g<1*24*60*60)){return}}var a="你好，我们推出了好评奖励会员活动。凡是在微软应用商店上给予我们5星好评，把评论截图发到微信公众号：mindlines，并留下你的云同步帐号，我们审核通过后会奖励1个月专业版会员期限，原来已是专业版会员的将会在原有期限上延期。很感谢你的参与和支持！";dialog.showMessageBoxV2(null,{type:"info",message:a,buttons:["好的","不再提示"],defaultId:0,cancelId:0},function(h){if(h==0){f.setObjectForKey(b,c)}else{f.setObjectForKey(-1,c)}f.synchronize()})}},syncPaymentOrderIfNeed:function(){if(isMasVersion()){var c=NSUserDefaults.standardUserDefaults();var b=c.objectForKey("paymentProductID");if(b){var d=c.objectForKey("paymentTransactionID");var a=UserSessionManager.defaultManager();a.syncPaymentOrder(b,d,function(e){if(e==0){var f=NSUserDefaults.standardUserDefaults();f.removeObjectForKey("paymentProductID");f.removeObjectForKey("paymentTransactionID");f.synchronize()}})}}},handleWindowWillCloseEvent:function(){var a=this;window.onbeforeunload=function(b){if(isWebApp&&!UserSessionManager.defaultManager().isLogin()){}else{if(a.isNewFileEdit()){if(!a.isEmptyFile()){a.mQuitAfterSaving=true;a.showNewFileSavingDialog(true);b.returnValue=false;return}}else{if(!a.mQuitAfterSaving){a.save(a.mFile)}}}if(process.platform=="darwin"){a.mWindowFocus=false;a.createApplicationMenu()}a.uninstallGlobalShortcuts()}},onMenuItemCloudSync:function(){if(isWebApp){this.selectFileToOpen()}else{if(UserSessionManager.defaultManager().isLogin()){this.showUserAccount(true)}else{this.showLoginViewController()}}},showUserAccount:function(h){var e=remote.getCurrentWindow();var d=UserSessionManager.defaultManager().account();var c;var f;var g=true;var b=isMasVersion()?"":LOCAL("Scan the QRCode with WeChat, ");if(d.isProVersionValid()){if(h){var j=this.getDocumentPath();c=LOCAL("Current Cloud Sync Directory: ")+j+LOCAL(". The files here could be sync or downloaded with our cloud service.");f=[LOCAL("Sync Files to Cloud"),LOCAL("Download Files from Cloud"),LOCAL("Back")]}else{c=LOCAL("The pro version is available for this account.");var a=d.expiredDate();if(a){c+="\n\n"+LOCAL("The expired date is ")+a+"\n"}if(isWinStoreForReview()||isWebApp){f=[LOCAL("Sign Out"),LOCAL("Back")]}else{f=[LOCAL("Sign Out"),LOCAL("View App"),LOCAL("Back")]}}g=false}else{if(d.paid){c=LOCAL("The pro version is expired. ")+b+LOCAL("Repurchase it that you can use our cloud service to sync files, export files for other formats, and insert photo on the branch.");var a=d.expiredDate();if(a){c+="\n\n"+LOCAL("The expired date is ")+a+"\n"}f=[LOCAL("Sign Out"),LOCAL("Get Pro Version"),LOCAL("Back")]}else{if(isMasVersion()){c=b+LOCAL("Upgrade to the pro version that you can use our cloud service to sync files, export files for other formats, and insert photo on the branch.")}else{c=b+LOCAL("Upgrade to the pro version then you can use our cloud service to sync files, export files for other formats, and insert photo on the branch.")}f=[LOCAL("Sign Out"),LOCAL("Get Pro Version"),LOCAL("Back")]}}var i=this;dialog.showMessageBoxV2(null,{type:"info",title:d.name,message:c,buttons:f,defaultId:2,cancelId:2},function(l){if(l==0){if(d.isProVersionValid()&&h){i.syncToCloud()}else{UserSessionManager.defaultManager().logout()}}else{if(l==1){if(d.isProVersionValid()&&h){i.downloadFromCloud()}else{if(!isWinStoreForReview()){if(g){if(isMasVersion()){i.showInPurchaseDialog()}else{if(isMobileDevice()){var k="请在微信关注我们的公众号：mindlines，点击购买专业版并绑定帐号。";var m=new UIAlertView("提示",k,"好的");m.show()}else{i.showQRCodeScanView("wxpay")}}}else{i.showQRCodeScanView("appdo")}}}}else{i.showPasswordDialogIfNeed()}}})},showPasswordDialogIfNeed:function(){var a=UserSessionManager.defaultManager().account();if(a.promptPassword){this.showPasswordDialog();a.promptPassword=false}},showPasswordDialog:function(){var d=LOCAL("You can sign in with password, without getting the verification code first.");var b=new UIAlertView(LOCAL("Tips"),d,LOCAL("Cancel"),LOCAL("Confirm"));b.setAlertViewStyle(UIAlertView.Style.LoginAndPasswordInput);b.setTag(109);b.setDelegate(this);b.show();var c=b.textFieldAtIndex(0);c.setSecureTextEntry(true);c.setPlaceholder(LOCAL("Enter Password"));var a=b.textFieldAtIndex(1);a.setSecureTextEntry(true);a.setPlaceholder(LOCAL("Confirm Password"))},showInPurchaseDialog:function(a){var b=this;var c=a?a:LOCAL("Please select the duration for the pro version.");dialog.showMessageBoxV2(null,{title:LOCAL("Get Pro Version"),message:c,buttons:[LOCAL("$4.99 / 3 Months"),LOCAL("$9.99 / 1 Year"),LOCAL("$23.99 / Forever"),LOCAL("Cancel")],defaultId:0,cancelId:3},function(d){main.log("showInPurchaseDialog: "+d);if(d==0){b.requestInPurchase("MacHalfYear")}else{if(d==1){b.requestInPurchase("MacOneYear")}else{if(d==2){b.requestInPurchase("MacForeverV2")}}}})},requestInPurchase:function(b){var a=this;this.showLoadingView();var c=remote.inAppPurchase;c.getProductsV2=function(d,e){if(dialog.showMessageBoxSync){c.getProducts(d).then(function(f){e(f)})}else{c.getProducts(d,e)}};c.purchaseProductV2=function(d,e,f){if(dialog.showMessageBoxSync){c.purchaseProduct(d,e).then(function(g){f(g)})}else{c.purchaseProduct(d,e,f)}};c.getProductsV2([b],function(e){if(e&&e.length>0){var d=e[0];c.purchaseProductV2(d.productIdentifier,1,function(f){if(!f){a.showMessageBox(LOCAL("The in-purchase product is invalid."))}})}else{a.showMessageBox(LOCAL("Couldn't get the product information."))}});if(!this.mInAppPurchaseObserve){this.mInAppPurchaseObserve=true;c.on("transactions-updated",function(e,d){d.forEach(function(i){var g=i.transactionState;switch(g){case"purchased":c.finishTransactionByDate(i.transactionDate);var f=i.payment.productIdentifier;var h=i.transactionIdentifier;a.onInPurchaseSuccess(f,h);break;case"restored":var f=i.payment.productIdentifier;var h=i.transactionIdentifier;if(f=="MacForeverV2"){a.onInPurchaseSuccess(f,h)}else{a.dismissLoadingView()}break;case"failed":a.showMessageBox(LOCAL("Failed to purchase, please try again."));c.finishTransactionByDate(i.transactionDate);break;case"deferred":a.dismissLoadingView();break}})})}},onInPurchaseSuccess:function(c,d){var a=this;var b=UserSessionManager.defaultManager();b.syncPaymentOrder(c,d,function(e){if(e!=0){var f=NSUserDefaults.standardUserDefaults();f.setObjectForKey(c,"paymentProductID");f.setObjectForKey(d,"paymentTransactionID");f.synchronize()}a.mGraphViewCtrl.toolbar().setVipEnabled(false);a.createApplicationMenu()});a.showMessageBox(LOCAL("Purchase successfully, thank you!"))},showMessageBox:function(c,a){if(a){this.mAutoSyncing=false}else{this.dismissLoadingView();var b=remote.getCurrentWindow();dialog.showMessageBox(b,{title:LOCAL("Tips"),message:c,buttons:[LOCAL("OK")]})}},showQRCodeScanView:function(b){var c,e,f;if(b=="appdo"){c="res/appdo.png";e=LOCAL("Scan the QRCode to download app.")}else{if(b=="wxpb"){c="res/wxpb.png";e=LOCAL("Scan the QRCode with WeChat for our public account.")}else{c="res/wxpay.png";e=LOCAL("Scan the QRCode with WeChat to purchase the pro version.");f=function(){UserSessionManager.defaultManager().syncUser()}}}var d=this.view().bounds();var a=new QRCodeScanView(d,c,e);a.showInView(this.view(),f)},handleUserLoginStatusChange:function(a){this.createApplicationMenu()},handleGraphFileDidRename:function(d){var e=d.userInfo.old;var c=d.userInfo["new"];var b=this.mFile;if(b){if(b.path()==e){var a=c.substring(c.lastIndexOf("/")+1);b.setName(a);this.setMindFile(b)}}},selectFileToOpen:function(c){var b=remote.getCurrentWindow();var a=this;dialog.showOpenDialogV2(b,{properties:["openFile"],defaultPath:this.getDocumentPath(),filters:[{name:"MindLine Files",extensions:["mm"]}]},function(f,d){if(f&&f.length>0){var e=f[0];if(c){a.openFile(e)}else{a.openFileInWindow(e)}}if(d){a.onMindFileOpen(d)}else{if(c){a.showMindStylePickerView(true,true)}}})},openFileInWindow:function(c){if(isWebApp||(this.isNewFileEdit()&&this.isEmptyFile())){var b=main.windows();for(var a=0;a<b.length;a++){if(b[a].path==c){b[a].show();return}}this.openFile(c)}else{this.createWindow(c)}},openFile:function(d,e){var c=new MindFile(d);var a=this;if(isWebApp){var b=UserSessionManager.defaultManager();b.getFile(c.path(),function(f,g){if(f==0){c.setData(g);a.onMindFileOpen(c)}else{a.showMessageBox(LOCAL("Couldn't read the file, please try other ways."))}})}else{fs.readFile(d,function(f,g){var h=remote.getCurrentWindow();if(f){if(e){a.createNewFile()}a.showMessageBox(LOCAL("Couldn't read the file, please try other ways."));return}c.setData(g.toString());a.onMindFileOpen(c)})}},onMindFileOpen:function(a){this.mPendingOpenFile=a;if(this.isNewFileEdit()){if(this.isEmptyFile()){this.createOrOpenNextFile()}else{this.showNewFileSavingDialog()}}else{this.save(this.mFile);this.createOrOpenNextFile()}},onMindNodeFileSave:function(){if(isWebApp){if(!UserSessionManager.defaultManager().isLogin()){this.showLoginViewController();return}}if(this.isNewFileEdit()){this.saveNewFile()}else{var a=this;this.save(this.mFile,function(b){if(b!=0){a.showMessageBox("Failed to save file, please try again.")}},true)}},isNewFileEdit:function(){return !this.mFile},isEmptyFile:function(){if(this.mGraphViewCtrls.length>1){return false}else{if(this.mGraphViewCtrl){var a=this.mGraphViewCtrl.rootNode();return !a||a.isEmpty()}}return true},createOrOpenNextFile:function(){if(this.mPendingOpenFile){this.openMindGraphFile(this.mPendingOpenFile);this.mPendingOpenFile=null}else{this.createNewFile()}},showNewFileSavingDialog:function(a,d){var e=remote.getCurrentWindow();var b=this;var c=dialog.showMessageBoxV2(e,{type:"question",title:LOCAL("Tips"),message:LOCAL("Save the current file?"),buttons:[LOCAL("Yes"),LOCAL("No")],defaultId:0,cancelId:0},function(f){if(a){if(f==1){if(process.platform=="darwin"){b.mWindowFocus=false;b.createApplicationMenu()}b.uninstallGlobalShortcuts();e.destroy()}else{b.saveNewFile()}}else{if(d){if(f==1){b.syncToCloudV1()}else{b.mSyncAfterSaving=true;b.saveNewFile()}}else{if(f==1){b.createOrOpenNextFile()}else{b.mCreatingOrOpenNextFile=true;b.saveNewFile()}}}})},createNewFile:function(a){if(!a){a=new MindNode()}this.mMarketFileID=null;this.mOpenFileData=null;this.mFileMTime=0;this.setMindFile(null);this.buildGraphViewControllers(a);var b=this;setTimeout(function(){a.textView().layer().focus()},200);this.mAddBtnDisplayButton.setHidden(displayStyleBasic()!=MindNode.Style.Default);if(this.mMindStyleDialog){this.mMindStyleDialog.dismiss();this.mMindStyleDialog=null}},save:function(q,h,d,b){if(q&&this.mGraphViewCtrls.length>0){var o=this.mGraphViewCtrls[0].rootNode();var f=this.mGraphViewCtrls[0].graphViewID();var g=this.mGraphViewCtrls[0].contentOffset();var r={root:o,ID:f};if(this.mMarketFileID){r.marketFileID=this.mMarketFileID}r.style=MindNode.DisplayStyle;var i=o.styleContext();if(i){r.fontName=i.fontName;r.themeColors=i.themeColorHexs;r.backgroundColor=i.backgroundColorHex;if(i.lineKeepThin){r.lineKeepThin=i.lineKeepThin}if(i.layoutCompact){r.layoutCompact=i.layoutCompact}}if(g){this.mContentOffsetTable[f]=g}if(this.mGraphViewCtrls.length>1){var l=this;var k=[];this.mGraphViewCtrls.slice(1).forEach(function(v){var u=v.graphViewID();var w=v.contentOffset();k.push({root:v.rootNode(),ID:u});if(w){l.mContentOffsetTable[u]=w}});r.subjects=k}var t=NSKeyedArchiver.archivedDataWithRootObject(r);if(t==this.mOpenFileData&&!b){main.log("file is not changed !");if(h){h(0)}}else{if(t.length>100){var n=q.path();if(/.+\.xmind/.test(n)){n=n.substring(0,n.lastIndexOf("."))+".mm"}var e=true;if(isWebApp){var j=UserSessionManager.defaultManager();j.saveFile(t,n,function(u){main.log("save file: "+n+" "+u);if(u){q.setData(t);this.mOpenFileData=t}if(h){h(u)}});return}else{if(isMasVersion()){fs.writeFileSync(n,t)}else{var p=n+"-tmp";fs.writeFileSync(p,t);var s=fs.statSync(p);if(s.size>=t.length){fs.renameSync(p,n)}else{e=false;fs.unlinkSync(p);if(h){h(-2)}}}}if(e){q.setData(t);this.mOpenFileData=t;if(h){h(0)}if(d){var m=this.getDocumentPath();if(n.startsWith(m)){this.autoSyncToCloud()}}}}else{if(h){h(-1)}}}var c=NSKeyedArchiver.archivedDataWithRootObject(this.mContentOffsetTable);if(c){var a=app.getPath("userData")+pathSeparator()+"contentOffset.json";fs.writeFileSync(a,c)}}else{if(h){h(-2)}}},saveNewFile:function(a){if(isWebApp){if(!UserSessionManager.defaultManager().isLogin()){this.showLoginViewController();return}}var d=remote.getCurrentWindow();var c=this;var b=this.mFile?this.mFile.path():this.getDocumentPath();if(!a){var f=this.mGraphViewCtrl.rootNode().textView().text();var e=f.replace(/<|>|:|\*|\?|\\|\||"|\n/g,"");b+=pathSeparator()+e}dialog.showSaveDialogV2(d,{title:LOCAL("Save File"),defaultPath:b,filters:[{name:"MindLine Files",extensions:["mm"]}]},function(j){if(j){var h=j.substring(j.lastIndexOf(pathSeparator())+1);if(h.indexOf("/")!=-1||h.indexOf("\\")!=-1){c.showMessageBox(LOCAL("The file name is invalid."))}else{var i=new MindFile(j);c.setMindFile(i);var k=c.mCreatingOrOpenNextFile;var g=c.mSyncAfterSaving;c.mCreatingOrOpenNextFile=false;c.mSyncAfterSaving=false;c.save(i,function(l){if(l==0){if(g){c.syncToCloudV1()}else{if(k){c.createOrOpenNextFile()}else{if(c.mQuitAfterSaving){c.mQuitAfterSaving=false;if(process.platform=="darwin"){c.mWindowFocus=false;c.createApplicationMenu()}c.uninstallGlobalShortcuts();var m=remote.getCurrentWindow();m.destroy()}}}}else{c.showMessageBox(LOCAL("Failed to save file, please try again."))}},!g,a)}}else{c.mCreatingOrOpenNextFile=false;c.mPendingOpenFile=null}})},checkIfUserProValid:function(){var c=remote.getCurrentWindow();var b=UserSessionManager.defaultManager();if(!b.isLogin()){var a=this;dialog.showMessageBoxV2(c,{type:"info",title:LOCAL("Tips"),message:LOCAL("Please sign in with your mobile number or mail account first."),buttons:[LOCAL("Sign In"),LOCAL("Cancel")],defaultId:0,cancelId:1},function(e){if(e==0){a.showLoginViewController()}});return false}else{var d=b.account();if(!d.isProVersionValid()){this.showUserAccount();return false}}return true},alertViewClickedButtonAtIndex:function(g,e){var n=g.tag();if(n==100){if(e==0){this.createOrOpenNextFile()}else{if(this.checkIfUserProValid()){this.mCreatingOrOpenNextFile=true;this.saveNewFile()}}}else{if(n==101){var a=this.mCreatingOrOpenNextFile;this.mCreatingOrOpenNextFile=false;var i=g.textFieldAtIndex(0);var b=i.text();if(!b||b.length==0){b=i.placeholder()}if(!b||b.length==0){this.showMessageBox("请输入文件名称。")}else{if(b.indexOf("/")>=0){this.showMessageBox("文件名称不能包含'/'字符。")}else{var d=new MindFile(b+".mm");this.setMindFile(d);var m=this;this.save(d,function(o){if(o==0){if(a){m.createOrOpenNextFile()}else{m.showMessageBox("保存文件成功，1分钟后会自动同步到云空间。")}}},true)}}}else{if(n==102){if(e==1){this.showLoginViewController()}}else{if(n==103){if(isWXApp()){if(e==1){UserSessionManager.defaultManager().logout()}}else{if(e==1){window.open("https://itunes.apple.com/cn/app/id1025462912")}else{if(e==2){window.open("http://fir.im/968p")}else{if(e==3){UserSessionManager.defaultManager().logout()}}}}}else{if(n==104){if(e==1){UserSessionManager.defaultManager().logout()}}else{if(n==106){if(e==1){this.exportFile("mm")}}else{if(n==107){if(e==1){var h=parseInt(g.textFieldAtIndex(0).text());if(h<12){this.showMessageBox(LOCAL("The number is at least 12."))}else{if(h>100){this.showMessageBox(LOCAL("The number is at most 100."))}else{if(h>0){AppSettings.defaultSettings().setMaxCharNumPerLine(h);main.broadcast("updateLineMaxWidth")}}}}}else{if(n==109){if(e==1){var l=g.textFieldAtIndex(0).text();var c=g.textFieldAtIndex(1).text();var k=null;if(l.length==0){k=LOCAL("The password couldn't be empty.")}else{if(l.length>20){k=LOCAL("The password should be 20 characters at most.")}else{if(l!=c){k=LOCAL("The password couldn't be confirmed.")}}}var m=this;if(k){var j=remote.getCurrentWindow();dialog.showMessageBoxV2(j,{title:LOCAL("Tips"),message:k,buttons:[LOCAL("OK")]},function(o){if(o==0){m.showPasswordDialog()}})}else{m.showLoadingView();var f=UserSessionManager.defaultManager();f.setPassword(l,function(o){if(o==0){m.showMessageBox(LOCAL("The password has been set successfully."))}else{m.showMessageBox(LOCAL("Couldn't set the password, please try it again when you sign in next time."))}})}}}else{if(n==110){if(e==0){this.selectFileToOpen(true)}}}}}}}}}}},showLoginViewController:function(){var c=new LoginViewController(true);var b=Math.min(450,screen_width()-20);c.setView(new UIView(new CGRect(0,0,b,230)));var a=new UIAlertView(LOCAL("My Account"),null,LOCAL("Back"));a.setDetailView(c.view());a.show();c.setDelegate(a);c.setHandler(this)},initContentOffsetTable:function(){this.mContentOffsetTable={};var f=app.getPath("userData")+pathSeparator()+"contentOffset.json";try{var c=fs.readFileSync(f);if(c){var a=new NSKeyedUnarchiver(c.toString());var b=a.jsonObj();if(Object.keys(b).length>100){fs.unlinkSync(f)}else{this.mContentOffsetTable=b}}}catch(d){}},buildGraphViewControllers:function(a,d,c){var g=[];g.push(a.textView().text());this.mGraphViewCtrls.forEach(function(h){if(h.isViewLoad()){h.view().removeFromSuperview();h.removeFromParentViewController();NSNotificationCenter.defaultCenter().removeObserver(h)}});this.mGraphViewCtrls=[];if(!c){c=stringRandom(5)}var e=this.mContentOffsetTable[c];var f=new GraphFileViewController(a,this,c,e);this.mGraphViewCtrls.push(f);if(d){var b=this;d.forEach(function(j){var h=j.root;var i=j.ID;if(!i){i=stringRandom(5)}var k=b.mContentOffsetTable[i];g.push(h.textView().text());var l=new GraphFileViewController(h,b,i,k);b.mGraphViewCtrls.push(l)})}this.mTabBar.setTitles(g);this.mTabBar.setHidden(g.length<2);this.showGraphViewController(f)},showGraphViewController:function(b){if(this.mGraphViewCtrl){if(this.mGraphViewCtrl.isViewLoad()){this.mGraphViewCtrl.view().removeFromSuperview();this.mGraphViewCtrl.removeFromParentViewController()}}this.addChildViewController(b);var a=b.view();if(this.mTabBar.isHidden()){a.setFrame(this.view().bounds())}else{a.setFrame(new CGRect(0,this.mTabBar.height(),this.view().width(),this.view().height()-this.mTabBar.height()))}a.setAutoresizingMask(UIView.Autoresizing.FlexibleSize);this.view().addSubview(a);this.view().sendSubviewToBack(a);this.mGraphViewCtrl=b;if(b.rootNode().isEmpty()){setTimeout(function(){b.rootNode().textView().layer().focus()},200)}b.reloadOnFocus();this.createApplicationMenu()},graphViewTabBarDidSelect:function(b){var a=b.selectedIndex();var c=this.mGraphViewCtrls[a];this.showGraphViewController(c)},graphViewTabBarDidCloseTab:function(c,b){var d=remote.getCurrentWindow();var a=this;dialog.showMessageBoxV2(d,{type:"question",title:LOCAL("Tips"),message:LOCAL("Delete the mindmap topic?"),buttons:[LOCAL("Yes"),LOCAL("No")],defaultId:1,cancelId:1},function(e){if(e==0){a.removeTopicAtIndex(b,true)}})},addTopicAtIndex:function(c,b){var d=this.mTabBar.titles();d.splice(b,0,c.rootNode().textView().text());this.mGraphViewCtrls.splice(b,0,c);var a=this.mTabBar.selectedIndex();this.mTabBar.setTitles(d);if(a<b){this.mTabBar.setSelectedIndex(a)}else{this.mTabBar.setSelectedIndex(a+1)}this.mTabBar.setHidden(d.length<2);this.graphViewTabBarDidSelect(this.mTabBar)},removeTopicAtIndex:function(d,g){var a=this.mTabBar.selectedIndex();if(a==d){if(d+1>this.mTabBar.titles().length-1){a=d-1}else{a=d}}else{if(a>d){a-=1}}var h=this.mTabBar.titles();h.splice(a,1);this.mTabBar.setTitles(h);this.mTabBar.setSelectedIndex(a);this.mTabBar.setHidden(h.length<2);var c=this.mGraphViewCtrls[d];this.mGraphViewCtrls.remove(c);if(c==this.mGraphViewCtrl){var f=this.mGraphViewCtrls[a];this.showGraphViewController(f);NSNotificationCenter.defaultCenter().removeObserver(c)}else{if(this.mTabBar.isHidden()){this.mGraphViewCtrl.view().setFrame(this.view().bounds())}else{this.mGraphViewCtrl.view().setFrame(new CGRect(0,this.mTabBar.height(),this.view().width(),this.view().height()-this.mTabBar.height()))}}if(g){var e=this.mGraphViewCtrl.graphView().undoManager();var b=e.pushUndoNode(this.mGraphViewCtrl.rootNode(),UndoType.kUndoDeleteTopic);b.setTopicCtrl(c);b.setTopicIndex(d)}},updateCurrentTabTitle:function(b){var a=this.mGraphViewCtrls.indexOf(b);if(a>=0){var c=b.rootNode().textView().text();this.mTabBar.updateTitle(c,a)}},scrollViewDidScroll:function(a){},openMindGraphFile:function(c){var m=null;var d=c.data();if(/.+\.xmind/.test(c.name())){var b=new XMindExporter();m=b.exportMindNode(d);if(m){this.setMindFile(c);this.buildGraphViewControllers(m)}}else{try{var p=JSON.parse(d);var n=MindNode.DisplayStyle;var a=p.style?p.style:-1;if(a==-1){var l=NSUserDefaults.standardUserDefaults();var o=l.objectForKey("displayStyle");a=o?o:MindNode.Style.Default;if(a==3){a==MindNode.Style.WireFrameAll}}if(a==0||a==1||a==2){a=MindNode.Style.Default}else{if(a==3){a=MindNode.Style.WireFrameLine}else{if(a==4){a=MindNode.Style.WireFrameLine2}else{if(a==5){a=MindNode.Style.WireFrameVertical}else{if(a==6){a=MindNode.Style.WireFrameBracket}else{if(a==7){a=MindNode.Style.WireFrameAll}}}}}}MindNode.DisplayStyle=a;var h=new NSKeyedUnarchiver(p);var i=new MindStyleContext(h);m=h.decodeObjectForKey("root");m.setStyleContext(i);this.mMarketFileID=h.decodeObjectForKey("marketFileID");var k=h.decodeObjectForKey("subjects");var g=h.decodeObjectForKey("ID");if(m){this.setMindFile(c);this.buildGraphViewControllers(m,k,g)}else{MindNode.DisplayStyle=n}}catch(j){main.log(j.stack)}if(!m){var b=new FreeMindExporter();m=b.exportMindNode(d);if(m){this.setMindFile(c);this.buildGraphViewControllers(m)}}}if(m){this.mOpenFileData=d;this.mGraphViewCtrl.toolbar().setNode(null);this.mGraphViewCtrl.scrollView().setScrollEnabled(true);this.createApplicationMenu();var f=fs.statSync(this.mFile.path());this.mFileMTime=parseInt(f.mtimeMs/1000);this.mAddBtnDisplayButton.setHidden(displayStyleBasic()!=MindNode.Style.Default);if(this.mMindStyleDialog){this.mMindStyleDialog.dismiss();this.mMindStyleDialog=null}}else{this.showMessageBox(LOCAL("Couldn't open the file."))}},setMindFile:function(d){this.mFile=d;if(d){var c=d.name();if(c&&c.length>0){var a=c.lastIndexOf(pathSeparator());if(a!=-1){c=c.substring(a+1)}var b=c.lastIndexOf(".");if(b>=0){c=c.substring(0,b)}this.setTitle(c);this.addRecentDocument(d);remote.getCurrentWindow().setRepresentedFilename(d.path());remote.getCurrentWindow().path=d.path();return}}this.setTitle(LOCAL("MindLine"))},setTitle:function(b){UIViewController.prototype.setTitle.call(this,b);var a=remote.getCurrentWindow();a.setTitle(b)},exportFileToLocal:function(c,a){var b=new Blob([c],{type:"text/plain;charset=utf-8"});this.exportDataToLocal(b,a)},exportDataToLocal:function(e,c){if(isWebApp){if(c=="jpg"){saveAs(e,this.title()+".jpg")}else{var b=new Blob([e],{type:"text/plain;charset=utf-8"});saveAs(b,this.title()+"."+c)}}else{var d=remote.getCurrentWindow();var a=app.getPath("desktop");if(this.title()!=LOCAL("MindLine")){a+=pathSeparator()+this.title()}dialog.showSaveDialogV2(d,{title:LOCAL("Export File"),defaultPath:a,filters:[{name:c,extensions:[c]}]},function(g){if(g){var f=new FileReader();f.readAsArrayBuffer(e);f.onload=function(){var h=Buffer.from(this.result);fs.writeFile(g,h,function(i){if(i){main.log("export file error: "+i)}})}}})}},exportFile0:function(c,b){var a=UserSessionManager.defaultManager();a.exportFile(c,b,function(e,d){if(e==0){window.onbeforeunload=null;window.location=d;setTimeout(function(){window.onbeforeunload=function(){return"导图内容编辑过后需要点击保存才会同步到云空间。"}},1000)}else{var f=new UIAlertView("提示","导出失败，请重试。","好的");f.show()}})},dataURLtoBlob:function(e){var a=e.split(",");var d=a[0].match(/:(.*?);/)[1];var b=atob(a[1]);var f=b.length;var c=new Uint8Array(f);while(f--){c[f]=b.charCodeAt(f)}return new Blob([c],{type:d})},exportFile:function(d){if(isMiniWebProgram()){var t=new UIAlertView("提示","小程序目前不支持文件导出，请到应用市场下载我们的App使用。","好的");t.show();return}if(!this.checkIfUserProValid()){return}var h=this.mGraphViewCtrl.graphView();if(d=="photo"||d=="pdf"){var p=MindNode.DisplayDark;MindNode.DisplayDark=false;try{var i=null;var y=2;while(y>0){h.setRenderSnapshot(true,y);i=h.canvas()[0].toDataURL("image/jpeg",1);if(i.length>10){break}y-=1}if(d=="photo"){var x=this.dataURLtoBlob(i);this.exportDataToLocal(x,"jpg")}else{var y=UIScreen.mainScreen().scale();var a=h.snapshotSize();var q=a.width*y;var o=a.height*y;var b=10000;if(q>b||o>b){var g=Math.min(b/q,b/o);main.log("pdf zoom ratio: "+g);q*=g;o*=g}var c=q>o?"landscape":"portrait";var z=new jspdf({orientation:c,unit:"px",format:[q,o]});z.addImage(i,"jpeg",0,0,q,o);var x=z.output("blob");this.exportDataToLocal(x,"pdf")}}catch(v){this.showMessageBox(LOCAL("Failed to export, maybe the file is too large."))}MindNode.DisplayDark=p;h.setRenderSnapshot(false)}else{if(d=="mm"||d=="freemind"||d=="xmind"){var r=h.rootNode();var x=null;if(d=="mm"){var w={root:this.mGraphViewCtrls[0].rootNode()};if(this.mMarketFileID){w.marketFileID=this.mMarketFileID}w.style=MindNode.DisplayStyle;if(this.mGraphViewCtrls.length>1){var m=[];this.mGraphViewCtrls.slice(1).forEach(function(e){m.push({root:e.rootNode()})});w.subjects=m}x=NSKeyedArchiver.archivedDataWithRootObject(w);this.exportFileToLocal(x,"mm")}else{if(d=="freemind"){var k=new FreeMindExporter();x=k.exportFreeMind(r);this.exportFileToLocal(x,"mm")}else{var n=this;var k=new XMindExporter();var x=k.exportXMind(r);var l='<?xml version="1.0" encoding="UTF-8" standalone="no"?><manifest xmlns="urn:xmind:xmap:xmlns:manifest:1.0" password-hint=""><file-entry full-path="content.xml" media-type="text/xml"/><file-entry full-path="META-INF/" media-type=""/><file-entry full-path="META-INF/manifest.xml" media-type="text/xml"/></manifest>';zip.createWriter(new zip.BlobWriter("application/zip"),function(e){e.add("content.xml",new zip.TextReader(x),function(){e.add("META-INF/manifest.xml",new zip.TextReader(l),function(){e.close(function(A){n.exportDataToLocal(A,"xmind")})})})},function(A){main.log("zip error: "+A)})}}}else{if(d=="outline"){var u=new HtmlOutlineMaker();var s=h.rootNode();var f=u.buildHTMLString(s);var j='<html><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=2.0, minimum-scale=0.1"><title>文字大纲</title></head><link href="res/icon.png" rel="icon">';j+=f;j+="<body></body></html>";this.exportFileToLocal(j,"html")}}}},installGlobalShortcuts:function(){var a=this;globalShortcut.register("CommandOrControl+=",function(){a.pageZoomIn()});globalShortcut.register("CommandOrControl+_",function(){a.pageZoomOut()});globalShortcut.register("CommandOrControl+Z",function(){a.undo()});globalShortcut.register("Shift+CommandOrControl+Z",function(){a.redo()});globalShortcut.register("Alt+Backspace",function(){a.shortcutToDeleteNode()})},uninstallGlobalShortcuts:function(){globalShortcut.unregisterAll()},handleShortcutKeyOperation:function(){this.installGlobalShortcuts();var a=this;var b=remote.getCurrentWindow();b.on("focus",function(){a.installGlobalShortcuts()});b.on("blur",function(){a.uninstallGlobalShortcuts()})},updateWithDisplayNight:function(){var c=NSUserDefaults.standardUserDefaults();var b=c.objectForKey("nightDisplay");if(b){MindNode.DisplayDark=true;UIAlertView.SHADOW_ENABLED=false;UIView.DarkMode=true}else{MindNode.DisplayDark=false;UIAlertView.SHADOW_ENABLED=true;UIView.DarkMode=false}var a=this.mAddBtnDisplayButton;if(a){if(b){a.setImage(new UIImage("res/addbtn_display_dark.png",60,60),UIControl.State.Normal);a.setImage(new UIImage("res/addbtn_hide_dark.png",60,60),UIControl.State.Selected)}else{a.setImage(new UIImage("res/addbtn_display.png",60,60),UIControl.State.Normal);a.setImage(new UIImage("res/addbtn_hide.png",60,60),UIControl.State.Selected)}}this.mGraphViewCtrls.forEach(function(d){d.updateWithDisplayNight()});this.mTabBar.updateWithDisplayDark();if(isWebApp){WebAppMenuManager.defaultManager().menuBar().reload()}},updateWithDisplayMode:function(){},handleMainProcessMessages:function(){var a=this;ipcRenderer.on("createNewFile",function(){if(!a.mMindStyleDialog){a.showMindStylePickerView(true)}});ipcRenderer.on("openFile",function(){a.selectFileToOpen()});ipcRenderer.on("saveFile",function(){a.onMindNodeFileSave()});ipcRenderer.on("saveFileAs",function(){a.saveNewFile(true)});ipcRenderer.on("exportVipNeed",function(){a.checkIfUserProValid()});ipcRenderer.on("exportPhoto",function(){a.exportFile("photo")});ipcRenderer.on("exportOutline",function(){a.exportFile("outline")});ipcRenderer.on("exportPDF",function(){a.exportFile("pdf")});ipcRenderer.on("exportXMind",function(){a.exportFile("xmind")});ipcRenderer.on("exportFreeMind",function(){a.exportFile("freemind")});ipcRenderer.on("login",function(){a.showLoginViewController()});ipcRenderer.on("showUserAccount",function(){a.showUserAccount()});ipcRenderer.on("documents",function(){a.showDocumentPath()});ipcRenderer.on("syncToCloud",function(){a.showSyncToCloudDialog()});ipcRenderer.on("downloadFromCloud",function(){a.showDownloadFromCloudDialog()});ipcRenderer.on("showAppQRCode",function(){if(isWebApp&&!isMiniWebProgram()){if(process.device=="iphone"||process.device=="ipad"){shell.openExternal("https://apps.apple.com/cn/app/apple-store/id1025462912")}else{if(process.device=="android"){shell.openExternal("http://fir.mindline.cn/968p")}else{shell.openExternal("http://www.mindline.cn")}}}else{a.showQRCodeScanView("appdo")}});ipcRenderer.on("showWxpbQRCode",function(){a.showQRCodeScanView("wxpb")});ipcRenderer.on("showIOSVersion",function(){shell.openExternal("https://itunes.apple.com/cn/app/mindline/id1025462912?mt=8")});ipcRenderer.on("showAndroidVersion",function(){shell.openExternal("https://android.myapp.com/myapp/detail.htm?apkName=czh.mindnode")});ipcRenderer.on("showUseGuide",function(){shell.openExternal("http://www.mindline.cn/UseGuidePC.html")});ipcRenderer.on("showUserAgreement",function(){shell.openExternal("http://www.mindline.cn/agreement.html")});ipcRenderer.on("contactUs",function(){shell.openExternal("mailto:mindline@126.com")});ipcRenderer.on("switchDisplayToolbar",function(){a.switchDisplayToolbar()});ipcRenderer.on("switchDisplayAddingButton",function(){a.switchDisplayAddingButton()});ipcRenderer.on("showAutoNewlineSettings",function(){a.showAutoNewlineSettings()});ipcRenderer.on("addBranch",function(){a.shortcutToAddBranch()});ipcRenderer.on("addBranch2",function(){a.shortcutToAddBranch2()});ipcRenderer.on("insertBranch",function(){a.shortcutToInsertBranch()});ipcRenderer.on("requestUpdate",function(){a.requestUpdate()});ipcRenderer.on("showPurchaseDialog",function(){a.checkIfUserProValid()});ipcRenderer.on("switchAutoSync",function(){a.switchAutoSyncToCloud(true)});ipcRenderer.on("pageActualSize",function(){a.pageActualSize()});ipcRenderer.on("pageZoomIn",function(){a.pageZoomIn()});ipcRenderer.on("pageZoomOut",function(){a.pageZoomOut()});ipcRenderer.on("switchNightDisplayMode",function(){a.switchNightDisplayMode()});ipcRenderer.on("campusPromotion",function(){a.showCampusPromotion()});ipcRenderer.on("textOutline",function(){a.showTextOutlineEditView()});ipcRenderer.on("switchExpandingLeft",function(){a.switchExpandingLeft()});ipcRenderer.on("returnText",function(){a.shortcutToReturnText()});ipcRenderer.on("deleteBranch",function(){a.shortcutToDeleteNode()});ipcRenderer.on("windowOnBlur",function(){});ipcRenderer.on("windowOnFocus",function(){if(a.mReloadOnFocus){NSUserDefaults.standardUserDefaults().reload();UserSessionManager.defaultManager().reload();a.loadRecentDocuments();a.createApplicationMenu();a.mGraphViewCtrls.forEach(function(b){b.reloadOnFocus()})}else{a.mReloadOnFocus=true}a.mWindowFocus=true;a.createApplicationMenu()});ipcRenderer.on("branchStyles",function(){a.showMindStylePickerView()});ipcRenderer.on("buildNewTopic",function(){a.buildNewTopic()});ipcRenderer.on("undo",function(){a.undo()});ipcRenderer.on("redo",function(){a.redo()});ipcRenderer.on("before-sync",function(){var b=remote.getCurrentWindow();if(!b.isFocused()){if(!a.isNewFileEdit()){main.log("save file before sync !");a.save(a.mFile)}}});ipcRenderer.on("after-download",function(){if(!a.isNewFileEdit()){var c=fs.statSync(a.mFile.path());var b=parseInt(c.mtimeMs/1000);if(b!=a.mFileMTime){fs.readFile(a.mFile.path(),function(d,e){if(!d){a.mFile.setData(e.toString());a.openMindGraphFile(a.mFile)}})}}});ipcRenderer.on("changeFontSize",function(b,c){a.changeFontSize(c)});ipcRenderer.on("updateLineMaxWidth",function(b){a.mGraphViewCtrls.forEach(function(c){if(c==a.mGraphViewCtrl){c.rootNode().traverseFitTextSize();c.graphView().layoutNodeTree(null,false,true)}else{c.setPendingFitTextSize(true)}})});ipcRenderer.on("updateMindStyle",function(c,b){a.updateMindStyle(b)});ipcRenderer.on("showRedPacketActivity",function(b){shell.openExternal("http://www.mindline.cn/ZhihuPacket2.html")})},undo:function(){this.mGraphViewCtrl.graphView().undoManager().undo()},redo:function(){this.mGraphViewCtrl.graphView().undoManager().redo()},buildNewTopic:function(){this.mTabBar.setHidden(false);var c=this.mTabBar.titles();c.push("");this.mTabBar.setTitles(c);this.mTabBar.setSelectedIndex(c.length-1,true);var a=new MindNode();var b=new GraphFileViewController(a,this,stringRandom(5));this.mGraphViewCtrls.push(b);this.showGraphViewController(b)},displayStyle:function(){return this.mDisplayStyle},setDisplayStyle:function(a){this.mDisplayStyle=a},switchExpandingLeft:function(){this.mGraphViewCtrl.switchExpandingLeft()},showTextOutlineEditView:function(){this.mGraphViewCtrl.showTextOutlineEditView();this.createApplicationMenu()},showCampusPromotion:function(){dialog.showMessageBox({title:LOCAL("Campus Sponsor"),message:"我们有兴趣赞助大学校园举办的活动，需要赞助的同学欢迎关注我们的微信公众号：mindlines给我们留言，或者邮件联系：mindline@126.com，谢谢！",buttons:[LOCAL("OK")]})},switchNightDisplayMode:function(){var c=NSUserDefaults.standardUserDefaults();var b=c.objectForKey("nightDisplay");if(b){c.removeObjectForKey("nightDisplay")}else{c.setObjectForKey(true,"nightDisplay")}c.synchronize();var a=this.mAddBtnDisplayButton;if(a){if(!b){a.setImage(new UIImage("res/addbtn_display_dark.png",60,60),UIControl.State.Normal);a.setImage(new UIImage("res/addbtn_hide_dark.png",60,60),UIControl.State.Selected)}else{a.setImage(new UIImage("res/addbtn_display.png",60,60),UIControl.State.Normal);a.setImage(new UIImage("res/addbtn_hide.png",60,60),UIControl.State.Selected)}}this.updateWithDisplayNight();this.createApplicationMenu()},pageActualSize:function(){this.mGraphViewCtrl.pageActualSize();this.createApplicationMenu()},pageZoomIn:function(){this.mGraphViewCtrl.pageZoomIn()},pageZoomOut:function(){this.mGraphViewCtrl.pageZoomOut()},switchAutoSyncToCloud:function(b){var c=NSUserDefaults.standardUserDefaults();var a=c.objectForKey("autoSync");if(a){c.removeObjectForKey("autoSync")}else{c.setObjectForKey(true,"autoSync");if(b){this.showMessageBox(LOCAL("The files would be synchronized to our cloud automatically after saving file, and downloaded form our cloud when there is a newer version."))}}c.synchronize();this.createApplicationMenu()},reportUserActive:function(){var f=NSUserDefaults.standardUserDefaults();var e=f.objectForKey("userActiveDate");var b=new Date().getTime()/1000;if(e){var g=b-e;if(g>0&&g<4*60*60){return}}var a;if(process.platform=="darwin"){a=isMasVersion()?"mas":"mac"}else{a=isWinStoreVersion()?"winstore":"windows"}var c=this.mFirstInstalled?1:0;var d=new HttpRequest("reportUserActive",{platform:a,"new":c});HttpAjax.sendRequest(d,function(h,i){main.log("reportUserActive: "+h);if(h=="success"){f.setObjectForKey(b,"userActiveDate");f.synchronize()}})},requestUpdateIfNeed:function(){var c=NSUserDefaults.standardUserDefaults();var b=c.objectForKey("requestUpdateDate");if(b){var a=new Date().getTime()/1000;var d=a-b;if(d>0&&d<6*60*60){return}}this.requestUpdate(true)},requestUpdate:function(d){var b=this;var a;if(process.platform=="darwin"){a=isMasVersion()?"mas":"mac"}else{a=isWinStoreVersion()?"winstore":"windows"}var c=new HttpRequest("files/update/"+a+"/mindline.upt");HttpAjax.sendRequest(c,function(f,g){var i=-1;if(f=="success"){var k={};var h=g.split("\n");h.forEach(function(p){var n=p.indexOf(":");if(n!=-1){var o=p.substring(0,n).trim();var q=p.substring(n+1).trim();k[o]=q}});if(d){var j=NSUserDefaults.standardUserDefaults();var e=parseInt(new Date().getTime()/1000);j.setObjectForKey(e,"requestUpdateDate");j.synchronize()}main.log("update infos: "+k.version+" "+main.appVersion());if(floatValue(k.version)>floatValue(main.appVersion())){if(d){var l=b.shouldUpdateWithScripts(k);if(l){b.updateWithScriptUrl(k.scripts,true);return}else{if(k.slient=="1"){return}}}var m=LOCAL("New Version ")+k.version+"："+k.description;dialog.showMessageBoxV2(null,{type:"info",title:LOCAL("Tips"),message:m,buttons:[LOCAL("Download Updates"),LOCAL("Cancel")],defaultId:0,cancelId:1},function(o){if(o==0){var n=b.shouldUpdateWithScripts(k);if(n){b.updateWithScriptUrl(k.scripts,false)}else{shell.openExternal(k.url)}}})}else{if(!d){b.showMessageBox(LOCAL("The current version is the latest."))}}}else{if(!d){b.showMessageBox(LOCAL("Network error, please try again."))}}})},shouldUpdateWithScripts:function(b){var a=false;if(b.scripts){main.log(b.scripts);if(b["base-version"]){if(floatValue(main.appVersion())>=floatValue(b["base-version"])){a=true}}else{a=true}}return a},updateWithScriptUrl:function(b,d){main.log("Begin update scripts...");if(!d){this.showLoadingView()}var a=this;var c=app.getPath("userData")+pathSeparator()+"Main.zip";var e=remote.getCurrentWindow();main.downloadFile(b,c,function(g){if(g==0){var h=app.getPath("userData")+pathSeparator()+"Main";var f=h+"$"+stringRandom(5);main.unarchiveFile(c,f,function(i){if(i==0){deleteFolderRecursive(h);fs.rename(f,h,function(j){});if(!d){dialog.showMessageBoxV2(e,{title:LOCAL("Tips"),message:LOCAL("The updates have been downloaded, please restart the app."),buttons:[LOCAL("Restart"),LOCAL("Back")],defaultId:0,cancelId:1},function(j){if(j==0){app.relaunch();app.quit()}})}main.log("Update scripts done!")}else{if(!d){a.showMessageBox(LOCAL("Unarchive the files failed, please try again."))}setTimeout(function(){deleteFolderRecursive(f)},1000)}if(!d){a.dismissLoadingView()}fs.unlink(c,function(){})})}else{if(!d){a.showMessageBox(LOCAL("Download the updates failed, please try again."))}fs.unlink(c,function(){})}})},shortcutToAddBranch:function(){this.mGraphViewCtrl.shortcutToAddBranch()},shortcutToAddBranch2:function(){this.mGraphViewCtrl.shortcutToAddBranch2()},shortcutToInsertBranch:function(){this.mGraphViewCtrl.shortcutToInsertBranch()},shortcutToReturnText:function(){this.mGraphViewCtrl.shortcutToReturnText()},shortcutToDeleteNode:function(){this.mGraphViewCtrl.shortcutToDeleteNode()},showAutoNewlineSettings:function(){var b=new UIAlertView(LOCAL("Max Words Per Line"),null,LOCAL("Cancel"),LOCAL("Confirm"));b.setTag(107);b.setDelegate(this);b.setAlertViewStyle(UIAlertView.Style.PlainTextInput);b.show();var a=AppSettings.defaultSettings().maxCharNumPerLine();var c=b.textFieldAtIndex(0);c.setText(a+"");c.setPlaceholder("20")},switchDisplayAddingButton:function(){var a=this.mGraphViewCtrl.rootNode();var e=NSUserDefaults.standardUserDefaults();var c;if(e.objectForKey("hideAddBtn")){e.removeObjectForKey("hideAddBtn");e.synchronize();c=false;this.mAddBtnDisplayButton.setSelected(false)}else{e.setObjectForKey(true,"hideAddBtn");e.synchronize();c=true;this.mAddBtnDisplayButton.setSelected(true)}this.mGraphViewCtrls.forEach(function(f){f.rootNode().traverseSetAddButtonHidden(c)});if(c){var d=remote.getCurrentWindow();if(d.isFocused()){var e=NSUserDefaults.standardUserDefaults();var b=e.objectForKey("hide_addbtn_tips");if(!b){dialog.showMessageBoxV2(null,{type:"info",title:LOCAL("Tips"),message:LOCAL("Tap the end of branch to add sub-branch when hidden."),buttons:[LOCAL("OK"),LOCAL("Don't Remind Me")],defaultId:0,cancelId:0},function(f){if(f==1){e.setObjectForKey(true,"hide_addbtn_tips");e.synchronize()}})}}}},onWindowResize:function(){UIViewController.prototype.onWindowResize.call(this);var a;if(isSmallSizeScreen()){a=false}else{a=!NSUserDefaults.standardUserDefaults().objectForKey("hideToolbar")}var b=false;this.mGraphViewCtrls.forEach(function(c){if(c.isViewLoad()){if(c.isDisplayToolbar()!=a){c.displayToolbar(a);b=true}}});if(b){this.createApplicationMenu()}},switchDisplayToolbar:function(){var b=NSUserDefaults.standardUserDefaults();var a;if(b.objectForKey("hideToolbar")){b.removeObjectForKey("hideToolbar");b.synchronize();a=true}else{b.setObjectForKey(true,"hideToolbar");b.synchronize();a=false}this.mGraphViewCtrls.forEach(function(c){if(c.isViewLoad()){c.displayToolbar(a)}});this.createApplicationMenu()},showDocumentPath:function(){var d=this.getDocumentPath();var c=UserSessionManager.defaultManager().account();var b=remote.getCurrentWindow();var a=this;dialog.showMessageBoxV2(null,{type:"info",title:LOCAL("Cloud Sync Directory"),message:LOCAL("Current Cloud Sync Directory: ")+d+LOCAL(". The files here could be sync or downloaded with our cloud service."),buttons:[LOCAL("Change Directory"),LOCAL("Back")],defaultId:1,cancelId:1},function(e){if(e==0){dialog.showOpenDialogV2(b,{properties:["openDirectory","createDirectory","promptToCreate"],buttonLabel:LOCAL("Select")},function(f){if(f&&f.length>0){a.setDocumentPath(f[0])}})}})},showCloudSyncViewTips:function(b){if(this.mAutoSyncing){var a=new UIToast();a.setText(b);a.setCenter(new CGPoint(this.view().width()/2,100));a.showInView(this.view(),5)}else{var d=remote.getCurrentWindow();var c=this;dialog.showMessageBoxV2(d,{type:"info",message:b,buttons:[LOCAL("View Files"),LOCAL("Back")],defaultId:1,cancelId:1},function(e){if(e==0){c.selectFileToOpen()}})}},getDocumentPath:function(){var a=NSUserDefaults.standardUserDefaults().objectForKey("documentPath");if(!a){if(isWebApp){a="/"}else{a=app.getPath("documents")+pathSeparator()+"MindLine"}}return a},setDocumentPath:function(c){var d=this.getDocumentPath();if(d!=c){var a=UserSessionManager.defaultManager().account();if(a){a.syncCnt=0;a.sync()}}var b=NSUserDefaults.standardUserDefaults();b.setObjectForKey(c,"documentPath");b.synchronize();this.mSelectedSyncDocPath=c;fs.mkdir(c,{recursive:true},function(e){})},createDocumentDir:function(){var a=this.getDocumentPath();if(!fs.existsSync(a)){this.mFirstInstalled=true;fs.mkdir(a,{recursive:true},function(b){})}},showSyncToCloudDialog:function(){if(this.checkIfUserProValid()){this.syncToCloud()}},syncToCloud:function(){if(this.isNewFileEdit()){if(!this.isEmptyFile()){this.showNewFileSavingDialog(false,true);return}}else{this.save(this.mFile)}this.syncToCloudV1()},syncToCloudV1:function(){if(main.broadcast){main.broadcast("before-sync")}var b=isMasVersion()?this.mSelectedSyncDocPath:this.getDocumentPath();if(!b){var c=remote.getCurrentWindow();var a=this;dialog.showOpenDialogV2(c,{message:LOCAL("Please select the cloud sync directory."),properties:["openDirectory","createDirectory","promptToCreate"],buttonLabel:LOCAL("Select")},function(d){if(d&&d.length>0){b=d[0];a.setDocumentPath(b);a.syncToCloudV2()}})}else{this.syncToCloudV2()}},syncToCloudV2:function(){if(!this.mAutoSyncing){this.showLoadingView()}var a=this;var b=UserSessionManager.defaultManager();b.uploadToken(function(c,e,d,h){if(c==0){var g=b.account().syncCnt;if(h==g+1){var f=new FileRevisionManager(a.getDocumentPath());f.buildFileSystemMirrorImage(true);a.uploadToCloudWithQiniu(e,d,h)}else{a.restoreFromCloud(true,function(i){if(i==0){a.uploadToCloudWithQiniu(e,d,h)}})}}else{a.showMessageBox(LOCAL("Failed to get the upload token, please try again."),a.mAutoSyncing)}})},uploadToCloudWithQiniu:function(d,c,f){var a=this;var e=app.getPath("userData")+pathSeparator()+"upload.zip";var b=UserSessionManager.defaultManager();main.archiveFile(this.getDocumentPath(),e,function(h,j){if(h==0){var i=fs.statSync(e);if(i.size>200){var g=app.getPath("userData")+pathSeparator()+"upload";main.unarchiveFile(e,g,function(k,l){if(k==0){main.uploadWithQiniu(c,d,e,function(m){if(m==0){b.uploadSync(f,function(n){if(n==0){var o=b.account();o.syncCnt=f;o.sync();a.dismissLoadingView();a.showCloudSyncViewTips(LOCAL("The files in the cloud sync directory have been synchronized to our cloud."));a.mAutoSyncing=false}else{a.showMessageBox(LOCAL("Failed to sync files: ")+n,a.mAutoSyncing)}})}else{a.showMessageBox(LOCAL("Failed to upload files: ")+m,a.mAutoSyncing)}fs.unlink(e,function(){})})}else{fs.unlink(e,function(){});a.showMessageBox(LOCAL("Failed to archive files: ")+l,a.mAutoSyncing)}deleteFolderRecursive(g)})}else{fs.unlink(e,function(){});a.showMessageBox(LOCAL("There maybe are no files in the current sync directory."),a.mAutoSyncing)}}else{a.showMessageBox(LOCAL("Failed to archive files: ")+j,a.mAutoSyncing)}},"(\\.mm$)|(^\\.filesystem$)")},autoSyncToCloud:function(){var d=UserSessionManager.defaultManager().account();if(d&&d.isProVersionValid()){var c=this;var b=NSUserDefaults.standardUserDefaults().objectForKey("autoSync");if(b){var a=isMasVersion()?this.mSelectedSyncDocPath:this.getDocumentPath();if(!a){if(!c.mShowAutoSyncTips){c.mShowAutoSyncTips=true;var f=remote.getCurrentWindow();dialog.showMessageBoxV2(f,{title:LOCAL("Tips"),message:LOCAL("Sync files to our cloud now?"),buttons:[LOCAL("Yes"),LOCAL("No")]},function(g){if(g==0){c.mAutoSyncing=true;c.syncToCloud()}})}}else{main.log("auto sync to cloud!");c.mAutoSyncing=true;c.syncToCloud()}}else{var e=NSUserDefaults.standardUserDefaults();e.execOnceOnKey("show_autosync_tips",function(){dialog.showMessageBoxV2(null,{title:LOCAL("Tips"),message:LOCAL("Enable the auto sync function, the files would be synchronized to our cloud automatically after saving file, and downloaded form our cloud when there is a newer version."),buttons:[LOCAL("Enable"),LOCAL("Cancel")]},function(g){if(g==0){c.switchAutoSyncToCloud()}})})}}},showDownloadFromCloudDialog:function(){if(this.checkIfUserProValid()){this.downloadFromCloud()}},downloadFromCloud:function(){var b=isMasVersion()?this.mSelectedSyncDocPath:this.getDocumentPath();if(!b){var c=remote.getCurrentWindow();var a=this;dialog.showOpenDialogV2(c,{message:LOCAL("Please select the cloud sync directory."),properties:["openDirectory","createDirectory","promptToCreate"],buttonLabel:LOCAL("Select")},function(d){if(d&&d.length>0){b=d[0];a.setDocumentPath(b);a.downloadFromCloudV2()}})}else{this.downloadFromCloudV2()}},downloadFromCloudV2:function(){if(!this.mAutoSyncing){this.showLoadingView()}this.restoreFromCloud(false)},restoreFromCloud:function(d,b){var e=UserSessionManager.defaultManager();var f=remote.getCurrentWindow();var a=this;var c=app.getPath("userData")+pathSeparator()+"download.zip";e.getDownloadUrl(function(h,g,i){if(h==0){main.downloadFile(g,c,function(k){if(k==0){var j=a.getDocumentPath();var l;if(process.platform=="darwin"){l=app.getPath("userData")+pathSeparator()+"MindLine$"+stringRandom(5)}else{l=j+"$"+stringRandom(5)}main.unarchiveFile(c,l,function(v,o){if(v==0){try{var n=!d;var w=new FileRevisionManager(j);w.mergeFilesAtPath(l,n);var r=UserSessionManager.defaultManager().account();r.syncCnt=i;r.sync();if(b){b(0)}else{a.dismissLoadingView();a.showCloudSyncViewTips(LOCAL("The files have been downloaded from our cloud, please check them in the cloud sync directory."));a.mAutoSyncing=false;if(main.broadcast){main.broadcast("after-download")}else{if(!a.isNewFileEdit()){var p=fs.statSync(a.mFile.path());var x=parseInt(p.mtimeMs/1000);if(x!=a.mFileMTime){fs.readFile(a.mFile.path(),function(z,A){if(!z){a.mFile.setData(A.toString());a.openMindGraphFile(a.mFile)}})}}}}}catch(u){main.log(u.stack);a.showMessageBox(LOCAL("Failed to merge the local files: ")+u,a.mAutoSyncing)}}else{var t="";var y=o+"";if(y.indexOf("no such file or directory")!=-1){var q=y.lastIndexOf("\\");if(q==-1){q=y.lastIndexOf("/")}var s=y.lastIndexOf("'");if(q!=-1&&s!=-1){var m=y.substring(q+1,s);t=LOCAL("Failed to unarchive files: ")+m+"\n\n"}else{t=LOCAL("Failed to unarchive files: ")+o+"\n\n"}t+=LOCAL('If the file name contains \\/:*?<>|" or newline characters, please remove them and sync files again.')}else{t=LOCAL("Failed to unarchive files: ")+o+LOCAL(", please sync files again on other device.")}a.showMessageBox(t,a.mAutoSyncing)}fs.unlink(c,function(){});setTimeout(function(){deleteFolderRecursive(l)},1000)})}else{a.showMessageBox(LOCAL("Failed to download files: ")+k,a.mAutoSyncing)}})}else{a.showMessageBox(LOCAL("Failed to get files: ")+h,a.mAutoSyncing)}})},handleCloudFilesDidUpdate:function(f){var c=NSUserDefaults.standardUserDefaults().objectForKey("autoSync");if(c){var d=UserSessionManager.defaultManager().account();if(d&&d.isProVersionValid()){var b=this;var a=isMasVersion()?this.mSelectedSyncDocPath:this.getDocumentPath();if(!a){var e=remote.getCurrentWindow();dialog.showMessageBoxV2(e,{title:LOCAL("Tips"),message:LOCAL("There is a newer version on the cloud, download the files now?"),buttons:[LOCAL("Yes"),LOCAL("No")]},function(g){if(g==0){b.mAutoSyncing=true;b.downloadFromCloud()}})}else{main.log("auto download from cloud!");b.mAutoSyncing=true;b.downloadFromCloud()}}}},showLoadingView:function(){this.dismissLoadingView();var a=this.view().window();this.mLoadingView=new LoadingView(a.bounds());this.mLoadingView.showInView(a)},dismissLoadingView:function(){if(this.mLoadingView){this.mLoadingView.dismiss();this.mLoadingView=null}},scheduleFileAutoSave:function(){var a=this;setTimeout(function(){if(!a.isNewFileEdit()){main.log("file has auto save!");a.save(a.mFile)}a.scheduleFileAutoSave()},10*60*1000)},showAddBtnDisplayButton:function(){var e=this.view();var c=new UIButton(new CGRect(e.width()-70,e.height()-70,60,60));c.setAutoresizingMask(UIView.Autoresizing.FlexibleLeftMargin|UIView.Autoresizing.FlexibleTopMargin);var g=NSUserDefaults.standardUserDefaults();var f=g.objectForKey("nightDisplay");if(f){c.setImage(new UIImage("res/addbtn_display_dark.png",60,60),UIControl.State.Normal);c.setImage(new UIImage("res/addbtn_hide_dark.png",60,60),UIControl.State.Selected)}else{c.setImage(new UIImage("res/addbtn_display.png",60,60),UIControl.State.Normal);c.setImage(new UIImage("res/addbtn_hide.png",60,60),UIControl.State.Selected)}var b=this;c.addTarget(function(i){var h=b.mGraphViewCtrl.graphView().undoManager();h.pushUndoNode(b.mGraphViewCtrl.rootNode(),UndoType.kUndoSwitchAddBtnDisplay);b.switchDisplayAddingButton()},UIControl.Events.TouchUpInside);var a=g.objectForKey("hideAddBtn");c.setSelected(a?true:false);var d=this.presentMindStyle();if(d!=MindNode.Style.Default){c.setHidden(true)}else{c.setHidden(false)}e.addSubview(c);this.mAddBtnDisplayButton=c},presentMindStyle:function(){return MindNode.DisplayStyle},setAddBtnDisplayButtonVisible:function(b){var a=this.presentMindStyle();if(a==MindNode.Style.Default){this.mAddBtnDisplayButton.setHidden(!b)}},createApplicationMenu:function(){var y=[];var l=remote.getCurrentWindow();if(!l.isFocused()){return}if(this.mWindowFocus){var r=this;var z=NSUserDefaults.standardUserDefaults();var n=z.objectForKey("showToolbar");var k=z.objectForKey("autoSync");var m=z.objectForKey("nightDisplay");var f=UserSessionManager.defaultManager().account();var a=f?f.name:null;var w=this.mGraphViewCtrl?this.mGraphViewCtrl.rootNode():null;var g=this.mGraphViewCtrl?this.mGraphViewCtrl.graphView().activeNode():null;var j=this.mGraphViewCtrl?this.mGraphViewCtrl.textOutlineController():null;var o=j?j.activeView():null;var h=this.mGraphViewCtrl?this.mGraphViewCtrl.pageScale():0;var B=this.mGraphViewCtrl?this.mGraphViewCtrl.graphView().undoManager().canUndo():false;var p=this.mGraphViewCtrl?this.mGraphViewCtrl.graphView().undoManager().canRedo():false;var e=AppSettings.defaultSettings().fontSize();var q=[];var d=this.mRecentDocuments.slice();if(d.length>0){for(var s=d.length-1;s>=0;s--){let path=d[s];var c={label:path.substring(path.lastIndexOf(pathSeparator())+1),click:function(){r.openFileInWindow(path)}};q.push(c)}q.push({type:"separator"},{label:LOCAL("Clear Recents"),click:function(){r.clearRecentDocument()}})}else{q.push({label:LOCAL("No recent documents"),enabled:false})}var c={label:LOCAL("File"),submenu:[{label:LOCAL("New"),accelerator:"CommandOrControl+N",click:function(){l.webContents.send("createNewFile")}},{label:LOCAL("Open..."),accelerator:"CommandOrControl+O",click:function(){l.webContents.send("openFile")}},{label:LOCAL("Open Recent"),enabled:q.length>0,submenu:q},{type:"separator"},{label:LOCAL("Save"),accelerator:"CommandOrControl+S",click:function(){l.webContents.send("saveFile")}},{label:LOCAL("Save As..."),accelerator:"Shift+CommandOrControl+S",click:function(){l.webContents.send("saveFileAs")}},{type:"separator"}]};if(isMasVersion()&&(f==null||!f.isProVersionValid())){c.submenu.push({label:LOCAL("Export (VIP Needed)"),click:function(){l.webContents.send("exportVipNeed")}})}else{c.submenu.push({label:LOCAL("Export"),submenu:[{label:LOCAL("Photo"),click:function(){l.webContents.send("exportPhoto")}},{label:LOCAL("Text Outline"),click:function(){l.webContents.send("exportOutline")}},{label:"PDF",click:function(){l.webContents.send("exportPDF")}},{label:"XMind",click:function(){l.webContents.send("exportXMind")}},{label:"FreeMind",click:function(){l.webContents.send("exportFreeMind")}}]})}y.push(c);var x={label:LOCAL("Edit"),submenu:[{label:LOCAL("Undo"),accelerator:"CommandOrControl+Z",enabled:B,click:function(){l.webContents.send("undo")}},{label:LOCAL("Redo"),accelerator:"Shift+CommandOrControl+Z",enabled:p,click:function(){l.webContents.send("redo")}},{type:"separator"},{label:LOCAL("Cut"),accelerator:"CommandOrControl+X",role:"cut"},{label:LOCAL("Copy"),accelerator:"CommandOrControl+C",role:"copy"},{label:LOCAL("Paste"),accelerator:"CommandOrControl+V",role:"paste"},{label:LOCAL("Select All"),accelerator:"CommandOrControl+A",role:"selectall"},{type:"separator"},{label:LOCAL("Add Branch"),accelerator:"Alt+Return",enabled:g!=null||o!=null,click:function(){l.webContents.send("addBranch")}},{label:LOCAL("Add Sub-Branch"),accelerator:"CommandOrControl+Return",enabled:g!=null||o!=null,click:function(){l.webContents.send("addBranch2")}},{label:LOCAL("Insert Sub-Branch"),accelerator:"CommandOrControl+I",enabled:g!=null||o!=null,click:function(){l.webContents.send("insertBranch")}},{label:LOCAL("Delete Branch"),accelerator:"Alt+Backspace",enabled:g!=null||o!=null,click:function(){l.webContents.send("deleteBranch")}},{type:"separator"},{label:LOCAL("New Topic"),accelerator:"CommandOrControl+M",click:function(){l.webContents.send("buildNewTopic")}}]};if(isWebApp){x.submenu.splice(2,5)}y.push(x);var u={label:LOCAL("View"),submenu:[{label:LOCAL("Branch Styles"),click:function(){l.webContents.send("branchStyles")}},{type:"separator"},{label:z.objectForKey("hideToolbar")?LOCAL("Show Toolbar"):LOCAL("Hide Toolbar"),click:function(){main.broadcast("switchDisplayToolbar")}},{type:"separator"},{label:LOCAL("Font Size"),submenu:[{label:LOCAL("Too Large"),type:"checkbox",checked:e==AppSettings.FONT_SIZE_LARGE2,click:function(){main.broadcast("changeFontSize",AppSettings.FONT_SIZE_LARGE2)}},{label:LOCAL("Large"),type:"checkbox",checked:e==AppSettings.FONT_SIZE_LARGE,click:function(){main.broadcast("changeFontSize",AppSettings.FONT_SIZE_LARGE)}},{label:LOCAL("Normal"),type:"checkbox",checked:e==AppSettings.FONT_SIZE_NORMAL,click:function(){main.broadcast("changeFontSize",AppSettings.FONT_SIZE_NORMAL)}},{label:LOCAL("Small"),type:"checkbox",checked:e==AppSettings.FONT_SIZE_SMALL,click:function(){main.broadcast("changeFontSize",AppSettings.FONT_SIZE_SMALL)}}]},{label:LOCAL("Max Words Per Line..."),click:function(){l.webContents.send("showAutoNewlineSettings")}},{type:"separator"},{type:"checkbox",checked:m,label:m?LOCAL("Disable Night Display Mode"):LOCAL("Enable Night Display Mode"),click:function(){main.broadcast("switchNightDisplayMode")}},{type:"separator"},{label:LOCAL("Actual Size"),accelerator:"CommandOrControl+0",enabled:h!=1,click:function(){l.webContents.send("pageActualSize")}},{label:LOCAL("Zoom In"),accelerator:"CommandOrControl+Plus",click:function(){l.webContents.send("pageZoomIn")}},{label:LOCAL("Zoom Out"),accelerator:"CommandOrControl+-",click:function(){l.webContents.send("pageZoomOut")}}]};if(isSmallSizeScreen()){u.submenu.splice(2,2);var b={label:j?LOCAL("MindLine"):LOCAL("Text Outline"),click:function(){l.webContents.send("textOutline")}};u.submenu.splice(0,0,b,{type:"separator"})}y.push(u);var v={label:LOCAL("Account"),submenu:[]};if(a){v.submenu.push({label:a,accelerator:"CommandOrControl+T",click:function(){l.webContents.send("showUserAccount")}},{type:"separator"})}else{v.submenu.push({label:LOCAL("Sign In..."),accelerator:"CommandOrControl+T",click:function(){l.webContents.send("login")}},{type:"separator"})}v.submenu.push({label:LOCAL("Cloud Sync Directory..."),click:function(){l.webContents.send("documents")}},{type:"checkbox",label:k?LOCAL("Disable Auto Sync"):LOCAL("Enable Auto Sync"),enabled:f!=null&&f.isProVersionValid(),checked:k,click:function(){l.webContents.send("switchAutoSync")}},{type:"separator"},{label:LOCAL("Sync Files to Cloud"),click:function(i){i.checked=!i.checked;l.webContents.send("syncToCloud")}},{label:LOCAL("Download Files from Cloud"),click:function(){l.webContents.send("downloadFromCloud")}});if(!isWebApp){y.push(v)}var t={label:LOCAL("Help"),submenu:[]};if(isWebApp){if(a){t.submenu.push({label:a,click:function(){l.webContents.send("showUserAccount")}},{type:"separator"})}else{t.submenu.push({label:LOCAL("Sign In..."),click:function(){l.webContents.send("login")}},{type:"separator"})}}if(isMasVersion()){if(!f||!f.isProVersionValid()){t.submenu.push({label:LOCAL("Get Pro Version"),click:function(){l.webContents.send("showPurchaseDialog")}},{type:"separator"})}if(!isMasForReview()){t.submenu.push({label:(isWebApp&&!isMobileDevice())?LOCAL("View Software"):LOCAL("View App"),click:function(){l.webContents.send("showAppQRCode")}},{label:LOCAL("WeChat Public Account"),click:function(){l.webContents.send("showWxpbQRCode")}},{type:"separator"})}}else{if(!isWinStoreForReview()){t.submenu.push({label:(isWebApp&&!isMobileDevice())?LOCAL("View Software"):LOCAL("View App"),click:function(){l.webContents.send("showAppQRCode")}},{label:LOCAL("WeChat Public Account"),click:function(){l.webContents.send("showWxpbQRCode")}},{type:"separator"})}}t.submenu.push({label:LOCAL("Use Guide"),click:function(){l.webContents.send("showUseGuide")}},{label:LOCAL("User Agreement"),click:function(){l.webContents.send("showUserAgreement")}},{type:"separator"},{label:LOCAL("Contact Us"),click:function(){l.webContents.send("contactUs")}});if(!isMasForReview()&&!isWebApp){t.submenu.push({label:LOCAL("Check Update"),click:function(){l.webContents.send("requestUpdate")}})}y.push(t)}if(process.platform=="darwin"&&!isWebApp){var A="MindLine";y.unshift({label:A,submenu:[{label:LOCAL("About")+" "+A,role:"about"},{type:"separator"},{label:LOCAL("Services"),role:"services",submenu:[]},{type:"separator"},{label:LOCAL("Hide")+" "+A,accelerator:"Command+H",role:"hide"},{label:LOCAL("Hide Others"),accelerator:"Command+Alt+H",role:"hideothers"},{label:LOCAL("Show All"),role:"unhide"},{type:"separator"},{label:LOCAL("Quit")+" "+A,accelerator:"Command+Q",click:function(){app.quit()}}]})}Menu.setApplicationMenu(Menu.buildFromTemplate(y))},loadRecentDocuments:function(){var b=NSUserDefaults.standardUserDefaults();var a=b.objectForKey("recentDocuments");this.mRecentDocuments=a?a:[]},addRecentDocument:function(a){if(!a.isLocal()){var c=a.path();app.addRecentDocument(c);this.mRecentDocuments.remove(c);if(this.mRecentDocuments.length>=10){this.mRecentDocuments.splice(0,1)}this.mRecentDocuments.push(c);var b=NSUserDefaults.standardUserDefaults();b.setObjectForKey(this.mRecentDocuments,"recentDocuments");b.synchronize();this.createApplicationMenu()}},clearRecentDocument:function(){this.mRecentDocuments=[];app.clearRecentDocuments();var a=NSUserDefaults.standardUserDefaults();a.removeObjectForKey("recentDocuments");a.synchronize();this.createApplicationMenu()},showMindStylePickerView:function(g,f){if(f){this.createNewFile();this.mGraphViewCtrl.graphView().setHidden(true);this.mAddBtnDisplayButton.setHidden(true)}var c=new MindStylePickerController(MindNode.DisplayStyle,g,f);var b=Math.min(960,screen_width()-20);c.setView(new UIView(new CGRect(0,0,b,450)));c.setDelegate(this);var d=g?LOCAL("Select a template to start"):LOCAL("Branch Styles");var e=f?LOCAL("Open File..."):LOCAL("Back");var a=new UIAlertView(d,null,e);if(f){a.setDelegate(this);a.setTag(110)}c.setDialog(a);a.setDetailView(c.view());a.show();if(f){this.mMindStyleDialog=a}},mindStyleDidSelect:function(a,d,c){if(c){MindNode.DisplayStyle=a;this.createNewFile()}else{if(d){if(isWebApp){MindNode.DisplayStyle=a;this.createNewFile()}else{var b="mindline_"+a;this.createWindow(b)}}else{this.updateMindStyle(a)}}},updateMindStyle:function(c){if(c!=MindNode.DisplayStyle){MindNode.DisplayStyle=c;var a=this;this.mGraphViewCtrls.forEach(function(e){if(e==a.mGraphViewCtrl){e.updateWithDisplayMode()}else{e.setPendingUpdateDisplayMode(true)}});if(!a.mGraphViewCtrl.textOutlineController()){if(displayStyleBasic(c)!=MindNode.Style.Default){var d=NSUserDefaults.standardUserDefaults();var b=d.objectForKey("hide_addbtn_tips2");if(!b){dialog.showMessageBoxV2(null,{type:"info",title:LOCAL("Tips"),message:LOCAL("Tap the end of branch to add sub-branch."),buttons:[LOCAL("OK"),LOCAL("Don't Remind Me")],defaultId:0,cancelId:0},function(e){if(e==1){d.setObjectForKey(true,"hide_addbtn_tips2");d.synchronize()}})}this.mAddBtnDisplayButton.setHidden(true)}else{this.mAddBtnDisplayButton.setHidden(false)}}}},handleUndoStatusDidChange:function(a){this.createApplicationMenu()},changeFontSize:function(b){AppSettings.defaultSettings().setFontSize(b);var a=this;this.mGraphViewCtrls.forEach(function(c){if(c==a.mGraphViewCtrl){c.updateFontSize()}else{c.setPendingUpdateFontSize(true)}});this.createApplicationMenu()},createWindow:function(n){if(main.createWindow){main.createWindow(n)}else{main.setPendingOpenFile(n);var h=app.getVersion();var f=new BrowserWindow({show:false,width:1280,height:960,webPreferences:{nodeIntegration:true}});this.mWindows.push(f);var j="index.html";var b=app.getPath("userData")+pathSeparator()+"Main";var k=b+pathSeparator()+"app.json";if(fs.existsSync(k)){try{var d=fs.readFileSync(k);var i=JSON.parse(d);if(floatValue(i.version)>floatValue(h)){if(i.disable!="1"){var c=i.main?i.main:"index.html";var a=b+pathSeparator()+c;if(fs.existsSync(a)){j=a;h=i.version}}}}catch(g){}}f.loadFile(j);var l=this;f.once("ready-to-show",function(){f.show()});f.on("closed",function(){var e=l.mWindows.indexOf(f);if(e!=-1){l.mWindows.splice(e,1)}});f.on("blur",function(){f.webContents.send("windowOnBlur")});f.on("focus",function(){f.webContents.send("windowOnFocus")})}},loadFileFromQiniu:function(b){var c=new HttpRequest("getQiniuFile",{key:b});var a=this;HttpAjax.sendRequest(c,function(f,g){if(f=="success"){try{var n=JSON.parse(g);var d=n.style?n.style:-1;if(d==-1){var k=NSUserDefaults.standardUserDefaults();var m=k.objectForKey("displayStyle");d=m?m:MindNode.Style.Default;if(d==3){d==MindNode.Style.WireFrameAll}}if(d==0||d==1||d==2){d=MindNode.Style.Default}else{if(d==3){d=MindNode.Style.WireFrameLine}else{if(d==4){d=MindNode.Style.WireFrameLine2}else{if(d==5){d=MindNode.Style.WireFrameVertical}else{if(d==6){d=MindNode.Style.WireFrameBracket}else{if(d==7){d=MindNode.Style.WireFrameAll}}}}}}MindNode.DisplayStyle=d;var h=new NSKeyedUnarchiver(n);var l=h.decodeObjectForKey("root");if(l){a.createNewFile(l);return}}catch(i){}var j=new UIAlertView(LOCAL("Tips"),LOCAL("Couldn't open the file."),LOCAL("OK"));j.show()}else{var j=new UIAlertView(LOCAL("Tips"),LOCAL("The file doesn't exist."),LOCAL("OK"));j.show();a.showMindStylePickerView(true,true)}})},showOpenAppBanner:function(f){var e=navigator.userAgent.toLowerCase();if(e.indexOf("iphone")!=-1||e.indexOf("ipad")!=-1||e.indexOf("android")!=-1){var a=new UIView(new CGRect(0,this.view().height()-50,this.view().width(),50));a.setBackgroundColor(UIColor.systemThemeColor);this.view().addSubview(a);var d=new UIButton(new CGRect(0,0,a.width()/2,a.height()));d.setTitleColor("white",UIControl.State.Normal);d.setTitle(LOCAL("Download App"),UIControl.State.Normal);d.titleLabel().setFontSize("15px");var b=this;d.addTarget(function(i){if(e.indexOf("android")!=-1){window.location="http://www.mindline.cn"}else{window.location="https://itunes.apple.com/cn/app/apple-store/id1025462912?pt=837045&ct=webapp&mt=8"}},UIControl.Events.TouchUpInside);a.addSubview(d);var g=new UIButton(new CGRect(a.width()/2,0,a.width()/2,a.height()));g.setTitleColor("white",UIControl.State.Normal);g.setTitle(LOCAL("Open in App"),UIControl.State.Normal);g.titleLabel().setFontSize("15px");var b=this;g.addTarget(function(i){if(e.match(/MicroMessenger/i)=="micromessenger"){alert("请点击页面右上角按钮，选择在浏览器中打开。")}else{window.location="mindline://webapp?file="+f}},UIControl.Events.TouchUpInside);a.addSubview(g);var c=new UIView(new CGRect(a.width()/2,10,1,a.height()-20));c.setBackgroundColor("white");c.setAlpha(0.5);a.addSubview(c);var h=new UIButton(new CGRect(0,0,20,20));h.setImage(new UIImage("res/close.png",12,12),UIControl.State.Normal);h.setBackgroundColor("rgba(0,0,0,0.7)");h.addTarget(function(i){a.removeFromSuperview();b.mAppBanner=nil},UIControl.Events.TouchUpInside);a.addSubview(h);this.mAppBanner=a}}});GraphFileViewController=defineClass({superClass:UIViewController,init:function(d,a,b,c){this.mNode=d;this.mRootViewController=a;this.mGraphViewID=b;this.mContentOffset=c},viewDidLoad:function(){UIViewController.prototype.viewDidLoad.call(this);this.mToolbar=new Toolbar(new CGRect(0,0,this.view().width(),64));this.mToolbar.setAutoresizingMask(UIView.Autoresizing.FlexibleWidth);this.mToolbar.setDelegate(this);var b=NSUserDefaults.standardUserDefaults();if(b.objectForKey("hideToolbar")||isSmallSizeScreen()){this.mScrollView=new UIScrollView(this.view().bounds())}else{this.view().addSubview(this.mToolbar);this.mScrollView=new UIScrollView(new CGRect(0,this.mToolbar.height(),this.view().width(),this.view().height()-this.mToolbar.height()))}this.mScrollView.setAutoresizingMask(UIView.Autoresizing.FlexibleSize);this.mScrollView.setDelegate(this);this.view().addSubview(this.mScrollView);this.mGraphView=new NodeGraphView(this.mScrollView.bounds());this.mGraphView.setDelegate(this);this.mScrollView.addSubview(this.mGraphView);this.mGraphView.setScrollView(this.mScrollView);NSNotificationCenter.defaultCenter().addObserver(this,this.handleUserLoginStatusChange,UserHasLoginNotification);NSNotificationCenter.defaultCenter().addObserver(this,this.handleUserLoginStatusChange,UserHasLogoutNotification);var a=UserSessionManager.defaultManager().account();if(a&&a.isProVersionValid()){this.mToolbar.setVipEnabled(false)}else{this.mToolbar.setVipEnabled(true)}this.initRichTextToolbar();this.mGraphView.setRootNode(this.mNode);this.updateWithDisplayNight();this.mTextEmptyCnt=0},viewDidAppear:function(){var c,a;if(this.mContentOffset){c=this.mContentOffset.x;a=this.mContentOffset.y}else{var d=this.mGraphView.rootNode().textView();c=d.center().x-this.mScrollView.width()/2;a=d.center().y-this.mScrollView.height()/2+this.mGraphView.rootNode().minTextHeight()}if(c<0){c=0}else{if(c>this.mGraphView.width()-this.mScrollView.width()){c=this.mGraphView.width()-this.mScrollView.width()}}if(a<0){a=0}else{if(a>this.mGraphView.height()-this.mScrollView.height()){a=this.mGraphView.height()-this.mScrollView.height()}}var b=this;setTimeout(function(){b.mScrollView.setContentOffset(new CGPoint(c,a))},10);if(this.mPendingFitTextSize){this.mNode.traverseFitTextSize();this.mGraphView.layoutNodeTree(null,false,true);this.mPendingFitTextSize=false}if(this.mPendingUpdateFontSize){this.updateFontSize()}if(this.mPendingUpdateDisplayMode){this.updateWithDisplayMode();this.mPendingUpdateDisplayMode=false}},viewDidDisappear:function(){this.mContentOffset=this.mScrollView.contentOffset()},contentOffset:function(){if(this.mScrollView){return this.mScrollView.contentOffset()}else{return this.mContentOffset}},rootNode:function(){return this.mNode},graphView:function(){return this.mGraphView},graphViewID:function(){return this.mGraphViewID},toolbar:function(){return this.mToolbar},scrollView:function(){return this.mScrollView},textOutlineController:function(){return this.mTextOutlineController},handleUserLoginStatusChange:function(b){var a=UserSessionManager.defaultManager().account();if(a&&a.isProVersionValid()){this.mToolbar.setVipEnabled(false)}else{this.mToolbar.setVipEnabled(true)}},reloadOnFocus:function(){if(this.mToolbar){var b=UserSessionManager.defaultManager().account();if(b&&b.isProVersionValid()){this.mToolbar.setVipEnabled(false)}else{this.mToolbar.setVipEnabled(true)}}if(main.getSharedData){var a=main.getSharedData("copyNode");if(!a){if(this.mGraphView){this.mGraphView.dismissSelectionView()}}}},onImageDidSelect:function(c,a){var b=this.mGraphView.activeNode();if(b){this.mGraphView.showImageAtNode(b,c,a)}},onToolbarItemClick:function(b,a){switch(a){case ToolbarItem.Move:this.mGraphView.onMenuItemCut(b);break;case ToolbarItem.Copy:this.mGraphView.onMenuItemCopy(b);break;case ToolbarItem.Delete:this.mGraphView.onMenuItemDelete(b);break;case ToolbarItem.Image:this.mGraphView.onMenuItemImage(b);break;case ToolbarItem.Remark:this.mGraphView.onMenuItemRemark(b);break;case ToolbarItem.Color:this.mGraphView.onMenuItemColor(b);break;case ToolbarItem.Shrink:this.mGraphView.onMenuItemExpand(b);break;case ToolbarItem.Mark:this.mGraphView.onMenuItemMark(b);break;case ToolbarItem.Link:this.mGraphView.onMenuItemLink(b);break;case ToolbarItem.Summary:this.mGraphView.onMenuItemSummary(b);break;case ToolbarItem.URL:this.mGraphView.onMenuItemURL(b);break;case ToolbarItem.Latex:this.mGraphView.onMenuItemLatex(b);break;case ToolbarItem.TextOutline:this.showTextOutlineEditView();break;case ToolbarItem.CloudSync:this.mRootViewController.onMenuItemCloudSync();break;case ToolbarItem.File:this.mGraphView.onMenuItemFile(b);break}this.mToolbar.setNode(b)},onMenuItemCloudSync:function(){this.mRootViewController.onMenuItemCloudSync()},onWindowResize:function(){UIViewController.prototype.onWindowResize.call(this);if(this.mGraphView){var a=this.mGraphView.frame();a.size=this.mGraphView.sizeThatFits();this.mGraphView.setFrame(a)}},updateWithDisplayNight:function(){if(this.isViewLoad()){var b=NSUserDefaults.standardUserDefaults();var a=b.objectForKey("nightDisplay");if(a){this.mScrollView.setBackgroundColor(AppSettings.CONTENT_BACKGROUND_COLOR_DARK)}else{this.mScrollView.setBackgroundColor(AppSettings.CONTENT_BACKGROUND_COLOR_LIGHT)}this.mGraphView.updateWithDisplayNight(a);this.mToolbar.updateWithDisplayNight(a);this.mRichTextToolbar.updateWithDisplayNight(a)}if(this.mTextOutlineController){this.mTextOutlineController.updateWithDisplayNight()}},mindNodeRemarkWillShow:function(e){var f=new RemarkViewController(e);var c=Math.min(600,this.view().window().width()-40);var a=Math.min(400,this.view().window().height()-40);f.view().setFrame(new CGRect(0,0,c,a));var d=e.isRemarkDisplay()?LOCAL("Hide on Branch"):LOCAL("Display on Branch");var b=new UIAlertView(LOCAL("Remark"),null,d,LOCAL("Delete"),LOCAL("Save"));b.setDetailView(f.view());b.setLeftButtonTitles([LOCAL("Back")]);b.setDelegate(this);b.setUserData(e);b.setTag(108);b.show()},mindNodeLatexWillShow:function(d){var e=new LatexViewController(d);var c=Math.min(600,this.view().window().width()-40);var a=Math.min(400,this.view().window().height()-40);e.view().setFrame(new CGRect(0,0,c,a));var b=new UIAlertView(LOCAL("LaTeX Formula"),null,LOCAL("Delete"),LOCAL("Save"));b.setDetailView(e.view());b.setLeftButtonTitles([LOCAL("Back")]);b.setDelegate(this);b.setUserData(d);b.setTag(109);b.show()},mindNodeURLWillAdd:function(b){var a=new UIAlertView(LOCAL("Add URL"),null,LOCAL("Cancel"),LOCAL("Confirm"));a.setAlertViewStyle(UIAlertView.Style.PlainTextInput);a.setDelegate(this);a.setTag(105);a.setUserData(b);a.show()},mindNodeFileWillAdd:function(b){var c=remote.getCurrentWindow();var a=this;dialog.showOpenDialogV2(c,{message:LOCAL("Please select a file to be added on the branch."),properties:["openFile"],buttonLabel:LOCAL("Select")},function(g){if(g&&g.length>0){var f=g[0];if(isMasVersion()){var h=app.getPath("userData")+pathSeparator()+"Attachments";fs.mkdirSync(h,{recursive:true});var e=f.substr(f.lastIndexOf(pathSeparator())+1);var d=h+pathSeparator()+e;fs.copyFile(f,d,function(){});b.setFileName(e)}else{b.setFileName(f)}a.mGraphView.undoManager().pushUndoNode(b,UndoType.kUndoAddFile)}})},mindNodeColorPickerWillShow:function(c){var d=new ColorPickerController(c);var b=Math.min(450,screen_width()-20);d.setView(new UIView(new CGRect(0,0,b,300)));d.setSelectedColorHex(c.lineColorHex());d.setDelegate(this);var a=new UIAlertView(LOCAL("Color"),null,LOCAL("Back"));a.setDetailView(d.view());a.show();this.mDialog=a},colorPickerViewDidSelectColor:function(c){var b=c.node();this.mGraphView.undoManager().pushUndoNode(b,UndoType.kUndoColor);var a=c.selectedColorHex();b.setLineColorHex(a);this.mGraphView.setNeedsDisplay();this.mDialog.dismiss()},mindNodeMarkPickerWillShow:function(c){var d=new MarkViewController(c);var b=Math.min(450,screen_width()-20);d.setView(new UIView(new CGRect(0,0,b,300)));var a=new UIAlertView(LOCAL("Mark"),null,LOCAL("Back"));a.setDetailView(d.view());a.show();d.setDelegate(a)},mindNodeStylePickerWillShow:function(a){this.mRootViewController.showMindStylePickerView(false)},switchExpandingLeft:function(){var a=this.mGraphView.rootNode();if(this.mTextOutlineController){this.mTextOutlineController.onMenuItemLeftExpand(a)}else{this.mGraphView.onMenuItemLeftExpand(a)}},showTextOutlineEditView:function(){if(this.mTextOutlineController){this.mTextOutlineController.view().removeFromSuperview();this.mTextOutlineController.removeFromParentViewController();this.mTextOutlineController=null;this.mToolbar.setDelegate(this);this.mToolbar.setTextOutlineEnabled(false);this.mRootViewController.setAddBtnDisplayButtonVisible(true)}else{var a=new TextOutlineViewController(this.mGraphView,this.mToolbar);a.view().setFrame(this.mScrollView.frame());a.view().setAutoresizingMask(UIView.Autoresizing.FlexibleSize);this.view().addSubview(a.view());this.addChildViewController(a);this.mToolbar.setDelegate(a);this.mTextOutlineController=a;this.mToolbar.setTextOutlineEnabled(true);this.mRootViewController.setAddBtnDisplayButtonVisible(false)}},pageActualSize:function(){this.mGraphView.setScale(1);this.createApplicationMenu()},pageZoomIn:function(){var a=Math.min(this.mGraphView.scale()+0.1,2);if(a!=this.mGraphView.scale()){this.mGraphView.setScale(a);this.createApplicationMenu()}},pageZoomOut:function(){var a=Math.max(this.mGraphView.scale()-0.1,0.1);if(a!=this.mGraphView.scale()){this.mGraphView.setScale(a);this.createApplicationMenu()}},shortcutToAddBranch:function(){var c;var b=this.mTextOutlineController?this.mTextOutlineController.activeView():null;if(b){c=b.node()}if(!c){c=this.mGraphView.activeNode()}if(c){var a=c.parent();if(a){var d=this.mGraphView.addBranch(a,c);if(b){this.mTextOutlineController.addBranch(b,d)}}else{this.shortcutToAddBranch2()}}},shortcutToAddBranch2:function(a){var b;if(!a){a=this.mTextOutlineController?this.mTextOutlineController.activeView():null}if(a){b=a.node()}if(!b){b=this.mGraphView.activeNode()}if(b){if(b.isShrink()){b.setShrink(false);this.mGraphView.layoutNodeTree(b,true);if(a){a.build()}}var c=this.mGraphView.addBranch(b);if(a){this.mTextOutlineController.addBranch2(a,c)}}},shortcutToInsertBranch:function(){var b;var a=this.mTextOutlineController?this.mTextOutlineController.activeView():null;if(a){b=a.node()}if(!b){b=this.mGraphView.activeNode()}if(b){if(b.isShrink()){b.setShrink(false);this.mGraphView.layoutNodeTree(b,true);if(a){a.build()}}var c=this.mGraphView.insertBranch(b);if(a){this.mTextOutlineController.insertBranch(a,c)}}},shortcutToReturnText:function(){var c;var b=this.mTextOutlineController?this.mTextOutlineController.activeView():null;if(b){c=b.node()}if(!c){c=this.mGraphView.activeNode()}if(c){if(b){var f=b.textView().layer()[0].selectionStart;var a=b.textView().layer()[0].selectionEnd;var d=b.text();var e=d.substr(0,f)+"\n"+d.substr(a);b.setText(e);b.textViewDidChange();b.textView().layer()[0].setSelectionRange(f+1,f+1)}else{var f=c.textView().layer()[0].selectionStart;var a=c.textView().layer()[0].selectionEnd;var d=c.text();var e=d.substr(0,f)+"\n"+d.substr(a);c.setText(e);c.textViewDidChange();c.textView().layer()[0].setSelectionRange(f+1,f+1)}}},shortcutToDeleteNode:function(){var b;var a=this.mTextOutlineController?this.mTextOutlineController.activeView():null;if(a){b=a.node()}if(!b){b=this.mGraphView.activeNode()}if(b){if(this.mTextOutlineController){this.mTextOutlineController.onMenuItemDelete(b)}else{this.mGraphView.onMenuItemDelete(b)}}},isDisplayToolbar:function(){return this.mToolbar.superview()!=null},displayToolbar:function(b){if(b){this.mToolbar.setSize(new CGSize(this.view().width(),this.mToolbar.height()));this.view().addSubview(this.mToolbar);var a=this.mScrollView.frame();a.origin.y+=this.mToolbar.height();a.size.height-=this.mToolbar.height();this.mScrollView.setFrame(a)}else{this.mToolbar.removeFromSuperview();var a=this.mScrollView.frame();a.origin.y-=this.mToolbar.height();a.size.height+=this.mToolbar.height();this.mScrollView.setFrame(a)}},alertViewClickedButtonAtIndex:function(b,e){var a=b.tag();if(a==105){if(e==1){var f=b.userData();if(f!=null){var d=b.textFieldAtIndex(0).text();if(d.length==0){return}if(d.indexOf("http://")!=0&&d.indexOf("https://")!=0){d="http://"+d}f.setURL(d);this.mGraphView.undoManager().pushUndoNode(f,UndoType.kUndoAddURL)}}}else{if(a==108){var f=b.userData();if(f!=null){if(e==1){if(f.remark()){this.mGraphView.undoManager().pushUndoNode(f,UndoType.kUndoDeleteRemark)}f.setRemark(null)}else{if(e==0||e==2){var h=b.detailView().viewWithTag(100).text();if(f.remark()){if(h.length==0){this.mGraphView.undoManager().pushUndoNode(f,UndoType.kUndoDeleteRemark)}f.setRemark(h.length>0?h:null)}else{f.setRemark(h.length>0?h:null);if(h.length>0){this.mGraphView.undoManager().pushUndoNode(f,UndoType.kUndoAddRemark)}}if(e==0){var g=!f.isRemarkDisplay();f.setRemarkDisplay(g)}}}}}else{if(a==109){var f=b.userData();if(f!=null){if(e==0){if(f.latex()){this.mGraphView.undoManager().pushUndoNode(f,UndoType.kUndoDeleteLatex)}f.setLatex(null)}else{if(e==1){var h=b.detailView().viewWithTag(100).text().trim();if(h.length>0){var c=f.latex();f.setLatex(h);if(!c){this.mGraphView.undoManager().pushUndoNode(f,UndoType.kUndoAddLatex)}}else{if(f.latex()){this.mGraphView.undoManager().pushUndoNode(f,UndoType.kUndoDeleteLatex)}f.setLatex(null)}}}}}}}},createApplicationMenu:function(){this.mRootViewController.createApplicationMenu()},scrollViewDidScroll:function(a){UIMenuController.sharedMenuController().setMenuVisible(false)},mindNodeTextViewDidBeginEditing:function(b){var a=this;setTimeout(function(){a.mRichTextToolbar.setHidden(false);a.mRichTextToolbar.layer().fadeIn("fast");a.mRichTextToolbar.setNode(b)},200);if(!this.mToolbar.isTextOutlineEnabled()){this.mToolbar.setNode(b)}this.clearRichTextToolbarFadeTimeout()},mindNodeTextViewDidEndEditing:function(b){this.createApplicationMenu();if(b==this.mNode){this.mRootViewController.updateCurrentTabTitle(this)}if(!this.mToolbar.isTextOutlineEnabled()){var a=this;setTimeout(function(){if(a.mToolbar.node()==b){a.mToolbar.setNode(null)}},200)}this.scheduleRichTextToolbarFadeTimeout()},mindNodeTextViewDidChange:function(a){},mindNodeTextViewDeleteKeyEnter:function(a){if(a.isEmpty()){this.shortcutToDeleteNode()}},updateWithDisplayMode:function(){if(this.mGraphView){this.mGraphView.updateWithDisplayMode()}},setPendingFitTextSize:function(a){this.mPendingFitTextSize=a},setPendingUpdateFontSize:function(a){this.mPendingUpdateFontSize=a},setPendingUpdateDisplayMode:function(a){this.mPendingUpdateDisplayMode=a},pageScale:function(){return this.mGraphView?this.mGraphView.scale():1},checkIfUserProValid:function(){return this.mRootViewController.checkIfUserProValid()},mindNodeWillNewTopic:function(){this.mRootViewController.buildNewTopic()},initRichTextToolbar:function(){this.mRichTextToolbar=new RichTextToolbar(new CGRect((this.view().width()-437)/2,this.view().height()-60,437,30));this.mRichTextToolbar.setAutoresizingMask(UIView.Autoresizing.FlexibleLeftMargin|UIView.Autoresizing.FlexibleRightMargin|UIView.Autoresizing.FlexibleTopMargin);this.mRichTextToolbar.setHidden(true);if(!isMobileDevice()){this.view().addSubview(this.mRichTextToolbar)}var a=this;this.mRichTextToolbar.layer().click(function(){a.clearRichTextToolbarFadeTimeout()});this.mGraphView.layer().click(function(){if(!a.mGraphView.activeNode()){a.mRichTextToolbar.layer().fadeOut("fast")}});this.mToolbar.layer().click(function(){if(!a.mGraphView.activeNode()){a.mRichTextToolbar.layer().fadeOut("fast")}if(a.mTextOutlineController){a.mTextOutlineController.toolbarDidClick()}})},clearRichTextToolbarFadeTimeout:function(){if(this.mRichTextToolbarFadeTimeout){clearTimeout(this.mRichTextToolbarFadeTimeout);this.mRichTextToolbarFadeTimeout=null}},scheduleRichTextToolbarFadeTimeout:function(){var a=this;this.mRichTextToolbarFadeTimeout=setTimeout(function(){a.mRichTextToolbar.layer().fadeOut("fast")},200)},updateFontSize:function(){this.mNode.traverseUpdateFontSize();this.mGraphView.layoutNodeTree(null,false,true);this.mPendingUpdateFontSize=false;if(this.mTextOutlineController){this.mTextOutlineController.updateFontSize()}}});NodeLinkPath=defineClass({init:function(c,a,d,b){this.mNode=c;this.mToNodeID=a;this.mCtrlPoint=b;this.setText(d)},initWithCoder:function(a){this.mToNodeID=a.decodeObjectForKey("ID");this.mCtrlPoint=a.decodeObjectForKey("ctrlPoint");this.mColor=a.decodeObjectForKey("color");var b=a.decodeObjectForKey("text");this.setText(b)},encodeWithCoder:function(a){a.encodeObjectForKey(this.mToNodeID,"ID");a.encodeObjectForKey(this.mCtrlPoint,"ctrlPoint");a.encodeObjectForKey(this.mText,"text");a.encodeObjectForKey(this.mColor,"color")},node:function(){return this.mNode},setNode:function(a){this.mNode=a},toNodeID:function(){return this.mToNodeID},ctrlPoint:function(){return this.mCtrlPoint?this.mCtrlPoint:new CGPoint()},setCtrlPoint:function(a){this.mCtrlPoint=a},ctrlPointBase:function(){return this.mCtrlPointBase?this.mCtrlPointBase:new CGPoint()},setCtrlPointBase:function(a){this.mCtrlPointBase=a},textView:function(){return this.mTextView},setText:function(c){this.mText=c;if(!this.mTextView){var b=new UILabel(new CGRect(0,0,MindNode.MIN_TEXT_LEN,MindNode.MIN_TEXT_HEIGHT));b.setNumberOfLines(0);b.setFontSize("15px");b.setLineHeight("20px");b.setTextAlignment("left");b.setTextColor(this.colorOnDraw(MindNode.DisplayDark));this.mTextView=b}this.mTextView.setText(c);var a=this.mTextView.sizeThatFits(new CGSize(305,Number.MAX_VALUE));this.mTextView.setSize(new CGSize(a.width,a.height))},text:function(){return this.mText},setPoints:function(a){this.mPoints=a},points:function(){return this.mPoints},setColor:function(a){this.mColor=a},color:function(){return this.mColor},colorOnDraw:function(a){if(this.mColor=="gray"){return a?"#F1F1F1":"#666666"}else{return this.mColor?this.mColor:"red"}}});NodeSelectionView=defineClass({superClass:UIView,init:function(d,b,a,c){UIView.call(this,d);this.mType=b;this.mColor=a?a:"rgba(0,122,255,0.5)";this.mStroke=c},node:function(){return this.mNode},setNode:function(a){this.mNode=a},type:function(){return this.mType},drawRect:function(a){if(this.mStroke){a.strokeStyle=this.mColor;a.lineWidth=2;a.strokeRect(1,1,this.width()-2,this.height()-2)}else{a.fillStyle=this.mColor;a.fillRect(0,0,this.width(),this.height())}},statics:{TYPE_COPY:0,TYPE_CUT:1,TYPE_LINK:2,TYPE_SUMMARY:3,TYPE_SUMMARY_ADJUST:4}});FreeMindExporter=defineClass({exportMindNode:function(b){try{var a=$($(b).find("node")[0]);return this.convertNodeElement(a,null)}catch(c){}return null},convertNodeElement:function(g,j){var d=new MindNode();if(j==null){d.setRoot(true)}d.textView().setText(g.attr("TEXT"));var a=d.textViewFitSize();d.setTextViewFrame(new CGRect(0,0,a.width,a.height));var h=g.attr("POSITION");if(j!=null){var e=null;var f=g.find("edge");if(f.length>0){var c=$(f[0]);e=c.attr("COLOR")}if(e!=null&&e[0]=="#"){d.setLineColorHex(e)}else{}if(h=="left"&&(j!=null&&j.isRoot())){j.setExpandLeftEnable(true);j.addNode2(d)}else{j.addNode(d)}}var b=g.children();var k=this;b.each(function(){if(this.tagName=="NODE"||this.tagName=="node"){k.convertNodeElement($(this),d)}});var i=g.attr("FOLDED");if(i=="true"){if(d.children().length>0){d.setShrink(true)}}return d},exportFreeMind:function(b){var a="";a+='<map version="1.0.1">';a+=this.convertMindNode(b);a+="</map>";return a},convertMindNode:function(f,a){var c="<node";c+=' TEXT="'+this.html2Escape(f.textView().text())+'"';if(f.isShrink()){c+=' FOLDED="true"'}else{c+=' FOLDED="false"'}if(a){c+=' POSITION="'+a+'"'}c+=">";var e='<edge COLOR="'+f.lineColorHex()+'"/>';c+=e;if(f.mImageName&&f.mImageSize){var d=f.mImageName;var h;if(d.indexOf("http://")==0||d.indexOf("https://")==0){h=d}else{h="http://mindline-image.qiniu.mindline.cn/"+d}var g='<richcontent TYPE="NODE"><html><img width="'+f.mImageSize.width+'" height="'+f.mImageSize.height+'" src="'+h+'" /></html></richcontent>';c+=g}if(f.hasShrinkChildrenData()){f.traverseExpnadChildrenForExport()}var b=this;f.children().forEach(function(j){var i=b.convertMindNode(j,"right");c+=i});f.children2().forEach(function(j){var i=b.convertMindNode(j,"left");c+=i});c+="</node>";return c},html2Escape:function(a){return a.replace(/[<>&"]/g,function(b){return{"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;"}[b]})}});XMindExporter=defineClass({exportMindNode:function(c){try{var b=$($(c).find("sheet")[0]);var a=$($(c).find("topic")[0]);return this.convertNodeElement(a,null)}catch(d){main.log("parse xmind error: ",d)}return null},convertNodeElement:function(f,i){var e=new MindNode();if(i==null){e.setRoot(true)}var h=$($(f).find("title")[0]);if(h){e.textView().setText(h.text())}var a=e.textViewFitSize();e.setTextViewFrame(new CGRect(0,0,a.width,a.height));if(i!=null){i.addNode(e)}var c=$($(f).find("children")[0]);if(c){var b=$($(c).find("topics")[0]);if(b){var d=b.children();var j=this;d.each(function(){if(this.tagName=="topic"||this.tagName=="TOPIC"){j.convertNodeElement($(this),e)}})}}var g=f.attr("branch");if(g=="folded"){if(e.children().length>0){e.setShrink(true)}}return e},exportXMind:function(b){var a='<?xml version="1.0"?>';a+='<xmap-content xmlns="urn:xmind:xmap:xmlns:content:2.0" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:svg="http://www.w3.org/2000/svg" xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns:xlink="http://www.w3.org/1999/xlink" version="2.0">';a+="<sheet>";a+=this.convertMindNode(b);a+="</sheet>";a+="</xmap-content>";return a},convertMindNode:function(d){var b="<topic";if(d.isShrink()){b+=' branch="folded"'}b+=">";var h="<title>"+this.html2Escape(d.textView().text())+"</title>";b+=h;if(d.mImageName&&d.mImageSize){var c=d.mImageName;var g;if(c.indexOf("http://")==0||c.indexOf("https://")==0){g=c}else{g="http://mindline-image.qiniu.mindline.cn/"+c}var e='<xhtml:img svg:width="'+d.mImageSize.width+'" svg:height="'+d.mImageSize.height+'" xhtml:src="'+g+'" />';b+=e}if(d.remark()){var f="<notes><plain>"+d.remark()+"</plain></notes>";b+=f}if(d.hasShrinkChildrenData()){d.traverseExpnadChildrenForExport()}if(d.children().length>0||d.children2().length>0){b+="<children>";b+='<topics type="attached">';var a=this;d.children().forEach(function(j){var i=a.convertMindNode(j);b+=i});d.children2().forEach(function(j){var i=a.convertMindNode(j);b+=i});b+="</topics>";b+="</children>"}b+="</topic>";return b},html2Escape:function(a){return a.replace(/[<>&"]/g,function(b){return{"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;"}[b]})}});MindFile=defineClass({init:function(c,b,a){this.mName=c;this.mIsDir=b;this.mIsLocal=a;this.mSubFiles=[]},name:function(){return this.mName},setName:function(a){this.mName=a},path:function(){var a=this.mName;if(this.mParent){a=this.mParent.path()+pathSeparator()+a}return a},isDir:function(){return this.mIsDir},subfiles:function(){},addFile:function(a){a.mParent=this;this.mSubFiles.push(a)},parent:function(){return this.mParent},subfiles:function(){return this.mSubFiles.slice()},isLocal:function(){return this.mIsLocal},setData:function(a){this.mData=a},data:function(){return this.mData}});LoginViewController=defineClass({superClass:UIViewController,init:function(a){UIViewController.call(this);this.mModal=a},viewDidLoad:function(){UIViewController.prototype.viewDidLoad.call(this);if(!this.mFirstAppear){this.mFirstAppear=true;this.setTitle(LOCAL("Cloud Sync"));var d=NSUserDefaults.standardUserDefaults();var g=d.objectForKey("nightDisplay");var h=this.view();var e=h.width()-20;var i=new UITextField(new CGRect((h.width()-e)/2,20,e-12,30));i.setAutoresizingMask(UIView.Autoresizing.FlexibleLeftMargin|UIView.Autoresizing.FlexibleRightMargin);i.setPlaceholder(LOCAL("Email or Tele"));i.setBackgroundColor(g?"#393939":"white");i.setTextColor(g?"white":"black");h.addSubview(i);this.mTeleTextfield=i;var l=new UITextField(new CGRect((h.width()-e)/2,70,e-12,30));l.setAutoresizingMask(UIView.Autoresizing.FlexibleLeftMargin|UIView.Autoresizing.FlexibleRightMargin);l.setPlaceholder(LOCAL("Password or VCode"));l.setSecureTextEntry(true);l.setBackgroundColor(g?"#393939":"white");l.setTextColor(g?"white":"black");h.addSubview(l);this.mVerifyTextfield=l;var j=new VerifyCodeButton(new CGRect(l.right()-50,74,50,30));j.setAutoresizingMask(UIView.Autoresizing.FlexibleLeftMargin|UIView.Autoresizing.FlexibleRightMargin);j.setTitle(LOCAL("Get It"),UIControl.State.Normal);j.setTitleColor(UIColor.systemThemeColor,UIControl.State.Normal);j.titleLabel().setFontSize(13);h.addSubview(j);var k=this;j.addTarget(function(){k.onVerifyBtnClick()},UIControl.Events.TouchUpInside);this.mVerifyButton=j;var f=new UIButton(new CGRect(h.width()/2-75,j.bottom()+20,150,40));f.setAutoresizingMask(UIView.Autoresizing.FlexibleLeftMargin|UIView.Autoresizing.FlexibleRightMargin);f.setBackgroundColor(UIColor.systemThemeColor);f.setTitle(LOCAL("Sign In"),UIControl.State.Normal);f.setTitleColor("white",UIControl.State.Normal);f.layer().css("border-radius","5px");f.addTarget(function(){k.onLoginBtnClick()},UIControl.Events.TouchUpInside);h.addSubview(f);var c=Math.min(400,h.width()-20);var b=new UILabel(new CGRect((h.width()-c)/2,f.bottom()+10,c,50));b.setAutoresizingMask(UIView.Autoresizing.FlexibleLeftMargin|UIView.Autoresizing.FlexibleRightMargin);b.setTextAlignment("center");b.setTextColor(UIColor.lightGrayColor);b.setFontSize(13);b.setLineHeight(1.3);if(isWebApp){b.setText(LOCAL("After signed in, you can open and save mind files in our cloud service."))}else{b.setText(LOCAL("After signed in, you can sync and download mind files with our cloud service."))}h.addSubview(b);if(this.mModal){var a=new UIBarButtonItem("返回",null,function(){k.dismissViewController(false)});this.navigationItem().setLeftBarButtonItems([a])}}},viewDidAppear:function(){UIViewController.prototype.viewDidAppear.call(this);this.mTeleTextfield.layer().focus()},onVerifyBtnClick:function(d){this.mPasswordReset=d;var a=this.mTeleTextfield.text();if(this.checkMobileNumValidity(a)){this.mVerifyButton.startTiming();var b=this;var c=UserSessionManager.defaultManager();c.getVerifyCode(a,d,function(f,g){if(f!=0){var e;if(f==1){e=LOCAL("You get the code too frequently, please try it later.")}else{if(f==2){e=LOCAL("You have set the password for this account, please sign in with your password.")}else{e=LOCAL("Network error: ")+f+" "+g}}var h=remote.getCurrentWindow();if(f==2){dialog.showMessageBoxV2(h,{type:"warning",title:LOCAL("Tips"),message:e,buttons:[LOCAL("Forget Password"),LOCAL("OK")]},function(i){if(i==0){dialog.showMessageBoxV2(h,{type:"info",title:LOCAL("Tips"),message:LOCAL("Sign in with the verification code, the password would be reset."),buttons:[LOCAL("Confirm"),LOCAL("Cancel")]},function(j){if(j==0){b.onVerifyBtnClick(true)}})}})}else{dialog.showMessageBox(h,{type:"warning",title:LOCAL("Tips"),message:e,buttons:[LOCAL("OK")]})}b.mVerifyButton.stopTiming()}})}},onLoginBtnClick:function(){var a=this.mTeleTextfield.text();var c=this.mVerifyTextfield.text();if(this.checkMobileNumValidity(a)&&this.checkVerifyCodeValidity(c)){this.showLoadingView();var b=this;setTimeout(function(){var d=UserSessionManager.defaultManager();d.login(a,c,b.mPasswordReset,function(f,h){if(f==0){if(b.mModal){b.mDelegate.dismiss();if(b.mHandler){var g=d.account();if(!g.isProVersionValid()){setTimeout(function(){b.mHandler.showUserAccount()},500)}else{b.mHandler.showPasswordDialogIfNeed()}}}else{b.navigationController().popViewController(false)}}else{var e;if(f==1){e=LOCAL("Please get the verification code.")}else{if(f==2){e=LOCAL("The verification code is wrong.")}else{if(f==3){e=LOCAL("The verification code is expired.")}else{if(f==4){e=LOCAL("The passoword is wrong.")}else{e=LOCAL("Network error: ")+f+" "+h}}}}var i=remote.getCurrentWindow();if(f==4){dialog.showMessageBoxV2(i,{type:"warning",title:LOCAL("Tips"),message:e,buttons:[LOCAL("Forget Password"),LOCAL("OK")]},function(j){if(j==0){dialog.showMessageBoxV2(i,{type:"info",title:LOCAL("Tips"),message:LOCAL("Sign in with the verification code, the password would be reset."),buttons:[LOCAL("Confirm"),LOCAL("Cancel")]},function(k){if(k==0){b.onVerifyBtnClick(true)}})}})}else{dialog.showMessageBox(i,{type:"warning",title:LOCAL("Tips"),message:e,buttons:[LOCAL("OK")]})}}b.dismissLoadingView()})},500)}},checkMobileNumValidity:function(a){if(!a||a.length==0){var d=remote.getCurrentWindow();dialog.showMessageBox(d,{type:"warning",title:LOCAL("Tips"),message:LOCAL("Please enter your email or mobile number."),buttons:[LOCAL("OK")]});return false}else{var b=/^1\d{10}$/;var c=/^[\w\.]+@[\w\.]+$/;if(!b.test(a)&&!c.test(a)){var d=remote.getCurrentWindow();dialog.showMessageBox(d,{type:"warning",title:LOCAL("Tips"),message:LOCAL("The format of your email or mobile number is wrong."),buttons:[LOCAL("OK")]});return false}}return true},checkVerifyCodeValidity:function(a){if(!a||a.length==0){var b=remote.getCurrentWindow();dialog.showMessageBox(b,{type:"warning",title:LOCAL("Tips"),message:LOCAL("Please enter the password or verification code."),buttons:[LOCAL("OK")]});return false}return true},showLoadingView:function(){this.dismissLoadingView();var a=this.view().window();this.mLoadingView=new LoadingView(a.bounds());this.mLoadingView.showInView(a)},dismissLoadingView:function(){if(this.mLoadingView){this.mLoadingView.dismiss();this.mLoadingView=null}},setDelegate:function(a){this.mDelegate=a},setHandler:function(a){this.mHandler=a}});VerifyCodeButton=defineClass({superClass:UIButton,init:function(a){UIButton.call(this,a)},startTiming:function(){this.mTimeInterval=60;this.setUserInteractionEnabled(false);var b=this.titleWithTimeInterval(this.mTimeInterval);this.setTitle(b,UIControl.State.Normal);this.setTitleColor(UIColor.lightGrayColor,UIControl.State.Normal);var a=this;this.mIntervalId=setInterval(function(){a.mTimeInterval-=1;if(a.mTimeInterval<=0){a.stopTiming()}else{var c=a.titleWithTimeInterval(a.mTimeInterval);a.setTitle(c,UIControl.State.Normal)}},1000)},stopTiming:function(){clearInterval(this.mIntervalId);this.mTimeInterval=0;this.setUserInteractionEnabled(true);this.setTitle(LOCAL("Get It"),UIControl.State.Normal);this.setTitleColor(UIColor.systemThemeColor,UIControl.State.Normal)},titleWithTimeInterval:function(a){return a+LOCAL("s Retry")}});RemarkViewController=defineClass({superClass:UIViewController,init:function(a){UIViewController.call(this);this.mNode=a},viewDidLoad:function(){UIViewController.prototype.viewDidLoad.call(this);this.setTitle("备注");var a=this;var d=new UIBarButtonItem("完成",null,function(){a.onRemarkFinish()});this.navigationItem().setLeftBarButtonItems([d]);var c=new UIBarButtonItem("删除",null,function(){a.onRemarkDelete()});this.navigationItem().setRightBarButtonItems([c]);var b=new UITextView(new CGRect(1,0,this.view().width()-6,this.view().height()-20));b.setAutoresizingMask(UIView.Autoresizing.FlexibleSize);b.setFontSize("18px");b.setText(this.mNode.remark());b.layer().css("border","0");b.setTag(100);var f=NSUserDefaults.standardUserDefaults();var e=f.objectForKey("nightDisplay");b.setBackgroundColor(e?"#393939":"white");b.setTextColor(e?"white":"black");this.view().addSubview(b);this.view().setBackgroundColor("transparent");this.mTextView=b;if(b.text().length==0){setTimeout(function(){b.becomeFirstResponder()},50)}},build:function(){},onRemarkFinish:function(){var a=this.mTextView.text();if(a==null||a==""){this.mNode.setRemark(null)}else{this.mNode.setRemark(a)}this.dismissViewController(false)},onRemarkDelete:function(){this.mNode.setRemark(null);this.dismissViewController(false)}});MindStylePickerController=defineClass({superClass:UIViewController,init:function(a,c,b){UIViewController.call(this);this.mStyle=c?-1:a;this.mSelectedIndex=-1;this.mStyleViews={};this.mCreated=c;this.mStartup=b},viewDidLoad:function(){UIViewController.prototype.viewDidLoad.call(this);var a=new UIScrollView(new CGRect(0,0,this.view().width(),this.view().height()-20));a.layer().addClass("scrollView");a.layer().css("scrollbar-width","auto");a.layer().css("-ms-overflow-style","auto");var A=NSUserDefaults.standardUserDefaults();var o=A.objectForKey("nightDisplay");if(o){a.layer().addClass("scrollViewDark")}this.view().addSubview(a);var q=20;var d=isSmallSizeScreen()?1:2;var v=(this.view().width()-q*(d+1))/d;var u=v/1.52;var l=[MindNode.Style.Default,MindNode.Style.WireFrameLine,MindNode.Style.WireFrameLine2,MindNode.Style.WireFrameAll,MindNode.Style.WireFrameVertical,MindNode.Style.WireFrameBracket];var r;if(this.mStyle!=-1){r=this.mStyle}else{var h=NSUserDefaults.standardUserDefaults().objectForKey("lastCreatedMindStyle");r=h?h:MindNode.Style.Default}var b=displayStyleBasic(r);l.remove(b);l.splice(0,0,b);this.mStyles=l;var n=q;var m=q;var t=this;var s=10;var z=(v-s)/2;var f=(u-s)/2;for(let i=0;i<l.length;i++){let style=l[i];var p=new UIView(new CGRect(n,m,v,u));var w=0;var c=0;for(let j=0;j<4;j++){var g=new UIImageView(new CGRect(w,c,z,f));g.layer().css("object-fit","contain");g.setBackgroundColor("white");var e;switch(style){case MindNode.Style.Default:e="style_default";break;case MindNode.Style.WireFrameLine:e="style_wireframeline1";break;case MindNode.Style.WireFrameLine2:e="style_wireframeline2";break;case MindNode.Style.WireFrameAll:e="style_wireframeall";break;case MindNode.Style.WireFrameVertical:e="style_wireframevertical";break;case MindNode.Style.WireFrameBracket:e="style_wireframebracket";break}g.setImage(new UIImage("res/styles/"+e+j+".jpg"));g.layer().css("border-style","solid");if(this.mStyle==style+j){this.mSelectedIndex=style+j;g.layer().css("border-width","2");g.layer().css("border-color","#007AFF")}else{if(process.platform=="darwin"){g.layer().css("border-width","1")}else{g.layer().css("border-width","1.5")}g.layer().css("border-color","#CCCCCC")}let k=j;g.layer().click(function(){t.styleDidSelectAtIndex(style+k)});p.addSubview(g);this.mStyleViews[style+j]=g;if((j+1)%2==0){w=0;c+=f+s}else{w+=z+s}}a.addSubview(p);if((i+1)%d==0){n=q;m+=u+q}else{n+=v+q}}},setDelegate:function(a){this.mDelegate=a},setGlobal:function(a){this.mGlobal=a},styleDidSelectAtIndex:function(c){if(!this.mDidSelect){this.mDidSelect=true;if(this.mSelectedIndex>=0){var e=this.mStyleViews[this.mSelectedIndex+""];e.layer().css("border-width","1");e.layer().css("border-color","#CCCCCC")}var b=this.mStyleViews[c];b.layer().css("border-width","2");b.layer().css("border-color","#007AFF");this.mSelectedIndex=c;if(this.mCreated){var d=NSUserDefaults.standardUserDefaults();d.setObjectForKey(c,"lastCreatedMindStyle");d.synchronize()}var a=this;setTimeout(function(){a.mDelegate.mindStyleDidSelect(a.mSelectedIndex,a.mCreated,a.mStartup);a.mDialog.dismiss()},500)}},setDialog:function(a){this.mDialog=a}});ColorPickerController=defineClass({superClass:UIViewController,init:function(a){UIViewController.call(this);this.mNode=a;this.mColorButtonTable={}},viewDidLoad:function(){UIViewController.prototype.viewDidLoad.call(this);this.mColorHexArray=["#DC306C","#BF58F5","#26BBFF","#37C45A","#1BD6E7","#FFC700","#B22222","#B3EE3A","#EEE8CD","#836FFF","#8B6914","#FF8C00"];var h=3;var b=(this.view().width()-h*5)/4;var f=(this.view().height()-h*4-10)/3;var j=this;for(var d=0;d<this.mColorHexArray.length;d++){var k=parseInt(d/4);var a=d-k*4;var e=new UIButton(new CGRect(b*a+h*(a+1),f*k+h*(k+1),b,f));var c=this.mColorHexArray[d];e.setBackgroundColor(c);e.setUserData(c);this.view().addSubview(e);var g=new UIImageView(new CGRect(e.width()-23,e.height()-23,20,20));g.setImage(new UIImage("res/pic_selected.png",20,20));g.setTag(101);g.setHidden(true);e.addSubview(g);e.addTarget(function(i){var l=i.userData();if(l!=j.mSelectedColorHex){j.setSelectedColorHex(l)}else{j.setSelectedColorHex(null)}if(j.mDelegate!=null){j.mDelegate.colorPickerViewDidSelectColor(j)}},UIControl.Events.TouchUpInside);this.mColorButtonTable[c]=e}},setDelegate:function(a){this.mDelegate=a},setSelectedColorHex:function(a){var d=this.mSelectedColorHex;this.mSelectedColorHex=a;var c=this.mColorButtonTable[d];if(c!=null){var e=c.viewWithTag(101);e.setHidden(true)}var b=this.mColorButtonTable[a];if(b!=null){var e=b.viewWithTag(101);e.setHidden(false)}},selectedColorHex:function(){return this.mSelectedColorHex},node:function(){return this.mNode}});MarkViewController=defineClass({superClass:UIViewController,statics:{TAG_INFO_ARRAY:["tag_num_0","tag_num_1","tag_num_2","tag_num_3","tag_num_4","tag_num_5","tag_num_6","tag_num_7","tag_num_8","tag_num_9","tag_progress_0","tag_progress_1","tag_progress_2","tag_progress_3","tag_progress_4","tag_tick","tag_close","tag_remind","tag_warn","tag_bulb","tag_start","tag_love","tag_question","tag_ban","tag_flag_red","tag_flag_blue","tag_flag_yellow","tag_flag_green","tag_emoji_smile","tag_emoji_laugh","tag_emoji_worried","tag_emoji_angry","tag_emoji_cry","tag_emoji_surprised","tag_emoji_love","tag_emoji_dog"]},init:function(a){UIViewController.call(this);this.mNode=a},viewDidLoad:function(){UIViewController.prototype.viewDidLoad.call(this);this.setTitle("标记");var i=this;var b=new UIBarButtonItem("返回",null,function(){i.dismissViewController(false)});this.navigationItem().setRightBarButtonItems([b]);var g=[];var a=this.view().width()/6;var h=this.view().height()/6;var e=0;let index2=1000;var d=0;var c=0;var f=MarkViewController.TAG_INFO_ARRAY;f.forEach(function(j){let btn=new UIButton(new CGRect(d,c,a,h));btn.setImage(new UIImage("res/tags/"+j+".png",30,30),UIControl.State.Normal);btn.setTag(index2);btn.addTarget(function(k){var l=k.tag();i.mNode.setMarkType(l);if(i.mNode.delegate()){i.mNode.delegate().undoManager().pushUndoNode(i.mNode,UndoType.kUndoMark)}i.mDelegate.dismiss()},UIControl.Events.TouchUpInside);i.view().addSubview(btn);e+=1;index2+=1;if(e==6){d=0;c+=h;e=0}else{d+=a}})},setDelegate:function(a){this.mDelegate=a}});UserAccount=defineClass({init:function(b,e,a,c,d){this.name=b;this.sessionId=e;this.paid=a;this.purchasedDate=c;this.vipPeriod=d;this.syncCnt=0},isProVersionValid:function(){if(isMasVersion()){var d=NSUserDefaults.standardUserDefaults().objectForKey("paymentProductID");if(d){return true}}if(isWinStoreForReview()){return true}if(this.paid){if(this.purchasedDate>0){var c=new Date();c.setTime(this.purchasedDate*1000);var e=c.getFullYear();var f=c.getMonth()+1;var a=c.getDate();var g=(this.vipPeriod&&this.vipPeriod>0)?this.vipPeriod:12;f+=g;e+=parseInt(f/12);f=parseInt(f%12);if(f==0){f=12;e-=1}c.setFullYear(e,f-1,a);var b=new Date();return c.getTime()>b.getTime()}else{return true}}return false},sync:function(){var b={name:this.name,sessionId:this.sessionId,paid:this.paid,purchasedDate:this.purchasedDate,vipPeriod:this.vipPeriod,syncCnt:this.syncCnt};var a=NSUserDefaults.standardUserDefaults();a.setObjectForKey(b,"UserAccount");a.synchronize()},clear:function(){var a=NSUserDefaults.standardUserDefaults();a.removeObjectForKey("UserAccount");a.synchronize()},load:function(){var a=NSUserDefaults.standardUserDefaults();var b=a.objectForKey("UserAccount");if(b){this.name=b.name;this.sessionId=b.sessionId;this.paid=b.paid;this.purchasedDate=b.purchasedDate;this.vipPeriod=b.vipPeriod;this.syncCnt=b.syncCnt?b.syncCnt:0}return this.name&&this.sessionId},expiredDate:function(){if(this.paid&&this.vipPeriod!=1000&&this.purchasedDate>0){var b=new Date();b.setTime(this.purchasedDate*1000);var c=b.getFullYear();var d=b.getMonth()+1;var a=b.getDate();var e=(this.vipPeriod&&this.vipPeriod>0)?this.vipPeriod:12;d+=e;c+=parseInt(d/12);d=parseInt(d%12);if(d==0){d=12;c-=1}return c+"."+d+"."+a}return null}});UserHasLoginNotification="UserHasLoginNotification";UserHasLogoutNotification="UserHasLogoutNotification";CloudFilesDidUpdateNotification="CloudFilesDidUpdateNotification";UserSessionManager=defineClass({statics:{defaultManager:function(){if(!UserSessionManager.object){UserSessionManager.object=new UserSessionManager()}return UserSessionManager.object}},init:function(){this.reload()},reload:function(){var a=new UserAccount();this.mAccount=a.load()?a:null},syncUser:function(b){var c=new HttpRequest("userSync");var a=this;HttpAjax.sendRequest(c,function(f,h){var j=-1;if(f=="success"){var e=JSON.parse(h);j=e.rtn;if(j==0){var d=e.data.name;var m=e.data.paid;var l=e.data.purchasedDate;var k=e.data.vipPeriod;var g=false;if(d!=a.mAccount.name){a.mAccount.name=d;g=true}if(m!=a.mAccount.paid){a.mAccount.paid=m;g=true}if(l!=a.mAccount.purchasedDate){a.mAccount.purchasedDate=l;g=true}if(k!=a.mAccount.vipPeriod){a.mAccount.vipPeriod=k;g=true}if(g){a.mAccount.sync();NSNotificationCenter.defaultCenter().postNotificationName(UserHasLoginNotification)}var i=e.data.syncCnt;if(i!=a.mAccount.syncCnt){NSNotificationCenter.defaultCenter().postNotificationName(CloudFilesDidUpdateNotification)}}else{a.mAccount.clear();a.mAccount=null;NSNotificationCenter.defaultCenter().postNotificationName(UserHasLogoutNotification)}}if(b){b(j)}})},loadFiles:function(a){var b=new HttpRequest("loadFiles");HttpAjax.sendRequest(b,function(c,e){var d=-1;if(c=="success"){var f=JSON.parse(e);d=f.rtn}if(a){a(d)}})},listFiles:function(b,a){var c=new HttpRequest("listFiles",{dir:b.path()});HttpAjax.sendRequest(c,function(d,g){var e=-1;var f=[];if(d=="success"){var h=JSON.parse(g);e=h.rtn;if(e==0){var i=h.data.files;i.forEach(function(j){var l=j.indexOf(".mm")>=0?false:true;var k=new MindFile(j,l);b.addFile(k);f.push(k)})}}if(a){a(e,f)}})},getFile:function(c,a){var b=new HttpRequest("getFile",{path:encodeURIComponent(c)});HttpAjax.sendRequest(b,function(d,f){var e=-1;if(d=="success"){e=0}if(a){a(e,f)}})},saveFile:function(c,d,a){var b=new HttpRequest("saveFile",c,{path:encodeURIComponent(d),size:c.length},"POST");HttpAjax.sendRequest(b,function(e,g){var f=-1;if(e=="success"){var h=JSON.parse(g);f=h.rtn}if(a){a(f)}})},exportFile:function(c,d,a){var b=new HttpRequest("exportFile",c,{extension:d},"POST");HttpAjax.sendRequest(b,function(e,h){var g=-1;var f=null;if(e=="success"){var i=JSON.parse(h);g=i.rtn;if(g==0){f=i.data.url}}if(a){a(g,f)}})},getDownloadUrl:function(a){var b=new HttpRequest("getDownloadUrl");HttpAjax.sendRequest(b,function(c,f){var e=-1;var d=null;var h=0;if(c=="success"){var g=JSON.parse(f);e=g.rtn;if(e==0){d=g.data.downloadUrl;h=g.data.syncCnt}}if(a){a(e,d,h)}})},uploadToken:function(a){var b=new HttpRequest("uploadToken");HttpAjax.sendRequest(b,function(c,g){var d=-1;var f,e,i=null;if(c=="success"){var h=JSON.parse(g);d=h.rtn;if(d==0){f=h.data.key;e=h.data.token;i=h.data.syncCnt}}if(a){a(d,f,e,i)}})},uploadSync:function(c,a){var b=new HttpRequest("uploadSync",{syncCnt:c});HttpAjax.sendRequest(b,function(d,h){var e=-1;var g,f,j=null;if(d=="success"){var i=JSON.parse(h);e=i.rtn}if(a){a(e)}})},isLogin:function(){return this.mAccount!=null},account:function(){return this.mAccount},getVerifyCode:function(a,c,b){var e=c?1:0;var f=systemLanguage();var d=new HttpRequest("verifyCode",{telephone:a,passwordReset:e,lang:f});HttpAjax.sendRequest(d,function(g,i){var h=-1;if(g=="success"){var j=JSON.parse(i);h=j.rtn}if(b){b(h,i)}})},login:function(a,g,d,c){var f=d?1:0;var e=new HttpRequest("login",{telephone:a,vcode:g,passwordReset:f});var b=this;HttpAjax.sendRequest(e,function(h,k){var i=-1;if(h=="success"){var l=JSON.parse(k);i=l.rtn;if(i==0){var j=new UserAccount(a,l.data.session,l.data.paid,l.data.purchasedDate,l.data.vipPeriod);j.promptPassword=(l.data.password!=1);j.sync();b.mAccount=j;if(c){c(i,k)}NSNotificationCenter.defaultCenter().postNotificationName(UserHasLoginNotification);return}}if(c){c(i,k)}})},logout:function(){var a=new HttpRequest("logout");HttpAjax.sendRequest(a,function(b,c){});this.mAccount.clear();this.mAccount=null;NSNotificationCenter.defaultCenter().postNotificationName(UserHasLogoutNotification)},syncPaymentOrder:function(g,a,b){var e=idfaForDevice();var d=a?a:stringRandom(20);var c,h;if(g=="MacHalfYear"){c=25;h=3}else{if(g=="MacForeverV2"){c=128;h=1000}else{c=60;h=12}}var i=new Date().getTime()/1000;var j=this;var f=new HttpRequest("paySync",{mac:e,telephone:this.mAccount.name,price:c,vipPeriod:h,purchasedDate:i,tradeId:d,method:"mas"});HttpAjax.sendRequest(f,function(k,m){var l=-1;if(k=="success"){var n=JSON.parse(m);l=n.rtn;if(l==0){j.mAccount.paid=true;j.mAccount.vipPeriod=h;j.mAccount.purchasedDate=i;j.mAccount.sync()}}if(b){b(l)}})},setPassword:function(b,a){var c=new HttpRequest("setPassword",{password:b});HttpAjax.sendRequest(c,function(d,f){var e=-1;if(d=="success"){var g=JSON.parse(f);e=g.rtn}if(a){a(e)}})}});FileRevisionManager=defineClass({statics:{FS_MIRROR_FILE:".filesystem"},init:function(a){this.mDocPath=a},buildFileSystemMirrorImage:function(c){var d=this.loadFileSystemMirrorImage();if(!d){d={}}var b=this.fileSystemMirrorImageCurrentTime();var a=this.mergeFileSystemMirrorImage(d,b);if(c){this.saveFileSystemMirrorImage(a)}return a},fileSystemMirrorImageCurrentTime:function(){return this.fileSystemMirrorImageCurrentTimeAtPath(this.mDocPath)},fileSystemMirrorImageCurrentTimeAtPath:function(a){var b=this.recursiveListFiles(a);return{files:b}},loadFileSystemMirrorImage:function(){return this.loadFileSystemMirrorImageAtPath(this.mDocPath)},loadFileSystemMirrorImageAtPath:function(b){try{var f=b+pathSeparator()+FileRevisionManager.FS_MIRROR_FILE;var a=fs.readFileSync(f);var c=a.toString();return JSON.parse(c)}catch(d){}return null},saveFileSystemMirrorImage:function(c){var b=this.mDocPath+pathSeparator()+FileRevisionManager.FS_MIRROR_FILE;var a=JSON.stringify(c);fs.writeFileSync(b,a)},mergeFileSystemMirrorImage:function(f,d){var b=d.files?d.files.slice():[];var e={};if(d.files){d.files.forEach(function(g){e[g.path]=g.mtime})}var c=parseInt(new Date().getTime()/1000);if(f.files){var a=this;f.files.forEach(function(g){if(g.deleted){if(!e[g.path]){if(c-g.mtime<30*24*60*60){b.push(g)}}}else{if(!e[g.path]){if(!g.isdir||a.statDirectoryEnabled()){var h={path:g.path,mtime:c,deleted:1};b.push(h)}}}})}return{files:b}},mergeFilesAtPath:function(g,a){var h=this;var d=this.buildFileSystemMirrorImage();var j=this.loadFileSystemMirrorImageAtPath(g);var b=true;if(!j){j=this.fileSystemMirrorImageCurrentTimeAtPath(g);b=a}var c=j.files?j.files.slice():[];var f={};if(d.files){d.files.forEach(function(k){if(!k.deleted){f[k.path]=k}})}if(j.files){j.files.forEach(function(o){var t=f[o.path];if(o.deleted){if(t){if(o.mtime>=t.mtime){var l=h.mDocPath+pathSeparator()+o.path;if(fs.existsSync(l)){var p=fs.statSync(l);if(p.isDirectory()){deleteFolderRecursive(l)}else{fs.unlink(l,function(){})}}delete f[o.path]}else{c.remove(o)}}}else{var s=false;var r=false;if(t){r=true;if(o.mtime>t.mtime&&b){s=true}delete f[o.path]}else{s=true}if(s){var l=h.mDocPath+pathSeparator()+o.path;var k=g+pathSeparator()+o.path;if(fs.existsSync(k)){var p=fs.statSync(k);if(!p.isDirectory()){if(r){fs.unlinkSync(l)}else{var q=Math.max(l.lastIndexOf("/"),l.lastIndexOf("\\"));var n=l.substring(0,q);recursiveMakeDir(n,h.mDocPath)}fs.renameSync(k,l);var m=new Date();m.setTime(o.mtime*1000);fs.utimesSync(l,m,m)}else{if(!r){recursiveMakeDir(l,h.mDocPath)}}}else{if(!r){if(o.isdir){recursiveMakeDir(l,h.mDocPath)}else{c.remove(o)}}}}}})}for(var i in f){c.push(f[i])}var e={files:c};this.saveFileSystemMirrorImage(e)},recursiveListFiles:function(e,d){var c=[];var b=fs.readdirSync(e);var a=this;b.forEach(function(k){var j=e+"/"+k;var i=fs.statSync(j);var g=parseInt(i.mtimeMs/1000);var f=d?d:e;var l=j.substring(f.length+1);if(i.isDirectory()){if(a.statDirectoryEnabled()){c.push({path:l,mtime:g,isdir:1})}var h=a.recursiveListFiles(j,f);c=c.concat(h)}else{if(k.endsWith(".mm")){c.push({path:l,mtime:g})}}});return c},statDirectoryEnabled:function(){var a=NSUserDefaults.standardUserDefaults().objectForKey("documentPath");var b=app.getPath("documents")+pathSeparator()+"MindLine";return a==b}});HttpRequest=defineClass({init:function(a,c,d,e,b){this.mUrl=a;this.mData=c?c:{};this.mHeaders=d?d:{};this.mMethod=e?e:"GET";this.mIsFormData=b?b:false;this.setEssentialHeaders()},url:function(){if(isWebApp){return this.mUrl}else{if(this.mUrl.startsWith("http://")||this.mUrl.startsWith("https://")){return this.mUrl}else{return"http://mindline.cn/"+this.mUrl}}},data:function(){return this.mData},headers:function(){return this.mHeaders},method:function(){return this.mMethod},isFormData:function(){return this.mIsFormData},setEssentialHeaders:function(){var b=Date.parse(new Date())/1000;this.mHeaders.timestamp=b;this.mHeaders.vc=$.md5("webapp"+b+"!!!");this.mHeaders.os=2;var a=UserSessionManager.defaultManager().account();if(a){this.mHeaders.session=a.sessionId}}});HttpAjax=defineClass({statics:{sendRequest:function(b,a){var c={type:b.method(),url:b.url(),data:b.data(),cache:false,dataType:"html",beforeSend:function(f){var e=b.headers();if(e){for(var d in e){f.setRequestHeader(d,e[d])}}},success:function(e,d){if(a){a(d,e)}},error:function(f,d,g){if(a){a(d,g)}}};if(b.isFormData()){c.processData=false;c.contentType=false}$.ajax(c)}}});HtmlOutlineMaker=defineClass({buildHTMLString:function(a){var c=a.textView().text();var b='<div style="font-weight:bold">'+c+"</div><ul>"+this.getUnorderListTags(a)+"</ul>";return b},getUnorderListTags:function(e){var a=this;var d=this.getContentTags(e);if(e.children().length>0||e.children2().length>0){var c=e.children().length>0&&e.children2().length>0;var b="";if(e.children().length>0){if(e.parent()!=null||c){if(e.parent()!=null){b+="<li>"+d+"<ul>"}else{b+="<li>"+d+"（右）<ul>"}}e.children().forEach(function(f){b+=a.getUnorderListTags(f)});if(e.parent()!=null||c){b+="</ul></li>"}}if(e.children2().length>0){if(e.parent()!=null||c){if(e.parent()!=null){b+="<li>"+d+"<ul>"}else{b+="<li>"+d+"（左）<ul>"}}e.children2().forEach(function(f){b+=a.getUnorderListTags(f)});if(e.parent()!=null||c){b+="</ul></li>"}}return b}else{return"<li>"+d+"</li>"}},getContentTags:function(d){var i=d.textView().text();var f=d.textColor();if(f!="#E2E1E1"&&f!="#000000"){i='<span style="color:'+f+'">'+i+"</span>"}if(d.imageView()){var a=null;var b=d.imageName();var j=d.imageView().size();if(b.indexOf("#")==0){var h=b.indexOf("-");if(h>0){a="http://mindline.cn/res/sticker/"+b.substring(1,h)+"/"+b.substring(h+1)}}else{if(b.indexOf("s_")==0){a="http://mindline-image.qiniu.mindline.cn/"+b.substring(2)}else{a="http://mindline-image.qiniu.mindline.cn/"+b}}var e='<img src="'+a+'" width="'+j.width+'px" height="'+j.height+'px"/><br>';i=e+i}var c=d.latex();if(c){i+="  "+c}var g=d.remark();if(g!=null&&g.length>0){i+='<span style="color:blue;font-size:12px"> (注:'+g+")</span>"}return i}});LoadingView=defineClass({superClass:UIView,init:function(c){UIView.call(this,c);var b=new UIView(new CGRect(0,0,97,97));b.setCenter(new CGPoint(this.width()/2,this.height()/2));b.setBackgroundColor("rgba(0,0,0,0.7)");b.layer().css("border-radius","10px");this.addSubview(b);this.mActivityView=new UIImageView(new CGRect(30,20,37,37));this.mActivityView.setImage(new UIImage("res/loading.png",37,37));b.addSubview(this.mActivityView);var a=new UILabel(new CGRect(0,57,97,20));a.setTextColor("white");a.setTextAlignment("center");a.setFontSize("12px");a.setText(LOCAL("Waiting..."));b.addSubview(a)},showInView:function(b){b.addSubview(this);this.mRotation=0;var a=this;this.mIntervalId=setInterval(function(){a.mRotation+=(360/100*Math.PI/180);var c=CGAffineTransform.Rotation(a.mRotation);a.mActivityView.setTransform(c)},16)},dismiss:function(){this.removeFromSuperview();clearInterval(this.mIntervalId)}});QRCodeScanView=defineClass({superClass:UIView,init:function(f,d,e){UIView.call(this,f);var c=new UIView(new CGRect(0,0,210,220));c.setCenter(new CGPoint(this.width()/2,this.height()/2));c.setBackgroundColor("rgba(0,0,0,0.7)");c.layer().css("border-radius","10px");this.addSubview(c);var b=new UIImageView(new CGRect(30,20,150,150));b.setImage(new UIImage(d,150,150));c.addSubview(b);var a=new UILabel(new CGRect(0,180,210,20));a.setTextColor("white");a.setTextAlignment("center");a.setFontSize("12px");a.setText(e);c.addSubview(a)},showInView:function(b,c){b.addSubview(this);var a=this;this.layer().click(function(){a.removeFromSuperview();if(c){c()}})}});Toolbar=defineClass({superClass:UIView,init:function(b){UIView.call(this,b);this.mItems=[];this.mContentView=new UIView();this.setBackgroundColor("#ececec");var n=this;var a,l=0;var j=0;var g=0;for(var d=0;d<13;d++){if(isWebApp){if(d==ToolbarItem.File){continue}}var m=new ToolbarItem(d);m.setEnabled(false);m.setDelegate(n);var k=m.view().frame();k.origin.x=g;m.view().setFrame(k);this.mContentView.addSubview(m.view());this.mItems.push(m);a=k.origin.x+k.size.width;l=k.size.height;if(d==ToolbarItem.Image){this.mImageItem=m;if(isWebApp){this.installImagePickerElement(m.view())}}g+=k.size.width+10}this.mContentView.setFrame(new CGRect(0,0,a,l));this.mContentView.setCenter(new CGPoint(this.width()/2,this.height()/2+3));this.mContentView.setAutoresizingMask(UIView.Autoresizing.FlexibleMargin);this.addSubview(this.mContentView);var m=new ToolbarItem(ToolbarItem.TextOutline);m.setEnabled(true);m.setDelegate(n);var h=m.view().frame();h.origin=new CGPoint(30,(this.height()-h.size.height)/2+3);m.view().setFrame(h);m.view().setAutoresizingMask(UIView.Autoresizing.FlexibleRightMargin);this.addSubview(m.view());this.mOutlineItem=m;var f=new ToolbarItem(ToolbarItem.CloudSync);f.setEnabled(true);f.setDelegate(n);var c=f.view().frame();c.origin=new CGPoint(this.width()-c.size.width-30,(this.height()-c.size.height)/2+3);f.view().setFrame(c);f.view().setAutoresizingMask(UIView.Autoresizing.FlexibleLeftMargin);this.addSubview(f.view());this.mSyncItem=f;var e=new UIView(new CGRect(0,this.height()-1,this.width(),1));e.setAutoresizingMask(UIView.Autoresizing.FlexibleWidth);e.setBackgroundColor("#c6c6c6");this.addSubview(e);this.mSepratorView=e;this.setTextOutlineEnabled(false)},onItemClick:function(a){this.mDelegate.onToolbarItemClick(this.mNode,a)},setDelegate:function(a){this.mDelegate=a},setNode:function(c,b){this.mNode=c;var a=this;this.mItems.forEach(function(d){if(c){d.update(c,b)}else{d.setEnabled(false)}if(isWebApp&&d.type()==ToolbarItem.Image){if(d.isEnabled()&&!c.imageView()){var e=UserSessionManager.defaultManager().account();if(e&&e.isProVersionValid()){a.mImagePicker.css("visibility","visible")}else{a.mImagePicker.css("visibility","hidden")}}else{a.mImagePicker.css("visibility","hidden")}}})},node:function(){return this.mNode},setTextOutlineEnabled:function(a){this.mTextOutlineEnabled=a;if(a){this.mOutlineItem.iconView().setImage(new UIImage("res/toolbar_mindmap.png",24,24),UIControl.State.Normal);this.mOutlineItem.titleView().setText(LOCAL("MindLine"))}else{this.mOutlineItem.iconView().setImage(new UIImage("res/toolbar_outline.png",24,24),UIControl.State.Normal);this.mOutlineItem.titleView().setText(LOCAL("Text Outline"))}},isTextOutlineEnabled:function(){return this.mTextOutlineEnabled},setVipEnabled:function(a){if(isMasVersion()){this.mImageItem.setVip(a);this.mSyncItem.setVip(a)}},updateWithDisplayNight:function(a){if(a){this.setBackgroundColor("#413d39");this.mSepratorView.setBackgroundColor("#222222")}else{this.setBackgroundColor("#ececec");this.mSepratorView.setBackgroundColor("#c6c6c6")}this.mItems.forEach(function(b){b.updateWithDisplayNight(a)});this.mOutlineItem.updateWithDisplayNight(a);this.mSyncItem.updateWithDisplayNight(a)},installImagePickerElement:function(a){var c=$("<input id='browser' type='file' accept='.png,.jpg,.jpeg,.gif'/>");c.css({position:"absolute",left:0,top:0,width:a.width(),height:a.height(),opacity:0});a.layer().append(c);var b=this;c.change(function(){if(this.files.length>0){var e=c.val();var d=this.files[0];b.mDelegate.onImageDidSelect(e,d)}});this.mImagePicker=c}});ToolbarItem=defineClass({init:function(d){this.mType=d;var a=new UIView(new CGRect(0,0,46,50));var f=new UIButton(new CGRect(0,0,46,30));f.layer().css("border-radius","5px");f.setImage(new UIImage("res/"+this.imageName(),24,24),UIControl.State.Normal);f.setBackgroundColor("white");a.addSubview(f);var c;if(d==ToolbarItem.TextOutline||d==ToolbarItem.CloudSync){c=new UILabel(new CGRect(-27,30,100,20))}else{c=new UILabel(new CGRect(0,30,46,20))}c.setTextAlignment("center");c.setFontSize("12px");c.setText("#333333");c.setText(this.title());a.addSubview(c);var e=new UIImageView(new CGRect(f.width()-15,f.height()-15,12,12));e.setImage(new UIImage("res/toolbar_cancel.png"));e.setHidden(true);f.addSubview(e);this.mCancelView=e;var b=this;a.layer().click(function(){if(b.mEnabled){b.mDelegate.onItemClick(d)}});this.mView=a;this.mLabel=c;this.mIcon=f},view:function(){return this.mView},iconView:function(){return this.mIcon},titleView:function(){return this.mLabel},setVip:function(a){if(a){if(!this.mVipIcon){this.mVipIcon=new UIImageView(new CGRect(this.mView.width()-16,this.mView.height()-30,16,9));this.mVipIcon.setImage(new UIImage("res/vip.png",24,14));this.mView.addSubview(this.mVipIcon)}}else{if(this.mVipIcon){this.mVipIcon.removeFromSuperview();this.mVipIcon=null}}},setEnabled:function(a){this.mEnabled=a;this.mView.setAlpha(a?1:0.5)},isEnabled:function(){return this.mEnabled},setCanceled:function(a){this.mCancelView.setHidden(!a)},type:function(){return this.mType},setDelegate:function(a){this.mDelegate=a},update:function(c,b){if(b){switch(this.mType){case ToolbarItem.Delete:this.setEnabled(!c.isRoot());break;case ToolbarItem.Remark:case ToolbarItem.Shrink:case ToolbarItem.Mark:case ToolbarItem.URL:case ToolbarItem.File:case ToolbarItem.Image:case ToolbarItem.Latex:this.setEnabled(true);break;default:this.setEnabled(false)}}else{if(c.isRoot()){switch(this.mType){case ToolbarItem.Image:case ToolbarItem.Remark:case ToolbarItem.Shrink:case ToolbarItem.Mark:case ToolbarItem.URL:case ToolbarItem.File:case ToolbarItem.Latex:this.setEnabled(true);break;case ToolbarItem.Color:var a=displayStyleBasic();this.setEnabled(a==MindNode.Style.Default||a==MindNode.Style.WireFrameVertical||a==MindNode.Style.WireFrameBracket);break;default:this.setEnabled(false)}}else{this.setEnabled(true)}}if(this.mType==ToolbarItem.Shrink){this.setEnabled(c.children().length>0||c.isShrink())}else{if(this.mType==ToolbarItem.Shrink){if(c.isShrink()){this.mLabel.setText(LOCAL("Expand"));this.mIcon.setImage(new UIImage("res/toolbar_expand.png",24,24),UIControl.State.Normal)}else{this.mLabel.setText(LOCAL("Shrink"));this.mIcon.setImage(new UIImage("res/toolbar_shrink.png",24,24),UIControl.State.Normal)}}else{if(this.mType==ToolbarItem.Mark){this.setCanceled(c.markType()>0)}else{if(this.mType==ToolbarItem.Link){}else{if(this.mType==ToolbarItem.Summary){}else{if(this.mType==ToolbarItem.URL){this.setCanceled(c.url()!=null)}else{if(this.mType==ToolbarItem.File){this.setCanceled(c.fileName()!=null)}}}}}}}},imageName:function(){switch(this.mType){case ToolbarItem.Move:return"toolbar_move.png";case ToolbarItem.Copy:return"toolbar_copy.png";case ToolbarItem.Delete:return"toolbar_delete.png";case ToolbarItem.Image:return"toolbar_photo.png";case ToolbarItem.Remark:return"toolbar_remark.png";case ToolbarItem.Shrink:return"toolbar_shrink.png";case ToolbarItem.Mark:return"toolbar_mark.png";case ToolbarItem.Link:return"toolbar_link.png";case ToolbarItem.Summary:return"toolbar_summary.png";case ToolbarItem.Latex:return"toolbar_formula.png";case ToolbarItem.URL:return"toolbar_url.png";case ToolbarItem.Color:return"toolbar_color.png";case ToolbarItem.File:return"toolbar_file.png";case ToolbarItem.TextOutline:return"toolbar_outline.png";case ToolbarItem.CloudSync:return"toolbar_sync.png"}return""},title:function(){switch(this.mType){case ToolbarItem.Move:return LOCAL("Move");case ToolbarItem.Copy:return LOCAL("Copy");case ToolbarItem.Delete:return LOCAL("Delete");case ToolbarItem.Image:return LOCAL("Photo");case ToolbarItem.Remark:return LOCAL("Remark");case ToolbarItem.Shrink:return LOCAL("Shrink");case ToolbarItem.Mark:return LOCAL("Mark");case ToolbarItem.Link:return LOCAL("Connect");case ToolbarItem.Summary:return LOCAL("Summary");case ToolbarItem.Latex:return LOCAL("Latex");case ToolbarItem.URL:return LOCAL("URL");case ToolbarItem.Color:return LOCAL("Color");case ToolbarItem.File:return LOCAL("Attachment");case ToolbarItem.TextOutline:return LOCAL("Text Outline");case ToolbarItem.CloudSync:return isWebApp?LOCAL("Cloud Files"):LOCAL("Cloud Sync")}},updateWithDisplayNight:function(a){if(a){this.mLabel.setTextColor("white");this.mIcon.setBackgroundColor("#55544f")}else{this.mLabel.setTextColor("#333333");this.mIcon.setBackgroundColor("white")}},statics:{Move:0,Copy:1,Delete:2,Image:3,Remark:4,Color:5,Shrink:6,Mark:7,Link:8,Summary:9,Latex:10,URL:11,File:12,TextOutline:13,CloudSync:14}});ImagePreviewView=defineClass({superClass:UIView,init:function(b){UIView.call(this,b);this.setBackgroundColor("rgba(0,0,0,0.7)");var a=this;this.layer().click(function(){a.removeFromSuperview()})},setImage:function(e,d){var c=d.width;var a=d.height;if(d.width/d.height>this.width()/this.height()){if(d.width>this.width()){c=this.width();a=c*(d.height/d.width)}}else{if(d.height>this.height()){a=this.height();c=a*(d.width/d.height)}}var b=new UIImageView(new CGRect(0,0,c,a));b.setCenter(new CGPoint(this.width()/2,this.height()/2));b.setImage(e);this.addSubview(b)}});TextOutlineViewController=defineClass({superClass:UIViewController,init:function(a,b){UIViewController.call(this);this.mGraphView=a;this.mToolbar=b},setRootNode:function(a,c){if(this.mOutlineView){this.mOutlineView.removeFromSuperview()}this.mOutlineView=new TextOutlineView(a);this.mOutlineView.setDelegate(this);this.mScrollView.addSubview(this.mOutlineView);if(c){this.mOutlineView.build(this.view().frame().size.width);var b=this.mOutlineView.frame();b.size.height+=80;this.mOutlineView.setFrame(b);if(a.isEmpty()){this.mOutlineView.textView().layer().focus()}}},viewDidLoad:function(){UIViewController.prototype.viewDidLoad.call(this);var a=this.view();this.mScrollView=new UIScrollView(a.bounds());this.mScrollView.setAutoresizingMask(UIView.Autoresizing.FlexibleSize);this.mScrollView.setBackgroundColor("white");this.mScrollView.setDelegate(this);a.addSubview(this.mScrollView);this.setRootNode(this.mGraphView.rootNode());this.initRichTextToolbar();this.updateWithDisplayNight();this.handleImageResizeEvent()},viewDidAppear:function(){UIViewController.prototype.viewDidAppear.call(this);this.mOutlineView.build(this.view().frame().size.width);var b=this.mOutlineView.frame();b.size.height+=80;this.mOutlineView.setFrame(b);if(this.mOutlineView.node().isEmpty()){var a=this;setTimeout(function(){a.mOutlineView.textView().layer().focus()},200)}this.mGraphView.undoManager().setTextOutlineController(this)},viewDidDisappear:function(){UIViewController.prototype.viewDidDisappear.call(this);this.mGraphView.undoManager().setTextOutlineController(null)},onWindowResize:function(){UIViewController.prototype.onWindowResize.call(this);if(this.mOutlineView){this.mOutlineView.build(this.view().frame().size.width)}},textOutlineViewDidBeginEditing:function(a){this.mActiveView=a;a.addBtn().setAlpha(1);this.mToolbar.setNode(a.node(),true);this.mGraphView.delegate().createApplicationMenu();this.mTextEditUndo=new UndoOperation(a.node(),UndoType.kUndoText);var b=this;setTimeout(function(){b.mRichTextToolbar.setHidden(false);b.mRichTextToolbar.layer().fadeIn("fast");b.mRichTextToolbar.setOutlineView(a)},200);this.scrollToDisplayNode(a);this.clearRichTextToolbarFadeTimeout();if(isMobileDevice()){this.showMenuItemsForNode(a)}},textOutlineViewDidEndEditing:function(b){if(this.mActiveView==b){if(!isWebApp){this.mActiveView=null}var c=this;setTimeout(function(){if(c.mToolbar.node()==b.node()){c.mToolbar.setNode(null)}},300)}b.addBtn().setAlpha(0.01);this.mGraphView.layoutTextViewWithNode(b.node(),true);this.mGraphView.delegate().createApplicationMenu();var a=this.mGraphView.undoManager().lastUndo();if(a&&b.textView().text()==a.prevText()){this.mGraphView.undoManager().removeUndo(a)}else{this.mGraphView.undoManager().cleanRedos()}this.mTextEditUndo=null;this.scheduleRichTextToolbarFadeTimeout();this.mTimeoutId=setTimeout(function(){UIMenuController.sharedMenuController().setMenuVisible(false)},3000)},textOutlineViewDidChange:function(b){if(this.mTextEditUndo){var a=this.mGraphView.undoManager().lastUndo();if(!a||this.mTextEditUndo.node()!=a.node()||this.mTextEditUndo.prevText()!=a.prevText()){this.mGraphView.undoManager().pushUndo(this.mTextEditUndo)}}UIMenuController.sharedMenuController().setMenuVisible(false)},textOutlineViewShrinkDidChange:function(a){this.mGraphView.layoutNodeTree(a.node());if(a.node().isShrink()){this.mGraphView.undoManager().pushUndoNode(a.node(),UndoType.kUndoShrink)}else{this.mGraphView.undoManager().pushUndoNode(a.node(),UndoType.kUndoExpand)}},textOutlineViewWillShowRemark:function(a){this.mRemarkView=a;this.onMenuItemRemark(a.node())},textOutlineViewWillAddBranch:function(a){this.mGraphView.delegate().shortcutToAddBranch2(a)},textOutlineViewDidContextMenu:function(a,b){this.mActiveView=a;this.showMenuItemsForNode(a,b)},showMenuItemsForNode:function(a,d){var c=this.buildContextMenuTemplate(a.node(),d);var e=Menu.buildFromTemplate(c);var b=isWebApp?{view:a,position:new CGPoint(100,0)}:{};e.popup(b);if(this.mTimeoutId){clearTimeout(this.mTimeoutId);this.mTimeoutId=null}this.installImagePickerOnContextMenu(a.node())},textOutlineViewDeleteKeyEnter:function(a){if(a.isEmpty()){this.onMenuItemDelete(a.node())}},textOutlineViewWillShowOriginImage:function(a){if(!this.mImageDidResize){var d=this.view().window();var c=new ImagePreviewView(d.bounds());var b=a.imageView().image();c.setImage(b,a.node().imageSize());d.addSubview(c)}},buildContextMenuTemplate:function(f,c){var m=[];var g={type:"separator"};var n=this;var l={label:LOCAL("Delete"),click:function(){n.onMenuItemDelete(f)}};var k={label:LOCAL("Photo"),click:function(){n.onMenuItemImage(f)}};var j={label:LOCAL("Remark"),click:function(){n.onMenuItemRemark(f)}};var i={label:f.isShrink()?LOCAL("Expand"):LOCAL("Shrink"),click:function(){n.onMenuItemExpand(f)}};var h={label:f.markType()>0?LOCAL("Un-Mark"):LOCAL("Mark"),click:function(){n.onMenuItemMark(f)}};var e={label:LOCAL("Latex"),click:function(){n.onMenuItemLatex(f)}};var d={label:f.url()?LOCAL("Un-URL"):LOCAL("URL"),click:function(){n.onMenuItemURL(f)}};var b={label:f.fileName()?LOCAL("Un-Attachment"):LOCAL("Attachment"),click:function(){n.onMenuItemFile(f)}};var a={label:f.isExpandLeftEnable()?LOCAL("Disable Expanding Left"):LOCAL("Enable Expanding Left"),click:function(){n.onMenuItemLeftExpand(f)}};if(c){m.push({label:LOCAL("Preview"),click:function(){n.textOutlineViewWillShowOriginImage(f.imageView())}},g);m.push({label:LOCAL("Save"),click:function(){n.onMenuItemImageSave(f)}},g)}if(f.isRoot()){if(f.children().length>0||f.children2().length>0){m.push(k,g,j,g,i,g,h,g,e,g,d,g,b,g,a)}else{m.push(k,g,j,g,h,g,e,g,d,g,b,g,a)}}else{if(f.children().length>0){m.push(l,g,k,g,j,g,i,g,h,g,e,g,d,g,b)}else{m.push(l,g,k,g,j,g,h,g,e,g,d,g,b)}}return m},onImageDidSelect:function(c,a){if(this.mActiveView){var b=this.mActiveView.node();this.showImageAtNode(b,c,a)}},onToolbarItemClick:function(b,a){switch(a){case ToolbarItem.Delete:this.onMenuItemDelete(b);break;case ToolbarItem.Remark:this.onMenuItemRemark(b);break;case ToolbarItem.Shrink:this.onMenuItemExpand(b);break;case ToolbarItem.Mark:this.onMenuItemMark(b);break;case ToolbarItem.URL:this.onMenuItemURL(b);break;case ToolbarItem.File:this.onMenuItemFile(b);break;case ToolbarItem.TextOutline:this.onMenuItemTextOutline(b);break;case ToolbarItem.CloudSync:this.onMenuItemCloudSync(b);break;case ToolbarItem.Color:this.onMenuItemColor(b);break;case ToolbarItem.Image:this.onMenuItemImage(b);break;case ToolbarItem.Latex:this.onMenuItemLatex(b);break}this.mToolbar.setNode(b)},onMenuItemImageSave:function(c){var d=c.imageView().image().src;main.log("save image src: "+d);var b=$("<a>").attr("href",d).attr("download","image.png").appendTo("body");b[0].click();b.remove()},onMenuItemTextOutline:function(a){this.mGraphView.delegate().showTextOutlineEditView()},onMenuItemCloudSync:function(a){this.mGraphView.delegate().onMenuItemCloudSync()},onMenuItemDelete:function(c){this.mGraphView.undoManager().pushUndoNode(c,UndoType.kUndoDeleteNode);var b=this.findTextOutlineView(c);if(b){var a=b.superview();if(a){a.removeOutlineView(b)}}c.removeFromParent();c.deletePhotos();this.mGraphView.layoutNodeTree(null,true)},onMenuItemRemark:function(f){var c=this.findTextOutlineView(f);if(c){this.mRemarkView=c}var g=new RemarkViewController(f);var d=Math.min(600,this.view().window().width()-40);var a=Math.min(400,this.view().window().height()-40);g.view().setFrame(new CGRect(0,0,d,a));var e=f.isRemarkDisplay()?LOCAL("Hide on Branch"):LOCAL("Display on Branch");var b=new UIAlertView(LOCAL("Remark"),null,e,LOCAL("Delete"),LOCAL("Save"));b.setDetailView(g.view());b.setLeftButtonTitles([LOCAL("Back")]);b.setDelegate(this);b.setUserData(f);b.setTag(108);b.show()},onMenuItemExpand:function(b){var a=this.findTextOutlineView(b);if(a){a.onExpandBtnClick()}},onMenuItemColor:function(c){var d=new ColorPickerController(c);var b=Math.min(450,screen_width()-20);d.setView(new UIView(new CGRect(0,0,b,300)));var a=new UIAlertView(LOCAL("Color"),null,LOCAL("Back"));a.setDetailView(d.view());a.show()},onMenuItemMark:function(d){var b=this.findTextOutlineView(d);if(d.markType()!=0){this.mGraphView.undoManager().pushUndoNode(d,UndoType.kUndoUnmark);d.setMarkType(0);if(b){b.setMarkType(0)}}else{var e=new MarkViewController(d);var c=Math.min(450,screen_width()-20);e.setView(new UIView(new CGRect(0,0,c,300)));var a=new UIAlertView(LOCAL("Mark"),null,LOCAL("Back"));a.setDetailView(e.view());a.show();e.setDelegate(this);this.mMarkEditDialog=a;this.mMarkView=b}},onMenuItemLatex:function(d){var e=new LatexViewController(d);var c=Math.min(600,this.view().window().width()-40);var a=Math.min(400,this.view().window().height()-40);e.view().setFrame(new CGRect(0,0,c,a));var b=new UIAlertView(LOCAL("LaTeX Formula"),null,LOCAL("Delete"),LOCAL("Save"));b.setDetailView(e.view());b.setLeftButtonTitles([LOCAL("Back")]);b.setDelegate(this);b.setUserData(d);b.setTag(109);b.show()},onMenuItemFile:function(c){var b=this.findTextOutlineView(c);if(c.fileName()){this.mGraphView.undoManager().pushUndoNode(c,UndoType.kUndoDeleteFile);c.setFileName(null);if(b){b.updateFileBtnDisplay(true)}}else{var d=remote.getCurrentWindow();var a=this;dialog.showOpenDialogV2(d,{message:LOCAL("Please select a file to be added on the branch."),properties:["openFile"],buttonLabel:LOCAL("Select")},function(h){if(h&&h.length>0){var g=h[0];if(isMasVersion()){var i=app.getPath("userData")+pathSeparator()+"Attachments";fs.mkdirSync(i,{recursive:true});var f=g.substr(g.lastIndexOf(pathSeparator())+1);var e=i+pathSeparator()+f;fs.copyFile(g,e,function(){});c.setFileName(f)}else{c.setFileName(g)}a.mGraphView.undoManager().pushUndoNode(c,UndoType.kUndoAddFile);if(b){b.updateFileBtnDisplay(true)}}})}},onMenuItemURL:function(c){var b=this.findTextOutlineView(c);if(c.url()){this.mGraphView.undoManager().pushUndoNode(c,UndoType.kUndoDeleteURL);c.setURL(null);if(b){b.updateURLBtnDisplay(true)}}else{this.mURLView=b;var a=new UIAlertView(LOCAL("Add URL"),null,LOCAL("Cancel"),LOCAL("Confirm"));a.setAlertViewStyle(UIAlertView.Style.PlainTextInput);a.setDelegate(this);a.setTag(105);a.setUserData(c);a.show()}},onMenuItemLeftExpand:function(c){var b=!c.isExpandLeftEnable();if(!b){if(c.children2().length>0){var d=remote.getCurrentWindow();var a=this;dialog.showMessageBoxV2(d,{type:"info",title:LOCAL("Tips"),message:LOCAL("The branches on left would be removed."),buttons:[LOCAL("Confirm"),LOCAL("Cancel")]},function(g){if(g==0){c.setExpandLeftEnable(false);a.mGraphView.layoutNodeTree(null,true);var h=a.mOutlineView.subOutlineViews();var f=h.concat();f.forEach(function(i){if(i.node().isLeft()){i.removeFromSuperview();h.remove(i)}})}})}else{c.setExpandLeftEnable(false)}}else{c.setExpandLeftEnable(true);var e=this.mGraphView.addBranch(c,true);this.addBranch2(this.mOutlineView,e)}this.mGraphView.delegate().createApplicationMenu()},onMenuItemImage:function(b){if(!this.parentViewController().checkIfUserProValid()){return}var c=remote.getCurrentWindow();if(b.imageView()){var a=this;if(isWebApp){dialog.showMessageBoxV2(c,{type:"question",title:LOCAL("Tips"),message:LOCAL("Delete the photo?"),buttons:[LOCAL("Delete"),LOCAL("Back")],defaultId:1,cancelId:1},function(d){if(d==0){a.mGraphView.undoManager().pushUndoNode(b,UndoType.kUndoDeletePhoto);b.setImage(null);var e=a.findTextOutlineView(b);if(e){e.setImage(null);e.requestLayout()}}})}else{dialog.showMessageBoxV2(c,{type:"question",title:LOCAL("Tips"),message:LOCAL("Delete or re-select photo."),buttons:[LOCAL("Select Photo"),LOCAL("Delete Photo"),LOCAL("Back")],defaultId:2,cancelId:2},function(d){if(d==0){a.showImagePicker(b)}else{if(d==1){a.mGraphView.undoManager().pushUndoNode(b,UndoType.kUndoDeletePhoto);b.setImage(null);var e=a.findTextOutlineView(b);if(e){e.setImage(null);e.requestLayout()}}}})}}else{if(!isWebApp){this.showImagePicker(b)}}},showImagePicker:function(b){var c=remote.getCurrentWindow();var a=this;dialog.showOpenDialogV2(c,{properties:["openFile"],filters:[{name:"Image Files",extensions:["jpg","jpeg","png","gif"]}]},function(e){if(e&&e.length>0){var d=e[0];a.showImageAtNode(b,d)}})},showImageAtNode:function(a,i,d){var e=null;var c=null;var g=window.URL||window.webkitURL;if(d){e=g.createObjectURL(d)}else{var c=fs.readFileSync(i);var f=toArrayBuffer(c);d=new Blob([f]);e=g.createObjectURL(d)}var b=new Image();var h=this;b.onload=function(){var k=new CGSize(b.width,b.height);if(k.width>0&&k.height>0){var m="";var p=i.lastIndexOf(".");if(p!=-1){m=i.substring(p+1)}var n=stringRandom(10)+"."+m;a.setImage(n,k,e);var l=h.findTextOutlineView(a);if(l){l.setImage(a.imageView().image());l.requestLayout()}if(c){var o=imageCachePath();if(!fs.existsSync(o)){fs.mkdirSync(o,{recursive:true})}var j=imageCachePath()+n;fs.writeFile(j,c,function(q){if(q){main.log("pic error: "+q)}})}h.mGraphView.uploadPhotoToQiniu(a,d,n);h.mGraphView.undoManager().pushUndoNode(a,UndoType.kUndoAddPhoto)}};b.src=e},dismiss:function(){this.mMarkEditDialog.dismiss();var b=this.mMarkView.markType();var a=this.mMarkView.node().markType();if(b!=a){this.mMarkView.setMarkType(a)}},alertViewClickedButtonAtIndex:function(d,c){var i=d.tag();if(i==105){if(c==1){var b=d.userData();if(b!=null){var a=d.textFieldAtIndex(0).text();if(a.length==0){return}if(a.indexOf("http://")!=0&&a.indexOf("https://")!=0){a="http://"+a}b.setURL(a);if(this.mURLView){this.mURLView.updateURLBtnDisplay(true)}this.mGraphView.undoManager().pushUndoNode(b,UndoType.kUndoAddURL)}}}else{if(i==108){var b=d.userData();if(b!=null){if(c==1){if(b.remark()){this.mGraphView.undoManager().pushUndoNode(b,UndoType.kUndoDeleteRemark)}b.setRemark(null)}else{if(c==0||c==2){var h=d.detailView().viewWithTag(100).text();if(b.remark()){if(h.length==0){this.mGraphView.undoManager().pushUndoNode(b,UndoType.kUndoDeleteRemark)}b.setRemark(h.length>0?h:null)}else{b.setRemark(h.length>0?h:null);if(h.length>0){this.mGraphView.undoManager().pushUndoNode(b,UndoType.kUndoAddRemark)}}if(c==0){var f=!b.isRemarkDisplay();b.setRemarkDisplay(f)}}}if(this.mRemarkView){this.mRemarkView.updateRemarkBtnDisplay(true);this.mRemarkView.updateRemarkDisplay();this.mRemarkView.requestLayout()}}}else{if(i==109){var b=d.userData();if(b!=null){if(c==0){if(b.latex()){this.mGraphView.undoManager().pushUndoNode(b,UndoType.kUndoDeleteLatex)}b.setLatex(null)}else{if(c==1){var h=d.detailView().viewWithTag(100).text().trim();if(h.length>0){var e=b.latex();b.setLatex(h);if(!e){this.mGraphView.undoManager().pushUndoNode(b,UndoType.kUndoAddLatex)}}else{if(b.latex()){this.mGraphView.undoManager().pushUndoNode(b,UndoType.kUndoDeleteLatex)}b.setLatex(null)}}}var g=this.findTextOutlineView(b);if(g){g.setLatex(b.latex());g.requestLayout()}}}}}},activeView:function(){return this.mActiveView},addBranch:function(b,e){var c=b.parent();if(c){var d=new TextOutlineView(e,c);d.setDelegate(this);d.build(c.maxWidth()-25);c.addSubview(d);var a=c.subOutlineViews().indexOf(b);if(a>=0){c.subOutlineViews().splice(a+1,0,d)}else{c.subOutlineViews().push(d)}c.requestLayout();d.textView().layer().focus()}},addBranch2:function(a,d){var b=a;if(b){var c=new TextOutlineView(d,b);c.setDelegate(this);c.build(b.maxWidth()-25);b.addSubview(c);b.subOutlineViews().push(c);b.requestLayout();c.textView().layer().focus()}},insertBranch:function(a,e){var c=a;if(c){var d=new TextOutlineView(e,c);d.setDelegate(this);d.build(c.maxWidth()-25);var b=c.subOutlineViews().slice(0,c.subOutlineViews().length-c.node().children2().length);b.forEach(function(f){c.removeOutlineView(f)});c.addSubview(d);c.subOutlineViews().splice(0,0,d);d.requestLayout();d.textView().layer().focus()}},updateWithDisplayNight:function(){var b=NSUserDefaults.standardUserDefaults();var a=b.objectForKey("nightDisplay");if(a){this.mScrollView.setBackgroundColor(AppSettings.CONTENT_BACKGROUND_COLOR_DARK)}else{this.mScrollView.setBackgroundColor(AppSettings.CONTENT_BACKGROUND_COLOR_LIGHT)}this.mOutlineView.updateWithDisplayNight(a);this.mRichTextToolbar.updateWithDisplayNight(a)},findTextOutlineView:function(e,c){if(!c){c=this.mOutlineView}if(c.node()==e){return c}var d=c.subOutlineViews().slice();for(var b=0;b<d.length;b++){var f=d[b];var a=this.findTextOutlineView(e,f);if(a){return a}}return null},initRichTextToolbar:function(){this.mRichTextToolbar=new RichTextToolbar(new CGRect((this.view().width()-437)/2,this.view().height()-60,437,30));this.mRichTextToolbar.setAutoresizingMask(UIView.Autoresizing.FlexibleLeftMargin|UIView.Autoresizing.FlexibleRightMargin|UIView.Autoresizing.FlexibleTopMargin);this.mRichTextToolbar.setHidden(true);this.view().addSubview(this.mRichTextToolbar);var a=this;this.mRichTextToolbar.layer().click(function(){a.clearRichTextToolbarFadeTimeout()});this.mOutlineView.layer().click(function(){if(!a.mActiveView){a.mRichTextToolbar.layer().fadeOut("fast")}})},toolbarDidClick:function(){if(!this.mActiveView){this.mRichTextToolbar.layer().fadeOut("fast")}},clearRichTextToolbarFadeTimeout:function(){if(this.mRichTextToolbarFadeTimeout){clearTimeout(this.mRichTextToolbarFadeTimeout);this.mRichTextToolbarFadeTimeout=null}},scheduleRichTextToolbarFadeTimeout:function(){var a=this;this.mRichTextToolbarFadeTimeout=setTimeout(function(){a.mRichTextToolbar.layer().fadeOut("fast")},200)},scrollToDisplayNode:function(a){if(this.mScrollView){var c=a.textView().frame();var b=a.convertRectToView(c,this.mOutlineView);b.origin.y+=80;b.size.width=10;this.mScrollView.scrollRectToVisible(b)}},updateFontSize:function(){this.mOutlineView.traverseUpdateFontSize();this.mOutlineView.requestLayout()},textOutlineViewImageDidFocusIn:function(b){if(this.mImageSelectionView){this.mImageSelectionView.removeFromSuperview()}var c=b.imageView();var e=new CGRect(c.left()-4,c.top()-4,c.width()+8,c.height()+8);var a=new ImageSelectionView(e);b.addSubview(a);b.sendSubviewToBack(a);this.mImageSelectionView=a;var f=NSUserDefaults.standardUserDefaults();var d=this.mShowImageResizeTips;if(!d){d=f.objectForKey("show_resize_tips")}if(!d){this.mShowImageResizeTips=true;dialog.showMessageBoxV2(null,{type:"info",title:LOCAL("Tips"),message:LOCAL("Drag the edge of image to resize it."),buttons:[LOCAL("OK"),LOCAL("Don't Remind Me")],defaultId:0,cancelId:0},function(g){if(g==1){f.setObjectForKey(true,"show_resize_tips");f.synchronize()}})}},textOutlineViewDidBeginResizeImage:function(a,b){this.mScrollView.setScrollEnabled(false);this.mImageMouseDown=true;this.mImageMouseDownLocation=new CGPoint(b.pageX,b.pageY);this.mImageOriginSize=a.imageView().size();this.mResizeOutlineView=a},textOutlineViewImageDidFocusOut:function(a){if(!this.mImageMouseDown&&this.mImageSelectionView){this.mImageSelectionView.removeFromSuperview();this.mImageSelectionView=null}},handleImageResizeEvent:function(){var a=this;var b=function(h){if(a.mImageMouseDown){if(a.mImageDidResize){a.mResizeOutlineView.requestLayout();var g=a.mResizeOutlineView.node();var d=a.mResizeOutlineView.imageView().size();g.imageView().setSize(d);g.setImageResize(d);a.mGraphView.layoutNodeTree();if(a.mImageSelectionView){var c=a.mResizeOutlineView.imageView();var f=new CGRect(c.left()-4,c.top()-4,c.width()+8,c.height()+8);a.mImageSelectionView.setFrame(f)}setTimeout(function(){a.mImageDidResize=false},200)}if(a.mImageSelectionView){a.mImageSelectionView.removeFromSuperview();a.mImageSelectionView=null}a.mImageMouseDown=false;a.mScrollView.setScrollEnabled(true)}};this.view().layer().mouseup(b);this.view().layer().mouseleave(b);this.view().layer().mousemove(function(j){if(a.mImageMouseDown){if(!a.mImageDidResize){a.mImageDidResize=true;a.mGraphView.undoManager().pushUndoNode(a.mResizeOutlineView.node(),UndoType.kUndoResizePhoto)}var f=j.pageX-a.mImageMouseDownLocation.x;var d=j.pageY-a.mImageMouseDownLocation.y;var h,c;if(Math.abs(f)>Math.abs(d)){h=a.mImageOriginSize.width+f;if(h<50){h=Math.min(50,a.mImageOriginSize.width)}c=a.mImageOriginSize.height*(h/a.mImageOriginSize.width)}else{c=a.mImageOriginSize.height+d;if(c<50){c=Math.min(50,a.mImageOriginSize.height)}h=a.mImageOriginSize.width*(c/a.mImageOriginSize.height)}var g=a.mResizeOutlineView.imageView();g.setSize(new CGSize(h,c));if(a.mImageSelectionView){var i=new CGRect(g.left()-4,g.top()-4,g.width()+8,g.height()+8);a.mImageSelectionView.setFrame(i)}}})},installImagePickerOnMenuBtn:function(d,a){var c=$("<input id='browser' type='file' accept='.jpg,.jpeg,.png'/>");c.css({position:"absolute",left:0,top:0,width:a.width(),height:a.height(),opacity:0});a.setUserInteractionEnabled(false);a.layer().append(c);var b=this;c.change(function(){if(this.files.length>0){var f=c.val();var e=this.files[0];b.showImageAtNode(d,f,e)}})},installImagePickerOnContextMenu:function(b){if(!isWebApp||b.imageView()){return}var d=UserSessionManager.defaultManager().account();if(!d||!d.isProVersionValid()){return}if(isMobileDevice()){var i=this;var c=UIMenuController.sharedMenuController().menuButtons();c.forEach(function(j){if(j.titleLabel().text()==LOCAL("Photo")){i.installImagePickerOnMenuBtn(b,j)}})}else{var h=WebAppMenuManager.defaultManager().menuViews()[0];var a=h.menu().submenu;var f=-1;var e=0;a.forEach(function(j){if(j.label==LOCAL("Photo")){f=e}if(j.type!="separator"){e+=1}});if(f!=-1){var g=$("<input id='browser' type='file' accept='.png,.jpg,.jpeg,.gif'/>");g.css({position:"absolute",left:0,top:h.height()/e*f,width:h.width(),height:h.height()/e,opacity:0});h.layer().append(g);var i=this;g.change(function(){if(this.files.length>0){var k=g.val();var j=this.files[0];i.showImageAtNode(b,k,j)}})}}},scrollViewDidScroll:function(a){UIMenuController.sharedMenuController().setMenuVisible(false)}});TextOutlineView=defineClass({superClass:UIView,init:function(b,a){UIView.call(this);this.mNode=b;this.mParent=a;this.mSubOutlineViews=[];this.mMaxWidth=0},node:function(){return this.mNode},parent:function(){return this.mParent},maxWidth:function(){return this.mMaxWidth},subOutlineViews:function(){return this.mSubOutlineViews},textView:function(){return this.mTextView},build:function(d){if(d){this.mMaxWidth=d}var c=this.subviews().concat();c.forEach(function(f){f.removeFromSuperview()});this.mSubOutlineViews=[];var a=this;this.mAddBtn=new UIButton(new CGRect(2,3,20,20));this.mAddBtn.setImage(this.mNode.imageForAddBtn(),UIControl.State.Normal);this.mAddBtn.addTarget(function(){a.onAddBtnClick()},UIControl.Events.TouchUpInside);this.mAddBtn.setAlpha(0.01);this.addSubview(this.mAddBtn);this.mDotView=new UIImageView(new CGRect(28,10,5,5));this.mDotView.setImage(new UIImage("res/outline_dot.png",5,5));this.addSubview(this.mDotView);this.mTextView=new UITextView();this.mTextView.setTextColor(this.mNode.textColor());this.mTextView.layer().css("border","0");this.mTextView.layer().css("background-image","none");this.mTextView.layer().css("outline","none");this.mTextView.layer().css("resize","none");this.mTextView.setBackgroundColor("transparent");this.mTextView.setText(this.mNode.textView().text());if(this.mNode.textView().isUnderline()){this.mTextView.setUnderline(true)}if(this.mNode.textView().isStrikethrough()){this.mTextView.setStrikethrough(true)}this.mOriginText=this.mTextView.text();this.mFirstKeyDown=true;this.mTextView.layer().keydown(function(f){var g=a.mTextView.text();if(a.mFirstKeyDown){if(g==""&&f.which==8){a.textViewDeleteKeyEnter()}}a.mFirstKeyDown=false;if(g!=a.mOriginText){a.mOriginText=g;a.textViewDidChange()}});this.mTextView.layer().keyup(function(f){a.mFirstKeyDown=true;var g=a.mTextView.text();if(g!=a.mOriginText){a.mOriginText=g;a.textViewDidChange()}else{}});this.mTextView.layer().focusin(function(){a.textViewDidBeginEditing()});this.mTextView.layer().focusout(function(){a.textViewDidEndEditing()});this.mTextView.layer().contextmenu(function(f){f.preventDefault();a.textViewDidContextMenu()});this.addSubview(this.mTextView);this.updateRemarkDisplay();if(this.mNode.latex()){this.setLatex(this.mNode.latex())}if(this.mNode.imageView()){this.setImage(this.mNode.imageView().image())}if(this.mNode.isShrink()){this.mExpandBtn=new UIButton(new CGRect(0,0,24,24));this.mExpandBtn.setImage(new UIImage("res/outline_expand.png",24,24),UIControl.State.Normal);this.mExpandBtn.addTarget(function(){a.onExpandBtnClick()},UIControl.Events.TouchUpInside);this.addSubview(this.mExpandBtn)}else{var b=this.mNode.children().concat(this.mNode.children2());this.mSubOutlineViews=[];b.forEach(function(g){var f=new TextOutlineView(g,a);f.setDelegate(a.mDelegate);f.build(a.mMaxWidth-a.mDotView.left());a.addSubview(f);a.mSubOutlineViews.push(f)})}var e=this.mNode.markType();this.mMarkType=0;if(e!=this.mMarkType){this.setMarkType(e)}this.updateRemarkBtnDisplay();this.updateURLBtnDisplay();this.updateFileBtnDisplay();this.updateTextFontSize(true);this.requestLayout()},maxTextWidth:function(){var a=this.mMaxWidth-40;var b=0;if(this.mRemarkBtn){b+=this.mRemarkBtn.width()}if(this.mURLBtn){b+=this.mURLBtn.width()}if(this.mFileBtn){b+=this.mFileBtn.width()}if(b>0){b+=5}return a-b},setTextViewFrame:function(a){this.mTextView.setFrame(a);this.mTextView.sizeToFit();if(a.size.height<=MindNode.MIN_TEXT_HEIGHT){this.mTextView.layer().css("white-space","nowrap")}else{this.mTextView.layer().css("white-space","")}},setLatex:function(b){if(b){if(!this.mLatexView){this.mLatexView=new LatexView();var a=this;this.mLatexView.layer().click(function(){if(a.mDelegate){a.mDelegate.onMenuItemLatex(a.mNode)}a.mLatexView.becomeFirstResponder()});this.mLatexView.layer().contextmenu(function(c){if(a.mDelegate){a.mDelegate.textOutlineViewDidContextMenu(a)}})}this.mLatexView.setLatex(b);this.mLatexView.sizeToFit();this.mLatexView.setFrame(new CGRect(this.mTextView.left(),this.mTextView.bottom(),this.mLatexView.width(),this.mLatexView.height()));this.addSubview(this.mLatexView);this.updateUIViewPosition()}else{if(this.mLatexView){this.mLatexView.removeFromSuperview();this.mLatexView=null;this.updateUIViewPosition()}}},imageView:function(){return this.mImageView},setImage:function(c){if(c){if(!this.mImageView){var b=new UIImageView();var a=this;b.layer().click(function(){if(!a.mImageClickCancelled){if(a.mDelegate){a.mDelegate.textOutlineViewWillShowOriginImage(a)}b.becomeFirstResponder()}});b.layer().contextmenu(function(d){if(a.mDelegate){a.mDelegate.textOutlineViewDidContextMenu(a,true)}});b.layer().mouseover(function(){if(a.mDelegate){a.mDelegate.textOutlineViewImageDidFocusIn(a)}});b.layer().mousedown(function(f){var d=new CGPoint(f.pageX,f.pageY);var g=b.convertPointToView(new CGPoint(),b.window());if(Math.abs(d.x-g.x)<30||Math.abs(d.y-g.y)<30||Math.abs(d.x-(g.x+b.width()))<30||Math.abs(d.y-(g.y+b.height()))<30){if(a.mDelegate){a.mDelegate.textOutlineViewDidBeginResizeImage(a,f)}}a.mImageMouseDownLocation=d});b.layer().mousemove(function(h){var f=new CGPoint(h.pageX,h.pageY);if(a.mImageMouseDownLocation){var g=f.x-a.mImageMouseDownLocation.x;var d=f.y-a.mImageMouseDownLocation.y;if(Math.abs(g)>30||Math.abs(d)>30){a.mImageClickCancelled=true}}});b.layer().mouseleave(function(d){a.mImageClickCancelled=false;a.mImageMouseDownLocation=null;if(a.mDelegate){a.mDelegate.textOutlineViewImageDidFocusOut(a)}});this.mImageView=b}this.mImageView.setImage(c);this.mImageView.setFrame(new CGRect(0,0,this.mNode.imageView().width(),this.mNode.imageView().height()));this.addSubview(this.mImageView);this.updateUIViewPosition(true)}else{if(this.mImageView){this.mImageView.removeFromSuperview();this.mImageView=null}}},updateUIViewPosition:function(d){var c=this.mTextView.bottom();if(this.mRemarkView!=null){if(d){var b=this.mRemarkView.sizeThatFits(new CGSize(this.mTextView.width()-10,Number.MAX_VALUE));this.mRemarkView.setSize(b)}this.mRemarkView.setPosition(new CGPoint(this.mTextView.left(),this.mTextView.bottom()));c=this.mRemarkView.bottom()+5}if(this.mLatexView!=null){this.mLatexView.setPosition(new CGPoint(this.mTextView.left(),c));c=this.mLatexView.bottom()}if(this.mImageView!=null){if(d){var e=Math.min(this.mNode.imageView().width(),this.mTextView.width()-10);var a=this.mImageView.image().size().height*(e/this.mImageView.image().size().width);this.mImageView.setFrame(new CGRect(this.mTextView.left(),c,e,a))}else{this.mImageView.setPosition(new CGPoint(this.mTextView.left(),c))}}},updateRemarkDisplay:function(){if(this.mNode.remarkView()){if(!this.mRemarkView){this.mRemarkView=new UILabel();this.mRemarkView.setFontSize("12px");this.mRemarkView.setBackgroundColor(MindNode.DisplayDark?"#191919":"#E5E5E5");this.mRemarkView.setTextColor(MindNode.DisplayDark?"#B2B2B2":"#555555");this.mRemarkView.setNumberOfLines(0);this.mRemarkView.layer().css("border-radius","3px");this.mRemarkView.layer().css("padding-left","5px");this.mRemarkView.layer().css("padding-right","2px");this.mRemarkView.layer().css("white-space","pre-wrap");var a=this;this.mRemarkView.layer().click(function(){a.onRemarkBtnClick()})}this.mRemarkView.setText(this.mNode.remark());this.addSubview(this.mRemarkView);this.updateUIViewPosition(true)}else{if(this.mRemarkView){this.mRemarkView.removeFromSuperview();this.mRemarkView=null;this.updateUIViewPosition(false)}}},updateRemarkBtnDisplay:function(c){var d=(this.mNode.remarkBtn()==null);var b=(this.mRemarkBtn==null);if(d!=b){if(d){if(this.mRemarkBtn!=null){this.mRemarkBtn.removeFromSuperview();this.mRemarkBtn=null}}else{if(this.mRemarkBtn==null){this.mRemarkBtn=new UIButton(new CGRect(0,0,20,20));this.mRemarkBtn.setImage(new UIImage("res/remark.png",20,20),UIControl.State.Normal);var a=this;this.mRemarkBtn.addTarget(function(){a.onRemarkBtnClick()},UIControl.Events.TouchUpInside);this.addSubview(this.mRemarkBtn)}}if(c){this.updateTextViewSize(true);this.requestLayout()}}},updateFileBtnDisplay:function(c){var d=(this.mNode.fileName()==null);var b=(this.mFileBtn==null);if(d!=b){if(d){if(this.mFileBtn!=null){this.mFileBtn.removeFromSuperview();this.mFileBtn=null}}else{if(this.mFileBtn==null){this.mFileBtn=new UIButton(new CGRect(0,0,20,20));this.mFileBtn.setImage(new UIImage("res/file.png",20,20),UIControl.State.Normal);var a=this;this.mFileBtn.addTarget(function(){a.onFileBtnClick()},UIControl.Events.TouchUpInside);this.addSubview(this.mFileBtn)}}if(c){this.updateTextViewSize(true);this.requestLayout()}}},onFileBtnClick:function(){shell.openItem(this.mNode.resolvedFilePath())},updateURLBtnDisplay:function(c){var d=(this.mNode.url()==null);var b=(this.mURLBtn==null);if(d!=b){if(d){if(this.mURLBtn!=null){this.mURLBtn.removeFromSuperview();this.mURLBtn=null}}else{if(this.mURLBtn==null){this.mURLBtn=new UIButton(new CGRect(0,0,20,20));this.mURLBtn.setImage(new UIImage("res/url.png",20,20),UIControl.State.Normal);var a=this;this.mURLBtn.addTarget(function(){a.onURLBtnClick()},UIControl.Events.TouchUpInside);this.addSubview(this.mURLBtn)}}if(c){this.updateTextViewSize(true);this.requestLayout()}}},markType:function(){return this.mMarkType},setMarkType:function(b){this.mMarkType=b;if(b==0){if(this.mDotView!=null){this.mDotView.setImage(new UIImage("res/outline_dot.png",5,5));var a=this.mDotView.center();this.mDotView.setFrame(new CGRect(a.x-2.5,a.y-2.5,5,5))}}else{var c=this.mNode.imageWithMarkType(b);if(c){this.mDotView.setImage(c);var a=this.mDotView.center();this.mDotView.setFrame(new CGRect(a.x-10,a.y-10,20,20))}}},requestLayout:function(){this.layout();if(this.mParent){this.mParent.requestLayout()}},layout:function(){var f=this.mTextView.frame();var a=(this.mRemarkView)?this.mRemarkView.bottom():this.mTextView.bottom();a=(this.mLatexView)?this.mLatexView.bottom():a;a=(this.mImageView)?this.mImageView.bottom():a;var c=new CGSize(this.mMaxWidth,a);if(this.mNode.isShrink()){var b=this.mExpandBtn.frame();b.origin=new CGPoint(f.origin.x,a);this.mExpandBtn.setFrame(b);c.height=b.origin.y+b.size.height}else{this.mSubOutlineViews.forEach(function(k){var j=k.frame();j.origin=new CGPoint(25,c.height+10);k.setFrame(j);c.height=Math.max(c.height,j.origin.y+j.size.height)})}var d=f.origin.x+this.mTextFitWidth+5;if(this.mRemarkBtn!=null){var e=this.mRemarkBtn.frame();e.origin=new CGPoint(d,this.mTextView.top()+3);this.mRemarkBtn.setFrame(e);d+=e.size.width}if(this.mURLBtn!=null){var h=this.mURLBtn.frame();h.origin=new CGPoint(d,this.mTextView.top()+3);this.mURLBtn.setFrame(h);d+=h.size.width}if(this.mFileBtn!=null){var i=this.mFileBtn.frame();i.origin=new CGPoint(d,this.mTextView.top()+3);this.mFileBtn.setFrame(i);d+=i.size.width}var g=this.frame();g.size=c;this.setFrame(g)},textViewDidBeginEditing:function(){if(this.mDelegate){this.mDelegate.textOutlineViewDidBeginEditing(this)}},textViewDidEndEditing:function(){this.mNode.textView().setText(this.mTextView.text());if(this.mDelegate){this.mDelegate.textOutlineViewDidEndEditing(this)}},textViewDidChange:function(){this.layoutTextView();if(this.mDelegate){this.mDelegate.textOutlineViewDidChange(this)}},textViewDidContextMenu:function(){if(this.mDelegate){this.mDelegate.textOutlineViewDidContextMenu(this)}},textViewDeleteKeyEnter:function(){if(this.mDelegate){this.mDelegate.textOutlineViewDeleteKeyEnter(this)}},setDelegate:function(a){this.mDelegate=a},onExpandBtnClick:function(){var a=!this.mNode.isShrink();this.mNode.setShrink(a);this.build(this.mMaxWidth);if(this.mDelegate!=null){this.mDelegate.textOutlineViewShrinkDidChange(this)}},removeOutlineView:function(a){a.removeFromSuperview();this.mSubOutlineViews.remove(a);this.requestLayout()},onRemarkBtnClick:function(){if(this.mDelegate){this.mDelegate.textOutlineViewWillShowRemark(this)}},onURLBtnClick:function(){window.open(this.mNode.url())},onAddBtnClick:function(){if(this.mDelegate){this.mDelegate.textOutlineViewWillAddBranch(this)}},addBtn:function(){return this.mAddBtn},updateWithDisplayNight:function(a){if(this.mTextView){this.mTextView.setTextColor(this.mNode.textColor())}this.mSubOutlineViews.forEach(function(b){b.updateWithDisplayNight(a)})},layoutTextView:function(){var a=this.updateTextViewSize();if(a||this.mRemarkBtn||this.mURLBtn||this.mFileBtn){this.requestLayout()}},updateTextViewSize:function(b){var a=this.maxTextWidth();var d=this.mTextView.height();var c=this.mTextView.sizeThatFits(new CGSize(a,Number.MAX_VALUE));this.setTextViewFrame(new CGRect(0,0,c.width,c.height));this.setTextViewFrame(new CGRect(0,0,c.width,c.height));this.mTextFitWidth=this.mTextView.width();this.setTextViewFrame(new CGRect(38,0,a,c.height));this.updateUIViewPosition(b);return this.mTextView.height()!=d},updateTextFontSize:function(a){var b=this.mNode.textView();this.mTextView.setFontSize(b.fontSize());this.mTextView.setLineHeight(b.lineHeight());this.mTextView.setBold(b.isBold());this.updateTextViewSize(a)},traverseUpdateFontSize:function(){this.updateTextFontSize();this.mSubOutlineViews.forEach(function(a){a.traverseUpdateFontSize()})},setText:function(a){this.mOriginText=a;this.mTextView.setText(a)},text:function(){return this.mTextView.text()},isEmpty:function(){return this.mSubOutlineViews.length==0&&(!this.mTextView.text()||this.mTextView.text().length==0)&&!this.mRemarkBtn&&!this.mURLBtn&&!this.mFileBtn&&!this.mLatexView&&!this.mImageView}});GraphViewTabBar=defineClass({superClass:UIScrollView,init:function(b,a){UIScrollView.call(this,b);this.mTitles=[];this.mDelegate=a},titles:function(){return this.mTitles},selectedIndex:function(){return this.mSelectedIndex},setTitles:function(c){this.mTitles=c;this.mSelectedIndex=-1;if(this.mTabBarViews){this.mTabBarViews.forEach(function(d){d.removeFromSuperview()})}this.mTabBarViews=[];var b=0;var a=this;c.forEach(function(h){let view=new UIView(a.bounds());view.setBackgroundColor("#e0e0e0");view.layer().click(function(){a.handleTabClickEvent(view)});var e=new UILabel(new CGRect(10,0,view.width()-40,view.height()));e.setAutoresizingMask(UIView.Autoresizing.FlexibleWidth);e.setFontSize("11px");e.setTextColor("#777777");if(h.length>0){var g=h.length>12?h.substring(0,12):h;e.setText(g)}else{e.setText(LOCAL("Topic ")+(b+1))}e.setTag(100);view.addSubview(e);var f=new UIButton(new CGRect(view.width()-30,0,20,view.height()));f.setAutoresizingMask(UIView.Autoresizing.FlexibleLeftMargin);f.setImage(new UIImage("res/close2.png",12,12),UIControl.State.Normal);f.addTarget(function(i){a.closeBtnDidClick(i)},UIControl.Events.TouchUpInside);f.setTag(101);view.addSubview(f);var d=new UIView(new CGRect(view.width()-1,2,1,view.height()-4));d.setAutoresizingMask(UIView.Autoresizing.FlexibleLeftMargin);d.setBackgroundColor("#d0d0d0");d.setTag(102);view.addSubview(d);a.addSubview(view);a.mTabBarViews.push(view);b+=1});this.setContentOffset(new CGPoint());if(c.length>0){this.setSelectedIndex(0)}this.updateWithDisplayDark();this.layoutSubviews()},layoutSubviews:function(){if(this.mTabBarViews){var d=this.mTabBarViews.length;if(d>0){var c=200;var b=0;var a=this;this.mTabBarViews.forEach(function(e){e.setFrame(new CGRect(b,0,c,a.height()));b+=c})}}},setSelectedIndex:function(a,f){var b=this.mSelectedIndex;if(b>=0){var h=this.mTabBarViews[b];var i=h.viewWithTag(102);i.setHidden(false)}var g=this.mTabBarViews[a];var i=g.viewWithTag(102);i.setHidden(true);this.mSelectedIndex=a;var c=0;var d=NSUserDefaults.standardUserDefaults();var e=d.objectForKey("nightDisplay");this.mTabBarViews.forEach(function(j){var k=j.viewWithTag(100);var l=j.viewWithTag(101);if(c==a){k.setTextColor(e?"#eeeeee":"#333333");j.setBackgroundColor(e?"#413d39":"#ececec")}else{k.setTextColor(e?"#aaaaaa":"#777777");j.setBackgroundColor(e?"#4d4945":"#e0e0e0")}c+=1});if(f){this.scrollRectToVisible(g.frame())}},updateWithDisplayDark:function(){var d=NSUserDefaults.standardUserDefaults();var c=d.objectForKey("nightDisplay");if(c){this.setBackgroundColor("#413d39")}else{this.setBackgroundColor("#ececec")}if(this.mTabBarViews){var b=0;var a=this;this.mTabBarViews.forEach(function(e){var g=e.viewWithTag(100);var h=e.viewWithTag(101);var f=e.viewWithTag(102);if(b==a.mSelectedIndex){g.setTextColor(c?"#eeeeee":"#333333");e.setBackgroundColor(c?"#413d39":"#ececec")}else{g.setTextColor(c?"#aaaaaa":"#777777");e.setBackgroundColor(c?"#4d4945":"#e0e0e0")}if(c){h.setImage(new UIImage("res/close.png",12,12),UIControl.State.Normal)}else{h.setImage(new UIImage("res/close2.png",12,12),UIControl.State.Normal)}f.setBackgroundColor(c?"#5d5955":"#d0d0d0");b+=1})}},handleTabClickEvent:function(a){var b=this.mTabBarViews.indexOf(a);if(b!=-1){if(this.mSelectedIndex!=b){this.setSelectedIndex(b);if(this.mDelegate){this.mDelegate.graphViewTabBarDidSelect(this)}}}},closeBtnDidClick:function(c){var a=c.superview();var b=this.mTabBarViews.indexOf(a);if(this.mDelegate){this.mDelegate.graphViewTabBarDidCloseTab(this,b)}},updateTitle:function(e,c){if(c<=this.mTitles.length-1){this.mTitles.splice(c,1,e);var a=this.mTabBarViews[c];var b=a.viewWithTag(100);if(e.length>0){var d=e.length>12?e.substring(0,12):e;b.setText(d)}else{b.setText(LOCAL("Topic ")+(c+1))}}}});AppDelegate=defineClass({applicationDidFinishLaunching:function(c){main.log("applicationDidFinishLaunching !");if(isWebApp){electron_web_init()}this.initGlobalTextFont();var e=new UIWindow();e.makeKeyAndVisible();var a=new RootViewController();var d=new UINavigationController(a);d.setNavigationBarHidden(true);e.setRootViewController(d);var b=this;window.onerror=function(g,h,i,f){b.reportError(g,h,i,f)};this.mRoot=a},initGlobalTextFont:function(){if(process.platform==="darwin"){$("body").css("font-family","PingFangSC-Regular")}else{if(process.platform=="win32"){$("body").css("font-family","Microsoft Yahei")}}},reportError:function(e,f,h,b){var d="pc uncaught error: "+e+" "+f+" "+h+" "+b+" v"+main.appVersion();var c=new HttpRequest("logging",{message:d});HttpAjax.sendRequest(c,function(i,j){main.log("reportError: "+i+" "+j)});if(e){var a=e.indexOf("permission denied");if(a>=0){var g=remote.getCurrentWindow();dialog.showMessageBoxV2(null,{type:"warning",title:LOCAL("Tips"),message:e.substr(a),buttons:[LOCAL("OK")],defaultId:0,cancelId:0},function(i){})}}},root:function(){return this.mRoot}});UndoType=defineClass({statics:{kUndoText:0,kUndoAddNode:1,kUndoDeleteNode:2,kUndoInsertNode:3,kUndoMove:4,kUndoCopy:5,kUndoAddLink:6,kUndoDeleteLink:7,kUndoAddSummary:8,kUndoDeleteSummary:9,kUndoShrink:10,kUndoExpand:11,kUndoAddPhoto:12,kUndoDeletePhoto:13,kUndoMark:14,kUndoUnmark:15,kUndoColor:16,kUndoAddRemark:17,kUndoDeleteRemark:18,kUndoAddURL:19,kUndoDeleteURL:20,kUndoAddAudio:21,kUndoDeleteAudio:22,kUndoAddFile:23,kUndoDeleteFile:24,kUndoAddLatex:25,kUndoDeleteLatex:26,kUndoResizePhoto:27,kUndoDeleteTopic:28,kUndoSwitchAddBtnDisplay:29}});UndoOperation=defineClass({init:function(c,b){this.mNode=c;this.mType=b;switch(b){case UndoType.kUndoText:this.mPrevText=c.textView().text();break;case UndoType.kUndoAddNode:case UndoType.kUndoDeleteNode:case UndoType.kUndoMove:case UndoType.kUndoCopy:this.mPrevParent=c.parent();if(this.mPrevParent){this.mPrevPosition=this.mPrevParent.children().indexOf(c);if(this.mPrevPosition==-1){this.mPrevLeft=true;this.mPrevPosition=this.mPrevParent.children2().indexOf(c)}}break;case UndoType.kUndoInsertNode:this.mPrevParent=c.parent();if(this.mPrevParent){var a=this.mPrevParent.children().indexOf(c);if(a==-1){this.mPrevLeft=true}}break;case UndoType.kUndoAddSummary:case UndoType.kUndoDeleteSummary:break;case UndoType.kUndoAddPhoto:case UndoType.kUndoDeletePhoto:this.mImageName=c.imageName();this.mImageSize=c.imageSize();break;case UndoType.kUndoMark:case UndoType.kUndoUnmark:this.mMarkType=c.markType();break;case UndoType.kUndoColor:this.mLineColorHex=c.lineColorHex();break;case UndoType.kUndoAddRemark:case UndoType.kUndoDeleteRemark:this.mRemark=c.remark();break;case UndoType.kUndoAddURL:case UndoType.kUndoDeleteURL:this.mURL=c.url();break;case UndoType.kUndoAddFile:case UndoType.kUndoDeleteFile:this.mFileName=c.fileName();break;case UndoType.kUndoAddLatex:case UndoType.kUndoDeleteLatex:this.mLatex=c.latex();break;case UndoType.kUndoResizePhoto:this.mImageSize=c.imageView().size();this.mImageResize=c.imageResize();break}},revert:function(){var a=new UndoOperation(this.mNode,this.mType);switch(a.type()){case UndoType.kUndoAddNode:case UndoType.kUndoDeleteNode:a.mPrevParent=this.mPrevParent;a.mPrevPosition=this.mPrevPosition;a.mPrevLeft=this.mPrevLeft;break;case UndoType.kUndoInsertNode:a.mPrevParent=this.mPrevParent;a.mPrevLeft=this.mPrevLeft;break;case UndoType.kUndoAddLink:case UndoType.kUndoDeleteLink:a.mLinkPath=this.mLinkPath;break;case UndoType.kUndoAddSummary:case UndoType.kUndoDeleteSummary:a.mSummary=this.mSummary;break;case UndoType.kUndoAddPhoto:case UndoType.kUndoDeletePhoto:a.mImageName=this.mImageName;a.mImageSize=this.mImageSize;break;case UndoType.kUndoMark:case UndoType.kUndoUnmark:a.mMarkType=this.mMarkType;break;case UndoType.kUndoAddRemark:case UndoType.kUndoDeleteRemark:a.mRemark=this.mRemark;break;case UndoType.kUndoAddURL:case UndoType.kUndoDeleteURL:a.mURL=this.mURL;break;case UndoType.kUndoAddFile:case UndoType.kUndoDeleteFile:a.mFileName=this.mFileName;break;case UndoType.kUndoAddLatex:case UndoType.kUndoDeleteLatex:a.mLatex=this.mLatex;break;case UndoType.kUndoResizePhoto:a.mImageSize=this.mNode.imageView().size();a.mImageResize=this.mNode.imageResize();break;case UndoType.kUndoDeleteTopic:a.mTopicCtrl=this.mTopicCtrl;a.mTopicIndex=this.mTopicIndex;break}return a},node:function(){return this.mNode},type:function(){return this.mType},prevText:function(){return this.mPrevText},prevParent:function(){return this.mPrevParent},prevPosition:function(){return this.mPrevPosition},prevLeft:function(){return this.mPrevLeft},setLinkPath:function(a){this.mLinkPath=a},linkPath:function(){return this.mLinkPath},setLinkPath:function(a){this.mLinkPath=a},linkPath:function(){return this.mLinkPath},setSummary:function(a){this.mSummary=a},summary:function(){return this.mSummary},imageName:function(){return this.mImageName},imageSize:function(){return this.mImageSize},markType:function(){return this.mMarkType},lineColorHex:function(){return this.mLineColorHex},remark:function(){return this.mRemark},url:function(){return this.mURL},fileName:function(){return this.mFileName},latex:function(){return this.mLatex},imageResize:function(){return this.mImageResize},setTopicCtrl:function(a){this.mTopicCtrl=a},topicCtrl:function(){return this.mTopicCtrl},setTopicIndex:function(a){this.mTopicIndex=a},topicIndex:function(){return this.mTopicIndex}});UndoStatusDidChangeNotification="UndoStatusDidChangeNotification";UndoManager=defineClass({init:function(a){this.mGraphView=a;this.mUndoStack=[];this.mRedoStack=[]},setTextOutlineController:function(a){this.mTextOutlineCtrl=a},pushUndo:function(a,b){var c=!this.canUndo();this.mUndoStack.push(a);if(!b){if(!c){c=this.canRedo()}this.mRedoStack=[]}if(c){NSNotificationCenter.defaultCenter().postNotificationName(UndoStatusDidChangeNotification)}},pushUndoNode:function(c,b){var a=new UndoOperation(c,b);this.pushUndo(a);return a},popUndo:function(){var a=this.mUndoStack.pop();if(!this.canUndo()){NSNotificationCenter.defaultCenter().postNotificationName(UndoStatusDidChangeNotification)}return a},canUndo:function(){return this.mUndoStack.length>0},lastUndo:function(){var a=this.mUndoStack.length;if(a>0){return this.mUndoStack[a-1]}return null},removeUndo:function(a){this.mUndoStack.remove(a);if(!this.canUndo()){NSNotificationCenter.defaultCenter().postNotificationName(UndoStatusDidChangeNotification)}},pushRedo:function(a){var b=!this.canRedo();this.mRedoStack.push(a);if(b){NSNotificationCenter.defaultCenter().postNotificationName(UndoStatusDidChangeNotification)}},popRedo:function(){var a=this.mRedoStack.pop();if(!this.canRedo()){NSNotificationCenter.defaultCenter().postNotificationName(UndoStatusDidChangeNotification)}return a},cleanRedos:function(){var a=this.canRedo();this.mRedoStack=[];if(a){NSNotificationCenter.defaultCenter().postNotificationName(UndoStatusDidChangeNotification)}},canRedo:function(){return this.mRedoStack.length>0},undo:function(){var b=this.popUndo();if(b){var c=b.revert();this.pushRedo(c);var g=b.node();switch(b.type()){case UndoType.kUndoText:g.setText(b.prevText());this.mGraphView.layoutTextViewWithNode(g,true);break;case UndoType.kUndoAddNode:case UndoType.kUndoCopy:g.removeFromParent();g.deletePhotos();this.mGraphView.layoutNodeTree();break;case UndoType.kUndoDeleteNode:var f=b.prevParent();if(f){if(b.prevLeft()){f.insertNode2AtIndex(g,b.prevPosition())}else{f.insertNodeAtIndex(g,b.prevPosition())}this.mGraphView.layoutNodeTree()}break;case UndoType.kUndoInsertNode:var f=g.parent();g.removeFromParent();var e=g.children().slice();e.forEach(function(i){i.removeFromParent();if(b.prevLeft()){f.addNode2(i)}else{f.addNode(i)}});this.mGraphView.layoutNodeTree(f);break;case UndoType.kUndoMove:var f=b.prevParent();if(f){g.removeFromParent();if(b.prevLeft()){f.insertNode2AtIndex(g,b.prevPosition())}else{f.insertNodeAtIndex(g,b.prevPosition())}this.mGraphView.layoutNodeTree()}break;case UndoType.kUndoAddLink:var h=b.linkPath();g.detachLinkPath(h);break;case UndoType.kUndoDeleteLink:var h=b.linkPath();g.attachLinkPath(h);break;case UndoType.kUndoAddSummary:var d=b.summary();g.detachSummary(d);break;case UndoType.kUndoDeleteSummary:var d=b.summary();g.summarizeTo(d);break;case UndoType.kUndoShrink:g.setShrink(false);this.mGraphView.layoutNodeTree();break;case UndoType.kUndoExpand:g.setShrink(true);this.mGraphView.layoutNodeTree();break;case UndoType.kUndoAddPhoto:g.setImage(null);break;case UndoType.kUndoDeletePhoto:g.setImage(b.imageName(),b.imageSize());break;case UndoType.kUndoMark:g.setMarkType(0);break;case UndoType.kUndoUnmark:g.setMarkType(b.markType());break;case UndoType.kUndoColor:g.setLineColorHex(b.lineColorHex());this.mGraphView.setNeedsDisplay();break;case UndoType.kUndoAddRemark:g.setRemark(null);break;case UndoType.kUndoDeleteRemark:g.setRemark(b.remark());break;case UndoType.kUndoAddURL:g.setURL(null);break;case UndoType.kUndoDeleteURL:g.setURL(b.url());break;case UndoType.kUndoAddFile:g.setFileName(null);break;case UndoType.kUndoDeleteFile:g.setFileName(b.fileName());break;case UndoType.kUndoAddLatex:g.setLatex(null);break;case UndoType.kUndoDeleteLatex:g.setLatex(b.latex());break;case UndoType.kUndoResizePhoto:g.imageView().setSize(b.imageSize());g.setImageResize(b.imageResize());this.mGraphView.layoutNodeTree();break;case UndoType.kUndoDeleteTopic:var a=UIApplication.sharedApplication().delegate().root();a.addTopicAtIndex(b.topicCtrl(),b.topicIndex());break;case UndoType.kUndoSwitchAddBtnDisplay:var a=UIApplication.sharedApplication().delegate().root();a.switchDisplayAddingButton();break}this.undoTextOutline(b)}},undoTextOutline:function(a){if(this.mTextOutlineCtrl){var f=this.mTextOutlineCtrl.findTextOutlineView(a.node());switch(a.type()){case UndoType.kUndoText:f.textView().setText(a.prevText());f.layoutTextView();break;case UndoType.kUndoAddNode:case UndoType.kUndoCopy:var e=f.superview();e.removeOutlineView(f);break;case UndoType.kUndoDeleteNode:var e=this.mTextOutlineCtrl.findTextOutlineView(a.prevParent());if(e){var g=new TextOutlineView(a.node(),e);g.setDelegate(this.mTextOutlineCtrl);g.build(e.maxWidth()-25);e.addSubview(g);e.subOutlineViews().splice(a.prevPosition(),0,g);e.requestLayout()}break;case UndoType.kUndoMove:var d=this.mTextOutlineCtrl.findTextOutlineView(a.prevParent());if(d){var e=f.superview();e.removeOutlineView(f);d.addSubview(f);d.subOutlineViews().splice(a.prevPosition(),0,f);d.requestLayout()}break;case UndoType.kUndoInsertNode:var e=this.mTextOutlineCtrl.findTextOutlineView(a.prevParent());e.removeOutlineView(f);var c=f.subOutlineViews().slice();if(a.prevLeft()){c.forEach(function(){f.removeOutlineView(h);e.addSubview(h);e.subOutlineViews().push(h)})}else{for(var b=c.length-1;b>=0;b--){var h=c[b];f.removeOutlineView(h);e.addSubview(h);e.subOutlineViews().splice(0,0,h)}}e.requestLayout();break;case UndoType.kUndoShrink:f.build();break;case UndoType.kUndoExpand:f.build();break;case UndoType.kUndoMark:f.setMarkType(0);break;case UndoType.kUndoUnmark:f.setMarkType(a.markType());break;case UndoType.kUndoAddRemark:case UndoType.kUndoDeleteRemark:f.updateRemarkBtnDisplay(true);break;case UndoType.kUndoAddURL:case UndoType.kUndoDeleteURL:f.updateURLBtnDisplay(true);break;case UndoType.kUndoAddFile:case UndoType.kUndoDeleteFile:f.updateFileBtnDisplay(true);break;case UndoType.kUndoAddPhoto:f.setImage(null);f.requestLayout();break;case UndoType.kUndoDeletePhoto:f.setImage(a.node().imageView().image());f.requestLayout();break;case UndoType.kUndoResizePhoto:f.imageView().setSize(a.imageSize());f.requestLayout();break;default:break}}},redo:function(){var c=this.popRedo();if(c){var b=c.revert();this.pushUndo(b,true);var g=c.node();switch(c.type()){case UndoType.kUndoText:g.setText(c.prevText());this.mGraphView.layoutTextViewWithNode(g,true);break;case UndoType.kUndoAddNode:case UndoType.kUndoCopy:var f=c.prevParent();if(c.prevLeft()){f.insertNode2AtIndex(g,c.prevPosition())}else{f.insertNodeAtIndex(g,c.prevPosition())}this.mGraphView.layoutNodeTree();break;case UndoType.kUndoDeleteNode:g.removeFromParent();g.deletePhotos();this.mGraphView.layoutNodeTree();break;case UndoType.kUndoInsertNode:var f=c.prevParent();var e=c.prevLeft()?f.children2().slice():f.children().slice();e.forEach(function(i){i.removeFromParent();g.addNode(i)});if(c.prevLeft()){f.addNode2(g)}else{f.addNode(g)}this.mGraphView.layoutNodeTree(g);break;case UndoType.kUndoMove:var f=c.prevParent();if(f){g.removeFromParent();if(c.prevLeft()){f.insertNode2AtIndex(g,c.prevPosition())}else{f.insertNodeAtIndex(g,c.prevPosition())}this.mGraphView.layoutNodeTree()}break;case UndoType.kUndoAddLink:var h=c.linkPath();g.attachLinkPath(h);break;case UndoType.kUndoDeleteLink:var h=c.linkPath();g.detachLinkPath(h);break;case UndoType.kUndoAddSummary:var d=c.summary();g.summarizeTo(d);break;case UndoType.kUndoDeleteSummary:var d=b.summary();g.detachSummary(d);break;case UndoType.kUndoShrink:g.setShrink(true);this.mGraphView.layoutNodeTree();break;case UndoType.kUndoExpand:g.setShrink(false);this.mGraphView.layoutNodeTree();break;case UndoType.kUndoAddPhoto:g.setImage(c.imageName(),c.imageSize());break;case UndoType.kUndoDeletePhoto:g.setImage(null);break;case UndoType.kUndoMark:g.setMarkType(c.markType());break;case UndoType.kUndoUnmark:g.setMarkType(0);break;case UndoType.kUndoColor:g.setLineColorHex(c.lineColorHex());this.mGraphView.setNeedsDisplay();break;case UndoType.kUndoAddRemark:g.setRemark(c.remark());break;case UndoType.kUndoDeleteRemark:g.setRemark(null);break;case UndoType.kUndoAddURL:g.setURL(c.url());break;case UndoType.kUndoDeleteURL:g.setURL(null);break;case UndoType.kUndoAddFile:g.setFileName(c.fileName());break;case UndoType.kUndoDeleteFile:g.setFileName(null);break;case UndoType.kUndoAddLatex:g.setLatex(c.latex());break;case UndoType.kUndoDeleteLatex:g.setLatex(null);break;case UndoType.kUndoResizePhoto:g.imageView().setSize(c.imageSize());g.setImageResize(c.imageResize());this.mGraphView.layoutNodeTree();break;case UndoType.kUndoDeleteTopic:var a=UIApplication.sharedApplication().delegate().root();a.removeTopicAtIndex(b.topicIndex());break;case UndoType.kUndoSwitchAddBtnDisplay:var a=UIApplication.sharedApplication().delegate().root();a.switchDisplayAddingButton();break}this.redoTextOutline(c)}},redoTextOutline:function(a){if(this.mTextOutlineCtrl){var e=this.mTextOutlineCtrl.findTextOutlineView(a.node());switch(a.type()){case UndoType.kUndoText:e.textView().setText(a.prevText());e.layoutTextView();break;case UndoType.kUndoAddNode:case UndoType.kUndoCopy:var d=this.mTextOutlineCtrl.findTextOutlineView(a.prevParent());var g=new TextOutlineView(a.node(),d);g.setDelegate(this.mTextOutlineCtrl);g.build(d.maxWidth()-25);d.addSubview(g);d.subOutlineViews().splice(a.prevPosition(),0,g);d.requestLayout();break;case UndoType.kUndoDeleteNode:var d=e.superview();d.removeOutlineView(e);break;case UndoType.kUndoMove:var c=this.mTextOutlineCtrl.findTextOutlineView(a.prevParent());if(c){var d=e.superview();d.removeOutlineView(e);c.addSubview(e);c.subOutlineViews().splice(a.prevPosition(),0,e);c.requestLayout()}break;case UndoType.kUndoInsertNode:var d=this.mTextOutlineCtrl.findTextOutlineView(a.prevParent());var g=new TextOutlineView(a.node(),d);g.setDelegate(this.mTextOutlineCtrl);g.build(d.maxWidth()-25);var b;if(!a.prevParent().parent()){if(a.prevLeft()){var h=a.prevParent().children().length;var f=d.subOutlineViews().length-h;b=d.subOutlineViews().slice(h,h+f)}else{var h=0;var f=d.subOutlineViews().length-a.prevParent().children2().length;b=d.subOutlineViews().slice(h,h+f)}}else{b=d.subOutlineViews().slice()}b.forEach(function(i){d.removeOutlineView(i)});d.addSubview(g);if(a.prevLeft()){d.subOutlineViews().push(g)}else{d.subOutlineViews().splice(0,0,g)}d.requestLayout();break;case UndoType.kUndoShrink:e.build();break;case UndoType.kUndoExpand:e.build();break;case UndoType.kUndoMark:e.setMarkType(a.markType());break;case UndoType.kUndoUnmark:e.setMarkType(0);break;case UndoType.kUndoAddRemark:case UndoType.kUndoDeleteRemark:e.updateRemarkBtnDisplay(true);break;case UndoType.kUndoAddURL:case UndoType.kUndoDeleteURL:e.updateURLBtnDisplay(true);break;case UndoType.kUndoAddFile:case UndoType.kUndoDeleteFile:e.updateFileBtnDisplay(true);break;case UndoType.kUndoAddPhoto:e.setImage(a.node().imageView().image());e.requestLayout();break;case UndoType.kUndoDeletePhoto:e.setImage(null);e.requestLayout();break;case UndoType.kUndoResizePhoto:e.imageView().setSize(a.imageSize());e.requestLayout();break;default:break}}}});RichTextToolbar=defineClass({superClass:UIView,init:function(d){UIView.call(this,d);this.layer().css("border-width","1px");this.layer().css("border-style","solid");var j=new UIScrollView(this.bounds());this.addSubview(j);this.mButtons=[];var k=this;var e=new RichTextToolbarButton(new CGRect(0,0,46,30));e.setImage(new UIImage("res/richtext_bold.png",24,24),UIControl.State.Normal);e.addTarget(function(i){k.onBold(i)},UIControl.Events.TouchUpInside);j.addSubview(e);this.mButtons.push(e);var g=new RichTextToolbarButton(new CGRect(46,0,46,30));g.setImage(new UIImage("res/richtext_underline.png",24,24),UIControl.State.Normal);g.addTarget(function(i){k.onUnderline(i)},UIControl.Events.TouchUpInside);j.addSubview(g);this.mButtons.push(g);var f=new RichTextToolbarButton(new CGRect(92,0,46,30));f.setImage(new UIImage("res/richtext_strikethrough.png",24,24),UIControl.State.Normal);f.addTarget(function(i){k.onStrikethrough(i)},UIControl.Events.TouchUpInside);j.addSubview(f);this.mButtons.push(f);var c=new RichTextToolbarButton(new CGRect(138,0,46,30));c.setImage(new UIImage("res/richtext_fontplus.png",24,24),UIControl.State.Normal);c.addTarget(function(i){k.onFontPlus(i)},UIControl.Events.TouchUpInside);j.addSubview(c);this.mButtons.push(c);var b=new RichTextToolbarButton(new CGRect(184,0,46,30));b.setImage(new UIImage("res/richtext_fontmin.png",24,24),UIControl.State.Normal);b.addTarget(function(i){k.onFontMinus(i)},UIControl.Events.TouchUpInside);j.addSubview(b);this.mButtons.push(b);var a=["#000000","#FF0000","#007AFF","#9ACD32","#FF8C00","#D15FEE","#B22222","#B7B7B7"];for(var h=0;h<a.length;h++){var e=this.buildColorBtn(a[h],230+h*46);j.addSubview(e);this.mButtons.push(e)}this.mColors=a},buildColorBtn:function(c,e){var d=new UIButton(new CGRect(e,0,46,30));var a=new UIView(new CGRect(0,0,16,16));a.setTag(100);a.setBackgroundColor(c);a.layer().css("border-radius","8px");a.setCenter(new CGPoint(d.width()/2,d.height()/2));d.addSubview(a);var b=this;d.addTarget(function(f){b.onTextColor(f)},UIControl.Events.TouchUpInside);return d},setOutlineView:function(a){this.mOutlineView=a;this.setNode(a.node())},setNode:function(a){this.mNode=a;if(a.textView().isBold()){this.mButtons[0].layer().css("filter","brightness(0%)")}else{this.mButtons[0].layer().css("filter","")}if(a.textView().isUnderline()){this.mButtons[1].layer().css("filter","brightness(0%)")}else{this.mButtons[1].layer().css("filter","")}if(a.textView().isStrikethrough()){this.mButtons[2].layer().css("filter","brightness(0%)")}else{this.mButtons[2].layer().css("filter","")}},onBold:function(b){var a=!this.mNode.textView().isBold();this.mNode.textView().setBold(a);b.setHighlighted2(a);this.mNode.styles()["bold"]=(a?1:0);if(this.mOutlineView){this.mOutlineView.textView().setBold(a)}},onUnderline:function(a){var b=!this.mNode.textView().isUnderline();this.mNode.textView().setUnderline(b);a.setHighlighted2(b);this.mButtons[2].layer().css("filter","");delete this.mNode.styles()["strikethrough"];this.mNode.styles()["underline"]=(b?1:0);if(this.mOutlineView){this.mOutlineView.textView().setUnderline(b)}},onStrikethrough:function(b){var a=!this.mNode.textView().isStrikethrough();this.mNode.textView().setStrikethrough(a);b.setHighlighted2(a);this.mButtons[1].layer().css("filter","");delete this.mNode.styles()["underline"];this.mNode.styles()["strikethrough"]=(a?1:0);if(this.mOutlineView){this.mOutlineView.textView().setStrikethrough(a)}},onFontPlus:function(a){var b=this.mNode.styles()["fontSize"];if(!b){b=0}b+=1;if(b>6){b=6}this.mNode.styles()["fontSize"]=b;this.mNode.updateTextFontSize();if(this.mNode.delegate()){this.mNode.delegate().layoutNodeTree(this.mNode)}if(this.mOutlineView){this.mOutlineView.updateTextFontSize();this.mOutlineView.requestLayout()}},onFontMinus:function(a){var b=this.mNode.styles()["fontSize"];if(!b){b=0}b-=1;if(b<-6){b=-6}this.mNode.styles()["fontSize"]=b;this.mNode.updateTextFontSize();if(this.mNode.delegate()){this.mNode.delegate().layoutNodeTree(this.mNode)}if(this.mOutlineView){this.mOutlineView.updateTextFontSize();this.mOutlineView.requestLayout()}},onTextColor:function(c){var b=this.mButtons.indexOf(c)-5;var a=this.mColors[b];this.mNode.styles()["color"]=a;this.mNode.textView().setTextColor(this.mNode.textColor());if(this.mOutlineView){this.mOutlineView.textView().setTextColor(this.mNode.textColor())}},updateWithDisplayNight:function(a){if(a){this.setBackgroundColor("#413d39");this.layer().css("border-color","#222222");this.mColors[0]="#E2E1E1"}else{this.setBackgroundColor("white");this.layer().css("border-color","#ececec");this.mColors[0]="#000000"}this.mButtons[5].viewWithTag(100).setBackgroundColor(this.mColors[0])}});RichTextToolbarButton=defineClass({superClass:UIButton,init:function(a){UIButton.call(this,a)},onStateChange:function(a){UIButton.prototype.onStateChange.call(this,a);if(a==UIControl.State.Highlighted){this.layer().css("filter","brightness(0%)")}else{this.layer().css("filter","")}},setHighlighted2:function(a){if(a){this.layer().css("filter","brightness(0%)")}else{this.layer().css("filter","")}}});AppSettings=defineClass({statics:{defaultSettings:function(){if(!AppSettings.object){AppSettings.object=new AppSettings()}return AppSettings.object},FONT_SIZE_LARGE2:21,FONT_SIZE_LARGE:18,FONT_SIZE_NORMAL:15,FONT_SIZE_SMALL:12,CONTENT_BACKGROUND_COLOR_DARK:"#302d2a",CONTENT_BACKGROUND_COLOR_LIGHT:"#ffffff"},init:function(){var b=NSUserDefaults.standardUserDefaults();var c=b.objectForKey("fontSize");if(!c){c=AppSettings.FONT_SIZE_NORMAL}this.mFontSize=c;var a=b.objectForKey("newlineWordNumber");this.mMaxCharNumPerLine=a?a:20;this.mMaxWidthPerLineTable={}},maxCharNumPerLine:function(){return this.mMaxCharNumPerLine},setMaxCharNumPerLine:function(a){this.mMaxCharNumPerLine=a;this.mMaxWidthPerLineTable=[];var b=NSUserDefaults.standardUserDefaults();b.setObjectForKey(a,"newlineWordNumber");b.synchronize()},maxWidthPerLine:function(e){var c=this.mMaxWidthPerLineTable[e];if(!c){var b=new UITextView();b.setFontSize(e+"px");b.setLineHeight((e+5)+"px");var f="";for(var a=0;a<this.mMaxCharNumPerLine;a++){f+="国"}b.setText(f);var d=b.sizeThatFits(new CGSize(Number.MAX_VALUE,Number.MAX_VALUE));c=d.width;this.mMaxWidthPerLineTable[e]=c}return c},fontSize:function(){return this.mFontSize},setFontSize:function(b){this.mFontSize=b;var a=NSUserDefaults.standardUserDefaults();a.setObjectForKey(b,"fontSize");a.synchronize()}});LatexView=defineClass({superClass:UIView,init:function(a){UIView.call(this,a)},latex:function(){return this.mLatex},setLatex:function(b){this.mLatex=b;if(this.mLatexSpan){this.mLatexSpan.detach()}var a=katex.renderToString(b,{throwOnError:false});this.mLatexSpan=$(a);this.mLatexSpan.css("position","absolute");if(this.mTextColor){this.mLatexSpan.css("color",this.mTextColor)}this.layer().append(this.mLatexSpan)},setTextColor:function(a){if(this.mLatexSpan){this.mLatexSpan.css("color",a)}this.mTextColor=a},layoutInCenter:function(){this.mLatexSpan.css({left:Math.max(0,(this.width()-this.mLatexSpan.width())/2),top:Math.max(0,(this.height()-this.mLatexSpan.height())/2)})},sizeThatFits:function(b){var d=this.mLatexSpan;if(d){$("body").append(d);var c=d.width();var a=d.height();this.layer().append(d);return new CGSize(c*1.2,a+10)}return new CGSize()},imageView:function(){return this.mImageView},generateImageUrl:function(){if(this.mLatex){if(this.mImageView){this.mImageView.removeFromSuperview()}var a=parseInt(this.width());var h=parseInt(this.height());var c=new BrowserWindow({show:false,width:1280,height:960,webPreferences:{nodeIntegration:true}});var g=app.getPath("userData")+pathSeparator()+"Main"+pathSeparator()+"katex.html";if(!fs.existsSync(g)){g="katex.html"}var f={src:this.mLatex};var b=1;var e=$("body").css("font-size");if(e){var d=e.indexOf("px");if(d!=-1){b=2;var j=e.substr(0,d);f.fontsize=(j*b)+"px"}}c.loadFile(g,{query:f});var i=this;c.webContents.on("did-finish-load",function(){setTimeout(function(){if(dialog.showMessageBoxSync){c.webContents.capturePage({x:8,y:8,width:a*b,height:h*b}).then(function(k){i.buildImageView(k);c.destroy()})}else{c.webContents.capturePage({x:8,y:8,width:a*b,height:h*b},function(k){i.buildImageView(k);c.destroy()})}},1000)})}},buildImageView:function(b){var a=b.toDataURL();this.mImageView=new UIImageView(this.bounds());this.mImageView.setImage(a);this.mImageView.setHidden(true);this.addSubview(this.mImageView);main.log("generate latex image: "+a.length)}});LatexViewController=defineClass({superClass:UIViewController,init:function(a){UIViewController.call(this);this.mNode=a},viewDidLoad:function(){UIViewController.prototype.viewDidLoad.call(this);var d=new UITextView(new CGRect(1,0,this.view().width()-6,(this.view().height()-10)/2));d.setAutoresizingMask(UIView.Autoresizing.FlexibleSize|UIView.Autoresizing.FlexibleTopMargin|UIView.Autoresizing.FlexibleBottomMargin);d.setFontSize("18px");d.layer().css("border","0");d.setTag(100);var g=NSUserDefaults.standardUserDefaults();var f=g.objectForKey("nightDisplay");d.setBackgroundColor(f?"#393939":"white");d.setTextColor(f?"white":"black");var c=this;d.layer().keyup(function(){c.textViewDidChange()});this.view().addSubview(d);this.view().setBackgroundColor("transparent");this.mTextView=d;var a=new LatexView(new CGRect(5,d.bottom()+15,this.view().width()-10,this.view().height()-this.mTextView.bottom()-20));a.setAutoresizingMask(UIView.Autoresizing.FlexibleSize|UIView.Autoresizing.FlexibleTopMargin|UIView.Autoresizing.FlexibleBottomMargin);a.setTextColor(f?"white":"black");if(process.platform!="darwin"&&!f){a.setBackgroundColor("#fafafa")}this.view().addSubview(a);this.mLatexView=a;var b=new UILabel();b.setText(LOCAL("LaTeX Preview"));b.setFontSize(20);b.setTextColor("gray");b.sizeToFit();b.setCenter(new CGPoint(a.width()/2,a.height()/2));b.setAutoresizingMask(UIView.Autoresizing.FlexibleMargin);a.addSubview(b);this.mPreviewLabel=b;var e=new LatexShortcutToolbar(new CGRect(10,this.mTextView.bottom()-45,this.view().width()-20,40));e.setAutoresizingMask(UIView.Autoresizing.FlexibleWidth|UIView.Autoresizing.FlexibleTopMargin|UIView.Autoresizing.FlexibleBottomMargin);e.setShortcutDelegate(this);this.view().addSubview(e)},viewDidAppear:function(){UIViewController.prototype.viewDidAppear.call(this);if(this.mNode.latex()){this.mTextView.setText(this.mNode.latex());this.textViewDidChange()}if(this.mTextView.text().length==0){var a=this;setTimeout(function(){a.mTextView.becomeFirstResponder()},50)}},textViewDidChange:function(){var a=this.mTextView.text();this.mLatexView.setLatex(a);this.mLatexView.layoutInCenter();this.mPreviewLabel.setHidden(a.length>0)},latextShortcutDidClick:function(a){var c=a;if(a.indexOf("\\")==0){c=" "+c+" "}else{if(a=="{ }"){c="{}"}else{if(a=="( )"){c="()"}else{if(a==" _ "){c="_"}else{if(a==" ^ "){c="^"}}}}}var e=this.mTextView.layer()[0].selectionStart;var b=this.mTextView.layer()[0].selectionEnd;var d=this.mTextView.text();if(e!=undefined&&b!=undefined){d=d.substring(0,e)+c+d.substring(b);this.mTextView.setText(d);this.mTextView.layer()[0].setSelectionRange(e+c.length,e+c.length)}else{d+=c;this.mTextView.setText(d)}this.mTextView.becomeFirstResponder()}});LatexShortcutToolbar=defineClass({superClass:UIScrollView,init:function(e){UIScrollView.call(this,e);var b=[" _ "," ^ ","{ }","( )"," = "," + "," - ","\\times","\\div","\\pm","\\neq","\\approx","\\geq","\\leq","\\frac","\\prime","\\sqrt","\\int","\\sum","\\prod","\\lim","\\log","\\sin","\\cos","\\tan","\\cot","\\sec","\\csc","\\pi","\\infty","\\theta","\\varphi","\\mu","\\sigma","\\xi","\\dot","\\vec","\\partial","\\nabla","\\to"];var a=0;var f=10;var d=this;var c=(process.platform!="darwin")?UIColor.systemThemeColor:"#FFA54F";b.forEach(function(g){var h=new UIButton();h.setTitle(g,UIControl.State.Normal);h.setTitleColor(c,UIControl.State.Normal);h.addTarget(function(i){d.onLatexBtnClick(i)},UIControl.Events.TouchUpInside);h.titleLabel().setFontSize("13px");h.layer().css("border-style","solid");h.layer().css("border-width","1");h.layer().css("border-color",c);h.layer().css("border-radius","3px");h.sizeToFit();h.setFrame(new CGRect(a,f,h.width()+12,20));a+=h.width()+10;d.addSubview(h)})},onLatexBtnClick:function(b){var a=b.titleLabel().text();if(this.mShortcutDelegate){this.mShortcutDelegate.latextShortcutDidClick(a)}},setShortcutDelegate:function(a){this.mShortcutDelegate=a}});ImageSelectionView=defineClass({superClass:UIView,init:function(a){UIView.call(this,a)},drawRect:function(a){a.lineJoin="round";a.lineCap="round";a.lineWidth=2;a.strokeStyle="#00BFFF";a.strokeRect(3,3,this.width()-6,this.height()-6);a.beginPath();a.moveTo(2,2);a.lineTo(12,2);a.moveTo(this.width()/2-5,2);a.lineTo(this.width()/2+5,2);a.moveTo(this.width()-12,2);a.lineTo(this.width()-2,2);a.moveTo(2,this.height()-2);a.lineTo(12,this.height()-2);a.moveTo(this.width()/2-5,this.height()-2);a.lineTo(this.width()/2+5,this.height()-2);a.moveTo(this.width()-12,this.height()-2);a.lineTo(this.width()-2,this.height()-2);a.moveTo(2,2);a.lineTo(2,12);a.moveTo(2,this.height()/2-5);a.lineTo(2,this.height()/2+5);a.moveTo(2,this.height()-12);a.lineTo(2,this.height()-2);a.moveTo(this.width()-2,2);a.lineTo(this.width()-2,12);a.moveTo(this.width()-2,this.height()/2-5);a.lineTo(this.width()-2,this.height()/2+5);a.moveTo(this.width()-2,this.height()-12);a.lineTo(this.width()-2,this.height()-2);a.stroke()}});NodeSummary=defineClass({init:function(b,a,c){this.mNode=b;this.mToNodeID=a;this.mSummarizedTextBounds=new CGRect();this.mOffset=new CGPoint();this.setText(c)},initWithCoder:function(a){this.mToNodeID=a.decodeObjectForKey("ID");this.mColor=a.decodeObjectForKey("color");var c=a.decodeObjectForKey("offset");if(c){this.mOffset=c}var b=a.decodeObjectForKey("text");this.setText(b)},encodeWithCoder:function(a){a.encodeObjectForKey(this.mToNodeID,"ID");a.encodeObjectForKey(this.mCtrlPoint,"ctrlPoint");a.encodeObjectForKey(this.mText,"text");a.encodeObjectForKey(this.mColor,"color");a.encodeObjectForKey(this.mOffset,"offset")},node:function(){return this.mNode},setNode:function(a){this.mNode=a},toNodeID:function(){return this.mToNodeID},textView:function(){return this.mTextView},setText:function(c){this.mText=c;if(!this.mTextView){var b=new UILabel(new CGRect(0,0,MindNode.MIN_TEXT_LEN,MindNode.MIN_TEXT_HEIGHT));b.setNumberOfLines(0);b.setFontSize("15px");b.setLineHeight("20px");b.setTextAlignment("left");b.setTextColor(this.colorOnDraw(MindNode.DisplayDark));this.mTextView=b}this.mTextView.setText(c);var a=this.mTextView.sizeThatFits(new CGSize(305,Number.MAX_VALUE));this.mTextView.setSize(new CGSize(a.width,a.height))},text:function(){return this.mText},setColor:function(a){this.mColor=a},color:function(){return this.mColor},colorOnDraw:function(a){if(this.mColor=="gray"){return a?"#F1F1F1":"#666666"}else{return this.mColor?this.mColor:"red"}},setSummarizedTextBounds:function(a){this.mSummarizedTextBounds=new CGRect(a)},summarizedTextBounds:function(){return new CGRect(this.mSummarizedTextBounds)},setOffset:function(a){this.mOffset=new CGPoint(a)},offset:function(){return new CGPoint(this.mOffset)},adjustingSelectionBounds:function(b){var a=this.summarizedTextBounds();a.size.width=this.mTextView.width()+48;if(b){a.origin.x-=(this.mTextView.width()+48)}return a}});MindStyleContext=defineClass({init:function(a){if(a){this.fontName=a.decodeObjectForKey("fontName");this.themeColorHexs=a.decodeObjectForKey("themeColors");this.backgroundColorHex=a.decodeObjectForKey("backgroundColor");this.lineKeepThin=a.decodeBoolForKey("lineKeepThin");this.layoutCompact=a.decodeBoolForKey("layoutCompact")}},displayStyle:function(){return MindNode.DisplayStyle},displayStyleBasic:function(){return parseInt(this.displayStyle()/100)*100},displayStyleTheme:function(){return this.displayStyle()-this.displayStyleBasic()},defaultThemeColorHexs:function(){var a=this.displayStyleTheme();switch(a){case 0:return["#DC306C","#BF58F5","#26BBFF","#37C45A","#1BD6E7","#FFC700"];case 1:return["#836FFF"];case 2:return["#90A58D"];case 3:default:return["#444444"]}}});const electron=require("electron");const remote=electron.remote;const ipcRenderer=electron.ipcRenderer;const shell=electron.shell;const clipboard=electron.clipboard;const app=remote.app;const dialog=remote.dialog;const Menu=remote.Menu;const globalShortcut=remote.globalShortcut;const nativeImage=remote.nativeImage;const BrowserWindow=remote.BrowserWindow;const fs=require("fs");const main=remote.require("./main.js");function stringRandom(d){var e="";for(var c=0;c<d;c++){var b;if(Math.random()>0.5){b=65+25*Math.random()}else{b=48+9*Math.random()}e+=String.fromCharCode(Math.round(b))}return e}function GetQueryString(a){var b=new RegExp("(^|&)"+a+"=([^&]*)(&|$)");var c=window.location.search.substr(1).match(b);if(c!=null){return decodeURIComponent(c[2])}return null}function isWXApp(){return"miniprogram"==window.__wxjs_environment||window.location.href.indexOf("wxapp")!=-1}function isBaiduApp(){return window.location.href.indexOf("baiduapp")!=-1}function toArrayBuffer(b){var d=new ArrayBuffer(b.length);var a=new Uint8Array(d);for(var c=0;c<b.length;++c){a[c]=b[c]}return d}function deleteFolderRecursive(h,a){try{if(fs.existsSync(h)){var d=fs.statSync(h);if(d.isDirectory()){var f=fs.readdirSync(h);for(var c=0;c<f.length;c++){var b=h+pathSeparator()+f[c];deleteFolderRecursive(b)}if(!a){fs.rmdirSync(h)}}else{if(!a){fs.unlinkSync(h)}}}}catch(g){main.log(g.stack)}}function floatValue(a){var d=0;if(a){var c=a.split(".");for(var b=0;b<c.length;b++){d+=parseInt(c[b])*Math.pow(0.1,b)}}return d}function idfaForDevice(){var b=NSUserDefaults.standardUserDefaults();var a=b.objectForKey("idfa");if(!a){a="77"+stringRandom(18);b.setObjectForKey(a,"idfa")}return a}function isMasVersion(){var a=app.getPath("documents");return a.indexOf("/Containers/czh.mindnode.mac")!=-1}function isMasForReview(){if(isMasVersion()){var a=new Date();return a.getTime()<1647568800*1000}return false}function isWinStoreVersion(){var a=app.getPath("exe");return a.indexOf("13490ZhanhuiChen.MindLine")!=-1}function isWinStoreForReview(){if(isWinStoreVersion()){var a=new Date();return a.getTime()<1648692000*1000}return false}function recursiveMakeDir(d,e){var b=d.substring(e.length+1);var a=b.split(/\/|\\/);var c=e;a.forEach(function(f){c=c+pathSeparator()+f;if(!fs.existsSync(c)){fs.mkdirSync(c)}})}function imageCachePath(){return app.getPath("userData")+pathSeparator()+"Images"+pathSeparator()}function screen_width(){return UIScreen.mainScreen().bounds().size.width}function isSmallSizeScreen(){return screen_width()<830}function isMiniWebProgram(){return"miniprogram"==window.__wxjs_environment||window.location.href.indexOf("wxapp")!=-1||window.location.href.indexOf("baiduapp")!=-1}dialog.showMessageBoxV2=function(b,a,c){if(dialog.showMessageBoxSync){dialog.showMessageBox(b,a).then(function(d){if(c){c(d.response)}})}else{dialog.showMessageBox(b,a,c)}};dialog.showOpenDialogV2=function(b,a,c){if(dialog.showOpenDialogSync){dialog.showOpenDialog(b,a).then(function(d){if(c){c(d.filePaths)}})}else{dialog.showOpenDialog(b,a,c)}};dialog.showSaveDialogV2=function(b,a,c){if(dialog.showSaveDialogSync){dialog.showSaveDialog(b,a).then(function(d){if(c){c(d.filePath)}})}else{dialog.showSaveDialog(b,a,c)}};UIApplicationMain(UIApplication,AppDelegate);(function(c,a){typeof exports==="object"&&typeof module!=="undefined"?module.exports=a():typeof define==="function"&&define.amd?define(a):(c.jspdf=a())}(this,function(){var c=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol==="function"&&s.constructor===Symbol?"symbol":typeof s};var i=function(w){var v="1.3",t={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};function s(x){var y={};this.subscribe=function(z,C,A){if(typeof C!=="function"){return false}if(!y.hasOwnProperty(z)){y[z]={}}var B=Math.random().toString(35);y[z][B]=[C,!!A];return B};this.unsubscribe=function(A){for(var z in y){if(y[z][A]){delete y[z][A];return true}}return false};this.publish=function(A){if(y.hasOwnProperty(A)){var z=Array.prototype.slice.call(arguments,1),D=[];for(var E in y[A]){var C=y[A][E];try{C[0].apply(x,z)}catch(B){if(w.console){console.error("jsPDF PubSub Error",B.message,B)}}if(C[1]){D.push(E)}}if(D.length){D.forEach(this.unsubscribe)}}}}function u(aP,a2,L,aA){var az={};if((typeof aP==="undefined"?"undefined":c(aP))==="object"){az=aP;aP=az.orientation;a2=az.unit||a2;L=az.format||L;aA=az.compress||az.compressPdf||aA}a2=a2||"mm";L=L||"a4";aP=(""+(aP||"P")).toLowerCase();var ak=(""+L).toLowerCase(),aW=!!aA&&typeof Uint8Array==="function",an=az.textColor||"0 g",au=az.drawColor||"0 G",ae=az.fontSize||16,aK=az.lineHeight||1.15,av=az.lineWidth||0.200025,y=2,Q=!1,P=[],aR={},aH={},T,al,A,aC=0,aD,M=[],a5=[],aB=[],U=[],a0=[],aY=0,af=0,aJ=0,a3,a4,aN,aF,ab,ai={title:"",subject:"",author:"",keywords:"",creator:""},ay={},R=new s(ay),J=function J(a6){return a6.toFixed(2)},I=function I(a6){return a6.toFixed(3)},aS=function aS(a6){return("0"+parseInt(a6)).slice(-2)},aZ=function aZ(a6){if(Q){M[aD].push(a6)}else{aJ+=a6.length+1;U.push(a6)}},S=function S(){y++;P[y]=aJ;aZ(y+" 0 obj");return y},aG=function aG(){var a6=M.length*2+1;a6+=a0.length;var a7={objId:a6,content:""};a0.push(a7);return a7},Y=function Y(){y++;P[y]=function(){return aJ};return y},H=function H(a6){P[a6]=aJ},x=function x(a6){aZ("stream");aZ(a6);aZ("endstream")},aM=function aM(){var a8,a7,bb,ba,bc,a9,bf,bg,be,bd=[];bf=w.adler32cs||u.adler32cs;if(aW&&typeof bf==="undefined"){aW=false}for(a8=1;a8<=aC;a8++){bd.push(S());bg=(a3=aB[a8].width)*al;be=(a4=aB[a8].height)*al;aZ("<</Type /Page");aZ("/Parent 1 0 R");aZ("/Resources 2 0 R");aZ("/MediaBox [0 0 "+J(bg)+" "+J(be)+"]");R.publish("putPage",{pageNumber:a8,page:M[a8]});aZ("/Contents "+(y+1)+" 0 R");aZ(">>");aZ("endobj");a7=M[a8].join("\n");S();if(aW){bb=[];ba=a7.length;while(ba--){bb[ba]=a7.charCodeAt(ba)}a9=bf.from(a7);bc=new e(6);bc.append(new Uint8Array(bb));a7=bc.flush();bb=new Uint8Array(a7.length+6);bb.set(new Uint8Array([120,156])),bb.set(a7,2);bb.set(new Uint8Array([a9&255,a9>>8&255,a9>>16&255,a9>>24&255]),a7.length+2);a7=String.fromCharCode.apply(null,bb);aZ("<</Length "+a7.length+" /Filter [/FlateDecode]>>")}else{aZ("<</Length "+a7.length+">>")}x(a7);aZ("endobj")}P[1]=aJ;aZ("1 0 obj");aZ("<</Type /Pages");var a6="/Kids [";for(ba=0;ba<aC;ba++){a6+=bd[ba]+" 0 R "}aZ(a6+"]");aZ("/Count "+aC);aZ(">>");aZ("endobj");R.publish("postPutPages")},V=function V(a6){a6.objectNumber=S();aZ("<</BaseFont/"+a6.PostScriptName+"/Type/Font");if(typeof a6.encoding==="string"){aZ("/Encoding/"+a6.encoding)}aZ("/Subtype/Type1>>");aZ("endobj")},Z=function Z(){for(var a6 in aR){if(aR.hasOwnProperty(a6)){V(aR[a6])}}},ar=function ar(){R.publish("putXobjectDict")},G=function G(){aZ("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]");aZ("/Font <<");for(var a6 in aR){if(aR.hasOwnProperty(a6)){aZ("/"+a6+" "+aR[a6].objectNumber+" 0 R")}}aZ(">>");aZ("/XObject <<");ar();aZ(">>")},aq=function aq(){Z();R.publish("putResources");P[2]=aJ;aZ("2 0 obj");aZ("<<");G();aZ(">>");aZ("endobj");R.publish("postPutResources")},ac=function ac(){R.publish("putAdditionalObjects");for(var a6=0;a6<a0.length;a6++){var a7=a0[a6];P[a7.objId]=aJ;aZ(a7.objId+" 0 obj");aZ(a7.content);aZ("endobj")}y+=a0.length;R.publish("postPutAdditionalObjects")},aQ=function aQ(a7,a6,a8){if(!aH.hasOwnProperty(a6)){aH[a6]={}}aH[a6][a8]=a7},W=function W(a6,a9,bb,a8){var ba="F"+(Object.keys(aR).length+1).toString(10),a7=aR[ba]={id:ba,PostScriptName:a6,fontName:a9,fontStyle:bb,encoding:a8,metadata:{}};aQ(ba,a9,bb);R.publish("addFont",a7);return ba},aV=function aV(){var a6="helvetica",bh="times",bj="courier",bf="normal",be="bold",bd="italic",bi="bolditalic",a7="StandardEncoding",bg="zapfdingbats",ba=[["Helvetica",a6,bf],["Helvetica-Bold",a6,be],["Helvetica-Oblique",a6,bd],["Helvetica-BoldOblique",a6,bi],["Courier",bj,bf],["Courier-Bold",bj,be],["Courier-Oblique",bj,bd],["Courier-BoldOblique",bj,bi],["Times-Roman",bh,bf],["Times-Bold",bh,be],["Times-Italic",bh,bd],["Times-BoldItalic",bh,bi],["ZapfDingbats",bg]];for(var bc=0,a8=ba.length;bc<a8;bc++){var bb=W(ba[bc][0],ba[bc][1],ba[bc][2],a7);var a9=ba[bc][0].split("-");aQ(bb,a9[0],a9[1]||"")}R.publish("addFonts",{fonts:aR,dictionary:aH})},ah=function aw(a7){a7.foo=function a6(){try{return a7.apply(this,arguments)}catch(ba){var a9=ba.stack||"";if(~a9.indexOf(" at ")){a9=a9.split(" at ")[1]}var a8="Error in function "+a9.split("\n")[0].split("<")[0]+": "+ba.message;if(w.console){w.console.error(a8,ba);if(w.alert){alert(a8)}}else{throw new Error(a8)}}};a7.foo.bar=a7;return a7.foo},z=function z(bg,a8){var bc,ba,a9,be,bd,a7,bf,a6,bb;a8=a8||{};a9=a8.sourceEncoding||"Unicode";bd=a8.outputEncoding;if((a8.autoencode||bd)&&aR[T].metadata&&aR[T].metadata[a9]&&aR[T].metadata[a9].encoding){be=aR[T].metadata[a9].encoding;if(!bd&&aR[T].encoding){bd=aR[T].encoding}if(!bd&&be.codePages){bd=be.codePages[0]}if(typeof bd==="string"){bd=be[bd]}if(bd){bf=false;a7=[];for(bc=0,ba=bg.length;bc<ba;bc++){a6=bd[bg.charCodeAt(bc)];if(a6){a7.push(String.fromCharCode(a6))}else{a7.push(bg[bc])}if(a7[bc].charCodeAt(0)>>8){bf=true}}bg=a7.join("")}}bc=bg.length;while(bf===undefined&&bc!==0){if(bg.charCodeAt(bc-1)>>8){bf=true}bc--}if(!bf){return bg}a7=a8.noBOM?[]:[254,255];for(bc=0,ba=bg.length;bc<ba;bc++){a6=bg.charCodeAt(bc);bb=a6>>8;if(bb>>8){throw new Error("Character at position "+bc+" of string '"+bg+"' exceeds 16bits. Cannot be encoded into UCS-2 BE")}a7.push(bb);a7.push(a6-(bb<<8))}return String.fromCharCode.apply(undefined,a7)},aU=function aU(a7,a6){return z(a7,a6).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},aO=function aO(){aZ("/Producer (jsPDF "+u.version+")");for(var ba in ai){if(ai.hasOwnProperty(ba)&&ai[ba]){aZ("/"+ba.substr(0,1).toUpperCase()+ba.substr(1)+" ("+aU(ai[ba])+")")}}var bc=new Date(),a8=bc.getTimezoneOffset(),a7=a8<0?"+":"-",a6=Math.floor(Math.abs(a8/60)),a9=Math.abs(a8%60),bb=[a7,aS(a6),"'",aS(a9),"'"].join("");aZ(["/CreationDate (D:",bc.getFullYear(),aS(bc.getMonth()+1),aS(bc.getDate()),aS(bc.getHours()),aS(bc.getMinutes()),aS(bc.getSeconds()),bb,")"].join(""))},D=function D(){aZ("/Type /Catalog");aZ("/Pages 1 0 R");if(!aF){aF="fullwidth"}switch(aF){case"fullwidth":aZ("/OpenAction [3 0 R /FitH null]");break;case"fullheight":aZ("/OpenAction [3 0 R /FitV null]");break;case"fullpage":aZ("/OpenAction [3 0 R /Fit]");break;case"original":aZ("/OpenAction [3 0 R /XYZ null null 1]");break;default:var a6=""+aF;if(a6.substr(a6.length-1)==="%"){aF=parseInt(aF)/100}if(typeof aF==="number"){aZ("/OpenAction [3 0 R /XYZ null null "+J(aF)+"]")}}if(!ab){ab="continuous"}switch(ab){case"continuous":aZ("/PageLayout /OneColumn");break;case"single":aZ("/PageLayout /SinglePage");break;case"two":case"twoleft":aZ("/PageLayout /TwoColumnLeft");break;case"tworight":aZ("/PageLayout /TwoColumnRight");break}if(aN){aZ("/PageMode /"+aN)}R.publish("putCatalog")},C=function C(){aZ("/Size "+(y+1));aZ("/Root "+y+" 0 R");aZ("/Info "+(y-1)+" 0 R")},F=function F(a8,a6){var a7=typeof a6==="string"&&a6.toLowerCase();if(typeof a8==="string"){var a9=a8.toLowerCase();if(t.hasOwnProperty(a9)){a8=t[a9][0]/al;a6=t[a9][1]/al}}if(Array.isArray(a8)){a6=a8[1];a8=a8[0]}if(a7){switch(a7.substr(0,1)){case"l":if(a6>a8){a7="s"}break;case"p":if(a8>a6){a7="s"}break}if(a7==="s"){A=a8;a8=a6;a6=A}}Q=true;M[++aC]=[];aB[aC]={width:Number(a8)||a3,height:Number(a6)||a4};a5[aC]={};ao(aC)},ax=function ax(){F.apply(this,arguments);aZ(J(av*al)+" w");aZ(au);if(aY!==0){aZ(aY+" J")}if(af!==0){aZ(af+" j")}R.publish("addPage",{pageNumber:aC})},a1=function a1(a6){if(a6>0&&a6<=aC){M.splice(a6,1);aB.splice(a6,1);aC--;if(aD>aC){aD=aC}this.setPage(aD)}},ao=function ao(a6){if(a6>0&&a6<=aC){aD=a6;a3=aB[a6].width;a4=aB[a6].height}},aI=function aI(a7,a9){var a6;a7=a7!==undefined?a7:aR[T].fontName;a9=a9!==undefined?a9:aR[T].fontStyle;if(a7!==undefined){a7=a7.toLowerCase()}switch(a7){case"sans-serif":case"verdana":case"arial":case"helvetica":a7="helvetica";break;case"fixed":case"monospace":case"terminal":case"courier":a7="courier";break;case"serif":case"cursive":case"fantasy":default:a7="times";break}try{a6=aH[a7][a9]}catch(a8){}if(!a6){a6=aH.times[a9];if(a6==null){a6=aH.times["normal"]}}return a6},ap=function ap(){Q=false;y=2;aJ=0;U=[];P=[];a0=[];R.publish("buildDocument");aZ("%PDF-"+v);aM();ac();aq();S();aZ("<<");aO();aZ(">>");aZ("endobj");S();aZ("<<");D();aZ(">>");aZ("endobj");var a9=aJ,a6,a7="0000000000";aZ("xref");aZ("0 "+(y+1));aZ(a7+" 65535 f ");for(a6=1;a6<=y;a6++){var a8=P[a6];if(typeof a8==="function"){aZ((a7+P[a6]()).slice(-10)+" 00000 n ")}else{aZ((a7+P[a6]).slice(-10)+" 00000 n ")}}aZ("trailer");aZ("<<");C();aZ(">>");aZ("startxref");aZ(""+a9);aZ("%%EOF");Q=true;return U.join("\n")},aL=function aL(a6){var a7="S";if(a6==="F"){a7="f"}else{if(a6==="FD"||a6==="DF"){a7="B"}else{if(a6==="f"||a6==="f*"||a6==="B"||a6==="B*"){a7=a6}}}return a7},E=function E(){var a9=ap(),a6=a9.length,a8=new ArrayBuffer(a6),a7=new Uint8Array(a8);while(a6--){a7[a6]=a9.charCodeAt(a6)}return a8},ad=function ad(){return new Blob([E()],{type:"application/pdf"})},O=ah(function(a9,a7){var a8=(""+a9).substr(0,6)==="dataur"?"data:application/pdf;base64,"+btoa(ap()):0;switch(a9){case undefined:return ap();case"save":if(navigator.getUserMedia){if(w.URL===undefined||w.URL.createObjectURL===undefined){return ay.output("dataurlnewwindow")}}f(ad(),a7);if(typeof f.unload==="function"){if(w.setTimeout){setTimeout(f.unload,911)}}break;case"arraybuffer":return E();case"blob":return ad();case"bloburi":case"bloburl":return w.URL&&w.URL.createObjectURL(ad())||void 0;case"datauristring":case"dataurlstring":return a8;case"dataurlnewwindow":var a6=w.open(a8);if(a6||typeof safari==="undefined"){return a6}case"datauri":case"dataurl":return w.document.location.href=a8;default:throw new Error('Output type "'+a9+'" is not supported.')}});switch(a2){case"pt":al=1;break;case"mm":al=72/25.4000508;break;case"cm":al=72/2.54000508;break;case"in":al=72;break;case"px":al=96/72;break;case"pc":al=12;break;case"em":al=12;break;case"ex":al=6;break;default:throw"Invalid unit: "+a2}ay.internal={pdfEscape:aU,getStyle:aL,getFont:function am(){return aR[aI.apply(ay,arguments)]},getFontSize:function B(){return ae},getLineHeight:function at(){return ae*aK},write:function aX(a6){aZ(arguments.length===1?a6:Array.prototype.join.call(arguments," "))},getCoordinateString:function N(a6){return J(a6*al)},getVerticalCoordinateString:function aj(a6){return J((a4-a6)*al)},collections:{},newObject:S,newAdditionalObject:aG,newObjectDeferred:Y,newObjectDeferredBegin:H,putStream:x,events:R,scaleFactor:al,pageSize:{get width(){return a3},get height(){return a4}},output:function K(a7,a6){return O(a7,a6)},getNumberOfPages:function aE(){return M.length-1},pages:M,out:aZ,f2:J,getPageInfo:function aT(a6){var a7=(a6-1)*2+3;return{objId:a7,pageNumber:a6,pageContext:a5[a6]}},getCurrentPageInfo:function aa(){var a6=(aD-1)*2+3;return{objId:a6,pageNumber:aD,pageContext:a5[aD]}},getPDFVersion:function ag(){return v}};ay.addPage=function(){ax.apply(this,arguments);return this};ay.setPage=function(){ao.apply(this,arguments);return this};ay.insertPage=function(a6){this.addPage();this.movePage(aD,a6);return this};ay.movePage=function(bb,a8){if(bb>a8){var a9=M[bb];var a6=aB[bb];var ba=a5[bb];for(var a7=bb;a7>a8;a7--){M[a7]=M[a7-1];aB[a7]=aB[a7-1];a5[a7]=a5[a7-1]}M[a8]=a9;aB[a8]=a6;a5[a8]=ba;this.setPage(a8)}else{if(bb<a8){var a9=M[bb];var a6=aB[bb];var ba=a5[bb];for(var a7=bb;a7<a8;a7++){M[a7]=M[a7+1];aB[a7]=aB[a7+1];a5[a7]=a5[a7+1]}M[a8]=a9;aB[a8]=a6;a5[a8]=ba;this.setPage(a8)}}return this};ay.deletePage=function(){a1.apply(this,arguments);return this};ay.setDisplayMode=function(a7,a6,a8){aF=a7;ab=a6;aN=a8;return this},ay.text=function(bg,be,bd,ba,bo,bj){function bv(bw){bw=bw.split("\t").join(Array(az.TabLen||9).join(" "));return aU(bw,ba)}if(typeof bg==="number"){A=bd;bd=be;be=bg;bg=A}if(typeof bg==="string"){if(bg.match(/[\n\r]/)){bg=bg.split(/\r\n|\r|\n/g)}else{bg=[bg]}}if(typeof bo==="string"){bj=bo;bo=null}if(typeof ba==="string"){bj=ba;ba=null}if(typeof ba==="number"){bo=ba;ba=null}var bm="",bh="Td",bb;if(bo){bo*=Math.PI/180;var bq=Math.cos(bo),bi=Math.sin(bo);bm=[J(bq),J(bi),J(bi*-1),J(bq),""].join(" ");bh="Tm"}ba=ba||{};if(!("noBOM" in ba)){ba.noBOM=true}if(!("autoencode" in ba)){ba.autoencode=true}var bn="";var bp=this.internal.getCurrentPageInfo().pageContext;if(true===ba.stroke){if(bp.lastTextWasStroke!==true){bn="1 Tr\n";bp.lastTextWasStroke=true}}else{if(bp.lastTextWasStroke){bn="0 Tr\n"}bp.lastTextWasStroke=false}if(typeof this._runningPageHeight==="undefined"){this._runningPageHeight=0}if(typeof bg==="string"){bg=bv(bg)}else{if(Object.prototype.toString.call(bg)==="[object Array]"){var a6=bg.concat(),bt=[],bl=a6.length;while(bl--){bt.push(bv(a6.shift()))}var bf=Math.ceil((a4-bd-this._runningPageHeight)*al/(ae*aK));if(0<=bf&&bf<bt.length+1){}if(bj){var a8,a9,a7,bs=ae*aK,bu=bg.map(function(bw){return this.getStringUnitWidth(bw)*ae/al},this);a7=Math.max.apply(Math,bu);if(bj==="center"){a8=be-a7/2;be-=bu[0]/2}else{if(bj==="right"){a8=be-a7;be-=bu[0]}else{throw new Error('Unrecognized alignment option, use "center" or "right".')}}a9=be;bg=bt[0];for(var bk=1,bl=bt.length;bk<bl;bk++){var br=a7-bu[bk];if(bj==="center"){br/=2}bg+=") Tj\n"+(a8-a9+br)+" -"+bs+" Td ("+bt[bk];a9=a8+br}}else{bg=bt.join(") Tj\nT* (")}}else{throw new Error('Type of text must be string or Array. "'+bg+'" is not recognized.')}}var bc;if(bb){}else{bc=J((a4-bd)*al)}aZ("BT\n/"+T+" "+ae+" Tf\n"+ae*aK+" TL\n"+bn+an+"\n"+bm+J(be*al)+" "+bc+" "+bh+"\n("+bg+") Tj\nET");if(bb){this.text(bb,be,bd)}return this};ay.lstext=function(a9,a7,bb,ba){for(var a8=0,a6=a9.length;a8<a6;a8++,a7+=ba){this.text(a9[a8],a7,bb)}};ay.line=function(a7,a9,a6,a8){return this.lines([[a6-a7,a8-a9]],a7,a9)};ay.clip=function(){aZ("W");aZ("S")};ay.clip_fixed=function(a6){if("evenodd"===a6){aZ("W*")}else{aZ("W")}aZ("n")};ay.lines=function(bm,bj,bi,ba,a8,be){var bd,bc,bb,a9,bk,a7,bh,a6,bg,bl,bf;if(typeof bm==="number"){A=bi;bi=bj;bj=bm;bm=A}ba=ba||[1,1];aZ(I(bj*al)+" "+I((a4-bi)*al)+" m ");bd=ba[0];bc=ba[1];a9=bm.length;bl=bj;bf=bi;for(bb=0;bb<a9;bb++){bk=bm[bb];if(bk.length===2){bl=bk[0]*bd+bl;bf=bk[1]*bc+bf;aZ(I(bl*al)+" "+I((a4-bf)*al)+" l")}else{a7=bk[0]*bd+bl;bh=bk[1]*bc+bf;a6=bk[2]*bd+bl;bg=bk[3]*bc+bf;bl=bk[4]*bd+bl;bf=bk[5]*bc+bf;aZ(I(a7*al)+" "+I((a4-bh)*al)+" "+I(a6*al)+" "+I((a4-bg)*al)+" "+I(bl*al)+" "+I((a4-bf)*al)+" c")}}if(be){aZ(" h")}if(a8!==null){aZ(aL(a8))}return this};ay.rect=function(a6,bb,a7,a9,a8){var ba=aL(a8);aZ([J(a6*al),J((a4-bb)*al),J(a7*al),J(-a9*al),"re"].join(" "));if(a8!==null){aZ(aL(a8))}return this};ay.triangle=function(a9,bc,a7,ba,a6,a8,bb){this.lines([[a7-a9,ba-bc],[a6-a7,a8-ba],[a9-a6,bc-a8]],a9,bc,[1,1],bb,true);return this};ay.roundedRect=function(a7,bd,a8,ba,bc,bb,a9){var a6=4/3*(Math.SQRT2-1);this.lines([[a8-2*bc,0],[bc*a6,0,bc,bb-bb*a6,bc,bb],[0,ba-2*bb],[0,bb*a6,-(bc*a6),bb,-bc,bb],[-a8+2*bc,0],[-(bc*a6),0,-bc,-(bb*a6),-bc,-bb],[0,-ba+2*bb],[0,-(bb*a6),bc*a6,-bb,bc,-bb]],a7+bc,bd,[1,1],a9);return this};ay.ellipse=function(a6,bc,bb,ba,a7){var a9=4/3*(Math.SQRT2-1)*bb,a8=4/3*(Math.SQRT2-1)*ba;aZ([J((a6+bb)*al),J((a4-bc)*al),"m",J((a6+bb)*al),J((a4-(bc-a8))*al),J((a6+a9)*al),J((a4-(bc-ba))*al),J(a6*al),J((a4-(bc-ba))*al),"c"].join(" "));aZ([J((a6-a9)*al),J((a4-(bc-ba))*al),J((a6-bb)*al),J((a4-(bc-a8))*al),J((a6-bb)*al),J((a4-bc)*al),"c"].join(" "));aZ([J((a6-bb)*al),J((a4-(bc+a8))*al),J((a6-a9)*al),J((a4-(bc+ba))*al),J(a6*al),J((a4-(bc+ba))*al),"c"].join(" "));aZ([J((a6+a9)*al),J((a4-(bc+ba))*al),J((a6+bb)*al),J((a4-(bc+a8))*al),J((a6+bb)*al),J((a4-bc)*al),"c"].join(" "));if(a7!==null){aZ(aL(a7))}return this};ay.circle=function(a6,a9,a8,a7){return this.ellipse(a6,a9,a8,a8,a7)};ay.setProperties=function(a6){for(var a7 in ai){if(ai.hasOwnProperty(a7)&&a6[a7]){ai[a7]=a6[a7]}}return this};ay.setFontSize=function(a6){ae=a6;return this};ay.setFont=function(a6,a7){T=aI(a6,a7);return this};ay.setFontStyle=ay.setFontType=function(a6){T=aI(undefined,a6);return this};ay.getFontList=function(){var a8={},a7,a9,a6;for(a7 in aH){if(aH.hasOwnProperty(a7)){a8[a7]=a6=[];for(a9 in aH[a7]){if(aH[a7].hasOwnProperty(a9)){a6.push(a9)}}}}return a8};ay.addFont=function(a7,a6,a8){W(a7,a6,a8,"StandardEncoding")};ay.setLineWidth=function(a6){aZ((a6*al).toFixed(2)+" w");return this};ay.setDrawColor=function(ba,a9,a8,a6){var a7;if(a9===undefined||a6===undefined&&ba===a9===a8){if(typeof ba==="string"){a7=ba+" G"}else{a7=J(ba/255)+" G"}}else{if(a6===undefined){if(typeof ba==="string"){a7=[ba,a9,a8,"RG"].join(" ")}else{a7=[J(ba/255),J(a9/255),J(a8/255),"RG"].join(" ")}}else{if(typeof ba==="string"){a7=[ba,a9,a8,a6,"K"].join(" ")}else{a7=[J(ba),J(a9),J(a8),J(a6),"K"].join(" ")}}}aZ(a7);return this};ay.setFillColor=function(ba,a9,a8,a6){var a7;if(a9===undefined||a6===undefined&&ba===a9===a8){if(typeof ba==="string"){a7=ba+" g"}else{a7=J(ba/255)+" g"}}else{if(a6===undefined||(typeof a6==="undefined"?"undefined":c(a6))==="object"){if(typeof ba==="string"){a7=[ba,a9,a8,"rg"].join(" ")}else{a7=[J(ba/255),J(a9/255),J(a8/255),"rg"].join(" ")}if(a6&&a6.a===0){a7=["255","255","255","rg"].join(" ")}}else{if(typeof ba==="string"){a7=[ba,a9,a8,a6,"k"].join(" ")}else{a7=[J(ba),J(a9),J(a8),J(a6),"k"].join(" ")}}}aZ(a7);return this};ay.setTextColor=function(a9,a8,a6){if(typeof a9==="string"&&/^#[0-9A-Fa-f]{6}$/.test(a9)){var a7=parseInt(a9.substr(1),16);a9=a7>>16&255;a8=a7>>8&255;a6=a7&255}if(a9===0&&a8===0&&a6===0||typeof a8==="undefined"){an=I(a9/255)+" g"}else{an=[I(a9/255),I(a8/255),I(a6/255),"rg"].join(" ")}return this};ay.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2};ay.setLineCap=function(a6){var a7=this.CapJoinStyles[a6];if(a7===undefined){throw new Error("Line cap style of '"+a6+"' is not recognized. See or extend .CapJoinStyles property for valid styles")}aY=a7;aZ(a7+" J");return this};ay.setLineJoin=function(a6){var a7=this.CapJoinStyles[a6];if(a7===undefined){throw new Error("Line join style of '"+a6+"' is not recognized. See or extend .CapJoinStyles property for valid styles")}af=a7;aZ(a7+" j");return this};ay.output=O;ay.save=function(a6){ay.output("save",a6)};for(var X in u.API){if(u.API.hasOwnProperty(X)){if(X==="events"&&u.API.events.length){(function(a8,ba){var a9,a7,a6;for(a6=ba.length-1;a6!==-1;a6--){a9=ba[a6][0];a7=ba[a6][1];a8.subscribe.apply(a8,[a9].concat(typeof a7==="function"?[a7]:a7))}})(R,u.API.events)}else{ay[X]=u.API[X]}}}aV();T="F1";ax(L,aP);R.publish("initialized");return ay}u.API={events:[]};u.version="1.3.2 2016-09-30T20:33:17.116Z:jameshall";if(typeof define==="function"&&define.amd){define("jsPDF",function(){return u})}else{if(typeof module!=="undefined"&&module.exports){module.exports=u}else{w.jsPDF=u}}return u}(typeof self!=="undefined"&&self||typeof window!=="undefined"&&window||undefined);window.tmp=i;(window.AcroForm=function(y){var C=window.AcroForm;C.scale=function(G){return G*(D.internal.scaleFactor/1)};C.antiScale=function(G){return 1/D.internal.scaleFactor*G};var D={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:false,internal:null};i.API.acroformPlugin=D;var t=function t(){for(var G in this.acroformPlugin.acroFormDictionaryRoot.Fields){var H=this.acroformPlugin.acroFormDictionaryRoot.Fields[G];if(H.hasAnnotation){F.call(this,H)}}};var s=function s(){if(this.acroformPlugin.acroFormDictionaryRoot){throw new Error("Exception while creating AcroformDictionary")}this.acroformPlugin.acroFormDictionaryRoot=new C.AcroFormDictionary();this.acroformPlugin.internal=this.internal;this.acroformPlugin.acroFormDictionaryRoot._eventID=this.internal.events.subscribe("postPutResources",B);this.internal.events.subscribe("buildDocument",t);this.internal.events.subscribe("putCatalog",z);this.internal.events.subscribe("postPutPages",v)};var F=function F(H){var G={type:"reference",object:H};i.API.annotationPlugin.annotations[this.internal.getPageInfo(H.page).pageNumber].push(G)};var E=function E(G){if(this.acroformPlugin.printedOut){this.acroformPlugin.printedOut=false;this.acroformPlugin.acroFormDictionaryRoot=null}if(!this.acroformPlugin.acroFormDictionaryRoot){s.call(this)}this.acroformPlugin.acroFormDictionaryRoot.Fields.push(G)};var z=function z(){if(typeof this.acroformPlugin.acroFormDictionaryRoot!="undefined"){this.internal.write("/AcroForm "+this.acroformPlugin.acroFormDictionaryRoot.objId+" "+0+" R")}else{console.log("Root missing...")}};var B=function B(){this.internal.events.unsubscribe(this.acroformPlugin.acroFormDictionaryRoot._eventID);delete this.acroformPlugin.acroFormDictionaryRoot._eventID;this.acroformPlugin.printedOut=true};var v=function v(Q){var M=!Q;if(!Q){this.internal.newObjectDeferredBegin(this.acroformPlugin.acroFormDictionaryRoot.objId);this.internal.out(this.acroformPlugin.acroFormDictionaryRoot.getString())}var Q=Q||this.acroformPlugin.acroFormDictionaryRoot.Kids;for(var J in Q){var P=J;var G=Q[J];var N=G.Rect;if(G.Rect){G.Rect=C.internal.calculateCoordinates.call(this,G.Rect)}this.internal.newObjectDeferredBegin(G.objId);var L="";L+=G.objId+" 0 obj\n";L+="<<\n"+G.getContent();G.Rect=N;if(G.hasAppearanceStream&&!G.appearanceStreamContent){var K=C.internal.calculateAppearanceStream.call(this,G);L+="/AP << /N "+K+" >>\n";this.acroformPlugin.xForms.push(K)}if(G.appearanceStreamContent){L+="/AP << ";for(var H in G.appearanceStreamContent){var O=G.appearanceStreamContent[H];L+="/"+H+" ";L+="<< ";if(Object.keys(O).length>=1||Array.isArray(O)){for(var J in O){var I=O[J];if(typeof I==="function"){I=I.call(this,G)}L+="/"+J+" "+I+" ";if(!(this.acroformPlugin.xForms.indexOf(I)>=0)){this.acroformPlugin.xForms.push(I)}}}else{var I=O;if(typeof I==="function"){I=I.call(this,G)}L+="/"+J+" "+I+" \n";if(!(this.acroformPlugin.xForms.indexOf(I)>=0)){this.acroformPlugin.xForms.push(I)}}L+=" >>\n"}L+=">>\n"}L+=">>\nendobj\n";this.internal.out(L)}if(M){A.call(this,this.acroformPlugin.xForms)}};var A=function A(K){for(var H in K){var G=H;var J=K[H];this.internal.newObjectDeferredBegin(J&&J.objId);var I="";I+=J?J.getString():"";this.internal.out(I);delete K[G]}};y.addField=function(G){if(G instanceof C.TextField){u.call(this,G)}else{if(G instanceof C.ChoiceField){w.call(this,G)}else{if(G instanceof C.Button){x.call(this,G)}else{if(G instanceof C.ChildClass){E.call(this,G)}else{if(G){E.call(this,G)}}}}}G.page=this.acroformPlugin.internal.getCurrentPageInfo().pageNumber;return this};var x=function x(H){var H=H||new C.Field();H.FT="/Btn";var G=H.Ff||0;if(H.pushbutton){G=C.internal.setBitPosition(G,17);delete H.pushbutton}if(H.radio){G=C.internal.setBitPosition(G,16);delete H.radio}if(H.noToggleToOff){G=C.internal.setBitPosition(G,15)}H.Ff=G;E.call(this,H)};var u=function u(H){var H=H||new C.Field();H.FT="/Tx";var G=H.Ff||0;if(H.multiline){G=G|1<<12}if(H.password){G=G|1<<13}if(H.fileSelect){G=G|1<<20}if(H.doNotSpellCheck){G=G|1<<22}if(H.doNotScroll){G=G|1<<23}H.Ff=H.Ff||G;E.call(this,H)};var w=function w(I){var H=I||new C.Field();H.FT="/Ch";var G=H.Ff||0;if(H.combo){G=C.internal.setBitPosition(G,18);delete H.combo}if(H.edit){G=C.internal.setBitPosition(G,19);delete H.edit}if(H.sort){G=C.internal.setBitPosition(G,20);delete H.sort}if(H.multiSelect&&this.internal.getPDFVersion()>=1.4){G=C.internal.setBitPosition(G,22);delete H.multiSelect}if(H.doNotSpellCheck&&this.internal.getPDFVersion()>=1.4){G=C.internal.setBitPosition(G,23);delete H.doNotSpellCheck}H.Ff=G;E.call(this,H)}})(i.API);var o=window.AcroForm;o.internal={};o.createFormXObject=function(v){var t=new o.FormXObject();var s=o.Appearance.internal.getHeight(v)||0;var u=o.Appearance.internal.getWidth(v)||0;t.BBox=[0,0,u,s];return t};o.Appearance={CheckBox:{createAppearanceStream:function d(){var s={N:{On:o.Appearance.CheckBox.YesNormal},D:{On:o.Appearance.CheckBox.YesPushDown,Off:o.Appearance.CheckBox.OffPushDown}};return s},createMK:function a(){return"<< /CA (3)>>"},YesPushDown:function k(v){var s=o.createFormXObject(v);var u="";v.Q=1;var t=o.internal.calculateX(v,"3","ZapfDingbats",50);u+="0.749023 g\n             0 0 "+o.Appearance.internal.getWidth(v)+" "+o.Appearance.internal.getHeight(v)+" re\n             f\n             BMC\n             q\n             0 0 1 rg\n             /F13 "+t.fontSize+" Tf 0 g\n             BT\n";u+=t.text;u+="ET\n             Q\n             EMC\n";s.stream=u;return s},YesNormal:function j(v){var s=o.createFormXObject(v);var u="";v.Q=1;var t=o.internal.calculateX(v,"3","ZapfDingbats",o.Appearance.internal.getHeight(v)*0.9);u+="1 g\n0 0 "+o.Appearance.internal.getWidth(v)+" "+o.Appearance.internal.getHeight(v)+" re\nf\nq\n0 0 1 rg\n0 0 "+(o.Appearance.internal.getWidth(v)-1)+" "+(o.Appearance.internal.getHeight(v)-1)+" re\nW\nn\n0 g\nBT\n/F13 "+t.fontSize+" Tf 0 g\n";u+=t.text;u+="ET\n             Q\n";s.stream=u;return s},OffPushDown:function p(u){var s=o.createFormXObject(u);var t="";t+="0.749023 g\n            0 0 "+o.Appearance.internal.getWidth(u)+" "+o.Appearance.internal.getHeight(u)+" re\n            f\n";s.stream=t;return s}},RadioButton:{Circle:{createAppearanceStream:function d(s){var t={D:{Off:o.Appearance.RadioButton.Circle.OffPushDown},N:{}};t.N[s]=o.Appearance.RadioButton.Circle.YesNormal;t.D[s]=o.Appearance.RadioButton.Circle.YesPushDown;return t},createMK:function a(){return"<< /CA (l)>>"},YesNormal:function j(v){var s=o.createFormXObject(v);var u="";var t=o.Appearance.internal.getWidth(v)<=o.Appearance.internal.getHeight(v)?o.Appearance.internal.getWidth(v)/4:o.Appearance.internal.getHeight(v)/4;t*=0.9;var w=o.Appearance.internal.Bezier_C;u+="q\n1 0 0 1 "+o.Appearance.internal.getWidth(v)/2+" "+o.Appearance.internal.getHeight(v)/2+" cm\n"+t+" 0 m\n"+t+" "+t*w+" "+t*w+" "+t+" 0 "+t+" c\n-"+t*w+" "+t+" -"+t+" "+t*w+" -"+t+" 0 c\n-"+t+" -"+t*w+" -"+t*w+" -"+t+" 0 -"+t+" c\n"+t*w+" -"+t+" "+t+" -"+t*w+" "+t+" 0 c\nf\nQ\n";s.stream=u;return s},YesPushDown:function k(y){var s=o.createFormXObject(y);var x="";var w=o.Appearance.internal.getWidth(y)<=o.Appearance.internal.getHeight(y)?o.Appearance.internal.getWidth(y)/4:o.Appearance.internal.getHeight(y)/4;w*=0.9;var u=w*2;var v=u*o.Appearance.internal.Bezier_C;var t=w*o.Appearance.internal.Bezier_C;x+="0.749023 g\n            q\n           1 0 0 1 "+o.Appearance.internal.getWidth(y)/2+" "+o.Appearance.internal.getHeight(y)/2+" cm\n"+u+" 0 m\n"+u+" "+v+" "+v+" "+u+" 0 "+u+" c\n-"+v+" "+u+" -"+u+" "+v+" -"+u+" 0 c\n-"+u+" -"+v+" -"+v+" -"+u+" 0 -"+u+" c\n"+v+" -"+u+" "+u+" -"+v+" "+u+" 0 c\n            f\n            Q\n            0 g\n            q\n            1 0 0 1 "+o.Appearance.internal.getWidth(y)/2+" "+o.Appearance.internal.getHeight(y)/2+" cm\n"+w+" 0 m\n"+w+" "+t+" "+t+" "+w+" 0 "+w+" c\n-"+t+" "+w+" -"+w+" "+t+" -"+w+" 0 c\n-"+w+" -"+t+" -"+t+" -"+w+" 0 -"+w+" c\n"+t+" -"+w+" "+w+" -"+t+" "+w+" 0 c\n            f\n            Q\n";s.stream=x;return s},OffPushDown:function p(x){var s=o.createFormXObject(x);var w="";var v=o.Appearance.internal.getWidth(x)<=o.Appearance.internal.getHeight(x)?o.Appearance.internal.getWidth(x)/4:o.Appearance.internal.getHeight(x)/4;v*=0.9;var t=v*2;var u=t*o.Appearance.internal.Bezier_C;w+="0.749023 g\n            q\n 1 0 0 1 "+o.Appearance.internal.getWidth(x)/2+" "+o.Appearance.internal.getHeight(x)/2+" cm\n"+t+" 0 m\n"+t+" "+u+" "+u+" "+t+" 0 "+t+" c\n-"+u+" "+t+" -"+t+" "+u+" -"+t+" 0 c\n-"+t+" -"+u+" -"+u+" -"+t+" 0 -"+t+" c\n"+u+" -"+t+" "+t+" -"+u+" "+t+" 0 c\n            f\n            Q\n";s.stream=w;return s}},Cross:{createAppearanceStream:function d(s){var t={D:{Off:o.Appearance.RadioButton.Cross.OffPushDown},N:{}};t.N[s]=o.Appearance.RadioButton.Cross.YesNormal;t.D[s]=o.Appearance.RadioButton.Cross.YesPushDown;return t},createMK:function a(){return"<< /CA (8)>>"},YesNormal:function j(u){var s=o.createFormXObject(u);var t="";var v=o.Appearance.internal.calculateCross(u);t+="q\n            1 1 "+(o.Appearance.internal.getWidth(u)-2)+" "+(o.Appearance.internal.getHeight(u)-2)+" re\n            W\n            n\n            "+v.x1.x+" "+v.x1.y+" m\n            "+v.x2.x+" "+v.x2.y+" l\n            "+v.x4.x+" "+v.x4.y+" m\n            "+v.x3.x+" "+v.x3.y+" l\n            s\n            Q\n";s.stream=t;return s},YesPushDown:function k(u){var s=o.createFormXObject(u);var v=o.Appearance.internal.calculateCross(u);var t="";t+="0.749023 g\n            0 0 "+o.Appearance.internal.getWidth(u)+" "+o.Appearance.internal.getHeight(u)+" re\n            f\n            q\n            1 1 "+(o.Appearance.internal.getWidth(u)-2)+" "+(o.Appearance.internal.getHeight(u)-2)+" re\n            W\n            n\n            "+v.x1.x+" "+v.x1.y+" m\n            "+v.x2.x+" "+v.x2.y+" l\n            "+v.x4.x+" "+v.x4.y+" m\n            "+v.x3.x+" "+v.x3.y+" l\n            s\n            Q\n";s.stream=t;return s},OffPushDown:function p(u){var s=o.createFormXObject(u);var t="";t+="0.749023 g\n            0 0 "+o.Appearance.internal.getWidth(u)+" "+o.Appearance.internal.getHeight(u)+" re\n            f\n";s.stream=t;return s}}},createDefaultAppearanceStream:function l(t){var s="";s+="/Helv 0 Tf 0 g";return s}};o.Appearance.internal={Bezier_C:0.551915024494,calculateCross:function m(y){var v=function v(A,B){return A>B?B:A};var w=o.Appearance.internal.getWidth(y);var t=o.Appearance.internal.getHeight(y);var u=v(w,t);var s=u;var x=2;var z={x1:{x:(w-u)/2,y:(t-u)/2+u},x2:{x:(w-u)/2+u,y:(t-u)/2},x3:{x:(w-u)/2,y:(t-u)/2},x4:{x:(w-u)/2+u,y:(t-u)/2+u}};return z}};o.Appearance.internal.getWidth=function(s){return s.Rect[2]};o.Appearance.internal.getHeight=function(s){return s.Rect[3]};o.internal.inherit=function(u,t){var s=Object.create||function(w){var v=function v(){};v.prototype=w;return new v()};u.prototype=Object.create(t.prototype);u.prototype.constructor=u};o.internal.arrayToPdfArray=function(v){if(Array.isArray(v)){var u=" [";for(var t in v){var s=v[t].toString();u+=s;u+=t<v.length-1?" ":""}u+="]";return u}};o.internal.toPdfString=function(s){s=s||"";if(s.indexOf("(")!==0){s="("+s}if(s.substring(s.length-1)!=")"){s+="("}return s};o.PDFObject=function(){var t;Object.defineProperty(this,"objId",{get:function s(){if(!t){if(this.internal){t=this.internal.newObjectDeferred()}else{if(i.API.acroformPlugin.internal){t=i.API.acroformPlugin.internal.newObjectDeferred()}}}if(!t){console.log("Couldn't create Object ID")}return t},configurable:false})};o.PDFObject.prototype.toString=function(){return this.objId+" 0 R"};o.PDFObject.prototype.getString=function(){var s=this.objId+" 0 obj\n<<";var t=this.getContent();s+=t+">>\n";if(this.stream){s+="stream\n";s+=this.stream;s+="endstream\n"}s+="endobj\n";return s};o.PDFObject.prototype.getContent=function(){var s=function s(y){var x="";var w=Object.keys(y).filter(function(A){return A!="content"&&A!="appearanceStreamContent"&&A.substring(0,1)!="_"});for(var v in w){var u=w[v];var z=y[u];if(z){if(Array.isArray(z)){x+="/"+u+" "+o.internal.arrayToPdfArray(z)+"\n"}else{if(z instanceof o.PDFObject){x+="/"+u+" "+z.objId+" 0 R\n"}else{x+="/"+u+" "+z+"\n"}}}}return x};var t="";t+=s(this);return t};o.FormXObject=function(){o.PDFObject.call(this);this.Type="/XObject";this.Subtype="/Form";this.FormType=1;this.BBox;this.Matrix;this.Resources="2 0 R";this.PieceInfo;var s;Object.defineProperty(this,"Length",{enumerable:true,get:function t(){return s!==undefined?s.length:0}});Object.defineProperty(this,"stream",{enumerable:false,set:function u(v){s=v},get:function t(){if(s){return s}else{return null}}})};o.internal.inherit(o.FormXObject,o.PDFObject);o.AcroFormDictionary=function(){o.PDFObject.call(this);var t=[];Object.defineProperty(this,"Kids",{enumerable:false,configurable:true,get:function s(){if(t.length>0){return t}else{return}}});Object.defineProperty(this,"Fields",{enumerable:true,configurable:true,get:function s(){return t}});this.DA};o.internal.inherit(o.AcroFormDictionary,o.PDFObject);o.Field=function(){o.PDFObject.call(this);var s;Object.defineProperty(this,"Rect",{enumerable:true,configurable:false,get:function t(){if(!s){return}var z=s;return z},set:function y(z){s=z}});var u="";Object.defineProperty(this,"FT",{enumerable:true,set:function y(z){u=z},get:function t(){return u}});var v;Object.defineProperty(this,"T",{enumerable:true,configurable:false,set:function y(z){v=z},get:function t(){if(!v||v.length<1){if(this instanceof o.ChildClass){return}return"(FieldObject"+o.Field.FieldNum+++")"}if(v.substring(0,1)=="("&&v.substring(v.length-1)){return v}return"("+v+")"}});var w;Object.defineProperty(this,"DA",{enumerable:true,get:function t(){if(!w){return}return"("+w+")"},set:function y(z){w=z}});var x;Object.defineProperty(this,"DV",{enumerable:true,configurable:true,get:function t(){if(!x){return}return x},set:function y(z){x=z}});Object.defineProperty(this,"Type",{enumerable:true,get:function t(){return this.hasAnnotation?"/Annot":null}});Object.defineProperty(this,"Subtype",{enumerable:true,get:function t(){return this.hasAnnotation?"/Widget":null}});this.BG;Object.defineProperty(this,"hasAnnotation",{enumerable:false,get:function t(){if(this.Rect||this.BC||this.BG){return true}return false}});Object.defineProperty(this,"hasAppearanceStream",{enumerable:false,configurable:true,writable:true});Object.defineProperty(this,"page",{enumerable:false,configurable:true,writable:true})};o.Field.FieldNum=0;o.internal.inherit(o.Field,o.PDFObject);o.ChoiceField=function(){o.Field.call(this);this.FT="/Ch";this.Opt=[];this.V="()";this.TI=0;this.combo=false;Object.defineProperty(this,"edit",{enumerable:true,set:function t(u){if(u==true){this._edit=true;this.combo=true}else{this._edit=false}},get:function s(){if(!this._edit){return false}return this._edit},configurable:false});this.hasAppearanceStream=true;Object.defineProperty(this,"V",{get:function s(){o.internal.toPdfString()}})};o.internal.inherit(o.ChoiceField,o.Field);window.ChoiceField=o.ChoiceField;o.ListBox=function(){o.ChoiceField.call(this)};o.internal.inherit(o.ListBox,o.ChoiceField);window.ListBox=o.ListBox;o.ComboBox=function(){o.ListBox.call(this);this.combo=true};o.internal.inherit(o.ComboBox,o.ListBox);window.ComboBox=o.ComboBox;o.EditBox=function(){o.ComboBox.call(this);this.edit=true};o.internal.inherit(o.EditBox,o.ComboBox);window.EditBox=o.EditBox;o.Button=function(){o.Field.call(this);this.FT="/Btn"};o.internal.inherit(o.Button,o.Field);window.Button=o.Button;o.PushButton=function(){o.Button.call(this);this.pushbutton=true};o.internal.inherit(o.PushButton,o.Button);window.PushButton=o.PushButton;o.RadioButton=function(){o.Button.call(this);this.radio=true;var u=[];Object.defineProperty(this,"Kids",{enumerable:true,get:function t(){if(u.length>0){return u}}});Object.defineProperty(this,"__Kids",{get:function t(){return u}});var s;Object.defineProperty(this,"noToggleToOff",{enumerable:false,get:function t(){return s},set:function v(w){s=w}})};o.internal.inherit(o.RadioButton,o.Button);window.RadioButton=o.RadioButton;o.ChildClass=function(t,s){o.Field.call(this);this.Parent=t;this._AppearanceType=o.Appearance.RadioButton.Circle;this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(s);this.F=o.internal.setBitPosition(this.F,3,1);this.MK=this._AppearanceType.createMK();this.AS="/Off";this._Name=s};o.internal.inherit(o.ChildClass,o.Field);o.RadioButton.prototype.setAppearance=function(s){if(!("createAppearanceStream" in s&&"createMK" in s)){console.log("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");return}for(var t in this.__Kids){var u=this.__Kids[t];u.appearanceStreamContent=s.createAppearanceStream(u._Name);u.MK=s.createMK()}};o.RadioButton.prototype.createOption=function(s){var u=this;var t=this.__Kids.length;var v=new o.ChildClass(u,s);this.__Kids.push(v);i.API.addField(v);return v};o.CheckBox=function(){Button.call(this);this.appearanceStreamContent=o.Appearance.CheckBox.createAppearanceStream();this.MK=o.Appearance.CheckBox.createMK();this.AS="/On";this.V="/On"};o.internal.inherit(o.CheckBox,o.Button);window.CheckBox=o.CheckBox;o.TextField=function(){o.Field.call(this);this.DA=o.Appearance.createDefaultAppearanceStream();this.F=4;var v;Object.defineProperty(this,"V",{get:function t(){if(v){return"("+v+")"}else{return v}},enumerable:true,set:function x(y){v=y}});var w;Object.defineProperty(this,"DV",{get:function t(){if(w){return"("+w+")"}else{return w}},enumerable:true,set:function x(y){w=y}});var s=false;Object.defineProperty(this,"multiline",{enumerable:false,get:function t(){return s},set:function x(y){s=y}});var u=false;Object.defineProperty(this,"MaxLen",{enumerable:true,get:function t(){return u},set:function x(y){u=y}});Object.defineProperty(this,"hasAppearanceStream",{enumerable:false,get:function t(){return this.V||this.DV}})};o.internal.inherit(o.TextField,o.Field);window.TextField=o.TextField;o.PasswordField=function(){TextField.call(this);Object.defineProperty(this,"password",{value:true,enumerable:false,configurable:false,writable:false})};o.internal.inherit(o.PasswordField,o.TextField);window.PasswordField=o.PasswordField;o.internal.calculateFontSpace=function(y,z,t){var t=t||"helvetica";var u=o.internal.calculateFontSpace.canvas||(o.internal.calculateFontSpace.canvas=document.createElement("canvas"));var w=u.getContext("2d");w.save();var s=z+" "+t;w.font=s;var v=w.measureText(y);w.fontcolor="black";var w=u.getContext("2d");v.height=w.measureText("3").width*1.5;w.restore();var x=v.width;return v};o.internal.calculateX=function(F,I,J,H){var H=H||12;var J=J||"helvetica";var W={text:"",fontSize:""};I=I.substr(0,1)=="("?I.substr(1):I;I=I.substr(I.length-1)==")"?I.substr(0,I.length-1):I;var w=I.split(" ");var Q="0 g\n";var v=H;var V=2;var S=2;var L=o.Appearance.internal.getHeight(F)||0;L=L<0?-L:L;var N=o.Appearance.internal.getWidth(F)||0;N=N<0?-N:N;var D=function D(Z,y,aa){if(Z+1<w.length){var Y=y+" "+w[Z+1];var ab=o.internal.calculateFontSpace(Y,aa+"px",J).width;var x=N-2*S;return ab<=x}else{return false}};v++;FontSize:while(true){var I="";v--;var s=o.internal.calculateFontSpace("3",v+"px",J).height;var T=F.multiline?L-v:(L-s)/2;T+=V;var U=-S;var A=U,z=T;var u=0,M=0;var C=0;var B=0;if(v==0){v=12;I="(...) Tj\n";I+="% Width of Text: "+o.internal.calculateFontSpace(I,"1px").width+", FieldWidth:"+N+"\n";break}C=o.internal.calculateFontSpace(w[0]+" ",v+"px",J).width;var t="";var O=0;Line:for(var R in w){t+=w[R]+" ";t=t.substr(t.length-1)==" "?t.substr(0,t.length-1):t;var X=parseInt(R);C=o.internal.calculateFontSpace(t+" ",v+"px",J).width;var K=D(X,t,v);var P=R>=w.length-1;if(K&&!P){t+=" ";continue}else{if(!K&&!P){if(!F.multiline){continue FontSize}else{if((s+V)*(O+2)+V>L){continue FontSize}M=X}}else{if(P){M=X}else{if(F.multiline&&(s+V)*(O+2)+V>L){continue FontSize}}}}var G="";for(var E=u;E<=M;E++){G+=w[E]+" "}G=G.substr(G.length-1)==" "?G.substr(0,G.length-1):G;C=o.internal.calculateFontSpace(G,v+"px",J).width;switch(F.Q){case 2:U=N-C-S;break;case 1:U=(N-C)/2;break;case 0:default:U=S;break}I+=U+" "+z+" Td\n";I+="("+G+") Tj\n";I+=-U+" 0 Td\n";z=-(v+V);A=U;C=0;u=M+1;O++;t="";continue Line}break}W.text=I;W.fontSize=v;return W};o.internal.calculateAppearanceStream=function(x){if(x.appearanceStreamContent){return x.appearanceStreamContent}if(!x.V&&!x.DV){return}var w="";var v=x.V||x.DV;var u=o.internal.calculateX(x,v);w+="/Tx BMC\nq\n/F1 "+u.fontSize+" Tf\n1 0 0 1 0 0 Tm\n";w+="BT\n";w+=u.text;w+="ET\n";w+="Q\nEMC\n";var t=new o.createFormXObject(x);t.stream=w;var s={N:{Normal:t}};return t};o.internal.calculateCoordinates=function(s,A,u,v){var z={};if(this.internal){var t=function t(w){return w*this.internal.scaleFactor};if(Array.isArray(s)){s[0]=o.scale(s[0]);s[1]=o.scale(s[1]);s[2]=o.scale(s[2]);s[3]=o.scale(s[3]);z.lowerLeft_X=s[0]||0;z.lowerLeft_Y=t.call(this,this.internal.pageSize.height)-s[3]-s[1]||0;z.upperRight_X=s[0]+s[2]||0;z.upperRight_Y=t.call(this,this.internal.pageSize.height)-s[1]||0}else{s=o.scale(s);A=o.scale(A);u=o.scale(u);v=o.scale(v);z.lowerLeft_X=s||0;z.lowerLeft_Y=this.internal.pageSize.height-A||0;z.upperRight_X=s+u||0;z.upperRight_Y=this.internal.pageSize.height-A+v||0}}else{if(Array.isArray(s)){z.lowerLeft_X=s[0]||0;z.lowerLeft_Y=s[1]||0;z.upperRight_X=s[0]+s[2]||0;z.upperRight_Y=s[1]+s[3]||0}else{z.lowerLeft_X=s||0;z.lowerLeft_Y=A||0;z.upperRight_X=s+u||0;z.upperRight_Y=A+v||0}}return[z.lowerLeft_X,z.lowerLeft_Y,z.upperRight_X,z.upperRight_Y]};o.internal.calculateColor=function(v,u,s){var t=new Array(3);t.r=v|0;t.g=u|0;t.b=s|0;return t};o.internal.getBitPosition=function(t,s){t=t||0;var u=1;u=u<<s-1;return t|u};o.internal.setBitPosition=function(t,s,u){t=t||0;u=u||1;var v=1;v=v<<s-1;if(u==1){var t=t|v}else{var t=t&~v}return t};(function(s){s.addHTML=function(u,A,w,E,D){if(typeof html2canvas==="undefined"&&typeof rasterizeHTML==="undefined"){throw new Error("You need either https://github.com/niklasvh/html2canvas or https://github.com/cburgmer/rasterizeHTML.js")}if(typeof A!=="number"){E=A;D=w}if(typeof E==="function"){D=E;E=null}var B=this.internal,z=B.scaleFactor,t=B.pageSize.width,C=B.pageSize.height;E=E||{};E.onrendered=function(x){A=parseInt(A)||0;w=parseInt(w)||0;var F=E.dim||{};var G=F.h||0;var L=F.w||Math.min(t,x.width/z)-A;var K="JPEG";if(E.format){K=E.format}if(x.height>C&&E.pagesplit){var H=function(){var P=0;while(1){var O=document.createElement("canvas");O.width=Math.min(t*z,x.width);O.height=Math.min(C*z,x.height-P);var M=O.getContext("2d");M.drawImage(x,0,P,x.width,O.height,0,0,O.width,O.height);var N=[O,A,P?0:w,O.width/z,O.height/z,K,null,"SLOW"];this.addImage.apply(this,N);P+=O.height;if(P>=x.height){break}this.addPage()}D(L,P,null,N)}.bind(this);if(x.nodeName==="CANVAS"){var y=new Image();y.onload=H;y.src=x.toDataURL("image/png");x=y}else{H()}}else{var I=Math.random().toString(35);var J=[x,A,w,L,G,K,I,"SLOW"];this.addImage.apply(this,J);D(L,G,I,J)}}.bind(this);if(typeof html2canvas!=="undefined"&&!E.rstz){return html2canvas(u,E)}if(typeof rasterizeHTML!=="undefined"){var v="drawDocument";if(typeof u==="string"){v=/^http/.test(u)?"drawURL":"drawHTML"}E.width=E.width||t*z;return rasterizeHTML[v](u,void 0,E).then(function(x){E.onrendered(x.image)},function(x){D(null,x)})}return null}})(i.API);(function(H){var B="addImage_",t=["jpeg","jpg","png"];var L=function L(S){var T=this.internal.newObject(),Q=this.internal.write,P=this.internal.putStream;S.n=T;Q("<</Type /XObject");Q("/Subtype /Image");Q("/Width "+S.w);Q("/Height "+S.h);if(S.cs===this.color_spaces.INDEXED){Q("/ColorSpace [/Indexed /DeviceRGB "+(S.pal.length/3-1)+" "+("smask" in S?T+2:T+1)+" 0 R]")}else{Q("/ColorSpace /"+S.cs);if(S.cs===this.color_spaces.DEVICE_CMYK){Q("/Decode [1 0 1 0 1 0 1 0]")}}Q("/BitsPerComponent "+S.bpc);if("f" in S){Q("/Filter /"+S.f)}if("dp" in S){Q("/DecodeParms <<"+S.dp+">>")}if("trns" in S&&S.trns.constructor==Array){var N="",R=0,U=S.trns.length;for(;R<U;R++){N+=S.trns[R]+" "+S.trns[R]+" "}Q("/Mask ["+N+"]")}if("smask" in S){Q("/SMask "+(T+1)+" 0 R")}Q("/Length "+S.data.length+">>");P(S.data);Q("endobj");if("smask" in S){var O="/Predictor "+S.p+" /Colors 1 /BitsPerComponent "+S.bpc+" /Columns "+S.w;var V={w:S.w,h:S.h,cs:"DeviceGray",bpc:S.bpc,dp:O,data:S.smask};if("f" in S){V.f=S.f}L.call(this,V)}if(S.cs===this.color_spaces.INDEXED){this.internal.newObject();Q("<< /Length "+S.pal.length+">>");P(this.arrayBufferToBinaryString(new Uint8Array(S.pal)));Q("endobj")}},u=function u(){var N=this.internal.collections[B+"images"];for(var O in N){L.call(this,N[O])}},x=function x(){var N=this.internal.collections[B+"images"],O=this.internal.write,Q;for(var P in N){Q=N[P];O("/I"+Q.i,Q.n,"0","R")}},J=function J(N){if(N&&typeof N==="string"){N=N.toUpperCase()}return N in H.image_compression?N:H.image_compression.NONE},y=function y(){var N=this.internal.collections[B+"images"];if(!N){this.internal.collections[B+"images"]=N={};this.internal.events.subscribe("putResources",u);this.internal.events.subscribe("putXobjectDict",x)}return N},w=function w(O){var N=0;if(O){N=Object.keys?Object.keys(O).length:function(R){var P=0;for(var Q in R){if(R.hasOwnProperty(Q)){P++}}return P}(O)}return N},K=function K(N){return typeof N==="undefined"||N===null},G=function G(N){return typeof N==="string"&&H.sHashCode(N)},s=function s(N){return t.indexOf(N)===-1},A=function A(N){return typeof H["process"+N.toUpperCase()]!=="function"},C=function C(N){return(typeof N==="undefined"?"undefined":c(N))==="object"&&N.nodeType===1},M=function M(Q,Y,P){if(Q.nodeName==="IMG"&&Q.hasAttribute("src")){var N=""+Q.getAttribute("src");if(!P&&N.indexOf("data:image/")===0){return N}if(!Y&&/\.png(?:[?#].*)?$/i.test(N)){Y="png"}}if(Q.nodeName==="CANVAS"){var O=Q}else{var O=document.createElement("canvas");O.width=Q.clientWidth||Q.width;O.height=Q.clientHeight||Q.height;var aa=O.getContext("2d");if(!aa){throw"addImage requires canvas to be supported by browser."}if(P){var W,U,T,S,ab,X,R,Z=Math.PI/180,V;if((typeof P==="undefined"?"undefined":c(P))==="object"){W=P.x;U=P.y;T=P.bg;P=P.angle}V=P*Z;S=Math.abs(Math.cos(V));ab=Math.abs(Math.sin(V));X=O.width;R=O.height;O.width=R*ab+X*S;O.height=R*S+X*ab;if(isNaN(W)){W=O.width/2}if(isNaN(U)){U=O.height/2}aa.clearRect(0,0,O.width,O.height);aa.fillStyle=T||"white";aa.fillRect(0,0,O.width,O.height);aa.save();aa.translate(W,U);aa.rotate(V);aa.drawImage(Q,-(X/2),-(R/2));aa.rotate(-V);aa.translate(-W,-U);aa.restore()}else{aa.drawImage(Q,0,0,O.width,O.height)}}return O.toDataURL((""+Y).toLowerCase()=="png"?"image/png":"image/jpeg")},E=function E(P,O){var N;if(O){for(var Q in O){if(P===O[Q].alias){N=O[Q];break}}}return N},F=function F(N,O,P){if(!N&&!O){N=-96;O=-96}if(N<0){N=-1*P.w*72/N/this.internal.scaleFactor}if(O<0){O=-1*P.h*72/O/this.internal.scaleFactor}if(N===0){N=O*P.w/P.h}if(O===0){O=N*P.h/P.w}return[N,O]},v=function v(U,T,W,O,N,Q,R){var V=F.call(this,W,O,N),P=this.internal.getCoordinateString,S=this.internal.getVerticalCoordinateString;W=V[0];O=V[1];R[Q]=N;this.internal.write("q",P(W),"0 0",P(O),P(U),S(T+O),"cm /I"+N.i,"Do Q")};H.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};H.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};H.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"};H.sHashCode=function(N){return Array.prototype.reduce&&N.split("").reduce(function(P,O){P=(P<<5)-P+O.charCodeAt(0);return P&P},0)};H.isString=function(N){return typeof N==="string"};H.extractInfoFromBase64DataURI=function(N){return(/^data:([\w]+?\/([\w]+?));base64,(.+?)$/g.exec(N))};H.supportsArrayBuffer=function(){return typeof ArrayBuffer!=="undefined"&&typeof Uint8Array!=="undefined"};H.isArrayBuffer=function(N){if(!this.supportsArrayBuffer()){return false}return N instanceof ArrayBuffer};H.isArrayBufferView=function(N){if(!this.supportsArrayBuffer()){return false}if(typeof Uint32Array==="undefined"){return false}return N instanceof Int8Array||N instanceof Uint8Array||typeof Uint8ClampedArray!=="undefined"&&N instanceof Uint8ClampedArray||N instanceof Int16Array||N instanceof Uint16Array||N instanceof Int32Array||N instanceof Uint32Array||N instanceof Float32Array||N instanceof Float64Array};H.binaryStringToUint8Array=function(P){var N=P.length;var O=new Uint8Array(N);for(var Q=0;Q<N;Q++){O[Q]=P.charCodeAt(Q)}return O};H.arrayBufferToBinaryString=function(O){if(this.isArrayBuffer(O)){O=new Uint8Array(O)}var P="";var N=O.byteLength;for(var Q=0;Q<N;Q++){P+=String.fromCharCode(O[Q])}return P};H.arrayBufferToBase64=function(Q){var P="";var S="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var Z=new Uint8Array(Q);var X=Z.byteLength;var O=X%3;var Y=X-O;var W,U,T,R;var V;for(var N=0;N<Y;N=N+3){V=Z[N]<<16|Z[N+1]<<8|Z[N+2];W=(V&16515072)>>18;U=(V&258048)>>12;T=(V&4032)>>6;R=V&63;P+=S[W]+S[U]+S[T]+S[R]}if(O==1){V=Z[Y];W=(V&252)>>2;U=(V&3)<<4;P+=S[W]+S[U]+"=="}else{if(O==2){V=Z[Y]<<8|Z[Y+1];W=(V&64512)>>10;U=(V&1008)>>4;T=(V&15)<<2;P+=S[W]+S[U]+S[T]+"="}}return P};H.createImageInfo=function(U,S,Y,X,N,W,P,V,T,R,Z,aa,O){var Q={alias:V,w:S,h:Y,cs:X,bpc:N,i:P,data:U};if(W){Q.f=W}if(T){Q.dp=T}if(R){Q.trns=R}if(Z){Q.pal=Z}if(aa){Q.smask=aa}if(O){Q.p=O}return Q};H.addImage=function(N,V,U,T,W,Q,R,Z,Y){if(typeof V!=="string"){var P=Q;Q=W;W=T;T=U;U=V;V=P}if((typeof N==="undefined"?"undefined":c(N))==="object"&&!C(N)&&"imageData" in N){var ab=N;N=ab.imageData;V=ab.format||V;U=ab.x||U||0;T=ab.y||T||0;W=ab.w||W;Q=ab.h||Q;R=ab.alias||R;Z=ab.compression||Z;Y=ab.rotation||ab.angle||Y}if(isNaN(U)||isNaN(T)){console.error("jsPDF.addImage: Invalid coordinates",arguments);throw new Error("Invalid coordinates passed to jsPDF.addImage")}var S=y.call(this),O;if(!(O=E(N,S))){var X;if(C(N)){N=M(N,V,Y)}if(K(R)){R=G(N)}if(!(O=E(R,S))){if(this.isString(N)){var aa=this.extractInfoFromBase64DataURI(N);if(aa){V=aa[2];N=atob(aa[3])}else{if(N.charCodeAt(0)===137&&N.charCodeAt(1)===80&&N.charCodeAt(2)===78&&N.charCodeAt(3)===71){V="png"}}}V=(V||"JPEG").toLowerCase();if(s(V)){throw new Error("addImage currently only supports formats "+t+", not '"+V+"'")}if(A(V)){throw new Error("please ensure that the plugin for '"+V+"' support is added")}if(this.supportsArrayBuffer()){if(!(N instanceof Uint8Array)){X=N;N=this.binaryStringToUint8Array(N)}}O=this["process"+V.toUpperCase()](N,w(S),R,J(Z),X);if(!O){throw new Error("An unkwown error occurred whilst processing the image")}}}v.call(this,U,T,W,Q,O,O.i,S);return this};var z=function z(T){var R,O,S;if(!T.charCodeAt(0)===255||!T.charCodeAt(1)===216||!T.charCodeAt(2)===255||!T.charCodeAt(3)===224||!T.charCodeAt(6)==="J".charCodeAt(0)||!T.charCodeAt(7)==="F".charCodeAt(0)||!T.charCodeAt(8)==="I".charCodeAt(0)||!T.charCodeAt(9)==="F".charCodeAt(0)||!T.charCodeAt(10)===0){throw new Error("getJpegSize requires a binary string jpeg file")}var P=T.charCodeAt(4)*256+T.charCodeAt(5);var Q=4,N=T.length;while(Q<N){Q+=P;if(T.charCodeAt(Q)!==255){throw new Error("getJpegSize could not find the size of the image")}if(T.charCodeAt(Q+1)===192||T.charCodeAt(Q+1)===193||T.charCodeAt(Q+1)===194||T.charCodeAt(Q+1)===195||T.charCodeAt(Q+1)===196||T.charCodeAt(Q+1)===197||T.charCodeAt(Q+1)===198||T.charCodeAt(Q+1)===199){O=T.charCodeAt(Q+5)*256+T.charCodeAt(Q+6);R=T.charCodeAt(Q+7)*256+T.charCodeAt(Q+8);S=T.charCodeAt(Q+9);return[R,O,S]}else{Q+=2;P=T.charCodeAt(Q)*256+T.charCodeAt(Q+1)}}},I=function I(Q){var T=Q[0]<<8|Q[1];if(T!==65496){throw new Error("Supplied data is not a JPEG")}var R=Q.length,P=(Q[4]<<8)+Q[5],S=4,V,N,U,O;while(S<R){S+=P;V=D(Q,S);P=(V[2]<<8)+V[3];if((V[1]===192||V[1]===194)&&V[0]===255&&P>7){V=D(Q,S+5);N=(V[2]<<8)+V[3];U=(V[0]<<8)+V[1];O=V[4];return{width:N,height:U,numcomponents:O}}S+=2}throw new Error("getJpegSizeFromBytes could not find the size of the image")},D=function D(N,O){return N.subarray(O,O+5)};H.processJPEG=function(Q,S,R,V,U){var P=this.color_spaces.DEVICE_RGB,O=this.decode.DCT_DECODE,N=8,T;if(this.isString(Q)){T=z(Q);return this.createImageInfo(Q,T[0],T[1],T[3]==1?this.color_spaces.DEVICE_GRAY:P,N,O,S,R)}if(this.isArrayBuffer(Q)){Q=new Uint8Array(Q)}if(this.isArrayBufferView(Q)){T=I(Q);Q=U||this.arrayBufferToBinaryString(Q);return this.createImageInfo(Q,T.width,T.height,T.numcomponents==1?this.color_spaces.DEVICE_GRAY:P,N,O,S,R)}return null};H.processJPG=function(){return this.processJPEG.apply(this,arguments)}})(i.API);(function(v){var u={annotations:[],f2:function t(w){return w.toFixed(2)},notEmpty:function s(w){if(typeof w!="undefined"){if(w!=""){return true}}}};i.API.annotationPlugin=u;i.API.events.push(["addPage",function(w){this.annotationPlugin.annotations[w.pageNumber]=[]}]);v.events.push(["putPage",function(K){var H=this.annotationPlugin.annotations[K.pageNumber];var E=false;for(var M=0;M<H.length&&!E;M++){var z=H[M];switch(z.type){case"link":if(u.notEmpty(z.options.url)||u.notEmpty(z.options.pageNumber)){E=true;break}case"reference":case"text":case"freetext":E=true;break}}if(E==false){return}this.internal.write("/Annots [");var G=this.annotationPlugin.f2;var I=this.internal.scaleFactor;var C=this.internal.pageSize.height;var x=this.internal.getPageInfo(K.pageNumber);for(var M=0;M<H.length;M++){var z=H[M];switch(z.type){case"reference":this.internal.write(" "+z.object.objId+" 0 R ");break;case"text":var N=this.internal.newAdditionalObject();var y=this.internal.newAdditionalObject();var O=z.title||"Note";var w="/Rect ["+G(z.bounds.x*I)+" "+G(C-(z.bounds.y+z.bounds.h)*I)+" "+G((z.bounds.x+z.bounds.w)*I)+" "+G((C-z.bounds.y)*I)+"] ";D="<</Type /Annot /Subtype /Text "+w+"/Contents ("+z.contents+")";D+=" /Popup "+y.objId+" 0 R";D+=" /P "+x.objId+" 0 R";D+=" /T ("+O+") >>";N.content=D;var A=N.objId+" 0 R";var L=30;var w="/Rect ["+G((z.bounds.x+L)*I)+" "+G(C-(z.bounds.y+z.bounds.h)*I)+" "+G((z.bounds.x+z.bounds.w+L)*I)+" "+G((C-z.bounds.y)*I)+"] ";D="<</Type /Annot /Subtype /Popup "+w+" /Parent "+A;if(z.open){D+=" /Open true"}D+=" >>";y.content=D;this.internal.write(N.objId,"0 R",y.objId,"0 R");break;case"freetext":var w="/Rect ["+G(z.bounds.x*I)+" "+G((C-z.bounds.y)*I)+" "+G(z.bounds.x+z.bounds.w*I)+" "+G(C-(z.bounds.y+z.bounds.h)*I)+"] ";var J=z.color||"#000000";D="<</Type /Annot /Subtype /FreeText "+w+"/Contents ("+z.contents+")";D+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+J+")";D+=" /Border [0 0 0]";D+=" >>";this.internal.write(D);break;case"link":if(z.options.name){var B=this.annotations._nameMap[z.options.name];z.options.pageNumber=B.page;z.options.top=B.y}else{if(!z.options.top){z.options.top=0}}var w="/Rect ["+G(z.x*I)+" "+G((C-z.y)*I)+" "+G(z.x+z.w*I)+" "+G(C-(z.y+z.h)*I)+"] ";var D="";if(z.options.url){D="<</Type /Annot /Subtype /Link "+w+"/Border [0 0 0] /A <</S /URI /URI ("+z.options.url+") >>"}else{if(z.options.pageNumber){var K=this.internal.getPageInfo(z.options.pageNumber);D="<</Type /Annot /Subtype /Link "+w+"/Border [0 0 0] /Dest ["+K.objId+" 0 R";z.options.magFactor=z.options.magFactor||"XYZ";switch(z.options.magFactor){case"Fit":D+=" /Fit]";break;case"FitH":D+=" /FitH "+z.options.top+"]";break;case"FitV":z.options.left=z.options.left||0;D+=" /FitV "+z.options.left+"]";break;case"XYZ":default:var F=G((C-z.options.top)*I);z.options.left=z.options.left||0;if(typeof z.options.zoom==="undefined"){z.options.zoom=0}D+=" /XYZ "+z.options.left+" "+F+" "+z.options.zoom+"]";break}}else{}}if(D!=""){D+=" >>";this.internal.write(D)}break}}this.internal.write("]")}]);v.createAnnotation=function(w){switch(w.type){case"link":this.link(w.bounds.x,w.bounds.y,w.bounds.w,w.bounds.h,w);break;case"text":case"freetext":this.annotationPlugin.annotations[this.internal.getCurrentPageInfo().pageNumber].push(w);break}};v.link=function(z,D,A,C,B){this.annotationPlugin.annotations[this.internal.getCurrentPageInfo().pageNumber].push({x:z,y:D,w:A,h:C,options:B,type:"link"})};v.link=function(z,D,A,C,B){this.annotationPlugin.annotations[this.internal.getCurrentPageInfo().pageNumber].push({x:z,y:D,w:A,h:C,options:B,type:"link"})};v.textWithLink=function(C,z,D,A){var B=this.getTextWidth(C);var w=this.internal.getLineHeight();this.text(C,z,D);D+=w*0.2;this.link(z,D-w,B,w,A);return B};v.getTextWidth=function(y){var x=this.internal.getFontSize();var w=this.getStringUnitWidth(y)*x/this.internal.scaleFactor;return w};v.getLineHeight=function(){return this.internal.getLineHeight()};return this})(i.API);(function(s){s.autoPrint=function(){var t;this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject();this.internal.write("<< /S/Named /Type/Action /N/Print >>","endobj")});this.internal.events.subscribe("putCatalog",function(){this.internal.write("/OpenAction "+t+" 0 R")});return this}})(i.API);(function(v){v.events.push(["initialized",function(){this.canvas.pdf=this}]);v.canvas={getContext:function t(w){this.pdf.context2d._canvas=this;return this.pdf.context2d},style:{}};Object.defineProperty(v.canvas,"width",{get:function s(){return this._width},set:function u(w){this._width=w;this.getContext("2d").pageWrapX=w+1}});Object.defineProperty(v.canvas,"height",{get:function s(){return this._height},set:function u(w){this._height=w;this.getContext("2d").pageWrapY=w+1}});return this})(i.API);(function(B){var s,D,y,C=3,w=13,z,t={x:undefined,y:undefined,w:undefined,h:undefined,ln:undefined},v=1,u=function u(E,I,F,G,H){t={x:E,y:I,w:F,h:G,ln:H}},A=function A(){return t},x={left:0,top:0,bottom:0};B.setHeaderFunction=function(E){z=E};B.getTextDimensions=function(E){s=this.internal.getFont().fontName;D=this.table_font_size||this.internal.getFontSize();y=this.internal.getFont().fontStyle;var I=0.264583*72/25.4,F,H;H=document.createElement("font");H.id="jsPDFCell";try{H.style.fontStyle=y}catch(G){H.style.fontWeight=y}H.style.fontName=s;H.style.fontSize=D+"pt";try{H.textContent=E}catch(G){H.innerText=E}document.body.appendChild(H);F={w:(H.offsetWidth+1)*I,h:(H.offsetHeight+1)*I};document.body.removeChild(H);return F};B.cellAddPage=function(){var E=this.margins||x;this.addPage();u(E.left,E.top,undefined,undefined);v+=1};B.cellInitialize=function(){t={x:undefined,y:undefined,w:undefined,h:undefined,ln:undefined};v=1};B.cell=function(M,L,O,H,G,J,I){var Q=A();var N=false;if(Q.ln!==undefined){if(Q.ln===J){M=Q.x+Q.w;L=Q.y}else{var K=this.margins||x;if(Q.y+Q.h+H+w>=this.internal.pageSize.height-K.bottom){this.cellAddPage();N=true;if(this.printHeaders&&this.tableHeaderRow){this.printHeaderRow(J,true)}}L=A().y+A().h;if(N){L=w+10}}}if(G[0]!==undefined){if(this.printingHeaderRow){this.rect(M,L,O,H,"FD")}else{this.rect(M,L,O,H)}if(I==="right"){if(!(G instanceof Array)){G=[G]}for(var F=0;F<G.length;F++){var P=G[F];var E=this.getStringUnitWidth(P)*this.internal.getFontSize();this.text(P,M+O-E-C,L+this.internal.getLineHeight()*(F+1))}}else{this.text(G,M+C,L+this.internal.getLineHeight())}}u(M,L,O,H,J);return this};B.arrayMax=function(J,I){var E=J[0],F,H,G;for(F=0,H=J.length;F<H;F+=1){G=J[F];if(I){if(I(E,G)===-1){E=G}}else{if(G>E){E=G}}}return E};B.table=function(T,R,ae,H,ad){if(!ae){throw"No data for PDF table"}var O=[],E=[],Y,Z,S,N,ab={},W={},M,K,ac=[],X,aa=[],L,G,P,U=false,V=true,J=12,F=x;F.width=this.internal.pageSize.width;if(ad){if(ad.autoSize===true){U=true}if(ad.printHeaders===false){V=false}if(ad.fontSize){J=ad.fontSize}if(ad.css&&typeof ad.css["font-size"]!=="undefined"){J=ad.css["font-size"]*16}if(ad.margins){F=ad.margins}}this.lnMod=0;t={x:undefined,y:undefined,w:undefined,h:undefined,ln:undefined},v=1;this.printHeaders=V;this.margins=F;this.setFontSize(J);this.table_font_size=J;if(H===undefined||H===null){O=Object.keys(ae[0])}else{if(H[0]&&typeof H[0]!=="string"){var Q=0.264583*72/25.4;for(Z=0,S=H.length;Z<S;Z+=1){Y=H[Z];O.push(Y.name);E.push(Y.prompt);W[Y.name]=Y.width*Q}}else{O=H}}if(U){P=function P(af){return af[Y]};for(Z=0,S=O.length;Z<S;Z+=1){Y=O[Z];ab[Y]=ae.map(P);ac.push(this.getTextDimensions(E[Z]||Y).w);K=ab[Y];for(X=0,N=K.length;X<N;X+=1){M=K[X];ac.push(this.getTextDimensions(M).w)}W[Y]=B.arrayMax(ac);ac=[]}}if(V){var I=this.calculateLineHeight(O,W,E.length?E:O);for(Z=0,S=O.length;Z<S;Z+=1){Y=O[Z];aa.push([T,R,W[Y],I,String(E.length?E[Z]:Y)])}this.setTableHeaderRow(aa);this.printHeaderRow(1,false)}for(Z=0,S=ae.length;Z<S;Z+=1){var I;L=ae[Z];I=this.calculateLineHeight(O,W,L);for(X=0,G=O.length;X<G;X+=1){Y=O[X];this.cell(T,R,W[Y],I,L[Y],Z+2,Y.align)}}this.lastCellPos=t;this.table_x=T;this.table_y=R;return this};B.calculateLineHeight=function(J,G,F){var K,I=0;for(var E=0;E<J.length;E++){K=J[E];F[K]=this.splitTextToSize(String(F[K]),G[K]-C);var H=this.internal.getLineHeight()*F[K].length+C;if(H>I){I=H}}return I};B.setTableHeaderRow=function(E){this.tableHeaderRow=E};B.printHeaderRow=function(G,F){if(!this.tableHeaderRow){throw"Property tableHeaderRow does not exist."}var I,K,J,L;this.printingHeaderRow=true;if(z!==undefined){var E=z(this,v);u(E[0],E[1],E[2],E[3],-1)}this.setFontStyle("bold");var H=[];for(J=0,L=this.tableHeaderRow.length;J<L;J+=1){this.setFillColor(200,200,200);I=this.tableHeaderRow[J];if(F){this.margins.top=w;I[1]=this.margins&&this.margins.top||0;H.push(I)}K=[].concat(I);this.cell.apply(this,K.concat(G))}if(H.length>0){this.setTableHeaderRow(H)}this.setFontStyle("normal");this.printingHeaderRow=false}})(i.API);(function(ac){ac.events.push(["initialized",function(){this.context2d.pdf=this;this.context2d.internal.pdf=this;this.context2d.ctx=new az();this.context2d.ctxStack=[];this.context2d.path=[]}]);ac.context2d={pageWrapXEnabled:false,pageWrapYEnabled:false,pageWrapX:9999999,pageWrapY:9999999,ctx:new az(),f2:function F(aB){return aB.toFixed(2)},fillRect:function aq(aB,aF,aC,aD){if(this._isFillTransparent()){return}aB=this._wrapX(aB);aF=this._wrapY(aF);var aE=this._matrix_map_rect(this.ctx._transform,{x:aB,y:aF,w:aC,h:aD});this.pdf.rect(aE.x,aE.y,aE.w,aE.h,"f")},strokeRect:function V(aB,aF,aC,aD){if(this._isStrokeTransparent()){return}aB=this._wrapX(aB);aF=this._wrapY(aF);var aE=this._matrix_map_rect(this.ctx._transform,{x:aB,y:aF,w:aC,h:aD});this.pdf.rect(aE.x,aE.y,aE.w,aE.h,"s")},clearRect:function G(aB,aF,aC,aD){if(this.ctx.ignoreClearRect){return}aB=this._wrapX(aB);aF=this._wrapY(aF);var aE=this._matrix_map_rect(this.ctx._transform,{x:aB,y:aF,w:aC,h:aD});this.save();this.setFillStyle("#ffffff");this.pdf.rect(aE.x,aE.y,aE.w,aE.h,"f");this.restore()},save:function P(){this.ctx._fontSize=this.pdf.internal.getFontSize();var aB=new az();aB.copy(this.ctx);this.ctxStack.push(this.ctx);this.ctx=aB},restore:function S(){this.ctx=this.ctxStack.pop();this.setFillStyle(this.ctx.fillStyle);this.setStrokeStyle(this.ctx.strokeStyle);this.setFont(this.ctx.font);this.pdf.setFontSize(this.ctx._fontSize);this.setLineCap(this.ctx.lineCap);this.setLineWidth(this.ctx.lineWidth);this.setLineJoin(this.ctx.lineJoin)},rect:function ab(aB,aE,aC,aD){this.moveTo(aB,aE);this.lineTo(aB+aC,aE);this.lineTo(aB+aC,aE+aD);this.lineTo(aB,aE+aD);this.lineTo(aB,aE);this.closePath()},beginPath:function ah(){this.path=[]},closePath:function K(){this.path.push({type:"close"})},_getRgba:function an(aD){var aC={};if(this.internal.rxTransparent.test(aD)){aC.r=0;aC.g=0;aC.b=0;aC.a=0}else{var aB=this.internal.rxRgb.exec(aD);if(aB!=null){aC.r=parseInt(aB[1]);aC.g=parseInt(aB[2]);aC.b=parseInt(aB[3]);aC.a=1}else{aB=this.internal.rxRgba.exec(aD);if(aB!=null){aC.r=parseInt(aB[1]);aC.g=parseInt(aB[2]);aC.b=parseInt(aB[3]);aC.a=parseFloat(aB[4])}else{aC.a=1;if(aD.charAt(0)!="#"){aD=n.colorNameToHex(aD);if(!aD){aD="#000000"}}else{}if(aD.length===4){aC.r=aD.substring(1,2);aC.r+=r;aC.g=aD.substring(2,3);aC.g+=g;aC.b=aD.substring(3,4);aC.b+=b}else{aC.r=aD.substring(1,3);aC.g=aD.substring(3,5);aC.b=aD.substring(5,7)}aC.r=parseInt(aC.r,16);aC.g=parseInt(aC.g,16);aC.b=parseInt(aC.b,16)}}}aC.style=aD;return aC},setFillStyle:function al(aE){var aG,aF,aC,aD;if(this.internal.rxTransparent.test(aE)){aG=0;aF=0;aC=0;aD=0}else{var aB=this.internal.rxRgb.exec(aE);if(aB!=null){aG=parseInt(aB[1]);aF=parseInt(aB[2]);aC=parseInt(aB[3]);aD=1}else{aB=this.internal.rxRgba.exec(aE);if(aB!=null){aG=parseInt(aB[1]);aF=parseInt(aB[2]);aC=parseInt(aB[3]);aD=parseFloat(aB[4])}else{aD=1;if(aE.charAt(0)!="#"){aE=n.colorNameToHex(aE);if(!aE){aE="#000000"}}else{}if(aE.length===4){aG=aE.substring(1,2);aG+=aG;aF=aE.substring(2,3);aF+=aF;aC=aE.substring(3,4);aC+=aC}else{aG=aE.substring(1,3);aF=aE.substring(3,5);aC=aE.substring(5,7)}aG=parseInt(aG,16);aF=parseInt(aF,16);aC=parseInt(aC,16)}}}this.ctx.fillStyle=aE;this.ctx._isFillTransparent=aD==0;this.ctx._fillOpacity=aD;this.pdf.setFillColor(aG,aF,aC,{a:aD});this.pdf.setTextColor(aG,aF,aC,{a:aD})},setStrokeStyle:function aj(aC){var aB=this._getRgba(aC);this.ctx.strokeStyle=aB.style;this.ctx._isStrokeTransparent=aB.a==0;this.ctx._strokeOpacity=aB.a;if(aB.a===0){this.pdf.setDrawColor(255,255,255)}else{if(aB.a===1){this.pdf.setDrawColor(aB.r,aB.g,aB.b)}else{this.pdf.setDrawColor(aB.r,aB.g,aB.b)}}},fillText:function ao(aI,aG,aF,aH){if(this._isFillTransparent()){return}aG=this._wrapX(aG);aF=this._wrapY(aF);var aC=this._matrix_map_point(this.ctx._transform,[aG,aF]);aG=aC[0];aF=aC[1];var aE=this._matrix_rotation(this.ctx._transform);var aB=aE*57.2958;if(this.ctx._clip_path.length>0){var aJ;if(window.outIntercept){aJ=window.outIntercept.type==="group"?window.outIntercept.stream:window.outIntercept}else{aJ=this.pdf.internal.pages[1]}aJ.push("q");var aD=this.path;this.path=this.ctx._clip_path;this.ctx._clip_path=[];this._fill(null,true);this.ctx._clip_path=this.path;this.path=aD}this.pdf.text(aI,aG,this._getBaseline(aF),null,aB);if(this.ctx._clip_path.length>0){aJ.push("Q")}},strokeText:function T(aI,aG,aF,aH){if(this._isStrokeTransparent()){return}aG=this._wrapX(aG);aF=this._wrapY(aF);var aC=this._matrix_map_point(this.ctx._transform,[aG,aF]);aG=aC[0];aF=aC[1];var aE=this._matrix_rotation(this.ctx._transform);var aB=aE*57.2958;if(this.ctx._clip_path.length>0){var aJ;if(window.outIntercept){aJ=window.outIntercept.type==="group"?window.outIntercept.stream:window.outIntercept}else{aJ=this.pdf.internal.pages[1]}aJ.push("q");var aD=this.path;this.path=this.ctx._clip_path;this.ctx._clip_path=[];this._fill(null,true);this.ctx._clip_path=this.path;this.path=aD}this.pdf.text(aI,aG,this._getBaseline(aF),{stroke:true},aB);if(this.ctx._clip_path.length>0){aJ.push("Q")}},setFont:function Q(aE){this.ctx.font=aE;var aD=/\s*(\w+)\s+(\w+)\s+(\w+)\s+([\d\.]+)(px|pt|em)\s+(.*)?/;aF=aD.exec(aE);if(aF!=null){var aH=aF[1];var aJ=aF[2];var aM=aF[3];var aP=aF[4];var aI=aF[5];var aL=aF[6];if("px"===aI){aP=Math.floor(parseFloat(aP))}else{if("em"===aI){aP=Math.floor(parseFloat(aP)*this.pdf.getFontSize())}else{aP=Math.floor(parseFloat(aP))}}this.pdf.setFontSize(aP);if(aM==="bold"||aM==="700"){this.pdf.setFontStyle("bold")}else{if(aH==="italic"){this.pdf.setFontStyle("italic")}else{this.pdf.setFontStyle("normal")}}var aC=aL;var aG=aC.toLowerCase().split(/\s*,\s*/);var aK;if(aG.indexOf("arial")!=-1){aK="Arial"}else{if(aG.indexOf("verdana")!=-1){aK="Verdana"}else{if(aG.indexOf("helvetica")!=-1){aK="Helvetica"}else{if(aG.indexOf("sans-serif")!=-1){aK="sans-serif"}else{if(aG.indexOf("fixed")!=-1){aK="Fixed"}else{if(aG.indexOf("monospace")!=-1){aK="Monospace"}else{if(aG.indexOf("terminal")!=-1){aK="Terminal"}else{if(aG.indexOf("courier")!=-1){aK="Courier"}else{if(aG.indexOf("times")!=-1){aK="Times"}else{if(aG.indexOf("cursive")!=-1){aK="Cursive"}else{if(aG.indexOf("fantasy")!=-1){aK="Fantasy"}else{if(aG.indexOf("serif")!=-1){aK="Serif"}else{aK="Serif"}}}}}}}}}}}}var aB;if("bold"===aM){aB="bold"}else{aB="normal"}this.pdf.setFont(aK,aB)}else{var aD=/(\d+)(pt|px|em)\s+(\w+)\s*(\w+)?/;var aF=aD.exec(aE);if(aF!=null){var aO=aF[1];var aN=aF[2];var aC=aF[3];var aB=aF[4];if(!aB){aB="normal"}if("em"===aI){aO=Math.floor(parseFloat(aP)*this.pdf.getFontSize())}else{aO=Math.floor(parseFloat(aO))}this.pdf.setFontSize(aO);this.pdf.setFont(aC,aB)}}},setTextBaseline:function O(aB){this.ctx.textBaseline=aB},getTextBaseline:function s(){return this.ctx.textBaseline},setTextAlign:function ae(aB){this.ctx.textAlign=aB},getTextAlign:function E(){return this.ctx.textAlign},setLineWidth:function aw(aB){this.ctx.lineWidth=aB;this.pdf.setLineWidth(aB)},setLineCap:function B(aB){this.ctx.lineCap=aB;this.pdf.setLineCap(aB)},setLineJoin:function v(aB){this.ctx.lineJoin=aB;this.pdf.setLineJoin(aB)},moveTo:function t(aB,aE){aB=this._wrapX(aB);aE=this._wrapY(aE);var aC=this._matrix_map_point(this.ctx._transform,[aB,aE]);aB=aC[0];aE=aC[1];var aD={type:"mt",x:aB,y:aE};this.path.push(aD)},_wrapX:function Y(aB){if(this.pageWrapXEnabled){return aB%this.pageWrapX}else{return aB}},_wrapY:function X(aB){if(this.pageWrapYEnabled){this._gotoPage(this._page(aB));return(aB-this.lastBreak)%this.pageWrapY}else{return aB}},transform:function Z(aC,aB,aG,aF,aE,aD){this.ctx._transform=[aC,aB,aG,aF,aE,aD]},setTransform:function y(aC,aB,aG,aF,aE,aD){this.ctx._transform=[aC,aB,aG,aF,aE,aD]},_getTransform:function H(){return this.ctx._transform},lastBreak:0,pageBreaks:[],_page:function x(aG){if(this.pageWrapYEnabled){this.lastBreak=0;var aF=0;var aE=0;for(var aB=0;aB<this.pageBreaks.length;aB++){if(aG>=this.pageBreaks[aB]){aF++;if(this.lastBreak===0){aE++}var aD=this.pageBreaks[aB]-this.lastBreak;this.lastBreak=this.pageBreaks[aB];var aC=Math.floor(aD/this.pageWrapY);aE+=aC}}if(this.lastBreak===0){var aC=Math.floor(aG/this.pageWrapY)+1;aE+=aC}return aE+aF}else{return this.pdf.internal.getCurrentPageInfo().pageNumber}},_gotoPage:function J(aB){},lineTo:function au(aB,aE){aB=this._wrapX(aB);aE=this._wrapY(aE);var aC=this._matrix_map_point(this.ctx._transform,[aB,aE]);aB=aC[0];aE=aC[1];var aD={type:"lt",x:aB,y:aE};this.path.push(aD)},bezierCurveTo:function af(aE,aG,aD,aF,aB,aI){aE=this._wrapX(aE);aG=this._wrapY(aG);aD=this._wrapX(aD);aF=this._wrapY(aF);aB=this._wrapX(aB);aI=this._wrapY(aI);var aC;aC=this._matrix_map_point(this.ctx._transform,[aB,aI]);aB=aC[0];aI=aC[1];aC=this._matrix_map_point(this.ctx._transform,[aE,aG]);aE=aC[0];aG=aC[1];aC=this._matrix_map_point(this.ctx._transform,[aD,aF]);aD=aC[0];aF=aC[1];var aH={type:"bct",x1:aE,y1:aG,x2:aD,y2:aF,x:aB,y:aI};this.path.push(aH)},quadraticCurveTo:function ar(aD,aE,aB,aG){aD=this._wrapX(aD);aE=this._wrapY(aE);aB=this._wrapX(aB);aG=this._wrapY(aG);var aC;aC=this._matrix_map_point(this.ctx._transform,[aB,aG]);aB=aC[0];aG=aC[1];aC=this._matrix_map_point(this.ctx._transform,[aD,aE]);aD=aC[0];aE=aC[1];var aF={type:"qct",x1:aD,y1:aE,x:aB,y:aG};this.path.push(aF)},arc:function W(aC,aI,aB,aF,aE,aG){aC=this._wrapX(aC);aI=this._wrapY(aI);var aD=this._matrix_map_point(this.ctx._transform,[aC,aI]);aC=aD[0];aI=aD[1];var aH={type:"arc",x:aC,y:aI,radius:aB,startAngle:aF,endAngle:aE,anticlockwise:aG};this.path.push(aH)},drawImage:function u(aF,aM,aK,aO,aH,aB,aL,aG,aJ){if(aB!==undefined){aM=aB;aK=aL;aO=aG;aH=aJ}aM=this._wrapX(aM);aK=this._wrapY(aK);var aI=this._matrix_map_rect(this.ctx._transform,{x:aM,y:aK,w:aO,h:aH});var aE=this._matrix_map_rect(this.ctx._transform,{x:aB,y:aL,w:aG,h:aJ});var aN;var aC=/data:image\/(\w+).*/i;var aD=aC.exec(aF);if(aD!=null){aN=aD[1]}else{aN="png"}this.pdf.addImage(aF,aN,aI.x,aI.y,aI.w,aI.h)},_matrix_multiply:function z(aK,aL){var aJ=aL[0];var aG=aL[1];var aH=aL[2];var aI=aL[3];var aD=aL[4];var aC=aL[5];var aF=aJ*aK[0]+aG*aK[2];var aE=aH*aK[0]+aI*aK[2];var aB=aD*aK[0]+aC*aK[2]+aK[4];aG=aJ*aK[1]+aG*aK[3];aI=aH*aK[1]+aI*aK[3];aC=aD*aK[1]+aC*aK[3]+aK[5];aJ=aF;aH=aE;aD=aB;return[aJ,aG,aH,aI,aD,aC]},_matrix_rotation:function L(aB){return Math.atan2(aB[2],aB[0])},_matrix_decompose:function ay(aE){var aC=aE[0];var aB=aE[1];var aI=aE[2];var aH=aE[3];var aF=Math.sqrt(aC*aC+aB*aB);aC/=aF;aB/=aF;var aG=aC*aI+aB*aH;aI-=aC*aG;aH-=aB*aG;var aD=Math.sqrt(aI*aI+aH*aH);aI/=aD;aH/=aD;aG/=aD;if(aC*aH<aB*aI){aC=-aC;aB=-aB;aG=-aG;aF=-aF}return{scale:[aF,0,0,aD,0,0],translate:[1,0,0,1,aE[4],aE[5]],rotate:[aC,aB,-aB,aC,0,0],skew:[1,0,aG,1,0,0]}},_matrix_map_point:function C(aL,aM){var aJ=aL[0];var aD=aL[1];var aE=aL[2];var aG=aL[3];var aC=aL[4];var aB=aL[5];var aK=aM[0];var aI=aM[1];var aH=aK*aJ+aI*aE+aC;var aF=aK*aD+aI*aG+aB;return[aH,aF]},_matrix_map_point_obj:function R(aC,aD){var aB=this._matrix_map_point(aC,[aD.x,aD.y]);return{x:aB[0],y:aB[1]}},_matrix_map_rect:function ap(aB,aC){var aE=this._matrix_map_point(aB,[aC.x,aC.y]);var aD=this._matrix_map_point(aB,[aC.x+aC.w,aC.y+aC.h]);return{x:aE[0],y:aE[1],w:aD[0]-aE[0],h:aD[1]-aE[1]}},_matrix_is_identity:function A(aB){if(aB[0]!=1){return false}if(aB[1]!=0){return false}if(aB[2]!=0){return false}if(aB[3]!=1){return false}if(aB[4]!=0){return false}if(aB[5]!=0){return false}return true},rotate:function ax(aC){var aB=[Math.cos(aC),Math.sin(aC),-Math.sin(aC),Math.cos(aC),0,0];this.ctx._transform=this._matrix_multiply(this.ctx._transform,aB)},scale:function ad(aD,aC){var aB=[aD,0,0,aC,0,0];this.ctx._transform=this._matrix_multiply(this.ctx._transform,aB)},translate:function w(aB,aD){var aC=[1,0,0,1,aB,aD];this.ctx._transform=this._matrix_multiply(this.ctx._transform,aC)},stroke:function aa(){if(this.ctx._clip_path.length>0){var aB;if(window.outIntercept){aB=window.outIntercept.type==="group"?window.outIntercept.stream:window.outIntercept}else{aB=this.pdf.internal.pages[1]}aB.push("q");var aC=this.path;this.path=this.ctx._clip_path;this.ctx._clip_path=[];this._stroke(true);this.ctx._clip_path=this.path;this.path=aC;this._stroke(false);aB.push("Q")}else{this._stroke(false)}},_stroke:function ak(aT){if(!aT&&this._isStrokeTransparent()){return}var aV=[];var aD=false;var aS=this.path;for(var aM=0;aM<aS.length;aM++){var aL=aS[aM];switch(aL.type){case"mt":aV.push({start:aL,deltas:[],abs:[]});break;case"lt":var aU=[aL.x-aS[aM-1].x,aL.y-aS[aM-1].y];aV[aV.length-1].deltas.push(aU);aV[aV.length-1].abs.push(aL);break;case"bct":var aU=[aL.x1-aS[aM-1].x,aL.y1-aS[aM-1].y,aL.x2-aS[aM-1].x,aL.y2-aS[aM-1].y,aL.x-aS[aM-1].x,aL.y-aS[aM-1].y];aV[aV.length-1].deltas.push(aU);break;case"qct":var aR=aS[aM-1].x+2/3*(aL.x1-aS[aM-1].x);var aE=aS[aM-1].y+2/3*(aL.y1-aS[aM-1].y);var aP=aL.x+2/3*(aL.x1-aL.x);var aC=aL.y+2/3*(aL.y1-aL.y);var aN=aL.x;var aB=aL.y;var aU=[aR-aS[aM-1].x,aE-aS[aM-1].y,aP-aS[aM-1].x,aC-aS[aM-1].y,aN-aS[aM-1].x,aB-aS[aM-1].y];aV[aV.length-1].deltas.push(aU);break;case"arc":aV[aV.length-1].arc=true;aV[aV.length-1].abs.push(aL);break;case"close":aD=true;break}}for(var aM=0;aM<aV.length;aM++){var aQ;if(aM==aV.length-1){aQ="s"}else{aQ=null}if(aV[aM].arc){var aO=aV[aM].abs;for(var aK=0;aK<aO.length;aK++){var aH=aO[aK];var aG=aH.startAngle*360/(2*Math.PI);var aF=aH.endAngle*360/(2*Math.PI);var aJ=aH.x;var aI=aH.y;this.internal.arc2(this,aJ,aI,aH.radius,aG,aF,aH.anticlockwise,aQ,aT)}}else{var aJ=aV[aM].start.x;var aI=aV[aM].start.y;if(!aT){this.pdf.lines(aV[aM].deltas,aJ,aI,null,aQ)}else{this.pdf.lines(aV[aM].deltas,aJ,aI,null,null);this.pdf.clip_fixed()}}}},_isFillTransparent:function aA(){return this.ctx._isFillTransparent||this.globalAlpha==0},_isStrokeTransparent:function I(){return this.ctx._isStrokeTransparent||this.globalAlpha==0},fill:function N(aC){if(this.ctx._clip_path.length>0){var aB;if(window.outIntercept){aB=window.outIntercept.type==="group"?window.outIntercept.stream:window.outIntercept}else{aB=this.pdf.internal.pages[1]}aB.push("q");var aD=this.path;this.path=this.ctx._clip_path;this.ctx._clip_path=[];this._fill(aC,true);this.ctx._clip_path=this.path;this.path=aD;this._fill(aC,false);aB.push("Q")}else{this._fill(aC,false)}},_fill:function M(aQ,a3){if(this._isFillTransparent()){return}var aJ=typeof this.pdf.internal.newObject2==="function";var aB;if(window.outIntercept){aB=window.outIntercept.type==="group"?window.outIntercept.stream:window.outIntercept}else{aB=this.pdf.internal.pages[1]}var a5=[];var aG=window.outIntercept;if(aJ){switch(this.ctx.globalCompositeOperation){case"normal":case"source-over":break;case"destination-in":case"destination-out":var aP=this.pdf.internal.newStreamObject();var aV=this.pdf.internal.newObject2();aV.push("<</Type /ExtGState");aV.push("/SMask <</S /Alpha /G "+aP.objId+" 0 R>>");aV.push(">>");var aY="MASK"+aV.objId;this.pdf.internal.addGraphicsState(aY,aV.objId);var a1="/"+aY+" gs";aB.splice(0,0,"q");aB.splice(1,0,a1);aB.push("Q");window.outIntercept=aP;break;default:var aK="/"+this.pdf.internal.blendModeMap[this.ctx.globalCompositeOperation.toUpperCase()];if(aK){this.pdf.internal.out(aK+" gs")}break}}var aI=this.ctx.globalAlpha;if(this.ctx._fillOpacity<1){aI=this.ctx._fillOpacity}if(aJ){var a0=this.pdf.internal.newObject2();a0.push("<</Type /ExtGState");a0.push("/CA "+aI);a0.push("/ca "+aI);a0.push(">>");var aY="GS_O_"+a0.objId;this.pdf.internal.addGraphicsState(aY,a0.objId);this.pdf.internal.out("/"+aY+" gs")}var a2=this.path;for(var aU=0;aU<a2.length;aU++){var aR=a2[aU];switch(aR.type){case"mt":a5.push({start:aR,deltas:[],abs:[]});break;case"lt":var a4=[aR.x-a2[aU-1].x,aR.y-a2[aU-1].y];a5[a5.length-1].deltas.push(a4);a5[a5.length-1].abs.push(aR);break;case"bct":var a4=[aR.x1-a2[aU-1].x,aR.y1-a2[aU-1].y,aR.x2-a2[aU-1].x,aR.y2-a2[aU-1].y,aR.x-a2[aU-1].x,aR.y-a2[aU-1].y];a5[a5.length-1].deltas.push(a4);break;case"qct":var aZ=a2[aU-1].x+2/3*(aR.x1-a2[aU-1].x);var aE=a2[aU-1].y+2/3*(aR.y1-a2[aU-1].y);var aX=aR.x+2/3*(aR.x1-aR.x);var aD=aR.y+2/3*(aR.y1-aR.y);var aT=aR.x;var aC=aR.y;var a4=[aZ-a2[aU-1].x,aE-a2[aU-1].y,aX-a2[aU-1].x,aD-a2[aU-1].y,aT-a2[aU-1].x,aC-a2[aU-1].y];a5[a5.length-1].deltas.push(a4);break;case"arc":if(a5.length==0){a5.push({start:{x:0,y:0},deltas:[],abs:[]})}a5[a5.length-1].arc=true;a5[a5.length-1].abs.push(aR);break;case"close":break}}for(var aU=0;aU<a5.length;aU++){var aW;if(aU==a5.length-1){aW="f";if(aQ==="evenodd"){aW+="*"}}else{aW=null}if(a5[aU].arc){var aS=a5[aU].abs;for(var aO=0;aO<aS.length;aO++){var aL=aS[aO];if(typeof aL.startAngle!=="undefined"){var aH=aL.startAngle*360/(2*Math.PI);var aF=aL.endAngle*360/(2*Math.PI);var aN=aL.x;var aM=aL.y;if(aO==0){this.internal.move2(this,aN,aM)}this.internal.arc2(this,aN,aM,aL.radius,aH,aF,aL.anticlockwise,null,a3)}else{this.internal.line2(D,aL.x,aL.y)}}var aN=a5[aU].start.x;var aM=a5[aU].start.y;this.internal.line2(D,aN,aM);this.pdf.internal.out("h");this.pdf.internal.out("f")}else{var aN=a5[aU].start.x;var aM=a5[aU].start.y;if(!a3){this.pdf.lines(a5[aU].deltas,aN,aM,null,aW)}else{this.pdf.lines(a5[aU].deltas,aN,aM,null,null);this.pdf.clip_fixed()}}}window.outIntercept=aG},pushMask:function ag(){var aC=typeof this.pdf.internal.newObject2==="function";if(!aC){console.log("jsPDF v2 not enabled");return}var aF=this.pdf.internal.newStreamObject();var aE=this.pdf.internal.newObject2();aE.push("<</Type /ExtGState");aE.push("/SMask <</S /Alpha /G "+aF.objId+" 0 R>>");aE.push(">>");var aD="MASK"+aE.objId;this.pdf.internal.addGraphicsState(aD,aE.objId);var aB="/"+aD+" gs";this.pdf.internal.out(aB)},clip:function ai(){if(this.ctx._clip_path.length>0){for(var aB=0;aB<this.path.length;aB++){this.ctx._clip_path.push(this.path[aB])}}else{this.ctx._clip_path=this.path}this.path=[]},measureText:function am(aD){var aC=this.pdf;return{getWidth:function aB(){var aF=aC.internal.getFontSize();var aE=aC.getStringUnitWidth(aD)*aF/aC.internal.scaleFactor;return aE},get width(){return this.getWidth(aD)}}},_getBaseline:function at(aD){var aC=parseInt(this.pdf.internal.getFontSize());var aB=aC*0.25;switch(this.ctx.textBaseline){case"bottom":return aD-aB;case"top":return aD+aC;case"hanging":return aD+aC-aB;case"middle":return aD+aC/2-aB;case"ideographic":return aD;case"alphabetic":default:return aD}}};var D=ac.context2d;Object.defineProperty(D,"fillStyle",{set:function U(aB){this.setFillStyle(aB)},get:function av(){return this.ctx.fillStyle}});Object.defineProperty(D,"strokeStyle",{set:function U(aB){this.setStrokeStyle(aB)},get:function av(){return this.ctx.strokeStyle}});Object.defineProperty(D,"lineWidth",{set:function U(aB){this.setLineWidth(aB)},get:function av(){return this.ctx.lineWidth}});Object.defineProperty(D,"lineCap",{set:function U(aB){this.setLineCap(aB)},get:function av(){return this.ctx.lineCap}});Object.defineProperty(D,"lineJoin",{set:function U(aB){this.setLineJoin(aB)},get:function av(){return this.ctx.lineJoin}});Object.defineProperty(D,"miterLimit",{set:function U(aB){this.ctx.miterLimit=aB},get:function av(){return this.ctx.miterLimit}});Object.defineProperty(D,"textBaseline",{set:function U(aB){this.setTextBaseline(aB)},get:function av(){return this.getTextBaseline()}});Object.defineProperty(D,"textAlign",{set:function U(aB){this.setTextAlign(aB)},get:function av(){return this.getTextAlign()}});Object.defineProperty(D,"font",{set:function U(aB){this.setFont(aB)},get:function av(){return this.ctx.font}});Object.defineProperty(D,"globalCompositeOperation",{set:function U(aB){this.ctx.globalCompositeOperation=aB},get:function av(){return this.ctx.globalCompositeOperation}});Object.defineProperty(D,"globalAlpha",{set:function U(aB){this.ctx.globalAlpha=aB},get:function av(){return this.ctx.globalAlpha}});Object.defineProperty(D,"ignoreClearRect",{set:function U(aB){this.ctx.ignoreClearRect=aB},get:function av(){return this.ctx.ignoreClearRect}});D.internal={};D.internal.rxRgb=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/;D.internal.rxRgba=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d\.]+)\s*\)/;D.internal.rxTransparent=/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/;D.internal.arc=function(aJ,aM,aC,aH,aS,aR,aB,aO){var aD=true;var aL=this.pdf.internal.scaleFactor;var aF=this.pdf.internal.pageSize.height;var aK=this.pdf.internal.f2;var aQ=aS*(Math.PI/180);var aE=aR*(Math.PI/180);var aG=this.createArc(aH,aQ,aE,aB);var aP=null;for(var aN=0;aN<aG.length;aN++){var aI=aG[aN];if(aD&&aN==0){this.pdf.internal.out([aK((aI.x1+aM)*aL),aK((aF-(aI.y1+aC))*aL),"m",aK((aI.x2+aM)*aL),aK((aF-(aI.y2+aC))*aL),aK((aI.x3+aM)*aL),aK((aF-(aI.y3+aC))*aL),aK((aI.x4+aM)*aL),aK((aF-(aI.y4+aC))*aL),"c"].join(" "))}else{this.pdf.internal.out([aK((aI.x2+aM)*aL),aK((aF-(aI.y2+aC))*aL),aK((aI.x3+aM)*aL),aK((aF-(aI.y3+aC))*aL),aK((aI.x4+aM)*aL),aK((aF-(aI.y4+aC))*aL),"c"].join(" "))}aJ._lastPoint={x:aM,y:aC}}if(aO!==null){this.pdf.internal.out(this.pdf.internal.getStyle(aO))}};D.internal.arc2=function(aJ,aK,aI,aB,aE,aD,aF,aC,aL){var aH=aK;var aG=aI;if(false){}if(!aL){this.arc(aJ,aH,aG,aB,aE,aD,aF,aC)}else{this.arc(aJ,aH,aG,aB,aE,aD,aF,null);this.pdf.clip_fixed()}};D.internal.move2=function(aG,aB,aF){var aC=this.pdf.internal.scaleFactor;var aD=this.pdf.internal.pageSize.height;var aE=this.pdf.internal.f2;this.pdf.internal.out([aE(aB*aC),aE((aD-aF)*aC),"m"].join(" "));aG._lastPoint={x:aB,y:aF}};D.internal.line2=function(aH,aD,aB){var aC=this.pdf.internal.scaleFactor;var aE=this.pdf.internal.pageSize.height;var aG=this.pdf.internal.f2;var aF={x:aD,y:aB};this.pdf.internal.out([aG(aF.x*aC),aG((aE-aF.y)*aC),"l"].join(" "));aH._lastPoint=aF};D.internal.createArc=function(aJ,aL,aD,aF){var aG=0.00001;var aO=Math.PI*2;var aH=aL;if(aH<aO||aH>aO){aH=aH%aO}var aK=aD;if(aK<aO||aK>aO){aK=aK%aO}var aN=[];var aE=Math.PI/2;var aI=aF?-1:+1;var aC=aL;for(var aM=Math.min(aO,Math.abs(aK-aH));aM>aG;){var aB=aC+aI*Math.min(aM,aE);aN.push(this.createSmallArc(aJ,aC,aB));aM-=Math.abs(aB-aC);aC=aB}return aN};D.internal.createSmallArc=function(aJ,aS,aR){var aQ=(aR-aS)/2;var aL=aJ*Math.cos(aQ);var aB=aJ*Math.sin(aQ);var aO=aL;var aE=-aB;var aH=aO*aO+aE*aE;var aG=aH+aO*aL+aE*aB;var aF=4/3*(Math.sqrt(2*aH*aG)-aG)/(aO*aB-aE*aL);var aN=aO-aF*aE;var aD=aE+aF*aO;var aM=aN;var aC=-aD;var aK=aQ+aS;var aP=Math.cos(aK);var aI=Math.sin(aK);return{x1:aJ*Math.cos(aS),y1:aJ*Math.sin(aS),x2:aN*aP-aD*aI,y2:aN*aI+aD*aP,x3:aM*aP-aC*aI,y3:aM*aI+aC*aP,x4:aJ*Math.cos(aR),y4:aJ*Math.sin(aR)}};function az(){this._isStrokeTransparent=false;this._strokeOpacity=1;this.strokeStyle="#000000";this.fillStyle="#000000";this._isFillTransparent=false;this._fillOpacity=1;this.font="12pt times";this.textBaseline="alphabetic";this.textAlign="start";this.lineWidth=1;this.lineJoin="miter";this.lineCap="butt";this._transform=[1,0,0,1,0,0];this.globalCompositeOperation="normal";this.globalAlpha=1;this._clip_path=[];this.ignoreClearRect=false;this.copy=function(aB){this._isStrokeTransparent=aB._isStrokeTransparent;this._strokeOpacity=aB._strokeOpacity;this.strokeStyle=aB.strokeStyle;this._isFillTransparent=aB._isFillTransparent;this._fillOpacity=aB._fillOpacity;this.fillStyle=aB.fillStyle;this.font=aB.font;this.lineWidth=aB.lineWidth;this.lineJoin=aB.lineJoin;this.lineCap=aB.lineCap;this.textBaseline=aB.textBaseline;this.textAlign=aB.textAlign;this._fontSize=aB._fontSize;this._transform=aB._transform.slice(0);this.globalCompositeOperation=aB.globalCompositeOperation;this.globalAlpha=aB.globalAlpha;this._clip_path=aB._clip_path.slice(0);this.ignoreClearRect=aB.ignoreClearRect}}return this})(i.API);(function(F){var K,L,B,s,x,I,z,N,u,w,E,H,O,P,G,y,C,t,A,D;K=function(){return function(R){Q.prototype=R;return new Q()};function Q(){}}();w=function w(X){var R,S,Q,W,U,T,V;S=0;Q=X.length;R=void 0;W=false;T=false;while(!W&&S!==Q){R=X[S]=X[S].trimLeft();if(R){W=true}S++}S=Q-1;while(Q&&!T&&S!==-1){R=X[S]=X[S].trimRight();if(R){T=true}S--}U=/\s+$/g;V=true;S=0;while(S!==Q){if(X[S]!="\u2028"){R=X[S].replace(/\s+/g," ");if(V){R=R.trimLeft()}if(R){V=U.test(R)}X[S]=R}S++}return X};E=function E(R,Q,T,S){this.pdf=R;this.x=Q;this.y=T;this.settings=S;this.watchFunctions=[];this.init();return this};H=function H(Q){var S,R,T;S=void 0;T=Q.split(",");R=T.shift();while(!S&&R){S=B[R.trim().toLowerCase()];R=T.shift()}return S};O=function O(Q){Q=Q==="auto"?"0px":Q;if(Q.indexOf("em")>-1&&!isNaN(Number(Q.replace("em","")))){Q=Number(Q.replace("em",""))*18.719+"px"}if(Q.indexOf("pt")>-1&&!isNaN(Number(Q.replace("pt","")))){Q=Number(Q.replace("pt",""))*1.333+"px"}var T,R,S;R=void 0;T=16;S=P[Q];if(S){return S}S={"xx-small":9,"x-small":11,small:13,medium:16,large:19,"x-large":23,"xx-large":28,auto:0}[{css_line_height_string:Q}];if(S!==R){return P[Q]=S/T}if(S=parseFloat(Q)){return P[Q]=S/T}S=Q.match(/([\d\.]+)(px)/);if(S.length===3){return P[Q]=parseFloat(S[1])/T}return P[Q]=1};u=function u(T){var S,R,Q;Q=function(U){var V;V=function(W){if(document.defaultView&&document.defaultView.getComputedStyle){return document.defaultView.getComputedStyle(W,null)}else{if(W.currentStyle){return W.currentStyle}else{return W.style}}}(U);return function(W){W=W.replace(/-\D/g,function(X){return X.charAt(1).toUpperCase()});return V[W]}}(T);S={};R=void 0;S["font-family"]=H(Q("font-family"))||"times";S["font-style"]=s[Q("font-style")]||"normal";S["text-align"]=x[Q("text-align")]||"left";R=I[Q("font-weight")]||"normal";if(R==="bold"){if(S["font-style"]==="normal"){S["font-style"]=R}else{S["font-style"]=R+S["font-style"]}}S["font-size"]=O(Q("font-size"))||1;S["line-height"]=O(Q("line-height"))||1;S.display=Q("display")==="inline"?"inline":"block";R=S.display==="block";S["margin-top"]=R&&O(Q("margin-top"))||0;S["margin-bottom"]=R&&O(Q("margin-bottom"))||0;S["padding-top"]=R&&O(Q("padding-top"))||0;S["padding-bottom"]=R&&O(Q("padding-bottom"))||0;S["margin-left"]=R&&O(Q("margin-left"))||0;S["margin-right"]=R&&O(Q("margin-right"))||0;S["padding-left"]=R&&O(Q("padding-left"))||0;S["padding-right"]=R&&O(Q("padding-right"))||0;S["page-break-before"]=Q("page-break-before")||"auto";S["float"]=z[Q("cssFloat")]||"none";S.clear=N[Q("clear")]||"none";S.color=Q("color");return S};G=function G(V,W,X){var R,U,T,Q,S;T=false;U=void 0;Q=void 0;S=void 0;R=X["#"+V.id];if(R){if(typeof R==="function"){T=R(V,W)}else{U=0;Q=R.length;while(!T&&U!==Q){T=R[U](V,W);U++}}}R=X[V.nodeName];if(!T&&R){if(typeof R==="function"){T=R(V,W)}else{U=0;Q=R.length;while(!T&&U!==Q){T=R[U](V,W);U++}}}return T};D=function D(ab,Z){var X,S,Y,W,V,R,Q,U,aa,T;X=[];S=[];Y=0;T=ab.rows[0].cells.length;U=ab.clientWidth;while(Y<T){aa=ab.rows[0].cells[Y];S[Y]={name:aa.textContent.toLowerCase().replace(/\s+/g,""),prompt:aa.textContent.replace(/\r?\n/g,""),width:aa.clientWidth/U*Z.pdf.internal.pageSize.width};Y++}Y=1;while(Y<ab.rows.length){R=ab.rows[Y];V={};W=0;while(W<R.cells.length){V[S[W].name]=R.cells[W].textContent.replace(/\r?\n/g,"");W++}X.push(V);Y++}return Q={rows:X,headers:S}};var M={SCRIPT:1,STYLE:1,NOSCRIPT:1,OBJECT:1,EMBED:1,SELECT:1};var v=1;L=function J(R,af,T){var Z,al,ap,ak,ab,ag,Y,ad,ac;al=R.childNodes;Z=void 0;ap=u(R);ab=ap.display==="block";if(ab){af.setBlockBoundary();af.setBlockStyle(ap)}Y=0.264583*72/25.4;ak=0;ag=al.length;while(ak<ag){Z=al[ak];if((typeof Z==="undefined"?"undefined":c(Z))==="object"){af.executeWatchFunctions(Z);if(Z.nodeType===1&&Z.nodeName==="HEADER"){var aj=Z;var ar=af.pdf.margins_doc.top;af.pdf.internal.events.subscribe("addPage",function(au){af.y=ar;L(aj,af,T);af.pdf.margins_doc.top=af.y+10;af.y+=10},false)}if(Z.nodeType===8&&Z.nodeName==="#comment"){if(~Z.textContent.indexOf("ADD_PAGE")){af.pdf.addPage();af.y=af.pdf.margins_doc.top}}else{if(Z.nodeType===1&&!M[Z.nodeName]){var aa;if(Z.nodeName==="IMG"){var V=Z.getAttribute("src");aa=y[af.pdf.sHashCode(V)||V]}if(aa){if(af.pdf.internal.pageSize.height-af.pdf.margins_doc.bottom<af.y+Z.height&&af.y>af.pdf.margins_doc.top){af.pdf.addPage();af.y=af.pdf.margins_doc.top;af.executeWatchFunctions(Z)}var X=u(Z);var Q=af.x;var ah=12/af.pdf.internal.scaleFactor;var ai=(X["margin-left"]+X["padding-left"])*ah;var W=(X["margin-right"]+X["padding-right"])*ah;var at=(X["margin-top"]+X["padding-top"])*ah;var aq=(X["margin-bottom"]+X["padding-bottom"])*ah;if(X["float"]!==undefined&&X["float"]==="right"){Q+=af.settings.width-Z.width-W}else{Q+=ai}af.pdf.addImage(aa,Q,af.y+at,Z.width,Z.height);aa=undefined;if(X["float"]==="right"||X["float"]==="left"){af.watchFunctions.push(function(aw,au,av,ax){if(af.y>=au){af.x+=aw;af.settings.width+=av;return true}else{if(ax&&ax.nodeType===1&&!M[ax.nodeName]&&af.x+ax.width>af.pdf.margins_doc.left+af.pdf.margins_doc.width){af.x+=aw;af.y=au;af.settings.width+=av;return true}else{return false}}}.bind(this,X["float"]==="left"?-Z.width-ai-W:0,af.y+Z.height+at+aq,Z.width));af.watchFunctions.push(function(aw,au,av){if(af.y<aw&&au===af.pdf.internal.getNumberOfPages()){if(av.nodeType===1&&u(av).clear==="both"){af.y=aw;return true}else{return false}}else{return true}}.bind(this,af.y+Z.height,af.pdf.internal.getNumberOfPages()));af.settings.width-=Z.width+ai+W;if(X["float"]==="left"){af.x+=Z.width+ai+W}}else{af.y+=Z.height+at+aq}}else{if(Z.nodeName==="TABLE"){ad=D(Z,af);af.y+=10;af.pdf.table(af.x,af.y,ad.rows,ad.headers,{autoSize:false,printHeaders:T.printHeaders,margins:af.pdf.margins_doc,css:u(Z)});af.y=af.pdf.lastCellPos.y+af.pdf.lastCellPos.h+20}else{if(Z.nodeName==="OL"||Z.nodeName==="UL"){v=1;if(!G(Z,af,T)){L(Z,af,T)}af.y+=10}else{if(Z.nodeName==="LI"){var ao=af.x;af.x+=20/af.pdf.internal.scaleFactor;af.y+=3;if(!G(Z,af,T)){L(Z,af,T)}af.x=ao}else{if(Z.nodeName==="BR"){af.y+=ap["font-size"]*af.pdf.internal.scaleFactor;af.addText("\u2028",K(ap))}else{if(!G(Z,af,T)){L(Z,af,T)}}}}}}}else{if(Z.nodeType===3){var ae=Z.nodeValue;if(Z.nodeValue&&Z.parentNode.nodeName==="LI"){if(Z.parentNode.parentNode.nodeName==="OL"){ae=v+++". "+ae}else{var S=ap["font-size"];var an=(3-S*0.75)*af.pdf.internal.scaleFactor;var am=S*0.75*af.pdf.internal.scaleFactor;var U=S*1.74/af.pdf.internal.scaleFactor;ac=function ac(au,av){this.pdf.circle(au+an,av+am,U,"FD")}}}if(!!(Z.ownerDocument.body.compareDocumentPosition(Z)&16)){af.addText(ae,ap)}}else{if(typeof Z==="string"){af.addText(Z,ap)}}}}}ak++}T.outY=af.y;if(ab){return af.setBlockBoundary(ac)}};y={};C=function C(W,Y,Q,U){var X=W.getElementsByTagName("img"),T=X.length,R,Z=0;function V(){Y.pdf.internal.events.publish("imagesLoaded");U(R)}function S(ac,ad,aa){if(!ac){return}var ab=new Image();R=++Z;ab.crossOrigin="";ab.onerror=ab.onload=function(){if(ab.complete){if(ab.src.indexOf("data:image/")===0){ab.width=ad||ab.width||0;ab.height=aa||ab.height||0}if(ab.width+ab.height){var ae=Y.pdf.sHashCode(ac)||ac;y[ae]=y[ae]||ab}}if(!--Z){V()}};ab.src=ac}while(T--){S(X[T].getAttribute("src"),X[T].width,X[T].height)}return Z||V()};t=function t(R,U,Q){var X=R.getElementsByTagName("footer");if(X.length>0){X=X[0];var Z=U.pdf.internal.write;var Y=U.y;U.pdf.internal.write=function(){};L(X,U,Q);var W=Math.ceil(U.y-Y)+5;U.y=Y;U.pdf.internal.write=Z;U.pdf.margins_doc.bottom+=W;var V=function V(ae){var aa=ae!==undefined?ae.pageNumber:1;var ad=U.y;U.y=U.pdf.internal.pageSize.height-U.pdf.margins_doc.bottom;U.pdf.margins_doc.bottom-=W;var ac=X.getElementsByTagName("span");for(var ab=0;ab<ac.length;++ab){if((" "+ac[ab].className+" ").replace(/[\n\t]/g," ").indexOf(" pageCounter ")>-1){ac[ab].innerHTML=aa}if((" "+ac[ab].className+" ").replace(/[\n\t]/g," ").indexOf(" totalPages ")>-1){ac[ab].innerHTML="###jsPDFVarTotalPages###"}}L(X,U,Q);U.pdf.margins_doc.bottom+=W;U.y=ad};var T=X.getElementsByTagName("span");for(var S=0;S<T.length;++S){if((" "+T[S].className+" ").replace(/[\n\t]/g," ").indexOf(" totalPages ")>-1){U.pdf.internal.events.subscribe("htmlRenderingFinished",U.pdf.putTotalPages.bind(U.pdf,"###jsPDFVarTotalPages###"),true)}}U.pdf.internal.events.subscribe("addPage",V,false);V();M.FOOTER=1}};A=function A(R,T,Q,X,U,W){if(!T){return false}if(typeof T!=="string"&&!T.parentNode){T=""+T.innerHTML}if(typeof T==="string"){T=function(aa){var ac,ab,Z,Y;Z="jsPDFhtmlText"+Date.now().toString()+(Math.random()*1000).toFixed(0);Y="position: absolute !important;clip: rect(1px 1px 1px 1px); /* IE6, IE7 */clip: rect(1px, 1px, 1px, 1px);padding:0 !important;border:0 !important;height: 1px !important;width: 1px !important; top:auto;left:-100px;overflow: hidden;";ab=document.createElement("div");ab.style.cssText=Y;ab.innerHTML='<iframe style="height:1px;width:1px" name="'+Z+'" />';document.body.appendChild(ab);ac=window.frames[Z];ac.document.open();ac.document.writeln(aa);ac.document.close();return ac.document.body}(T.replace(/<\/?script[^>]*?>/gi,""))}var V=new E(R,Q,X,U),S;C.call(this,T,V,U.elementHandlers,function(Y){t(T,V,U.elementHandlers);L(T,V,U.elementHandlers);V.pdf.internal.events.publish("htmlRenderingFinished");S=V.dispose();if(typeof W==="function"){W(S)}else{if(Y){console.error("jsPDF Warning: rendering issues? provide a callback to fromHTML!")}}});return S||{x:V.x,y:V.y}};E.prototype.init=function(){this.paragraph={text:[],style:[]};return this.pdf.internal.write("q")};E.prototype.dispose=function(){this.pdf.internal.write("Q");return{x:this.x,y:this.y,ready:true}};E.prototype.executeWatchFunctions=function(T){var R=false;var Q=[];if(this.watchFunctions.length>0){for(var S=0;S<this.watchFunctions.length;++S){if(this.watchFunctions[S](T)===true){R=true}else{Q.push(this.watchFunctions[S])}}this.watchFunctions=Q}return R};E.prototype.splitFragmentsIntoLines=function(ak,ab){var ah,aa,ad,W,Q,S,aj,Y,R,Z,ae,ac,U,V,ag;aa=12;ae=this.pdf.internal.scaleFactor;Q={};ad=void 0;Z=void 0;W=void 0;S=void 0;ag=void 0;R=void 0;Y=void 0;aj=void 0;ac=[];U=[ac];ah=0;V=this.settings.width;while(ak.length){S=ak.shift();ag=ab.shift();if(S){ad=ag["font-family"];Z=ag["font-style"];W=Q[ad+Z];if(!W){W=this.pdf.internal.getFont(ad,Z).metadata.Unicode;Q[ad+Z]=W}R={widths:W.widths,kerning:W.kerning,fontSize:ag["font-size"]*aa,textIndent:ah};Y=this.pdf.getStringUnitWidth(S,R)*R.fontSize/ae;if(S=="\u2028"){ac=[];U.push(ac)}else{if(ah+Y>V){aj=this.pdf.splitTextToSize(S,V,R);ac.push([aj.shift(),ag]);while(aj.length){ac=[[aj.shift(),ag]];U.push(ac)}ah=this.pdf.getStringUnitWidth(ac[0][0],R)*R.fontSize/ae}else{ac.push([S,ag]);ah+=Y}}}}if(ag["text-align"]!==undefined&&(ag["text-align"]==="center"||ag["text-align"]==="right"||ag["text-align"]==="justify")){for(var af=0;af<U.length;++af){var X=this.pdf.getStringUnitWidth(U[af][0][0],R)*R.fontSize/ae;if(af>0){U[af][0][1]=K(U[af][0][1])}var ai=V-X;if(ag["text-align"]==="right"){U[af][0][1]["margin-left"]=ai}else{if(ag["text-align"]==="center"){U[af][0][1]["margin-left"]=ai/2}else{if(ag["text-align"]==="justify"){var T=U[af][0][0].split(" ").length-1;U[af][0][1]["word-spacing"]=ai/T;if(af===U.length-1){U[af][0][1]["word-spacing"]=0}}}}}}return U};E.prototype.RenderTextFragment=function(V,T){var U,Q,S;S=0;U=12;if(this.pdf.internal.pageSize.height-this.pdf.margins_doc.bottom<this.y+this.pdf.internal.getFontSize()){this.pdf.internal.write("ET","Q");this.pdf.addPage();this.y=this.pdf.margins_doc.top;this.pdf.internal.write("q","BT 0 g",this.pdf.internal.getCoordinateString(this.x),this.pdf.internal.getVerticalCoordinateString(this.y),T.color,"Td");S=Math.max(S,T["line-height"],T["font-size"]);this.pdf.internal.write(0,(-1*U*S).toFixed(2),"Td")}Q=this.pdf.internal.getFont(T["font-family"],T["font-style"]);var R=this.getPdfColor(T.color);if(R!==this.lastTextColor){this.pdf.internal.write(R);this.lastTextColor=R}if(T["word-spacing"]!==undefined&&T["word-spacing"]>0){this.pdf.internal.write(T["word-spacing"].toFixed(2),"Tw")}this.pdf.internal.write("/"+Q.id,(U*T["font-size"]).toFixed(2),"Tf","("+this.pdf.internal.pdfEscape(V)+") Tj");if(T["word-spacing"]!==undefined){this.pdf.internal.write(0,"Tw")}};E.prototype.getPdfColor=function(R){var Y;var Q,W,X;var S=/rgb\s*\(\s*(\d+),\s*(\d+),\s*(\d+\s*)\)/;var U=S.exec(R);if(U!=null){Q=parseInt(U[1]);W=parseInt(U[2]);X=parseInt(U[3])}else{if(R.charAt(0)!="#"){R=n.colorNameToHex(R);if(!R){R="#000000"}}Q=R.substring(1,3);Q=parseInt(Q,16);W=R.substring(3,5);W=parseInt(W,16);X=R.substring(5,7);X=parseInt(X,16)}if(typeof Q==="string"&&/^#[0-9A-Fa-f]{6}$/.test(Q)){var T=parseInt(Q.substr(1),16);Q=T>>16&255;W=T>>8&255;X=T&255}var V=this.f3;if(Q===0&&W===0&&X===0||typeof W==="undefined"){Y=V(Q/255)+" g"}else{Y=[V(Q/255),V(W/255),V(X/255),"rg"].join(" ")}return Y};E.prototype.f3=function(Q){return Q.toFixed(3)},E.prototype.renderParagraph=function(ac){var ak,Y,ag,al,ah,ae,aa,R,ab,ai,S,ad,V,Z,U;al=w(this.paragraph.text);Z=this.paragraph.style;ak=this.paragraph.blockstyle;V=this.paragraph.priorblockstyle||{};this.paragraph={text:[],style:[],blockstyle:{},priorblockstyle:ak};if(!al.join("").trim()){return}R=this.splitFragmentsIntoLines(al,Z);aa=void 0;ab=void 0;Y=12;ag=Y/this.pdf.internal.scaleFactor;this.priorMarginBottom=this.priorMarginBottom||0;ad=(Math.max((ak["margin-top"]||0)-this.priorMarginBottom,0)+(ak["padding-top"]||0))*ag;S=((ak["margin-bottom"]||0)+(ak["padding-bottom"]||0))*ag;this.priorMarginBottom=ak["margin-bottom"]||0;if(ak["page-break-before"]==="always"){this.pdf.addPage();this.y=0;ad=((ak["margin-top"]||0)+(ak["padding-top"]||0))*ag}ai=this.pdf.internal.write;ah=void 0;ae=void 0;this.y+=ad;ai("q","BT 0 g",this.pdf.internal.getCoordinateString(this.x),this.pdf.internal.getVerticalCoordinateString(this.y),"Td");var Q=0;while(R.length){aa=R.shift();ab=0;ah=0;ae=aa.length;while(ah!==ae){if(aa[ah][0].trim()){ab=Math.max(ab,aa[ah][1]["line-height"],aa[ah][1]["font-size"]);U=aa[ah][1]["font-size"]*7}ah++}var af=0;var W=0;if(aa[0][1]["margin-left"]!==undefined&&aa[0][1]["margin-left"]>0){W=this.pdf.internal.getCoordinateString(aa[0][1]["margin-left"]);af=W-Q;Q=W}var X=Math.max(ak["margin-left"]||0,0)*ag;ai(af+X,(-1*Y*ab).toFixed(2),"Td");ah=0;ae=aa.length;while(ah!==ae){if(aa[ah][0]){this.RenderTextFragment(aa[ah][0],aa[ah][1])}ah++}this.y+=ab*ag;if(this.executeWatchFunctions(aa[0][1])&&R.length>0){var aj=[];var T=[];R.forEach(function(am){var ao=0;var an=am.length;while(ao!==an){if(am[ao][0]){aj.push(am[ao][0]+" ");T.push(am[ao][1])}++ao}});R=this.splitFragmentsIntoLines(w(aj),T);ai("ET","Q");ai("q","BT 0 g",this.pdf.internal.getCoordinateString(this.x),this.pdf.internal.getVerticalCoordinateString(this.y),"Td")}}if(ac&&typeof ac==="function"){ac.call(this,this.x-9,this.y-U/2)}ai("ET","Q");return this.y+=S};E.prototype.setBlockBoundary=function(Q){return this.renderParagraph(Q)};E.prototype.setBlockStyle=function(Q){return this.paragraph.blockstyle=Q};E.prototype.addText=function(R,Q){this.paragraph.text.push(R);return this.paragraph.style.push(Q)};B={helvetica:"helvetica","sans-serif":"helvetica","times new roman":"times",serif:"times",times:"times",monospace:"courier",courier:"courier"};I={100:"normal",200:"normal",300:"normal",400:"normal",500:"bold",600:"bold",700:"bold",800:"bold",900:"bold",normal:"normal",bold:"bold",bolder:"bold",lighter:"normal"};s={normal:"normal",italic:"italic",oblique:"italic"};x={left:"left",right:"right",center:"center",justify:"justify"};z={none:"none",right:"right",left:"left"};N={none:"none",both:"both"};P={normal:1};F.fromHTML=function(T,Q,V,R,U,S){this.margins_doc=S||{top:0,bottom:0};if(!R){R={}}if(!R.elementHandlers){R.elementHandlers={}}return A(this,T,isNaN(Q)?4:Q,isNaN(V)?4:V,R,U)}})(i.API);(function(v){var t,s,u;v.addJS=function(w){u=w;this.internal.events.subscribe("postPutResources",function(x){t=this.internal.newObject();this.internal.write("<< /Names [(EmbeddedJS) "+(t+1)+" 0 R] >>","endobj");s=this.internal.newObject();this.internal.write("<< /S /JavaScript /JS (",u,") >>","endobj")});this.internal.events.subscribe("putCatalog",function(){if(t!==undefined&&s!==undefined){this.internal.write("/Names <</JavaScript "+t+" 0 R>>")}});return this}})(i.API);(function(s){s.events.push(["postPutResources",function(){var v=this;var u=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0){var E=v.outline.render().split(/\r\n/);for(var z=0;z<E.length;z++){var F=E[z];var y=u.exec(F);if(y!=null){var x=y[1];v.internal.newObjectDeferredBegin(x)}v.internal.write(F)}}if(this.outline.createNamedDestinations){var B=this.internal.pages.length;var C=[];for(var z=0;z<B;z++){var t=v.internal.newObject();C.push(t);var w=v.internal.getPageInfo(z+1);v.internal.write("<< /D["+w.objId+" 0 R /XYZ null null null]>> endobj")}var A=v.internal.newObject();v.internal.write("<< /Names [ ");for(var z=0;z<C.length;z++){v.internal.write("(page_"+(z+1)+")"+C[z]+" 0 R")}v.internal.write(" ] >>","endobj");var D=v.internal.newObject();v.internal.write("<< /Dests "+A+" 0 R");v.internal.write(">>","endobj")}}]);s.events.push(["putCatalog",function(){var t=this;if(t.outline.root.children.length>0){t.internal.write("/Outlines",this.outline.makeRef(this.outline.root));if(this.outline.createNamedDestinations){t.internal.write("/Names "+namesOid+" 0 R")}}}]);s.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:false,root:{children:[]}};var u;var v=[];t.outline.add=function(x,z,w){var y={title:z,options:w,children:[]};if(x==null){x=this.root}x.children.push(y);return y};t.outline.render=function(){this.ctx={};this.ctx.val="";this.ctx.pdf=t;this.genIds_r(this.root);this.renderRoot(this.root);this.renderItems(this.root);return this.ctx.val};t.outline.genIds_r=function(x){x.id=t.internal.newObjectDeferred();for(var w=0;w<x.children.length;w++){this.genIds_r(x.children[w])}};t.outline.renderRoot=function(w){this.objStart(w);this.line("/Type /Outlines");if(w.children.length>0){this.line("/First "+this.makeRef(w.children[0]));this.line("/Last "+this.makeRef(w.children[w.children.length-1]))}this.line("/Count "+this.count_r({count:0},w));this.objEnd()};t.outline.renderItems=function(z){for(var w=0;w<z.children.length;w++){var y=z.children[w];this.objStart(y);this.line("/Title "+this.makeString(y.title));this.line("/Parent "+this.makeRef(z));if(w>0){this.line("/Prev "+this.makeRef(z.children[w-1]))}if(w<z.children.length-1){this.line("/Next "+this.makeRef(z.children[w+1]))}if(y.children.length>0){this.line("/First "+this.makeRef(y.children[0]));this.line("/Last "+this.makeRef(y.children[y.children.length-1]))}var x=this.count=this.count_r({count:0},y);if(x>0){this.line("/Count "+x)}if(y.options){if(y.options.pageNumber){var A=t.internal.getPageInfo(y.options.pageNumber);this.line("/Dest ["+A.objId+" 0 R /XYZ 0 "+this.ctx.pdf.internal.pageSize.height+" 0]")}}this.objEnd()}for(var w=0;w<z.children.length;w++){var y=z.children[w];this.renderItems(y)}};t.outline.line=function(w){this.ctx.val+=w+"\r\n"};t.outline.makeRef=function(w){return w.id+" 0 R"};t.outline.makeString=function(w){return"("+t.internal.pdfEscape(w)+")"};t.outline.objStart=function(w){this.ctx.val+="\r\n"+w.id+" 0 obj\r\n<<\r\n"};t.outline.objEnd=function(w){this.ctx.val+=">> \r\nendobj\r\n"};t.outline.count_r=function(w,y){for(var x=0;x<y.children.length;x++){w.count++;this.count_r(w,y.children[x])}return w.count}}]);return this})(i.API);(function(D){var y=function y(){return typeof PNG!=="function"||typeof q!=="function"},J=function J(L){return L!==D.image_compression.NONE&&I()},I=function I(){var L=typeof e==="function";if(!L){throw new Error("requires deflate.js for compression")}return L},v=function v(X,N,L,W){var M=5,P=A;switch(W){case D.image_compression.FAST:M=3;P=x;break;case D.image_compression.MEDIUM:M=6;P=s;break;case D.image_compression.SLOW:M=9;P=H;break}X=F(X,N,L,P);var R=new Uint8Array(E(M));var U=K(X);var Q=new e(M);var V=Q.append(X);var O=Q.flush();var T=R.length+V.length+O.length;var S=new Uint8Array(T+4);S.set(R);S.set(V,R.length);S.set(O,R.length+V.length);S[T++]=U>>>24&255;S[T++]=U>>>16&255;S[T++]=U>>>8&255;S[T++]=U&255;return D.arrayBufferToBinaryString(S)},E=function E(M,R){var L=8;var O=Math.LOG2E*Math.log(32768)-8;var N=O<<4|L;var Q=N<<8;var P=Math.min(3,(R-1&255)>>1);Q|=P<<6;Q|=0;Q+=31-Q%31;return[N,Q&255&255]},K=function K(S,R){var N=1;var Q=N&65535,M=N>>>16&65535;var L=S.length;var P;var O=0;while(L>0){P=L>R?R:L;L-=P;do{Q+=S[O++];M+=Q}while(--P);Q%=65521;M%=65521}return(M<<16|Q)>>>0},F=function F(X,M,L,O){var Y=X.length/M,Z=new Uint8Array(X.length+Y),P=w(),T=0,W,V,R;for(;T<Y;T++){R=T*M;W=X.subarray(R,R+M);if(O){Z.set(O(W,L,V),R+T)}else{var Q=0,U=P.length,S=[];for(;Q<U;Q++){S[Q]=P[Q](W,L,V)}var N=t(S.concat());Z.set(S[N],R+T)}V=W}return Z},u=function u(M,O,N){var L=Array.apply([],M);L.unshift(0);return L},x=function x(N,R,P){var M=[],O=0,L=N.length,Q;M[0]=1;for(;O<L;O++){Q=N[O-R]||0;M[O+1]=N[O]-Q+256&255}return M},A=function A(O,R,Q){var N=[],P=0,M=O.length,L;N[0]=2;for(;P<M;P++){L=Q&&Q[P]||0;N[P+1]=O[P]-L+256&255}return N},s=function s(O,S,Q){var N=[],P=0,M=O.length,R,L;N[0]=3;for(;P<M;P++){R=O[P-S]||0;L=Q&&Q[P]||0;N[P+1]=O[P]+256-(R+L>>>1)&255}return N},H=function H(T,M,S){var U=[],O=0,Q=T.length,N,P,R,L;U[0]=4;for(;O<Q;O++){N=T[O-M]||0;P=S&&S[O]||0;R=S&&S[O-M]||0;L=C(N,P,R);U[O+1]=T[O]-L+256&255}return U},C=function C(R,L,M){var Q=R+L-M,O=Math.abs(Q-R),N=Math.abs(Q-L),P=Math.abs(Q-M);return O<=N&&O<=P?R:N<=P?L:M},w=function w(){return[u,x,A,s,H]},t=function t(Q){var N=0,L=Q.length,O,M,P;while(N<L){O=G(Q[N].slice(1));if(O<M||!M){M=O;P=N}N++}return P},G=function G(O){var M=0,L=O.length,N=0;while(M<L){N+=Math.abs(O[M++])}return N},B=function B(M){var L;switch(M){case D.image_compression.FAST:L=11;break;case D.image_compression.MEDIUM:L=13;break;case D.image_compression.SLOW:L=14;break}return L},z=function z(L){console.log("width: "+L.width);console.log("height: "+L.height);console.log("bits: "+L.bits);console.log("colorType: "+L.colorType);console.log("transparency:");console.log(L.transparency);console.log("text:");console.log(L.text);console.log("compressionMethod: "+L.compressionMethod);console.log("filterMethod: "+L.filterMethod);console.log("interlaceMethod: "+L.interlaceMethod);console.log("imgData:");console.log(L.imgData);console.log("palette:");console.log(L.palette);console.log("colors: "+L.colors);console.log("colorSpace: "+L.colorSpace);console.log("pixelBitlength: "+L.pixelBitlength);console.log("hasAlphaChannel: "+L.hasAlphaChannel)};D.processPNG=function(af,M,V,ak,N){var ad=this.color_spaces.DEVICE_RGB,U=this.decode.FLATE_DECODE,Q=8,am,Z,R,S,aa,ab;if(this.isArrayBuffer(af)){af=new Uint8Array(af)}if(this.isArrayBufferView(af)){if(y()){throw new Error("PNG support requires png.js and zlib.js")}am=new PNG(af);af=am.imgData;Q=am.bits;ad=am.colorSpace;S=am.colors;if([4,6].indexOf(am.colorType)!==-1){if(am.bits===8){var W=am.pixelBitlength==32?new Uint32Array(am.decodePixels().buffer):am.pixelBitlength==16?new Uint16Array(am.decodePixels().buffer):new Uint8Array(am.decodePixels().buffer),ae=W.length,ah=new Uint8Array(ae*am.colors),Y=new Uint8Array(ae),ag=am.pixelBitlength-am.bits,ac=0,X=0,P,L;for(;ac<ae;ac++){P=W[ac];L=0;while(L<ag){ah[X++]=P>>>L&255;L=L+am.bits}Y[ac]=P>>>L&255}}if(am.bits===16){var W=new Uint32Array(am.decodePixels().buffer),ae=W.length,ah=new Uint8Array(ae*(32/am.pixelBitlength)*am.colors),Y=new Uint8Array(ae*(32/am.pixelBitlength)),ai=am.colors>1,ac=0,X=0,aj=0,P;while(ac<ae){P=W[ac++];ah[X++]=P>>>0&255;if(ai){ah[X++]=P>>>16&255;P=W[ac++];ah[X++]=P>>>0&255}Y[aj++]=P>>>16&255}Q=8}if(J(ak)){af=v(ah,am.width*am.colors,am.colors,ak);ab=v(Y,am.width,1,ak)}else{af=ah;ab=Y;U=null}}if(am.colorType===3){ad=this.color_spaces.INDEXED;aa=am.palette;if(am.transparency.indexed){var O=am.transparency.indexed;var al=0,ac=0,ae=O.length;for(;ac<ae;++ac){al+=O[ac]}al=al/255;if(al===ae-1&&O.indexOf(0)!==-1){R=[O.indexOf(0)]}else{if(al!==ae){var W=am.decodePixels(),Y=new Uint8Array(W.length),ac=0,ae=W.length;for(;ac<ae;ac++){Y[ac]=O[W[ac]]}ab=v(Y,am.width,1)}}}}var T=B(ak);if(U===this.decode.FLATE_DECODE){Z="/Predictor "+T+" /Colors "+S+" /BitsPerComponent "+Q+" /Columns "+am.width}else{Z="/Colors "+S+" /BitsPerComponent "+Q+" /Columns "+am.width}if(this.isArrayBuffer(af)||this.isArrayBufferView(af)){af=this.arrayBufferToBinaryString(af)}if(ab&&this.isArrayBuffer(ab)||this.isArrayBufferView(ab)){ab=this.arrayBufferToBinaryString(ab)}return this.createImageInfo(af,am.width,am.height,ad,Q,U,M,V,Z,R,aa,ab,T)}throw new Error("Unsupported PNG image data, try using JPEG instead.")}})(i.API);(function(s){s.autoPrint=function(){var t;this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject();this.internal.write("<< /S/Named /Type/Action /N/Print >>","endobj")});this.internal.events.subscribe("putCatalog",function(){this.internal.write("/OpenAction "+t+" 0 R")});return this}})(i.API);(function(u){var t=u.getCharWidthsArray=function(H,J){if(!J){J={}}var z=J.widths?J.widths:this.internal.getFont().metadata.Unicode.widths,G=z.fof?z.fof:1,C=J.kerning?J.kerning:this.internal.getFont().metadata.Unicode.kerning,E=C.fof?C.fof:1;var B,A,D,F=0,I=z[0]||G,y=[];for(B=0,A=H.length;B<A;B++){D=H.charCodeAt(B);y.push((z[D]||I)/G+(C[D]&&C[D][F]||0)/E);F=D}return y};var w=function w(A){var z=A.length,y=0;while(z){z--;y+=A[z]}return y};var s=u.getStringUnitWidth=function(z,y){return w(t.call(this,z,y))};var v=function v(y,D,z,A){var G=[];var C=0,B=y.length,F=0;while(C!==B&&F+D[C]<z){F+=D[C];C++}G.push(y.slice(0,C));var E=C;F=0;while(C!==B){if(F+D[C]>A){G.push(y.slice(E,C));F=0;E=C}F+=D[C];C++}if(E!==C){G.push(y.slice(E,C))}return G};var x=function x(F,P,C){if(!C){C={}}var E=[],z=[E],B=C.textIndent||0,H=0,I=0,N,K,G=F.split(" "),R=t(" ",C)[0],M,J,Q,y;if(C.lineIndent===-1){y=G[0].length+2}else{y=C.lineIndent||0}if(y){var O=Array(y).join(" "),D=[];G.map(function(S){S=S.split(/\s*\n/);if(S.length>1){D=D.concat(S.map(function(U,T){return(T&&U.length?"\n":"")+U}))}else{D.push(S[0])}});G=D;y=s(O,C)}for(M=0,J=G.length;M<J;M++){var A=0;N=G[M];if(y&&N[0]=="\n"){N=N.substr(1);A=1}K=t(N,C);I=w(K);if(B+H+I>P||A){if(I>P){Q=v(N,K,P-(B+H),P);E.push(Q.shift());E=[Q.pop()];while(Q.length){z.push([Q.shift()])}I=w(K.slice(N.length-E[0].length))}else{E=[N]}z.push(E);B=I+y;H=R}else{E.push(N);B+=H+I;H=R}}if(y){var L=function L(T,S){return(S?O:"")+T.join(" ")}}else{var L=function L(S){return S.join(" ")}}return z.map(L)};u.splitTextToSize=function(G,C,H){if(!H){H={}}var z=H.fontSize||this.internal.getFontSize(),y=function(J){var L={0:1},I={};if(!J.widths||!J.kerning){var M=this.internal.getFont(J.fontName,J.fontStyle),K="Unicode";if(M.metadata[K]){return{widths:M.metadata[K].widths||L,kerning:M.metadata[K].kerning||I}}}else{return{widths:J.widths,kerning:J.kerning}}return{widths:L,kerning:I}}.call(this,H);var F;if(Array.isArray(G)){F=G}else{F=G.split(/\r?\n/)}var A=1*this.internal.scaleFactor*C/z;y.textIndent=H.textIndent?H.textIndent*1*this.internal.scaleFactor/z:0;y.lineIndent=H.lineIndent;var E,D,B=[];for(E=0,D=F.length;E<D;E++){B=B.concat(x(F[E],A,y))}return B}})(i.API);(function(s){var w=function w(H){var N="0123456789abcdef",F="klmnopqrstuvwxyz",z={};for(var I=0;I<F.length;I++){z[F[I]]=N[I]}var G,D={},E=1,K,B=D,y=[],J,C="",L="",M,A=H.length-1,x;I=1;while(I!=A){x=H[I];I+=1;if(x=="'"){if(K){M=K.join("");K=G}else{K=[]}}else{if(K){K.push(x)}else{if(x=="{"){y.push([B,M]);B={};M=G}else{if(x=="}"){J=y.pop();J[0][J[1]]=B;M=G;B=J[0]}else{if(x=="-"){E=-1}else{if(M===G){if(z.hasOwnProperty(x)){C+=z[x];M=parseInt(C,16)*E;E=+1;C=""}else{C+=x}}else{if(z.hasOwnProperty(x)){L+=z[x];B[M]=parseInt(L,16)*E;E=+1;M=G;L=""}else{L+=x}}}}}}}}return D};var v={codePages:["WinAnsiEncoding"],WinAnsiEncoding:w("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:v,"Courier-Bold":v,"Courier-BoldOblique":v,"Courier-Oblique":v,Helvetica:v,"Helvetica-Bold":v,"Helvetica-BoldOblique":v,"Helvetica-Oblique":v,"Times-Roman":v,"Times-Bold":v,"Times-BoldItalic":v,"Times-Italic":v}},t={Unicode:{"Courier-Oblique":w("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":w("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":w("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:w("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":w("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":w("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Helvetica:w("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":w("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),"Courier-Bold":w("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":w("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":w("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":w("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};s.events.push(["addFont",function(x){var y,A,z="Unicode",B;y=t[z][x.PostScriptName];if(y){if(x.metadata[z]){A=x.metadata[z]}else{A=x.metadata[z]={}}A.widths=y.widths;A.kerning=y.kerning}B=u[z][x.PostScriptName];if(B){if(x.metadata[z]){A=x.metadata[z]}else{A=x.metadata[z]={}}A.encoding=B;if(B.codePages&&B.codePages.length){x.encoding=B.codePages[0]}}}])})(i.API);(function(s){s.addSVG=function(u,E,D,F,K){var t;if(E===t||D===t){throw new Error("addSVG needs values for 'x' and 'y'")}function M(y,w){var x=w.createElement("style");x.type="text/css";if(x.styleSheet){x.styleSheet.cssText=y}else{x.appendChild(w.createTextNode(y))}w.getElementsByTagName("head")[0].appendChild(x)}function z(w){var x="childframe",y=w.createElement("iframe");M(".jsPDF_sillysvg_iframe {display:none;position:absolute;}",w);y.name=x;y.setAttribute("width",0);y.setAttribute("height",0);y.setAttribute("frameborder","0");y.setAttribute("scrolling","no");y.setAttribute("seamless","seamless");y.setAttribute("class","jsPDF_sillysvg_iframe");w.body.appendChild(y);return y}function G(w,y){var x=(y.contentWindow||y.contentDocument).document;x.write(w);x.close();return x.getElementsByTagName("svg")[0]}function C(T){var R=parseFloat(T[1]),U=parseFloat(T[2]),S=[],Q=3,w=T.length;while(Q<w){if(T[Q]==="c"){S.push([parseFloat(T[Q+1]),parseFloat(T[Q+2]),parseFloat(T[Q+3]),parseFloat(T[Q+4]),parseFloat(T[Q+5]),parseFloat(T[Q+6])]);Q+=7}else{if(T[Q]==="l"){S.push([parseFloat(T[Q+1]),parseFloat(T[Q+2])]);Q+=3}else{Q+=1}}}return[R,U,S]}var O=z(document),B=G(u,O),P=[1,1],N=parseFloat(B.getAttribute("width")),A=parseFloat(B.getAttribute("height"));if(N&&A){if(F&&K){P=[F/N,K/A]}else{if(F){P=[F/N,F/N]}else{if(K){P=[K/A,K/A]}}}}var J,I,L,v,H=B.childNodes;for(J=0,I=H.length;J<I;J++){L=H[J];if(L.tagName&&L.tagName.toUpperCase()==="PATH"){v=C(L.getAttribute("d").split(" "));v[0]=v[0]*P[0]+E;v[1]=v[1]*P[1]+D;this.lines.call(this,v[2],v[0],v[1],P)}}return this}})(i.API);(function(s){s.putTotalPages=function(t){var v=new RegExp(t,"g");for(var w=1;w<=this.internal.getNumberOfPages();w++){for(var u=0;u<this.internal.pages[w].length;u++){this.internal.pages[w][u]=this.internal.pages[w][u].replace(v,this.internal.getNumberOfPages())}}return this}})(i.API);(function(v){var u="";var s="";var t="";v.addMetadata=function(w,x){s=x||"http://jspdf.default.namespaceuri/";u=w;this.internal.events.subscribe("postPutResources",function(){if(!u){t=""}else{var G='<x:xmpmeta xmlns:x="adobe:ns:meta/">';var B='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+s+'"><jspdf:metadata>';var E="</jspdf:metadata></rdf:Description></rdf:RDF>";var C="</x:xmpmeta>";var z=unescape(encodeURIComponent(G));var D=unescape(encodeURIComponent(B));var F=unescape(encodeURIComponent(u));var H=unescape(encodeURIComponent(E));var y=unescape(encodeURIComponent(C));var A=D.length+F.length+H.length+z.length+y.length;t=this.internal.newObject();this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+A+" >>");this.internal.write("stream");this.internal.write(z+D+F+H+y);this.internal.write("endstream");this.internal.write("endobj")}});this.internal.events.subscribe("putCatalog",function(){if(t){this.internal.write("/Metadata "+t+" 0 R")}});return this}})(i.API);
/*! @source http://purl.eligrey.com/github/Blob.js/blob/master/Blob.js */
(function(s){s.URL=s.URL||s.webkitURL;if(s.Blob&&s.URL){try{new Blob;return}catch(v){}}var u=s.BlobBuilder||s.WebKitBlobBuilder||s.MozBlobBuilder||(function(H){var y=function(R){return Object.prototype.toString.call(R).match(/^\[object\s(.*)\]$/)[1]},Q=function E(){this.data=[]},O=function A(T,R,S){this.data=T;this.size=T.length;this.type=R;this.encoding=S},I=Q.prototype,N=O.prototype,K=H.FileReaderSync,w=function(R){this.code=this[this.name=R]},J=("NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR").split(" "),M=J.length,D=H.URL||H.webkitURL||H,L=D.createObjectURL,x=D.revokeObjectURL,C=D,G=H.btoa,B=H.atob,z=H.ArrayBuffer,F=H.Uint8Array,P=/^[\w-]+:\/*\[?[\w\.:-]+\]?(?::[0-9]+)?/;O.fake=N.fake=true;while(M--){w.prototype[J[M]]=M+1}if(!D.createObjectURL){C=H.URL=function(S){var R=document.createElementNS("http://www.w3.org/1999/xhtml","a"),T;R.href=S;if(!("origin" in R)){if(R.protocol.toLowerCase()==="data:"){R.origin=null}else{T=S.match(P);R.origin=T&&T[1]}}return R}}C.createObjectURL=function(S){var T=S.type,R;if(T===null){T="application/octet-stream"}if(S instanceof O){R="data:"+T;if(S.encoding==="base64"){return R+";base64,"+S.data}else{if(S.encoding==="URI"){return R+","+decodeURIComponent(S.data)}}if(G){return R+";base64,"+G(S.data)}else{return R+","+encodeURIComponent(S.data)}}else{if(L){return L.call(D,S)}}};C.revokeObjectURL=function(R){if(R.substring(0,5)!=="data:"&&x){x.call(D,R)}};I.append=function(V){var X=this.data;if(F&&(V instanceof z||V instanceof F)){var W="",S=new F(V),T=0,U=S.length;for(;T<U;T++){W+=String.fromCharCode(S[T])}X.push(W)}else{if(y(V)==="Blob"||y(V)==="File"){if(K){var R=new K;X.push(R.readAsBinaryString(V))}else{throw new w("NOT_READABLE_ERR")}}else{if(V instanceof O){if(V.encoding==="base64"&&B){X.push(B(V.data))}else{if(V.encoding==="URI"){X.push(decodeURIComponent(V.data))}else{if(V.encoding==="raw"){X.push(V.data)}}}}else{if(typeof V!=="string"){V+=""}X.push(unescape(encodeURIComponent(V)))}}}};I.getBlob=function(R){if(!arguments.length){R=null}return new O(this.data.join(""),R,"raw")};I.toString=function(){return"[object BlobBuilder]"};N.slice=function(U,R,T){var S=arguments.length;if(S<3){T=null}return new O(this.data.slice(U,S>1?R:this.data.length),T,this.encoding)};N.toString=function(){return"[object Blob]"};N.close=function(){this.size=0;delete this.data};return Q}(s));s.Blob=function(A,z){var C=z?(z.type||""):"";var y=new u();if(A){for(var B=0,w=A.length;B<w;B++){if(Uint8Array&&A[B] instanceof Uint8Array){y.append(A[B].buffer)}else{y.append(A[B])}}}var x=y.getBlob(C);if(!x.slice&&x.webkitSlice){x.slice=x.webkitSlice}return x};var t=Object.getPrototypeOf||function(w){return w.__proto__};s.Blob.prototype=t(new s.Blob())}(typeof self!=="undefined"&&self||typeof window!=="undefined"&&window||undefined.content||undefined));
/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */
;var f=f||(function(z){if(typeof navigator!=="undefined"&&/MSIE [1-9]\./.test(navigator.userAgent)){return}var K=z.document,E=function(){return z.URL||z.webkitURL||z},G=K.createElementNS("http://www.w3.org/1999/xhtml","a"),x="download" in G,C=function(M){var L=new MouseEvent("click");M.dispatchEvent(L)},t=/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),H=z.webkitRequestFileSystem,I=z.requestFileSystem||H||z.mozRequestFileSystem,F=function(L){(z.setImmediate||z.setTimeout)(function(){throw L},0)},u="application/octet-stream",D=0,A=500,B=function(M){var L=function(){if(typeof M==="string"){E().revokeObjectURL(M)}else{M.remove()}};if(z.chrome){L()}else{setTimeout(L,A)}},J=function(M,L,P){L=[].concat(L);var O=L.length;while(O--){var Q=M["on"+L[O]];if(typeof Q==="function"){try{Q.call(M,P||M)}catch(N){F(N)}}}},y=function(L){if(/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(L.type)){return new Blob(["\ufeff",L],{type:L.type})}return L},w=function(L,M,N){if(!N){L=y(L)}var O=this,U=L.type,X=false,Q,P,T=function(){J(O,"writestart progress write writeend".split(" "))},W=function(){if(P&&t&&typeof FileReader!=="undefined"){var Y=new FileReader();Y.onloadend=function(){var aa=Y.result;P.location.href="data:attachment/file"+aa.slice(aa.search(/[,;]/));O.readyState=O.DONE;T()};Y.readAsDataURL(L);O.readyState=O.INIT;return}if(X||!Q){Q=E().createObjectURL(L)}if(P){P.location.href=Q}else{var Z=z.open(Q,"_blank");if(Z==undefined&&t){z.location.href=Q}}O.readyState=O.DONE;T();B(Q)},S=function(Y){return function(){if(O.readyState!==O.DONE){return Y.apply(this,arguments)}}},R={create:true,exclusive:false},V;O.readyState=O.INIT;if(!M){M="download"}if(x){Q=E().createObjectURL(L);setTimeout(function(){G.href=Q;G.download=M;C(G);T();B(Q);O.readyState=O.DONE});return}if(z.chrome&&U&&U!==u){V=L.slice||L.webkitSlice;L=V.call(L,0,L.size,u);X=true}if(H&&M!=="download"){M+=".download"}if(U===u||H){P=z}if(!I){W();return}D+=L.size;I(z.TEMPORARY,D,S(function(Y){Y.root.getDirectory("saved",R,S(function(Z){var aa=function(){Z.getFile(M,R,S(function(ab){ab.createWriter(S(function(ac){ac.onwriteend=function(ad){P.location.href=ab.toURL();O.readyState=O.DONE;J(O,"writeend",ad);B(ab)};ac.onerror=function(){var ad=ac.error;if(ad.code!==ad.ABORT_ERR){W()}};"writestart progress write abort".split(" ").forEach(function(ad){ac["on"+ad]=O["on"+ad]});ac.write(L);O.abort=function(){ac.abort();O.readyState=O.DONE};O.readyState=O.WRITING}),W)}),W)};Z.getFile(M,{create:false},S(function(ab){ab.remove();aa()}),S(function(ab){if(ab.code===ab.NOT_FOUND_ERR){aa()}else{W()}}))}),W)}),W)},v=w.prototype,s=function(M,N,L){return new w(M,N,L)};if(typeof navigator!=="undefined"&&navigator.msSaveOrOpenBlob){return function(M,N,L){if(!L){M=y(M)}return navigator.msSaveOrOpenBlob(M,N||"download")}}v.abort=function(){var L=this;L.readyState=L.DONE;J(L,"abort")};v.readyState=v.INIT=0;v.WRITING=1;v.DONE=2;v.error=v.onwritestart=v.onprogress=v.onwrite=v.onabort=v.onerror=v.onwriteend=null;return s}(typeof self!=="undefined"&&self||typeof window!=="undefined"&&window||undefined.content));if(typeof module!=="undefined"&&module.exports){module.exports.saveAs=f}else{if((typeof define!=="undefined"&&define!==null)&&(define.amd!=null)){define([],function(){return f})}}void function(s,t){if(typeof module==="object"){module.exports=t()}else{if(typeof define==="function"){define(t)}else{s.adler32cs=t()}}}(i,function(){var z=typeof ArrayBuffer==="function"&&typeof Uint8Array==="function";var v=null,s=(function(){if(!z){return function G(){return false}}try{var E={};if(typeof E.Buffer==="function"){v=E.Buffer}}catch(F){}return function G(H){return H instanceof ArrayBuffer||v!==null&&H instanceof v}}());var t=(function(){if(v!==null){return function E(F){return new v(F,"utf8").toString("binary")}}else{return function E(F){return unescape(encodeURIComponent(F))}}}());var x=65521;var C=function C(J,F){var G=J&65535,E=J>>>16;for(var H=0,I=F.length;H<I;H++){G=(G+(F.charCodeAt(H)&255))%x;E=(E+G)%x}return(E<<16|G)>>>0};var D=function D(K,J){var G=K&65535,F=K>>>16;for(var H=0,I=J.length,E;H<I;H++){G=(G+J[H])%x;F=(F+G)%x}return(F<<16|G)>>>0};var y={};var u=y.Adler32=(function(){var M=function F(O){if(!(this instanceof M)){throw new TypeError("Constructor cannot called be as a function.")}if(!isFinite(O=O==null?1:+O)){throw new Error("First arguments needs to be a finite number.")}this.checksum=O>>>0};var I=M.prototype={};I.constructor=M;M.from=function(O){O.prototype=I;return O}(function L(O){if(!(this instanceof M)){throw new TypeError("Constructor cannot called be as a function.")}if(O==null){throw new Error("First argument needs to be a string.")}this.checksum=C(1,O.toString())});M.fromUtf8=function(O){O.prototype=I;return O}(function G(P){if(!(this instanceof M)){throw new TypeError("Constructor cannot called be as a function.")}if(P==null){throw new Error("First argument needs to be a string.")}var O=t(P.toString());this.checksum=C(1,O)});if(z){M.fromBuffer=function(O){O.prototype=I;return O}(function N(O){if(!(this instanceof M)){throw new TypeError("Constructor cannot called be as a function.")}if(!s(O)){throw new Error("First argument needs to be ArrayBuffer.")}var P=new Uint8Array(O);return this.checksum=D(1,P)})}I.update=function H(O){if(O==null){throw new Error("First argument needs to be a string.")}O=O.toString();return this.checksum=C(this.checksum,O)};I.updateUtf8=function E(P){if(P==null){throw new Error("First argument needs to be a string.")}var O=t(P.toString());return this.checksum=C(this.checksum,O)};if(z){I.updateBuffer=function K(O){if(!s(O)){throw new Error("First argument needs to be ArrayBuffer.")}var P=new Uint8Array(O);return this.checksum=D(this.checksum,P)}}I.clone=function J(){return new F(this.checksum)};return M}());y.from=function A(E){if(E==null){throw new Error("First argument needs to be a string.")}return C(1,E.toString())};y.fromUtf8=function w(F){if(F==null){throw new Error("First argument needs to be a string.")}var E=t(F.toString());return C(1,E)};if(z){y.fromBuffer=function B(E){if(!s(E)){throw new Error("First argument need to be ArrayBuffer.")}var F=new Uint8Array(E);return D(1,F)}}return y});var n={};n._colorsTable={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};n.colorNameToHex=function(s){s=s.toLowerCase();if(typeof this._colorsTable[s]!="undefined"){return this._colorsTable[s]}return false};var e=(function(z){var aw=15;var t=30;var G=19;var C=29;var w=256;var x=(w+1+C);var y=(2*x+1);var u=256;var am=7;var S=16;var R=17;var V=18;var L=8*2;var P=-1;var ae=1;var ac=2;var s=0;var aq=0;var U=1;var I=3;var D=4;var M=0;var av=1;var ad=2;var ay=-2;var F=-3;var af=-5;var ao=[0,1,2,3,4,4,5,5,6,6,6,6,7,7,7,7,8,8,8,8,8,8,8,8,9,9,9,9,9,9,9,9,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,0,0,16,17,18,18,19,19,20,20,20,20,21,21,21,21,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29];function J(){var aA=this;function aC(aO){var aP=aA.dyn_tree;var aN=aA.stat_desc.static_tree;var aG=aA.stat_desc.extra_bits;var aD=aA.stat_desc.extra_base;var aM=aA.stat_desc.max_length;var aJ;var aE,aF;var aL;var aI;var aK;var aH=0;for(aL=0;aL<=aw;aL++){aO.bl_count[aL]=0}aP[aO.heap[aO.heap_max]*2+1]=0;for(aJ=aO.heap_max+1;aJ<y;aJ++){aE=aO.heap[aJ];aL=aP[aP[aE*2+1]*2+1]+1;if(aL>aM){aL=aM;aH++}aP[aE*2+1]=aL;if(aE>aA.max_code){continue}aO.bl_count[aL]++;aI=0;if(aE>=aD){aI=aG[aE-aD]}aK=aP[aE*2];aO.opt_len+=aK*(aL+aI);if(aN){aO.static_len+=aK*(aN[aE*2+1]+aI)}}if(aH===0){return}do{aL=aM-1;while(aO.bl_count[aL]===0){aL--}aO.bl_count[aL]--;aO.bl_count[aL+1]+=2;aO.bl_count[aM]--;aH-=2}while(aH>0);for(aL=aM;aL!==0;aL--){aE=aO.bl_count[aL];while(aE!==0){aF=aO.heap[--aJ];if(aF>aA.max_code){continue}if(aP[aF*2+1]!=aL){aO.opt_len+=(aL-aP[aF*2+1])*aP[aF*2];aP[aF*2+1]=aL}aE--}}}function aB(aF,aD){var aE=0;do{aE|=aF&1;aF>>>=1;aE<<=1}while(--aD>0);return aE>>>1}function az(aE,aK,aF){var aH=[];var aG=0;var aI;var aJ;var aD;for(aI=1;aI<=aw;aI++){aH[aI]=aG=((aG+aF[aI-1])<<1)}for(aJ=0;aJ<=aK;aJ++){aD=aE[aJ*2+1];if(aD===0){continue}aE[aJ*2]=aB(aH[aD]++,aD)}}aA.build_tree=function(aG){var aE=aA.dyn_tree;var aI=aA.stat_desc.static_tree;var aF=aA.stat_desc.elems;var aK,aD;var aJ=-1;var aH;aG.heap_len=0;aG.heap_max=y;for(aK=0;aK<aF;aK++){if(aE[aK*2]!==0){aG.heap[++aG.heap_len]=aJ=aK;aG.depth[aK]=0}else{aE[aK*2+1]=0}}while(aG.heap_len<2){aH=aG.heap[++aG.heap_len]=aJ<2?++aJ:0;aE[aH*2]=1;aG.depth[aH]=0;aG.opt_len--;if(aI){aG.static_len-=aI[aH*2+1]}}aA.max_code=aJ;for(aK=Math.floor(aG.heap_len/2);aK>=1;aK--){aG.pqdownheap(aE,aK)}aH=aF;do{aK=aG.heap[1];aG.heap[1]=aG.heap[aG.heap_len--];aG.pqdownheap(aE,1);aD=aG.heap[1];aG.heap[--aG.heap_max]=aK;aG.heap[--aG.heap_max]=aD;aE[aH*2]=(aE[aK*2]+aE[aD*2]);aG.depth[aH]=Math.max(aG.depth[aK],aG.depth[aD])+1;aE[aK*2+1]=aE[aD*2+1]=aH;aG.heap[1]=aH++;aG.pqdownheap(aE,1)}while(aG.heap_len>=2);aG.heap[--aG.heap_max]=aG.heap[1];aC(aG);az(aE,aA.max_code,aG.bl_count)}}J._length_code=[0,1,2,3,4,5,6,7,8,8,9,9,10,10,11,11,12,12,12,12,13,13,13,13,14,14,14,14,15,15,15,15,16,16,16,16,16,16,16,16,17,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,28];J.base_length=[0,1,2,3,4,5,6,7,8,10,12,14,16,20,24,28,32,40,48,56,64,80,96,112,128,160,192,224,0];J.base_dist=[0,1,2,3,4,6,8,12,16,24,32,48,64,96,128,192,256,384,512,768,1024,1536,2048,3072,4096,6144,8192,12288,16384,24576];J.d_code=function(az){return((az)<256?ao[az]:ao[256+((az)>>>7)])};J.extra_lbits=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0];J.extra_dbits=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13];J.extra_blbits=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7];J.bl_order=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];function ar(aC,aB,aA,az,aE){var aD=this;aD.static_tree=aC;aD.extra_bits=aB;aD.extra_base=aA;aD.elems=az;aD.max_length=aE}ar.static_ltree=[12,8,140,8,76,8,204,8,44,8,172,8,108,8,236,8,28,8,156,8,92,8,220,8,60,8,188,8,124,8,252,8,2,8,130,8,66,8,194,8,34,8,162,8,98,8,226,8,18,8,146,8,82,8,210,8,50,8,178,8,114,8,242,8,10,8,138,8,74,8,202,8,42,8,170,8,106,8,234,8,26,8,154,8,90,8,218,8,58,8,186,8,122,8,250,8,6,8,134,8,70,8,198,8,38,8,166,8,102,8,230,8,22,8,150,8,86,8,214,8,54,8,182,8,118,8,246,8,14,8,142,8,78,8,206,8,46,8,174,8,110,8,238,8,30,8,158,8,94,8,222,8,62,8,190,8,126,8,254,8,1,8,129,8,65,8,193,8,33,8,161,8,97,8,225,8,17,8,145,8,81,8,209,8,49,8,177,8,113,8,241,8,9,8,137,8,73,8,201,8,41,8,169,8,105,8,233,8,25,8,153,8,89,8,217,8,57,8,185,8,121,8,249,8,5,8,133,8,69,8,197,8,37,8,165,8,101,8,229,8,21,8,149,8,85,8,213,8,53,8,181,8,117,8,245,8,13,8,141,8,77,8,205,8,45,8,173,8,109,8,237,8,29,8,157,8,93,8,221,8,61,8,189,8,125,8,253,8,19,9,275,9,147,9,403,9,83,9,339,9,211,9,467,9,51,9,307,9,179,9,435,9,115,9,371,9,243,9,499,9,11,9,267,9,139,9,395,9,75,9,331,9,203,9,459,9,43,9,299,9,171,9,427,9,107,9,363,9,235,9,491,9,27,9,283,9,155,9,411,9,91,9,347,9,219,9,475,9,59,9,315,9,187,9,443,9,123,9,379,9,251,9,507,9,7,9,263,9,135,9,391,9,71,9,327,9,199,9,455,9,39,9,295,9,167,9,423,9,103,9,359,9,231,9,487,9,23,9,279,9,151,9,407,9,87,9,343,9,215,9,471,9,55,9,311,9,183,9,439,9,119,9,375,9,247,9,503,9,15,9,271,9,143,9,399,9,79,9,335,9,207,9,463,9,47,9,303,9,175,9,431,9,111,9,367,9,239,9,495,9,31,9,287,9,159,9,415,9,95,9,351,9,223,9,479,9,63,9,319,9,191,9,447,9,127,9,383,9,255,9,511,9,0,7,64,7,32,7,96,7,16,7,80,7,48,7,112,7,8,7,72,7,40,7,104,7,24,7,88,7,56,7,120,7,4,7,68,7,36,7,100,7,20,7,84,7,52,7,116,7,3,8,131,8,67,8,195,8,35,8,163,8,99,8,227,8];ar.static_dtree=[0,5,16,5,8,5,24,5,4,5,20,5,12,5,28,5,2,5,18,5,10,5,26,5,6,5,22,5,14,5,30,5,1,5,17,5,9,5,25,5,5,5,21,5,13,5,29,5,3,5,19,5,11,5,27,5,7,5,23,5];ar.static_l_desc=new ar(ar.static_ltree,J.extra_lbits,w+1,x,aw);ar.static_d_desc=new ar(ar.static_dtree,J.extra_dbits,0,t,aw);ar.static_bl_desc=new ar(null,J.extra_blbits,0,G,am);var ap=9;var an=8;function E(az,aE,aA,aD,aC){var aB=this;aB.good_length=az;aB.max_lazy=aE;aB.nice_length=aA;aB.max_chain=aD;aB.func=aC}var X=0;var H=1;var Z=2;var v=[new E(0,0,0,0,X),new E(4,4,8,4,H),new E(4,5,16,8,H),new E(4,6,32,32,H),new E(4,4,16,16,Z),new E(8,16,32,32,Z),new E(8,16,128,128,Z),new E(8,32,128,256,Z),new E(32,128,258,1024,Z),new E(32,258,258,4096,Z)];var K=["need dictionary","stream end","","","stream error","data error","","buffer error","",""];var aa=0;var al=1;var W=2;var B=3;var A=32;var Q=42;var ak=113;var ai=666;var aj=8;var ag=0;var au=1;var T=2;var ax=3;var O=258;var N=(O+ax+1);function ah(aB,aE,aA,aD){var aC=aB[aE*2];var az=aB[aA*2];return(aC<az||(aC==az&&aD[aE]<=aD[aA]))}function Y(){var bb=this;var a0;var a9;var bs;var aS;var aF;var aG;var bh;var aV;var bD;var az;var a5;var aZ;var bj;var aP;var bq;var a7;var bI;var bH;var by;var a6;var aL;var bJ;var bc;var a2;var aC;var aR;var bl;var br;var aA;var aH;var aQ;var bv;var aX;var aE;var aT=new J();var bG=new J();var bx=new J();bb.depth=[];var bk;var bA;var bo;var aD;var aN;var bp;var a8;var aM;bb.bl_count=[];bb.heap=[];bv=[];aX=[];aE=[];function bd(){var bK;az=2*aG;aZ[aP-1]=0;for(bK=0;bK<aP-1;bK++){aZ[bK]=0}bl=v[br].max_lazy;aH=v[br].good_length;aQ=v[br].nice_length;aR=v[br].max_chain;bJ=0;bH=0;a2=0;by=aC=ax-1;aL=0;bj=0}function be(){var bK;for(bK=0;bK<x;bK++){bv[bK*2]=0}for(bK=0;bK<t;bK++){aX[bK*2]=0}for(bK=0;bK<G;bK++){aE[bK*2]=0}bv[u*2]=1;bb.opt_len=bb.static_len=0;bo=aN=0}function bB(){aT.dyn_tree=bv;aT.stat_desc=ar.static_l_desc;bG.dyn_tree=aX;bG.stat_desc=ar.static_d_desc;bx.dyn_tree=aE;bx.stat_desc=ar.static_bl_desc;a8=0;aM=0;bp=8;be()}bb.pqdownheap=function(bK,bM){var bO=bb.heap;var bL=bO[bM];var bN=bM<<1;while(bN<=bb.heap_len){if(bN<bb.heap_len&&ah(bK,bO[bN+1],bO[bN],bb.depth)){bN++}if(ah(bK,bL,bO[bN],bb.depth)){break}bO[bM]=bO[bN];bM=bN;bN<<=1}bO[bM]=bL};function bm(bS,bR){var bL;var bP=-1;var bK;var bN=bS[0*2+1];var bO=0;var bM=7;var bQ=4;if(bN===0){bM=138;bQ=3}bS[(bR+1)*2+1]=65535;for(bL=0;bL<=bR;bL++){bK=bN;bN=bS[(bL+1)*2+1];if(++bO<bM&&bK==bN){continue}else{if(bO<bQ){aE[bK*2]+=bO}else{if(bK!==0){if(bK!=bP){aE[bK*2]++}aE[S*2]++}else{if(bO<=10){aE[R*2]++}else{aE[V*2]++}}}}bO=0;bP=bK;if(bN===0){bM=138;bQ=3}else{if(bK==bN){bM=6;bQ=3}else{bM=7;bQ=4}}}}function a3(){var bK;bm(bv,aT.max_code);bm(aX,bG.max_code);bx.build_tree(bb);for(bK=G-1;bK>=3;bK--){if(aE[J.bl_order[bK]*2+1]!==0){break}}bb.opt_len+=3*(bK+1)+5+5+4;return bK}function aB(bK){bb.pending_buf[bb.pending++]=bK}function bt(bK){aB(bK&255);aB((bK>>>8)&255)}function a1(bK){aB((bK>>8)&255);aB((bK&255)&255)}function bC(bM,bL){var bN,bK=bL;if(aM>L-bK){bN=bM;a8|=((bN<<aM)&65535);bt(a8);a8=bN>>>(L-aM);aM+=bK-L}else{a8|=(((bM)<<aM)&65535);aM+=bK}}function ba(bM,bK){var bL=bM*2;bC(bK[bL]&65535,bK[bL+1]&65535)}function bn(bS,bR){var bL;var bP=-1;var bK;var bN=bS[0*2+1];var bO=0;var bM=7;var bQ=4;if(bN===0){bM=138;bQ=3}for(bL=0;bL<=bR;bL++){bK=bN;bN=bS[(bL+1)*2+1];if(++bO<bM&&bK==bN){continue}else{if(bO<bQ){do{ba(bK,aE)}while(--bO!==0)}else{if(bK!==0){if(bK!=bP){ba(bK,aE);bO--}ba(S,aE);bC(bO-3,2)}else{if(bO<=10){ba(R,aE);bC(bO-3,3)}else{ba(V,aE);bC(bO-11,7)}}}}bO=0;bP=bK;if(bN===0){bM=138;bQ=3}else{if(bK==bN){bM=6;bQ=3}else{bM=7;bQ=4}}}}function bz(bL,bK,bM){var bN;bC(bL-257,5);bC(bK-1,5);bC(bM-4,4);for(bN=0;bN<bM;bN++){bC(aE[J.bl_order[bN]*2+1],3)}bn(bv,bL-1);bn(aX,bK-1)}function bi(){if(aM==16){bt(a8);a8=0;aM=0}else{if(aM>=8){aB(a8&255);a8>>>=8;aM-=8}}}function aK(){bC(au<<1,3);ba(u,ar.static_ltree);bi();if(1+bp+10-aM<9){bC(au<<1,3);ba(u,ar.static_ltree);bi()}bp=7}function aY(bO,bM){var bK,bN,bL;bb.pending_buf[aD+bo*2]=(bO>>>8)&255;bb.pending_buf[aD+bo*2+1]=bO&255;bb.pending_buf[bk+bo]=bM&255;bo++;if(bO===0){bv[bM*2]++}else{aN++;bO--;bv[(J._length_code[bM]+w+1)*2]++;aX[J.d_code(bO)*2]++}if((bo&8191)===0&&br>2){bK=bo*8;bN=bJ-bH;for(bL=0;bL<t;bL++){bK+=aX[bL*2]*(5+J.extra_dbits[bL])}bK>>>=3;if((aN<Math.floor(bo/2))&&bK<Math.floor(bN/2)){return true}}return(bo==bA-1)}function bg(bQ,bN){var bP;var bM;var bO=0;var bL;var bK;if(bo!==0){do{bP=((bb.pending_buf[aD+bO*2]<<8)&65280)|(bb.pending_buf[aD+bO*2+1]&255);bM=(bb.pending_buf[bk+bO])&255;bO++;if(bP===0){ba(bM,bQ)}else{bL=J._length_code[bM];ba(bL+w+1,bQ);bK=J.extra_lbits[bL];if(bK!==0){bM-=J.base_length[bL];bC(bM,bK)}bP--;bL=J.d_code(bP);ba(bL,bN);bK=J.extra_dbits[bL];if(bK!==0){bP-=J.base_dist[bL];bC(bP,bK)}}}while(bO<bo)}ba(u,bQ);bp=bQ[u*2+1]}function bE(){if(aM>8){bt(a8)}else{if(aM>0){aB(a8&255)}}a8=0;aM=0}function aO(bL,bK,bM){bE();bp=8;if(bM){bt(bK);bt(~bK)}bb.pending_buf.set(bD.subarray(bL,bL+bK),bb.pending);bb.pending+=bK}function a4(bL,bM,bK){bC((ag<<1)+(bK?1:0),3);aO(bL,bM,true)}function aW(bN,bP,bK){var bM,bL;var bO=0;if(br>0){aT.build_tree(bb);bG.build_tree(bb);bO=a3();bM=(bb.opt_len+3+7)>>>3;bL=(bb.static_len+3+7)>>>3;if(bL<=bM){bM=bL}}else{bM=bL=bP+5}if((bP+4<=bM)&&bN!=-1){a4(bN,bP,bK)}else{if(bL==bM){bC((au<<1)+(bK?1:0),3);bg(ar.static_ltree,ar.static_dtree)}else{bC((T<<1)+(bK?1:0),3);bz(aT.max_code+1,bG.max_code+1,bO+1);bg(bv,aX)}}be();if(bK){bE()}}function aI(bK){aW(bH>=0?bH:-1,bJ-bH,bK);bH=bJ;a0.flush_pending()}function bw(){var bN,bK;var bM;var bL;do{bL=(az-a2-bJ);if(bL===0&&bJ===0&&a2===0){bL=aG}else{if(bL==-1){bL--}else{if(bJ>=aG+aG-N){bD.set(bD.subarray(aG,aG+aG),0);bc-=aG;bJ-=aG;bH-=aG;bN=aP;bM=bN;do{bK=(aZ[--bM]&65535);aZ[bM]=(bK>=aG?bK-aG:0)}while(--bN!==0);bN=aG;bM=bN;do{bK=(a5[--bM]&65535);a5[bM]=(bK>=aG?bK-aG:0)}while(--bN!==0);bL+=aG}}}if(a0.avail_in===0){return}bN=a0.read_buf(bD,bJ+a2,bL);a2+=bN;if(a2>=ax){bj=bD[bJ]&255;bj=(((bj)<<bI)^(bD[bJ+1]&255))&a7}}while(a2<N&&a0.avail_in!==0)}function bf(bK){var bM=65535;var bL;if(bM>bs-5){bM=bs-5}while(true){if(a2<=1){bw();if(a2===0&&bK==aq){return aa}if(a2===0){break}}bJ+=a2;a2=0;bL=bH+bM;if(bJ===0||bJ>=bL){a2=(bJ-bL);bJ=bL;aI(false);if(a0.avail_out===0){return aa}}if(bJ-bH>=aG-N){aI(false);if(a0.avail_out===0){return aa}}}aI(bK==D);if(a0.avail_out===0){return(bK==D)?W:aa}return bK==D?B:al}function bF(bN){var bQ=aR;var bV=bJ;var bO;var bP;var bK=aC;var bL=bJ>(aG-N)?bJ-(aG-N):0;var bM=aQ;var bR=aV;var bT=bJ+O;var bU=bD[bV+bK-1];var bS=bD[bV+bK];if(aC>=aH){bQ>>=2}if(bM>a2){bM=a2}do{bO=bN;if(bD[bO+bK]!=bS||bD[bO+bK-1]!=bU||bD[bO]!=bD[bV]||bD[++bO]!=bD[bV+1]){continue}bV+=2;bO++;do{}while(bD[++bV]==bD[++bO]&&bD[++bV]==bD[++bO]&&bD[++bV]==bD[++bO]&&bD[++bV]==bD[++bO]&&bD[++bV]==bD[++bO]&&bD[++bV]==bD[++bO]&&bD[++bV]==bD[++bO]&&bD[++bV]==bD[++bO]&&bV<bT);bP=O-(bT-bV);bV=bT-O;if(bP>bK){bc=bN;bK=bP;if(bP>=bM){break}bU=bD[bV+bK-1];bS=bD[bV+bK]}}while((bN=(a5[bN&bR]&65535))>bL&&--bQ!==0);if(bK<=a2){return bK}return a2}function aJ(bK){var bM=0;var bL;while(true){if(a2<N){bw();if(a2<N&&bK==aq){return aa}if(a2===0){break}}if(a2>=ax){bj=(((bj)<<bI)^(bD[(bJ)+(ax-1)]&255))&a7;bM=(aZ[bj]&65535);a5[bJ&aV]=aZ[bj];aZ[bj]=bJ}if(bM!==0&&((bJ-bM)&65535)<=aG-N){if(aA!=ac){by=bF(bM)}}if(by>=ax){bL=aY(bJ-bc,by-ax);a2-=by;if(by<=bl&&a2>=ax){by--;do{bJ++;bj=((bj<<bI)^(bD[(bJ)+(ax-1)]&255))&a7;bM=(aZ[bj]&65535);a5[bJ&aV]=aZ[bj];aZ[bj]=bJ}while(--by!==0);bJ++}else{bJ+=by;by=0;bj=bD[bJ]&255;bj=(((bj)<<bI)^(bD[bJ+1]&255))&a7}}else{bL=aY(0,bD[bJ]&255);a2--;bJ++}if(bL){aI(false);if(a0.avail_out===0){return aa}}}aI(bK==D);if(a0.avail_out===0){if(bK==D){return W}else{return aa}}return bK==D?B:al}function bu(bL){var bN=0;var bM;var bK;while(true){if(a2<N){bw();if(a2<N&&bL==aq){return aa}if(a2===0){break}}if(a2>=ax){bj=(((bj)<<bI)^(bD[(bJ)+(ax-1)]&255))&a7;bN=(aZ[bj]&65535);a5[bJ&aV]=aZ[bj];aZ[bj]=bJ}aC=by;a6=bc;by=ax-1;if(bN!==0&&aC<bl&&((bJ-bN)&65535)<=aG-N){if(aA!=ac){by=bF(bN)}if(by<=5&&(aA==ae||(by==ax&&bJ-bc>4096))){by=ax-1}}if(aC>=ax&&by<=aC){bK=bJ+a2-ax;bM=aY(bJ-1-a6,aC-ax);a2-=aC-1;aC-=2;do{if(++bJ<=bK){bj=(((bj)<<bI)^(bD[(bJ)+(ax-1)]&255))&a7;bN=(aZ[bj]&65535);a5[bJ&aV]=aZ[bj];aZ[bj]=bJ}}while(--aC!==0);aL=0;by=ax-1;bJ++;if(bM){aI(false);if(a0.avail_out===0){return aa}}}else{if(aL!==0){bM=aY(0,bD[bJ-1]&255);if(bM){aI(false)}bJ++;a2--;if(a0.avail_out===0){return aa}}else{aL=1;bJ++;a2--}}}if(aL!==0){bM=aY(0,bD[bJ-1]&255);aL=0}aI(bL==D);if(a0.avail_out===0){if(bL==D){return W}else{return aa}}return bL==D?B:al}function aU(bK){bK.total_in=bK.total_out=0;bK.msg=null;bb.pending=0;bb.pending_out=0;a9=ak;aF=aq;bB();bd();return M}bb.deflateInit=function(bK,bM,bN,bL,bP,bO){if(!bL){bL=aj}if(!bP){bP=an}if(!bO){bO=s}bK.msg=null;if(bM==P){bM=6}if(bP<1||bP>ap||bL!=aj||bN<9||bN>15||bM<0||bM>9||bO<0||bO>ac){return ay}bK.dstate=bb;bh=bN;aG=1<<bh;aV=aG-1;bq=bP+7;aP=1<<bq;a7=aP-1;bI=Math.floor((bq+ax-1)/ax);bD=new Uint8Array(aG*2);a5=[];aZ=[];bA=1<<(bP+6);bb.pending_buf=new Uint8Array(bA*4);bs=bA*4;aD=Math.floor(bA/2);bk=(1+2)*bA;br=bM;aA=bO;aS=bL&255;return aU(bK)};bb.deflateEnd=function(){if(a9!=Q&&a9!=ak&&a9!=ai){return ay}bb.pending_buf=null;aZ=null;a5=null;bD=null;bb.dstate=null;return a9==ak?F:M};bb.deflateParams=function(bK,bL,bN){var bM=M;if(bL==P){bL=6}if(bL<0||bL>9||bN<0||bN>ac){return ay}if(v[br].func!=v[bL].func&&bK.total_in!==0){bM=bK.deflate(U)}if(br!=bL){br=bL;bl=v[br].max_lazy;aH=v[br].good_length;aQ=v[br].nice_length;aR=v[br].max_chain}aA=bN;return bM};bb.deflateSetDictionary=function(bK,bP,bN){var bM=bN;var bO,bL=0;if(!bP||a9!=Q){return ay}if(bM<ax){return M}if(bM>aG-N){bM=aG-N;bL=bN-bM}bD.set(bP.subarray(bL,bL+bM),0);bJ=bM;bH=bM;bj=bD[0]&255;bj=(((bj)<<bI)^(bD[1]&255))&a7;for(bO=0;bO<=bM-ax;bO++){bj=(((bj)<<bI)^(bD[(bO)+(ax-1)]&255))&a7;a5[bO&aV]=aZ[bj];aZ[bj]=bO}return M};bb.deflate=function(bL,bK){var bM,bQ,bO,bN,bP;if(bK>D||bK<0){return ay}if(!bL.next_out||(!bL.next_in&&bL.avail_in!==0)||(a9==ai&&bK!=D)){bL.msg=K[ad-(ay)];return ay}if(bL.avail_out===0){bL.msg=K[ad-(af)];return af}a0=bL;bN=aF;aF=bK;if(a9==Q){bQ=(aj+((bh-8)<<4))<<8;bO=((br-1)&255)>>1;if(bO>3){bO=3}bQ|=(bO<<6);if(bJ!==0){bQ|=A}bQ+=31-(bQ%31);a9=ak;a1(bQ)}if(bb.pending!==0){a0.flush_pending();if(a0.avail_out===0){aF=-1;return M}}else{if(a0.avail_in===0&&bK<=bN&&bK!=D){a0.msg=K[ad-(af)];return af}}if(a9==ai&&a0.avail_in!==0){bL.msg=K[ad-(af)];return af}if(a0.avail_in!==0||a2!==0||(bK!=aq&&a9!=ai)){bP=-1;switch(v[br].func){case X:bP=bf(bK);break;case H:bP=aJ(bK);break;case Z:bP=bu(bK);break;default:}if(bP==W||bP==B){a9=ai}if(bP==aa||bP==W){if(a0.avail_out===0){aF=-1}return M}if(bP==al){if(bK==U){aK()}else{a4(0,0,false);if(bK==I){for(bM=0;bM<aP;bM++){aZ[bM]=0}}}a0.flush_pending();if(a0.avail_out===0){aF=-1;return M}}}if(bK!=D){return M}return av}}function ab(){var az=this;az.next_in_index=0;az.next_out_index=0;az.avail_in=0;az.total_in=0;az.avail_out=0;az.total_out=0}ab.prototype={deflateInit:function(aB,aA){var az=this;az.dstate=new Y();if(!aA){aA=aw}return az.dstate.deflateInit(az,aB,aA)},deflate:function(az){var aA=this;if(!aA.dstate){return ay}return aA.dstate.deflate(aA,az)},deflateEnd:function(){var aA=this;if(!aA.dstate){return ay}var az=aA.dstate.deflateEnd();aA.dstate=null;return az},deflateParams:function(aB,aA){var az=this;if(!az.dstate){return ay}return az.dstate.deflateParams(az,aB,aA)},deflateSetDictionary:function(aB,aA){var az=this;if(!az.dstate){return ay}return az.dstate.deflateSetDictionary(az,aB,aA)},read_buf:function(aA,aD,aB){var aC=this;var az=aC.avail_in;if(az>aB){az=aB}if(az===0){return 0}aC.avail_in-=az;aA.set(aC.next_in.subarray(aC.next_in_index,aC.next_in_index+az),aD);aC.next_in_index+=az;aC.total_in+=az;return az},flush_pending:function(){var aA=this;var az=aA.dstate.pending;if(az>aA.avail_out){az=aA.avail_out}if(az===0){return}aA.next_out.set(aA.dstate.pending_buf.subarray(aA.dstate.pending_out,aA.dstate.pending_out+az),aA.next_out_index);aA.next_out_index+=az;aA.dstate.pending_out+=az;aA.total_out+=az;aA.avail_out-=az;aA.dstate.pending-=az;if(aA.dstate.pending===0){aA.dstate.pending_out=0}}};return function at(aE){var aB=this;var aD=new ab();var aC=512;var az=aq;var aA=new Uint8Array(aC);if(typeof aE=="undefined"){aE=P}aD.deflateInit(aE);aD.next_out=aA;aB.append=function(aJ,aI){var aH,aG=[],aM=0,aF=0,aL=0,aK;if(!aJ.length){return}aD.next_in_index=0;aD.next_in=aJ;aD.avail_in=aJ.length;do{aD.next_out_index=0;aD.avail_out=aC;aH=aD.deflate(az);if(aH!=M){throw"deflating: "+aD.msg}if(aD.next_out_index){if(aD.next_out_index==aC){aG.push(new Uint8Array(aA))}else{aG.push(new Uint8Array(aA.subarray(0,aD.next_out_index)))}}aL+=aD.next_out_index;if(aI&&aD.next_in_index>0&&aD.next_in_index!=aM){aI(aD.next_in_index);aM=aD.next_in_index}}while(aD.avail_in>0||aD.avail_out===0);aK=new Uint8Array(aL);aG.forEach(function(aN){aK.set(aN,aF);aF+=aN.length});return aK};aB.flush=function(){var aH,aG=[],aF=0,aJ=0,aI;do{aD.next_out_index=0;aD.avail_out=aC;aH=aD.deflate(D);if(aH!=av&&aH!=M){throw"deflating: "+aD.msg}if(aC-aD.avail_out>0){aG.push(new Uint8Array(aA.subarray(0,aD.next_out_index)))}aJ+=aD.next_out_index}while(aD.avail_in>0||aD.avail_out===0);aD.deflateEnd();aI=new Uint8Array(aJ);aG.forEach(function(aK){aI.set(aK,aF);aF+=aK.length});return aI}}})(undefined);!function(t){if("object"==typeof exports&&"undefined"!=typeof module){module.exports=t()}else{if("function"==typeof define&&define.amd){define([],t)}else{var s;"undefined"!=typeof window?s=window:"undefined"!=typeof global?s=global:"undefined"!=typeof self&&(s=self),s.html2canvas=t()}}}(function(){var v,t,s;return(function u(x,B,z){function y(G,E){if(!B[G]){if(!x[G]){var D=typeof require=="function"&&require;if(!E&&D){return D(G,!0)}if(w){return w(G,!0)}var F=new Error("Cannot find module '"+G+"'");throw F.code="MODULE_NOT_FOUND",F}var C=B[G]={exports:{}};x[G][0].call(C.exports,function(H){var I=x[G][1][H];return y(I?I:H)},C,C.exports,u,x,B,z)}return B[G].exports}var w=typeof require=="function"&&require;for(var A=0;A<z.length;A++){y(z[A])}return y})({1:[function(y,x,w){(function(z){
/*! http://mths.be/punycode v1.2.4 by @mathias */
;(function(Z){var P=typeof w=="object"&&w;var ah=typeof x=="object"&&x&&x.exports==P&&x;var Y=typeof z=="object"&&z;if(Y.global===Y||Y.window===Y){Z=Y}var E,S=2147483647,L=36,N=1,Q=26,I=38,M=700,O=72,H=128,af="-",V=/^xn--/,D=/[^ -~]/,A=/\x2E|\u3002|\uFF0E|\uFF61/g,R={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},G=L-N,ab=Math.floor,X=String.fromCharCode,ag;function aa(ai){throw RangeError(R[ai])}function ad(ak,ai){var aj=ak.length;while(aj--){ak[aj]=ai(ak[aj])}return ak}function C(ai,aj){return ad(ai.split(A),aj).join(".")}function K(al){var ak=[],aj=0,am=al.length,an,ai;while(aj<am){an=al.charCodeAt(aj++);if(an>=55296&&an<=56319&&aj<am){ai=al.charCodeAt(aj++);if((ai&64512)==56320){ak.push(((an&1023)<<10)+(ai&1023)+65536)}else{ak.push(an);aj--}}else{ak.push(an)}}return ak}function ac(ai){return ad(ai,function(ak){var aj="";if(ak>65535){ak-=65536;aj+=X(ak>>>10&1023|55296);ak=56320|ak&1023}aj+=X(ak);return aj}).join("")}function F(ai){if(ai-48<10){return ai-22}if(ai-65<26){return ai-65}if(ai-97<26){return ai-97}return L}function W(aj,ai){return aj+22+75*(aj<26)-((ai!=0)<<5)}function B(al,aj,ak){var ai=0;al=ak?ab(al/M):al>>1;al+=ab(al/aj);for(;al>G*Q>>1;ai+=L){al=ab(al/G)}return ab(ai+(G+1)*al/(al+I))}function U(av){var ak=[],an=av.length,ap,aq=0,aj=H,ar=O,am,ao,at,ai,aw,al,au,ay,ax;am=av.lastIndexOf(af);if(am<0){am=0}for(ao=0;ao<am;++ao){if(av.charCodeAt(ao)>=128){aa("not-basic")}ak.push(av.charCodeAt(ao))}for(at=am>0?am+1:0;at<an;){for(ai=aq,aw=1,al=L;;al+=L){if(at>=an){aa("invalid-input")}au=F(av.charCodeAt(at++));if(au>=L||au>ab((S-aq)/aw)){aa("overflow")}aq+=au*aw;ay=al<=ar?N:(al>=ar+Q?Q:al-ar);if(au<ay){break}ax=L-ay;if(aw>ab(S/ax)){aa("overflow")}aw*=ax}ap=ak.length+1;ar=B(aq-ai,ap,ai==0);if(ab(aq/ap)>S-aj){aa("overflow")}aj+=ab(aq/ap);aq%=ap;ak.splice(aq++,0,aj)}return ac(ak)}function J(av){var al,ax,ar,aj,at,aq,am,ai,ap,az,aw,ak=[],ao,an,ay,au;av=K(av);ao=av.length;al=H;ax=0;at=O;for(aq=0;aq<ao;++aq){aw=av[aq];if(aw<128){ak.push(X(aw))}}ar=aj=ak.length;if(aj){ak.push(af)}while(ar<ao){for(am=S,aq=0;aq<ao;++aq){aw=av[aq];if(aw>=al&&aw<am){am=aw}}an=ar+1;if(am-al>ab((S-ax)/an)){aa("overflow")}ax+=(am-al)*an;al=am;for(aq=0;aq<ao;++aq){aw=av[aq];if(aw<al&&++ax>S){aa("overflow")}if(aw==al){for(ai=ax,ap=L;;ap+=L){az=ap<=at?N:(ap>=at+Q?Q:ap-at);if(ai<az){break}au=ai-az;ay=L-az;ak.push(X(W(az+au%ay,0)));ai=ab(au/ay)}ak.push(X(W(ai,0)));at=B(ax,an,ar==aj);ax=0;++ar}}++ax;++al}return ak.join("")}function T(ai){return C(ai,function(aj){return V.test(aj)?U(aj.slice(4).toLowerCase()):aj})}function ae(ai){return C(ai,function(aj){return D.test(aj)?"xn--"+J(aj):aj})}E={version:"1.2.4",ucs2:{decode:K,encode:ac},decode:U,encode:J,toASCII:ae,toUnicode:T};if(typeof v=="function"&&typeof v.amd=="object"&&v.amd){v("punycode",function(){return E})}else{if(P&&!P.nodeType){if(ah){ah.exports=E}else{for(ag in E){E.hasOwnProperty(ag)&&(P[ag]=E[ag])}}}else{Z.punycode=E}}}(this))}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],2:[function(C,A,z){var B=C("./log");function w(F,E,G){if(F.defaultView&&(E!==F.defaultView.pageXOffset||G!==F.defaultView.pageYOffset)){F.defaultView.scrollTo(E,G)}}function y(E,F){try{if(F){F.width=E.width;F.height=E.height;F.getContext("2d").putImageData(E.getContext("2d").getImageData(0,0,E.width,E.height),0,0)}}catch(G){B("Unable to copy canvas content from",E,G)}}function x(F,E){var H=F.nodeType===3?document.createTextNode(F.nodeValue):F.cloneNode(false);var G=F.firstChild;while(G){if(E===true||G.nodeType!==1||G.nodeName!=="SCRIPT"){H.appendChild(x(G,E))}G=G.nextSibling}if(F.nodeType===1){H._scrollTop=F.scrollTop;H._scrollLeft=F.scrollLeft;if(F.nodeName==="CANVAS"){y(F,H)}else{if(F.nodeName==="TEXTAREA"||F.nodeName==="SELECT"){H.value=F.value}}}return H}function D(E){if(E.nodeType===1){E.scrollTop=E._scrollTop;E.scrollLeft=E._scrollLeft;var F=E.firstChild;while(F){D(F);F=F.nextSibling}}}A.exports=function(L,J,F,K,M,H,G){var I=x(L.documentElement,M.javascriptEnabled);var E=J.createElement("iframe");E.className="html2canvas-container";E.style.visibility="hidden";E.style.position="fixed";E.style.left="-10000px";E.style.top="0px";E.style.border="0";E.width=F;E.height=K;E.scrolling="no";J.body.appendChild(E);return new Promise(function(O){var N=E.contentWindow.document;E.contentWindow.onload=E.onload=function(){var P=setInterval(function(){if(N.body.childNodes.length>0){D(N.documentElement);clearInterval(P);if(M.type==="view"){E.contentWindow.scrollTo(H,G);if((/(iPad|iPhone|iPod)/g).test(navigator.userAgent)&&(E.contentWindow.scrollY!==G||E.contentWindow.scrollX!==H)){N.documentElement.style.top=(-G)+"px";N.documentElement.style.left=(-H)+"px";N.documentElement.style.position="absolute"}}O(E)}},50)};N.open();N.write("<!DOCTYPE html><html></html>");w(L,H,G);N.replaceChild(N.adoptNode(I),N.documentElement);N.close()})}},{"./log":13}],3:[function(z,A,B){function y(G){this.r=0;this.g=0;this.b=0;this.a=null;var F=this.fromArray(G)||this.namedColor(G)||this.rgb(G)||this.rgba(G)||this.hex6(G)||this.hex3(G)}y.prototype.darken=function(G){var F=1-G;return new y([Math.round(this.r*F),Math.round(this.g*F),Math.round(this.b*F),this.a])};y.prototype.isTransparent=function(){return this.a===0};y.prototype.isBlack=function(){return this.r===0&&this.g===0&&this.b===0};y.prototype.fromArray=function(F){if(Array.isArray(F)){this.r=Math.min(F[0],255);this.g=Math.min(F[1],255);this.b=Math.min(F[2],255);if(F.length>3){this.a=F[3]}}return(Array.isArray(F))};var D=/^#([a-f0-9]{3})$/i;y.prototype.hex3=function(G){var F=null;if((F=G.match(D))!==null){this.r=parseInt(F[1][0]+F[1][0],16);this.g=parseInt(F[1][1]+F[1][1],16);this.b=parseInt(F[1][2]+F[1][2],16)}return F!==null};var C=/^#([a-f0-9]{6})$/i;y.prototype.hex6=function(G){var F=null;if((F=G.match(C))!==null){this.r=parseInt(F[1].substring(0,2),16);this.g=parseInt(F[1].substring(2,4),16);this.b=parseInt(F[1].substring(4,6),16)}return F!==null};var E=/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/;y.prototype.rgb=function(G){var F=null;if((F=G.match(E))!==null){this.r=Number(F[1]);this.g=Number(F[2]);this.b=Number(F[3])}return F!==null};var x=/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d?\.?\d+)\s*\)$/;y.prototype.rgba=function(G){var F=null;if((F=G.match(x))!==null){this.r=Number(F[1]);this.g=Number(F[2]);this.b=Number(F[3]);this.a=Number(F[4])}return F!==null};y.prototype.toString=function(){return this.a!==null&&this.a!==1?"rgba("+[this.r,this.g,this.b,this.a].join(",")+")":"rgb("+[this.r,this.g,this.b].join(",")+")"};y.prototype.namedColor=function(G){G=G.toLowerCase();var F=w[G];if(F){this.r=F[0];this.g=F[1];this.b=F[2]}else{if(G==="transparent"){this.r=this.g=this.b=this.a=0;return true}}return !!F};y.prototype.isColor=true;var w={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};A.exports=y},{}],4:[function(C,w,T){var N=C("./support");var M=C("./renderers/canvas");var J=C("./imageloader");var E=C("./nodeparser");var y=C("./nodecontainer");var F=C("./log");var S=C("./utils");var Q=C("./clone");var B=C("./proxy").loadUrlDocument;var D=S.getBounds;var G="data-html2canvas-node";var I=0;function R(X,W){var V=I++;W=W||{};if(W.logging){F.options.logging=true;F.options.start=Date.now()}W.async=typeof(W.async)==="undefined"?true:W.async;W.allowTaint=typeof(W.allowTaint)==="undefined"?false:W.allowTaint;W.removeContainer=typeof(W.removeContainer)==="undefined"?true:W.removeContainer;W.javascriptEnabled=typeof(W.javascriptEnabled)==="undefined"?false:W.javascriptEnabled;W.imageTimeout=typeof(W.imageTimeout)==="undefined"?10000:W.imageTimeout;W.renderer=typeof(W.renderer)==="function"?W.renderer:M;W.strict=!!W.strict;if(typeof(X)==="string"){if(typeof(W.proxy)!=="string"){return Promise.reject("Proxy must be used when rendering url")}var Y=W.width!=null?W.width:window.innerWidth;var U=W.height!=null?W.height:window.innerHeight;return B(O(X),W.proxy,document,Y,U,W).then(function(aa){return L(aa.contentWindow.document.documentElement,aa,W,Y,U)})}var Z=((X===undefined)?[document.documentElement]:((X.length)?X:[X]))[0];Z.setAttribute(G+V,V);return x(Z.ownerDocument,W,Z.ownerDocument.defaultView.innerWidth,Z.ownerDocument.defaultView.innerHeight,V).then(function(aa){if(typeof(W.onrendered)==="function"){F("options.onrendered is deprecated, html2canvas returns a Promise containing the canvas");W.onrendered(aa)}return aa})}R.CanvasRenderer=M;R.NodeContainer=y;R.log=F;R.utils=S;var H=(typeof(document)==="undefined"||typeof(Object.create)!=="function"||typeof(document.createElement("canvas").getContext)!=="function")?function(){return Promise.reject("No canvas support")}:R;w.exports=H;if(typeof(v)==="function"&&v.amd){v("html2canvas",[],function(){return H})}function x(V,W,X,Y,U){return Q(V,V,X,Y,W,V.defaultView.pageXOffset,V.defaultView.pageYOffset).then(function(aa){F("Document cloned");var ab=G+U;var Z="["+ab+"='"+U+"']";V.querySelector(Z).removeAttribute(ab);var ae=aa.contentWindow;var ad=ae.document.querySelector(Z);var ac=(typeof(W.onclone)==="function")?Promise.resolve(W.onclone(ae.document)):Promise.resolve(true);return ac.then(function(){return L(ad,aa,W,X,Y)})})}function L(aa,X,ag,Z,V){var ac=X.contentWindow;var ae=new N(ac.document);var ab=new J(ag,ae);var U=D(aa);var Y=ag.type==="view"?Z:z(ac.document);var af=ag.type==="view"?V:K(ac.document);var ad=new ag.renderer(Y,af,ab,ag,document);var W=new E(aa,ad,ae,ab,ag);return W.ready.then(function(){F("Finished rendering");var ah;if(ag.type==="view"){ah=A(ad.canvas,{width:ad.canvas.width,height:ad.canvas.height,top:0,left:0,x:0,y:0})}else{if(aa===ac.document.body||aa===ac.document.documentElement||ag.canvas!=null){ah=ad.canvas}else{ah=A(ad.canvas,{width:ag.width!=null?ag.width:U.width,height:ag.height!=null?ag.height:U.height,top:U.top,left:U.left,x:0,y:0})}}P(X,ag);return ah})}function P(U,V){if(V.removeContainer){U.parentNode.removeChild(U);F("Cleaned up container")}}function A(Y,U){var Z=document.createElement("canvas");var X=Math.min(Y.width-1,Math.max(0,U.left));var V=Math.min(Y.width,Math.max(1,U.left+U.width));var ab=Math.min(Y.height-1,Math.max(0,U.top));var aa=Math.min(Y.height,Math.max(1,U.top+U.height));Z.width=U.width;Z.height=U.height;var W=V-X;var ac=aa-ab;F("Cropping canvas at:","left:",U.left,"top:",U.top,"width:",W,"height:",ac);F("Resulting crop with width",U.width,"and height",U.height,"with x",X,"and y",ab);Z.getContext("2d").drawImage(Y,X,ab,W,ac,U.x,U.y,W,ac);return Z}function z(U){return Math.max(Math.max(U.body.scrollWidth,U.documentElement.scrollWidth),Math.max(U.body.offsetWidth,U.documentElement.offsetWidth),Math.max(U.body.clientWidth,U.documentElement.clientWidth))}function K(U){return Math.max(Math.max(U.body.scrollHeight,U.documentElement.scrollHeight),Math.max(U.body.offsetHeight,U.documentElement.offsetHeight),Math.max(U.body.clientHeight,U.documentElement.clientHeight))}function O(U){var V=document.createElement("a");V.href=U;V.href=V.href;return V}},{"./clone":2,"./imageloader":11,"./log":13,"./nodecontainer":14,"./nodeparser":15,"./proxy":16,"./renderers/canvas":20,"./support":22,"./utils":26}],5:[function(z,x,w){var y=z("./log");var A=z("./utils").smallImage;function B(D){this.src=D;y("DummyImageContainer for",D);if(!this.promise||!this.image){y("Initiating DummyImageContainer");B.prototype.image=new Image();var C=this.image;B.prototype.promise=new Promise(function(F,E){C.onload=F;C.onerror=E;C.src=A();if(C.complete===true){F(C)}})}}x.exports=B},{"./log":13,"./utils":26}],6:[function(y,x,w){var z=y("./utils").smallImage;function A(G,E){var B=document.createElement("div"),C=document.createElement("img"),F=document.createElement("span"),I="Hidden Text",H,D;B.style.visibility="hidden";B.style.fontFamily=G;B.style.fontSize=E;B.style.margin=0;B.style.padding=0;document.body.appendChild(B);C.src=z();C.width=1;C.height=1;C.style.margin=0;C.style.padding=0;C.style.verticalAlign="baseline";F.style.fontFamily=G;F.style.fontSize=E;F.style.margin=0;F.style.padding=0;F.appendChild(document.createTextNode(I));B.appendChild(F);B.appendChild(C);H=(C.offsetTop-F.offsetTop)+1;B.removeChild(F);B.appendChild(document.createTextNode(I));B.style.lineHeight="normal";C.style.verticalAlign="super";D=(C.offsetTop-B.offsetTop)+1;document.body.removeChild(B);this.baseline=H;this.lineWidth=1;this.middle=D}x.exports=A},{"./utils":26}],7:[function(y,x,w){var A=y("./font");function z(){this.data={}}z.prototype.getMetrics=function(C,B){if(this.data[C+"-"+B]===undefined){this.data[C+"-"+B]=new A(C,B)}return this.data[C+"-"+B]};x.exports=z},{"./font":6}],8:[function(B,A,x){var w=B("./utils");var z=w.getBounds;var y=B("./proxy").loadUrlDocument;function C(D,H,F){this.image=null;this.src=D;var E=this;var G=z(D);this.promise=(!H?this.proxyLoad(F.proxy,G,F):new Promise(function(I){if(D.contentWindow.document.URL==="about:blank"||D.contentWindow.document.documentElement==null){D.contentWindow.onload=D.onload=function(){I(D)}}else{I(D)}})).then(function(I){var J=B("./core");return J(I.contentWindow.document.documentElement,{type:"view",width:I.width,height:I.height,proxy:F.proxy,javascriptEnabled:F.javascriptEnabled,removeContainer:F.removeContainer,allowTaint:F.allowTaint,imageTimeout:F.imageTimeout/2})}).then(function(I){return E.image=I})}C.prototype.proxyLoad=function(F,G,E){var D=this.src;return y(D.src,F,D.ownerDocument,G.width,G.height,E)};A.exports=C},{"./core":4,"./proxy":16,"./utils":26}],9:[function(y,x,w){function z(A){this.src=A.value;this.colorStops=[];this.type=null;this.x0=0.5;this.y0=0.5;this.x1=0.5;this.y1=0.5;this.promise=Promise.resolve(true)}z.TYPES={LINEAR:1,RADIAL:2};z.REGEXP_COLORSTOP=/^\s*(rgba?\(\s*\d{1,3},\s*\d{1,3},\s*\d{1,3}(?:,\s*[0-9\.]+)?\s*\)|[a-z]{3,20}|#[a-f0-9]{3,6})(?:\s+(\d{1,3}(?:\.\d+)?)(%|px)?)?(?:\s|$)/i;x.exports=z},{}],10:[function(y,x,w){function z(C,B){this.src=C;this.image=new Image();var A=this;this.tainted=null;this.promise=new Promise(function(E,D){A.image.onload=E;A.image.onerror=D;if(B){A.image.crossOrigin="anonymous"}A.image.src=C;if(A.image.complete===true){E(A.image)}})}x.exports=z},{}],11:[function(x,y,B){var A=x("./log");var G=x("./imagecontainer");var F=x("./dummyimagecontainer");var w=x("./proxyimagecontainer");var z=x("./framecontainer");var D=x("./svgcontainer");var J=x("./svgnodecontainer");var I=x("./lineargradientcontainer");var C=x("./webkitgradientcontainer");var E=x("./utils").bind;function H(K,L){this.link=null;this.options=K;this.support=L;this.origin=this.getOrigin(window.location.href)}H.prototype.findImages=function(L){var K=[];L.reduce(function(N,M){switch(M.node.nodeName){case"IMG":return N.concat([{args:[M.node.src],method:"url"}]);case"svg":case"IFRAME":return N.concat([{args:[M.node],method:M.node.nodeName}])}return N},[]).forEach(this.addImage(K,this.loadImage),this);return K};H.prototype.findBackgroundImage=function(K,L){L.parseBackgroundImages().filter(this.hasImageBackground).forEach(this.addImage(K,this.loadImage),this);return K};H.prototype.addImage=function(K,L){return function(M){M.args.forEach(function(N){if(!this.imageExists(K,N)){K.splice(0,0,L.call(this,M));A("Added image #"+(K.length),typeof(N)==="string"?N.substring(0,100):N)}},this)}};H.prototype.hasImageBackground=function(K){return K.method!=="none"};H.prototype.loadImage=function(L){if(L.method==="url"){var K=L.args[0];if(this.isSVG(K)&&!this.support.svg&&!this.options.allowTaint){return new D(K)}else{if(K.match(/data:image\/.*;base64,/i)){return new G(K.replace(/url\(['"]{0,}|['"]{0,}\)$/ig,""),false)}else{if(this.isSameOrigin(K)||this.options.allowTaint===true||this.isSVG(K)){return new G(K,false)}else{if(this.support.cors&&!this.options.allowTaint&&this.options.useCORS){return new G(K,true)}else{if(this.options.proxy){return new w(K,this.options.proxy)}else{return new F(K)}}}}}}else{if(L.method==="linear-gradient"){return new I(L)}else{if(L.method==="gradient"){return new C(L)}else{if(L.method==="svg"){return new J(L.args[0],this.support.svg)}else{if(L.method==="IFRAME"){return new z(L.args[0],this.isSameOrigin(L.args[0].src),this.options)}else{return new F(L)}}}}}};H.prototype.isSVG=function(K){return K.substring(K.length-3).toLowerCase()==="svg"||D.prototype.isInline(K)};H.prototype.imageExists=function(K,L){return K.some(function(M){return M.src===L})};H.prototype.isSameOrigin=function(K){return(this.getOrigin(K)===this.origin)};H.prototype.getOrigin=function(K){var L=this.link||(this.link=document.createElement("a"));L.href=K;L.href=L.href;return L.protocol+L.hostname+L.port};H.prototype.getPromise=function(K){return this.timeout(K,this.options.imageTimeout)["catch"](function(){var L=new F(K.src);return L.promise.then(function(M){K.image=M})})};H.prototype.get=function(L){var K=null;return this.images.some(function(M){return(K=M).src===L})?K:null};H.prototype.fetch=function(K){this.images=K.reduce(E(this.findBackgroundImage,this),this.findImages(K));this.images.forEach(function(M,L){M.promise.then(function(){A("Succesfully loaded image #"+(L+1),M)},function(N){A("Failed loading image #"+(L+1),M,N)})});this.ready=Promise.all(this.images.map(this.getPromise,this));A("Finished searching images");return this};H.prototype.timeout=function(K,L){var N;var M=Promise.race([K.promise,new Promise(function(O,P){N=setTimeout(function(){A("Timed out loading image",K);P(K)},L)})]).then(function(O){clearTimeout(N);return O});M["catch"](function(){clearTimeout(N)});return M};y.exports=H},{"./dummyimagecontainer":5,"./framecontainer":8,"./imagecontainer":10,"./lineargradientcontainer":12,"./log":13,"./proxyimagecontainer":17,"./svgcontainer":23,"./svgnodecontainer":24,"./utils":26,"./webkitgradientcontainer":27}],12:[function(z,y,x){var A=z("./gradientcontainer");var B=z("./color");function w(D){A.apply(this,arguments);this.type=A.TYPES.LINEAR;var C=w.REGEXP_DIRECTION.test(D.args[0])||!A.REGEXP_COLORSTOP.test(D.args[0]);if(C){D.args[0].split(/\s+/).reverse().forEach(function(E,F){switch(E){case"left":this.x0=0;this.x1=1;break;case"top":this.y0=0;this.y1=1;break;case"right":this.x0=1;this.x1=0;break;case"bottom":this.y0=1;this.y1=0;break;case"to":var I=this.y0;var G=this.x0;this.y0=this.y1;this.x0=this.x1;this.x1=G;this.y1=I;break;case"center":break;default:var H=parseFloat(E,10)*0.01;if(isNaN(H)){break}if(F===0){this.y0=H;this.y1=1-this.y0}else{this.x0=H;this.x1=1-this.x0}break}},this)}else{this.y0=0;this.y1=1}this.colorStops=D.args.slice(C?1:0).map(function(E){var F=E.match(A.REGEXP_COLORSTOP);var H=+F[2];var G=H===0?"%":F[3];return{color:new B(F[1]),stop:G==="%"?H/100:null}});if(this.colorStops[0].stop===null){this.colorStops[0].stop=0}if(this.colorStops[this.colorStops.length-1].stop===null){this.colorStops[this.colorStops.length-1].stop=1}this.colorStops.forEach(function(E,F){if(E.stop===null){this.colorStops.slice(F).some(function(H,G){if(H.stop!==null){E.stop=((H.stop-this.colorStops[F-1].stop)/(G+1))+this.colorStops[F-1].stop;return true}else{return false}},this)}},this)}w.prototype=Object.create(A.prototype);w.REGEXP_DIRECTION=/^\s*(?:to|left|right|top|bottom|center|\d{1,3}(?:\.\d+)?%?)(?:\s|$)/i;y.exports=w},{"./color":3,"./gradientcontainer":9}],13:[function(z,y,w){var x=function(){if(x.options.logging&&window.console&&window.console.log){Function.prototype.bind.call(window.console.log,(window.console)).apply(window.console,[(Date.now()-x.options.start)+"ms","html2canvas:"].concat([].slice.call(arguments,0)))}};x.options={logging:false};y.exports=x},{}],14:[function(y,z,C){var w=y("./color");var H=y("./utils");var E=H.getBounds;var G=H.parseBackgrounds;var A=H.offsetBounds;function B(L,K){this.node=L;this.parent=K;this.stack=null;this.bounds=null;this.borders=null;this.clip=[];this.backgroundClip=[];this.offsetBounds=null;this.visible=null;this.computedStyles=null;this.colors={};this.styles={};this.backgroundImages=null;this.transformData=null;this.transformMatrix=null;this.isPseudoElement=false;this.opacity=null}B.prototype.cloneTo=function(K){K.visible=this.visible;K.borders=this.borders;K.bounds=this.bounds;K.clip=this.clip;K.backgroundClip=this.backgroundClip;K.computedStyles=this.computedStyles;K.styles=this.styles;K.backgroundImages=this.backgroundImages;K.opacity=this.opacity};B.prototype.getOpacity=function(){return this.opacity===null?(this.opacity=this.cssFloat("opacity")):this.opacity};B.prototype.assignStack=function(K){this.stack=K;K.children.push(this)};B.prototype.isElementVisible=function(){return this.node.nodeType===Node.TEXT_NODE?this.parent.visible:(this.css("display")!=="none"&&this.css("visibility")!=="hidden"&&!this.node.hasAttribute("data-html2canvas-ignore")&&(this.node.nodeName!=="INPUT"||this.node.getAttribute("type")!=="hidden"))};B.prototype.css=function(K){if(!this.computedStyles){this.computedStyles=this.isPseudoElement?this.parent.computedStyle(this.before?":before":":after"):this.computedStyle(null)}return this.styles[K]||(this.styles[K]=this.computedStyles[K])};B.prototype.prefixedCss=function(K){var M=["webkit","moz","ms","o"];var L=this.css(K);if(L===undefined){M.some(function(N){L=this.css(N+K.substr(0,1).toUpperCase()+K.substr(1));return L!==undefined},this)}return L===undefined?null:L};B.prototype.computedStyle=function(K){return this.node.ownerDocument.defaultView.getComputedStyle(this.node,K)};B.prototype.cssInt=function(K){var L=parseInt(this.css(K),10);return(isNaN(L))?0:L};B.prototype.color=function(K){return this.colors[K]||(this.colors[K]=new w(this.css(K)))};B.prototype.cssFloat=function(K){var L=parseFloat(this.css(K));return(isNaN(L))?0:L};B.prototype.fontWeight=function(){var K=this.css("fontWeight");switch(parseInt(K,10)){case 401:K="bold";break;case 400:K="normal";break}return K};B.prototype.parseClip=function(){var K=this.css("clip").match(this.CLIP);if(K){return{top:parseInt(K[1],10),right:parseInt(K[2],10),bottom:parseInt(K[3],10),left:parseInt(K[4],10)}}return null};B.prototype.parseBackgroundImages=function(){return this.backgroundImages||(this.backgroundImages=G(this.css("backgroundImage")))};B.prototype.cssList=function(M,K){var L=(this.css(M)||"").split(",");L=L[K||0]||L[0]||"auto";L=L.trim().split(" ");if(L.length===1){L=[L[0],F(L[0])?"auto":L[0]]}return L};B.prototype.parseBackgroundSize=function(Q,R,M){var O=this.cssList("backgroundSize",M);var P,K;if(F(O[0])){P=Q.width*parseFloat(O[0])/100}else{if(/contain|cover/.test(O[0])){var N=Q.width/Q.height,L=R.width/R.height;return(N<L^O[0]==="contain")?{width:Q.height*L,height:Q.height}:{width:Q.width,height:Q.width/L}}else{P=parseInt(O[0],10)}}if(O[0]==="auto"&&O[1]==="auto"){K=R.height}else{if(O[1]==="auto"){K=P/R.width*R.height}else{if(F(O[1])){K=Q.height*parseFloat(O[1])/100}else{K=parseInt(O[1],10)}}}if(O[0]==="auto"){P=K/R.height*R.width}return{width:P,height:K}};B.prototype.parseBackgroundPosition=function(N,Q,M,L){var K=this.cssList("backgroundPosition",M);var P,O;if(F(K[0])){P=(N.width-(L||Q).width)*(parseFloat(K[0])/100)}else{P=parseInt(K[0],10)}if(K[1]==="auto"){O=P/Q.width*Q.height}else{if(F(K[1])){O=(N.height-(L||Q).height)*parseFloat(K[1])/100}else{O=parseInt(K[1],10)}}if(K[0]==="auto"){P=O/Q.height*Q.width}return{left:P,top:O}};B.prototype.parseBackgroundRepeat=function(K){return this.cssList("backgroundRepeat",K)[0]};B.prototype.parseTextShadows=function(){var O=this.css("textShadow");var L=[];if(O&&O!=="none"){var N=O.match(this.TEXT_SHADOW_PROPERTY);for(var K=0;N&&(K<N.length);K++){var M=N[K].match(this.TEXT_SHADOW_VALUES);L.push({color:new w(M[0]),offsetX:M[1]?parseFloat(M[1].replace("px","")):0,offsetY:M[2]?parseFloat(M[2].replace("px","")):0,blur:M[3]?M[3].replace("px",""):0})}}return L};B.prototype.parseTransform=function(){if(!this.transformData){if(this.hasTransform()){var L=this.parseBounds();var K=this.prefixedCss("transformOrigin").split(" ").map(x).map(J);K[0]+=L.left;K[1]+=L.top;this.transformData={origin:K,matrix:this.parseTransformMatrix()}}else{this.transformData={origin:[0,0],matrix:[1,0,0,1,0,0]}}}return this.transformData};B.prototype.parseTransformMatrix=function(){if(!this.transformMatrix){var L=this.prefixedCss("transform");var K=L?I(L.match(this.MATRIX_PROPERTY)):null;this.transformMatrix=K?K:[1,0,0,1,0,0]}return this.transformMatrix};B.prototype.parseBounds=function(){return this.bounds||(this.bounds=this.hasTransform()?A(this.node):E(this.node))};B.prototype.hasTransform=function(){return this.parseTransformMatrix().join(",")!=="1,0,0,1,0,0"||(this.parent&&this.parent.hasTransform())};B.prototype.getValue=function(){var K=this.node.value||"";if(this.node.tagName==="SELECT"){K=D(this.node)}else{if(this.node.type==="password"){K=Array(K.length+1).join("\u2022")}}return K.length===0?(this.node.placeholder||""):K};B.prototype.MATRIX_PROPERTY=/(matrix|matrix3d)\((.+)\)/;B.prototype.TEXT_SHADOW_PROPERTY=/((rgba|rgb)\([^\)]+\)(\s-?\d+px){0,})/g;B.prototype.TEXT_SHADOW_VALUES=/(-?\d+px)|(#.+)|(rgb\(.+\))|(rgba\(.+\))/g;B.prototype.CLIP=/^rect\((\d+)px,? (\d+)px,? (\d+)px,? (\d+)px\)$/;function D(L){var K=L.options[L.selectedIndex||0];return K?(K.text||""):""}function I(K){if(K&&K[1]==="matrix"){return K[2].split(",").map(function(M){return parseFloat(M.trim())})}else{if(K&&K[1]==="matrix3d"){var L=K[2].split(",").map(function(M){return parseFloat(M.trim())});return[L[0],L[1],L[4],L[5],L[12],L[13]]}}}function F(K){return K.toString().indexOf("%")!==-1}function x(K){return K.replace("px","")}function J(K){return parseFloat(K)}z.exports=B},{"./color":3,"./utils":26}],15:[function(V,B,am){var J=V("./log");var ag=V("punycode");var H=V("./nodecontainer");var al=V("./textcontainer");var A=V("./pseudoelementcontainer");var P=V("./fontmetrics");var R=V("./color");var y=V("./stackingcontext");var ay=V("./utils");var G=ay.bind;var K=ay.getBounds;var ah=ay.parseBackgrounds;var an=ay.offsetBounds;function ad(aB,aF,aD,az,aA){J("Starting NodeParser");this.renderer=aF;this.options=aA;this.range=null;this.support=aD;this.renderQueue=[];this.stack=new y(true,1,aB.ownerDocument,null);var aC=new H(aB,null);if(aA.background){aF.rectangle(0,0,aF.width,aF.height,new R(aA.background))}if(aB===aB.ownerDocument.documentElement){var aE=new H(aC.color("backgroundColor").isTransparent()?aB.ownerDocument.body:aB.ownerDocument.documentElement,null);aF.rectangle(0,0,aF.width,aF.height,aE.color("backgroundColor"))}aC.visibile=aC.isElementVisible();this.createPseudoHideStyles(aB.ownerDocument);this.disableAnimations(aB.ownerDocument);this.nodes=Z([aC].concat(this.getChildren(aC)).filter(function(aG){return aG.visible=aG.isElementVisible()}).map(this.getPseudoElements,this));this.fontMetrics=new P();J("Fetched nodes, total:",this.nodes.length);J("Calculate overflow clips");this.calculateOverflowClips();J("Start fetching images");this.images=az.fetch(this.nodes.filter(at));this.ready=this.images.ready.then(G(function(){J("Images loaded, starting parsing");J("Creating stacking contexts");this.createStackingContexts();J("Sorting stacking contexts");this.sortStackingContexts(this.stack);this.parse(this.stack);J("Render queue created with "+this.renderQueue.length+" items");return new Promise(G(function(aG){if(!aA.async){this.renderQueue.forEach(this.paint,this);aG()}else{if(typeof(aA.async)==="function"){aA.async.call(this,this.renderQueue,aG)}else{if(this.renderQueue.length>0){this.renderIndex=0;this.asyncRenderer(this.renderQueue,aG)}else{aG()}}}},this))},this))}ad.prototype.calculateOverflowClips=function(){this.nodes.forEach(function(az){if(at(az)){if(x(az)){az.appendToDOM()}az.borders=this.parseBorders(az);var aB=(az.css("overflow")==="hidden")?[az.borders.clip]:[];var aA=az.parseClip();if(aA&&["absolute","fixed"].indexOf(az.css("position"))!==-1){aB.push([["rect",az.bounds.left+aA.left,az.bounds.top+aA.top,aA.right-aA.left,aA.bottom-aA.top]])}az.clip=D(az)?az.parent.clip.concat(aB):aB;az.backgroundClip=(az.css("overflow")!=="hidden")?az.clip.concat([az.borders.clip]):az.clip;if(x(az)){az.cleanDOM()}}else{if(Q(az)){az.clip=D(az)?az.parent.clip:[]}}if(!x(az)){az.bounds=null}},this)};function D(az){return az.parent&&az.parent.clip.length}ad.prototype.asyncRenderer=function(az,aA,aB){aB=aB||Date.now();this.paint(az[this.renderIndex++]);if(az.length===this.renderIndex){aA()}else{if(aB+20>Date.now()){this.asyncRenderer(az,aA,aB)}else{setTimeout(G(function(){this.asyncRenderer(az,aA)},this),0)}}};ad.prototype.createPseudoHideStyles=function(az){this.createStyles(az,"."+A.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+':before { content: "" !important; display: none !important; }.'+A.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER+':after { content: "" !important; display: none !important; }')};ad.prototype.disableAnimations=function(az){this.createStyles(az,"* { -webkit-animation: none !important; -moz-animation: none !important; -o-animation: none !important; animation: none !important; -webkit-transition: none !important; -moz-transition: none !important; -o-transition: none !important; transition: none !important;}")};ad.prototype.createStyles=function(az,aA){var aB=az.createElement("style");aB.innerHTML=aA;az.body.appendChild(aB)};ad.prototype.getPseudoElements=function(az){var aA=[[az]];if(az.node.nodeType===Node.ELEMENT_NODE){var aB=this.getPseudoElement(az,":before");var aC=this.getPseudoElement(az,":after");if(aB){aA.push(aB)}if(aC){aA.push(aC)}}return Z(aA)};function T(az){return az.replace(/(\-[a-z])/g,function(aA){return aA.toUpperCase().replace("-","")})}ad.prototype.getPseudoElement=function(aA,aF){var az=aA.computedStyle(aF);if(!az||!az.content||az.content==="none"||az.content==="-moz-alt-content"||az.display==="none"){return null}var aD=F(az.content);var aB=aD.substr(0,3)==="url";var aE=document.createElement(aB?"img":"html2canvaspseudoelement");var aI=new A(aE,aA,aF);for(var aC=az.length-1;aC>=0;aC--){var aG=T(az.item(aC));aE.style[aG]=az[aG]}aE.className=A.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+" "+A.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER;if(aB){aE.src=ah(aD)[0].args[0];return[aI]}else{var aH=document.createTextNode(aD);aE.appendChild(aH);return[aI,new al(aH,aI)]}};ad.prototype.getChildren=function(az){return Z([].filter.call(az.node.childNodes,aj).map(function(aB){var aA=[aB.nodeType===Node.TEXT_NODE?new al(aB,az):new H(aB,az)].filter(ab);return aB.nodeType===Node.ELEMENT_NODE&&aA.length&&aB.tagName!=="TEXTAREA"?(aA[0].isElementVisible()?aA.concat(this.getChildren(aA[0])):[]):aA},this))};ad.prototype.newStackingContext=function(aB,aC){var aA=new y(aC,aB.getOpacity(),aB.node,aB.parent);aB.cloneTo(aA);var az=aC?aA.getParentStack(this):aA.parent.stack;az.contexts.push(aA);aB.stack=aA};ad.prototype.createStackingContexts=function(){this.nodes.forEach(function(az){if(at(az)&&(this.isRootElement(az)||ae(az)||I(az)||this.isBodyWithTransparentRoot(az)||az.hasTransform())){this.newStackingContext(az,true)}else{if(at(az)&&((ar(az)&&aa(az))||aq(az)||af(az))){this.newStackingContext(az,false)}else{az.assignStack(az.parent.stack)}}},this)};ad.prototype.isBodyWithTransparentRoot=function(az){return az.node.nodeName==="BODY"&&az.parent.color("backgroundColor").isTransparent()};ad.prototype.isRootElement=function(az){return az.parent===null};ad.prototype.sortStackingContexts=function(az){az.contexts.sort(U(az.contexts.slice(0)));az.contexts.forEach(this.sortStackingContexts,this)};ad.prototype.parseTextBounds=function(az){return function(aE,aA,aF){if(az.parent.css("textDecoration").substr(0,4)!=="none"||aE.trim().length!==0){if(this.support.rangeBounds&&!az.parent.hasTransform()){var aD=aF.slice(0,aA).join("").length;return this.getRangeBounds(az.node,aD,aE.length)}else{if(az.node&&typeof(az.node.data)==="string"){var aC=az.node.splitText(aE.length);var aB=this.getWrapperBounds(az.node,az.parent.hasTransform());az.node=aC;return aB}}}else{if(!this.support.rangeBounds||az.parent.hasTransform()){az.node=az.node.splitText(aE.length)}}return{}}};ad.prototype.getWrapperBounds=function(aD,az){var aE=aD.ownerDocument.createElement("html2canvaswrapper");var aA=aD.parentNode,aC=aD.cloneNode(true);aE.appendChild(aD.cloneNode(true));aA.replaceChild(aE,aD);var aB=az?an(aE):K(aE);aA.replaceChild(aC,aE);return aB};ad.prototype.getRangeBounds=function(aB,aC,aA){var az=this.range||(this.range=aB.ownerDocument.createRange());az.setStart(aB,aC);az.setEnd(aB,aC+aA);return az.getBoundingClientRect()};function av(){}ad.prototype.parse=function(aE){var aF=aE.contexts.filter(w);var aB=aE.children.filter(at);var aC=aB.filter(ai(af));var aG=aC.filter(ai(ar)).filter(ai(M));var aD=aB.filter(ai(ar)).filter(af);var az=aC.filter(ai(ar)).filter(M);var aI=aE.contexts.concat(aC.filter(ar)).filter(aa);var aH=aE.children.filter(Q).filter(O);var aA=aE.contexts.filter(W);aF.concat(aG).concat(aD).concat(az).concat(aI).concat(aH).concat(aA).forEach(function(aJ){this.renderQueue.push(aJ);if(S(aJ)){this.parse(aJ);this.renderQueue.push(new av())}},this)};ad.prototype.paint=function(az){try{if(az instanceof av){this.renderer.ctx.restore()}else{if(Q(az)){if(x(az.parent)){az.parent.appendToDOM()}this.paintText(az);if(x(az.parent)){az.parent.cleanDOM()}}else{this.paintNode(az)}}}catch(aA){J(aA);if(this.options.strict){throw aA}}};ad.prototype.paintNode=function(az){if(S(az)){this.renderer.setOpacity(az.opacity);this.renderer.ctx.save();if(az.hasTransform()){this.renderer.setTransform(az.parseTransform())}}if(az.node.nodeName==="INPUT"&&az.node.type==="checkbox"){this.paintCheckbox(az)}else{if(az.node.nodeName==="INPUT"&&az.node.type==="radio"){this.paintRadio(az)}else{this.paintElement(az)}}};ad.prototype.paintElement=function(az){var aA=az.parseBounds();this.renderer.clip(az.backgroundClip,function(){this.renderer.renderBackground(az,aA,az.borders.borders.map(au))},this);this.renderer.clip(az.clip,function(){this.renderer.renderBorders(az.borders.borders)},this);this.renderer.clip(az.backgroundClip,function(){switch(az.node.nodeName){case"svg":case"IFRAME":var aB=this.images.get(az.node);if(aB){this.renderer.renderImage(az,aA,az.borders,aB)}else{J("Error loading <"+az.node.nodeName+">",az.node)}break;case"IMG":var aC=this.images.get(az.node.src);if(aC){this.renderer.renderImage(az,aA,az.borders,aC)}else{J("Error loading <img>",az.node.src)}break;case"CANVAS":this.renderer.renderImage(az,aA,az.borders,{image:az.node});break;case"SELECT":case"INPUT":case"TEXTAREA":this.paintFormValue(az);break}},this)};ad.prototype.paintCheckbox=function(aB){var aA=aB.parseBounds();var aC=Math.min(aA.width,aA.height);var aE={width:aC-1,height:aC-1,top:aA.top,left:aA.left};var aD=[3,3];var az=[aD,aD,aD,aD];var aG=[1,1,1,1].map(function(aH){return{color:new R("#A5A5A5"),width:aH}});var aF=C(aE,az,aG);this.renderer.clip(aB.backgroundClip,function(){this.renderer.rectangle(aE.left+1,aE.top+1,aE.width-2,aE.height-2,new R("#DEDEDE"));this.renderer.renderBorders(Y(aG,aE,aF,az));if(aB.node.checked){this.renderer.font(new R("#424242"),"normal","normal","bold",(aC-3)+"px","arial");this.renderer.text("\u2714",aE.left+aC/6,aE.top+aC-1)}},this)};ad.prototype.paintRadio=function(az){var aB=az.parseBounds();var aA=Math.min(aB.width,aB.height)-2;this.renderer.clip(az.backgroundClip,function(){this.renderer.circleStroke(aB.left+1,aB.top+1,aA,new R("#DEDEDE"),1,new R("#A5A5A5"));if(az.node.checked){this.renderer.circle(Math.ceil(aB.left+aA/4)+1,Math.ceil(aB.top+aA/4)+1,Math.floor(aA/2),new R("#424242"))}},this)};ad.prototype.paintFormValue=function(aA){var aD=aA.getValue();if(aD.length>0){var az=aA.node.ownerDocument;var aE=az.createElement("html2canvaswrapper");var aB=["lineHeight","textAlign","fontFamily","fontWeight","fontSize","color","paddingLeft","paddingTop","paddingRight","paddingBottom","width","height","borderLeftStyle","borderTopStyle","borderLeftWidth","borderTopWidth","boxSizing","whiteSpace","wordWrap"];aB.forEach(function(aF){try{aE.style[aF]=aA.css(aF)}catch(aG){J("html2canvas: Parse: Exception caught in renderFormValue: "+aG.message)}});var aC=aA.parseBounds();aE.style.position="fixed";aE.style.left=aC.left+"px";aE.style.top=aC.top+"px";aE.textContent=aD;az.body.appendChild(aE);this.paintText(new al(aE.firstChild,aA));az.body.removeChild(aE)}};ad.prototype.paintText=function(aA){aA.applyTextTransform();var az=ag.ucs2.decode(aA.node.data);var aF=(!this.options.letterRendering||ac(aA))&&!N(aA.node.data)?ao(az):az.map(function(aG){return ag.ucs2.encode([aG])});var aE=aA.parent.fontWeight();var aB=aA.parent.css("fontSize");var aC=aA.parent.css("fontFamily");var aD=aA.parent.parseTextShadows();this.renderer.font(aA.parent.color("color"),aA.parent.css("fontStyle"),aA.parent.css("fontVariant"),aE,aB,aC);if(aD.length){this.renderer.fontShadow(aD[0].color,aD[0].offsetX,aD[0].offsetY,aD[0].blur)}else{this.renderer.clearShadow()}this.renderer.clip(aA.parent.clip,function(){aF.map(this.parseTextBounds(aA),this).forEach(function(aH,aG){if(aH){this.renderer.text(aF[aG],aH.left,aH.bottom);this.renderTextDecoration(aA.parent,aH,this.fontMetrics.getMetrics(aC,aB))}},this)},this)};ad.prototype.renderTextDecoration=function(az,aB,aA){switch(az.css("textDecoration").split(" ")[0]){case"underline":this.renderer.rectangle(aB.left,Math.round(aB.top+aA.baseline+aA.lineWidth),aB.width,1,az.color("color"));break;case"overline":this.renderer.rectangle(aB.left,Math.round(aB.top),aB.width,1,az.color("color"));break;case"line-through":this.renderer.rectangle(aB.left,Math.ceil(aB.top+aA.middle+aA.lineWidth),aB.width,1,az.color("color"));break}};var X={inset:[["darken",0.6],["darken",0.1],["darken",0.1],["darken",0.6]]};ad.prototype.parseBorders=function(aA){var aB=aA.parseBounds();var az=z(aA);var aD=["Top","Right","Bottom","Left"].map(function(aG,aF){var aI=aA.css("border"+aG+"Style");var aE=aA.color("border"+aG+"Color");if(aI==="inset"&&aE.isBlack()){aE=new R([255,255,255,aE.a])}var aH=X[aI]?X[aI][aF]:null;return{width:aA.cssInt("border"+aG+"Width"),color:aH?aE[aH[0]](aH[1]):aE,args:null}});var aC=C(aB,az,aD);return{clip:this.parseBackgroundClip(aA,aC,aD,az,aB),borders:Y(aD,aB,aC,az)}};function Y(aC,aA,aB,az){return aC.map(function(aE,aF){if(aE.width>0){var aH=aA.left;var aG=aA.top;var aI=aA.width;var aD=aA.height-(aC[2].width);switch(aF){case 0:aD=aC[0].width;aE.args=ak({c1:[aH,aG],c2:[aH+aI,aG],c3:[aH+aI-aC[1].width,aG+aD],c4:[aH+aC[3].width,aG+aD]},az[0],az[1],aB.topLeftOuter,aB.topLeftInner,aB.topRightOuter,aB.topRightInner);break;case 1:aH=aA.left+aA.width-(aC[1].width);aI=aC[1].width;aE.args=ak({c1:[aH+aI,aG],c2:[aH+aI,aG+aD+aC[2].width],c3:[aH,aG+aD],c4:[aH,aG+aC[0].width]},az[1],az[2],aB.topRightOuter,aB.topRightInner,aB.bottomRightOuter,aB.bottomRightInner);break;case 2:aG=(aG+aA.height)-(aC[2].width);aD=aC[2].width;aE.args=ak({c1:[aH+aI,aG+aD],c2:[aH,aG+aD],c3:[aH+aC[3].width,aG],c4:[aH+aI-aC[3].width,aG]},az[2],az[3],aB.bottomRightOuter,aB.bottomRightInner,aB.bottomLeftOuter,aB.bottomLeftInner);break;case 3:aI=aC[3].width;aE.args=ak({c1:[aH,aG+aD+aC[2].width],c2:[aH,aG],c3:[aH+aI,aG+aC[0].width],c4:[aH+aI,aG+aD]},az[3],az[0],aB.bottomLeftOuter,aB.bottomLeftInner,aB.topLeftOuter,aB.topLeftInner);break}}return aE})}ad.prototype.parseBackgroundClip=function(aA,aE,aF,az,aD){var aC=aA.css("backgroundClip"),aB=[];switch(aC){case"content-box":case"padding-box":aw(aB,az[0],az[1],aE.topLeftInner,aE.topRightInner,aD.left+aF[3].width,aD.top+aF[0].width);aw(aB,az[1],az[2],aE.topRightInner,aE.bottomRightInner,aD.left+aD.width-aF[1].width,aD.top+aF[0].width);aw(aB,az[2],az[3],aE.bottomRightInner,aE.bottomLeftInner,aD.left+aD.width-aF[1].width,aD.top+aD.height-aF[2].width);aw(aB,az[3],az[0],aE.bottomLeftInner,aE.topLeftInner,aD.left+aF[3].width,aD.top+aD.height-aF[2].width);break;default:aw(aB,az[0],az[1],aE.topLeftOuter,aE.topRightOuter,aD.left,aD.top);aw(aB,az[1],az[2],aE.topRightOuter,aE.bottomRightOuter,aD.left+aD.width,aD.top);aw(aB,az[2],az[3],aE.bottomRightOuter,aE.bottomLeftOuter,aD.left+aD.width,aD.top+aD.height);aw(aB,az[3],az[0],aE.bottomLeftOuter,aE.topLeftOuter,aD.left,aD.top+aD.height);break}return aB};function L(aH,aG,aD,aC){var aF=4*((Math.sqrt(2)-1)/3);var aB=(aD)*aF,az=(aC)*aF,aE=aH+aD,aA=aG+aC;return{topLeft:ax({x:aH,y:aA},{x:aH,y:aA-az},{x:aE-aB,y:aG},{x:aE,y:aG}),topRight:ax({x:aH,y:aG},{x:aH+aB,y:aG},{x:aE,y:aA-az},{x:aE,y:aA}),bottomRight:ax({x:aE,y:aG},{x:aE,y:aG+az},{x:aH+aB,y:aA},{x:aH,y:aA}),bottomLeft:ax({x:aE,y:aA},{x:aE-aB,y:aA},{x:aH,y:aG+az},{x:aH,y:aG})}}function C(aC,az,aB){var aG=aC.left,aD=aC.top,aL=aC.width,aK=aC.height,aM=az[0][0]<aL/2?az[0][0]:aL/2,aF=az[0][1]<aK/2?az[0][1]:aK/2,aP=az[1][0]<aL/2?az[1][0]:aL/2,aI=az[1][1]<aK/2?az[1][1]:aK/2,aQ=az[2][0]<aL/2?az[2][0]:aL/2,aJ=az[2][1]<aK/2?az[2][1]:aK/2,aO=az[3][0]<aL/2?az[3][0]:aL/2,aH=az[3][1]<aK/2?az[3][1]:aK/2;var aE=aL-aP,aR=aK-aJ,aA=aL-aQ,aN=aK-aH;return{topLeftOuter:L(aG,aD,aM,aF).topLeft.subdivide(0.5),topLeftInner:L(aG+aB[3].width,aD+aB[0].width,Math.max(0,aM-aB[3].width),Math.max(0,aF-aB[0].width)).topLeft.subdivide(0.5),topRightOuter:L(aG+aE,aD,aP,aI).topRight.subdivide(0.5),topRightInner:L(aG+Math.min(aE,aL+aB[3].width),aD+aB[0].width,(aE>aL+aB[3].width)?0:aP-aB[3].width,aI-aB[0].width).topRight.subdivide(0.5),bottomRightOuter:L(aG+aA,aD+aR,aQ,aJ).bottomRight.subdivide(0.5),bottomRightInner:L(aG+Math.min(aA,aL-aB[3].width),aD+Math.min(aR,aK+aB[0].width),Math.max(0,aQ-aB[1].width),aJ-aB[2].width).bottomRight.subdivide(0.5),bottomLeftOuter:L(aG,aD+aN,aO,aH).bottomLeft.subdivide(0.5),bottomLeftInner:L(aG+aB[3].width,aD+aN,Math.max(0,aO-aB[3].width),aH-aB[2].width).bottomLeft.subdivide(0.5)}}function ax(aD,aC,aB,az){var aA=function(aF,aE,aG){return{x:aF.x+(aE.x-aF.x)*aG,y:aF.y+(aE.y-aF.y)*aG}};return{start:aD,startControl:aC,endControl:aB,end:az,subdivide:function(aG){var aI=aA(aD,aC,aG),aJ=aA(aC,aB,aG),aK=aA(aB,az,aG),aH=aA(aI,aJ,aG),aE=aA(aJ,aK,aG),aF=aA(aH,aE,aG);return[ax(aD,aI,aH,aF),ax(aF,aE,aK,az)]},curveTo:function(aE){aE.push(["bezierCurve",aC.x,aC.y,aB.x,aB.y,az.x,az.y])},curveToReversed:function(aE){aE.push(["bezierCurve",aB.x,aB.y,aC.x,aC.y,aD.x,aD.y])}}}function ak(aF,aD,aC,aG,aA,aE,az){var aB=[];if(aD[0]>0||aD[1]>0){aB.push(["line",aG[1].start.x,aG[1].start.y]);aG[1].curveTo(aB)}else{aB.push(["line",aF.c1[0],aF.c1[1]])}if(aC[0]>0||aC[1]>0){aB.push(["line",aE[0].start.x,aE[0].start.y]);aE[0].curveTo(aB);aB.push(["line",az[0].end.x,az[0].end.y]);az[0].curveToReversed(aB)}else{aB.push(["line",aF.c2[0],aF.c2[1]]);aB.push(["line",aF.c3[0],aF.c3[1]])}if(aD[0]>0||aD[1]>0){aB.push(["line",aA[1].end.x,aA[1].end.y]);aA[1].curveToReversed(aB)}else{aB.push(["line",aF.c4[0],aF.c4[1]])}return aB}function aw(aD,aE,aC,aB,aA,az,aF){if(aE[0]>0||aE[1]>0){aD.push(["line",aB[0].start.x,aB[0].start.y]);aB[0].curveTo(aD);aB[1].curveTo(aD)}else{aD.push(["line",az,aF])}if(aC[0]>0||aC[1]>0){aD.push(["line",aA[0].start.x,aA[0].start.y])}}function w(az){return az.cssInt("zIndex")<0}function W(az){return az.cssInt("zIndex")>0}function aa(az){return az.cssInt("zIndex")===0}function M(az){return["inline","inline-block","inline-table"].indexOf(az.css("display"))!==-1}function S(az){return(az instanceof y)}function O(az){return az.node.data.trim().length>0}function ac(az){return(/^(normal|none|0px)$/.test(az.parent.css("letterSpacing")))}function z(az){return["TopLeft","TopRight","BottomRight","BottomLeft"].map(function(aB){var aC=az.css("border"+aB+"Radius");var aA=aC.split(" ");if(aA.length<=1){aA[1]=aA[0]}return aA.map(E)})}function aj(az){return(az.nodeType===Node.TEXT_NODE||az.nodeType===Node.ELEMENT_NODE)}function I(aA){var az=aA.css("position");var aB=(["absolute","relative","fixed"].indexOf(az)!==-1)?aA.css("zIndex"):"auto";return aB!=="auto"}function ar(az){return az.css("position")!=="static"}function af(az){return az.css("float")!=="none"}function aq(az){return["inline-block","inline-table"].indexOf(az.css("display"))!==-1}function ai(aA){var az=this;return function(){return !aA.apply(az,arguments)}}function at(az){return az.node.nodeType===Node.ELEMENT_NODE}function x(az){return az.isPseudoElement===true}function Q(az){return az.node.nodeType===Node.TEXT_NODE}function U(az){return function(aB,aA){return(aB.cssInt("zIndex")+(az.indexOf(aB)/az.length))-(aA.cssInt("zIndex")+(az.indexOf(aA)/az.length))}}function ae(az){return az.getOpacity()<1}function E(az){return parseInt(az,10)}function au(az){return az.width}function ab(az){return(az.node.nodeType!==Node.ELEMENT_NODE||["SCRIPT","HEAD","TITLE","OBJECT","BR","OPTION"].indexOf(az.node.nodeName)===-1)}function Z(az){return[].concat.apply([],az)}function F(az){var aA=az.substr(0,1);return(aA===az.substr(az.length-1)&&aA.match(/'|"/))?az.substr(1,az.length-2):az}function ao(az){var aD=[],aA=0,aC=false,aB;while(az.length){if(ap(az[aA])===aC){aB=az.splice(0,aA);if(aB.length){aD.push(ag.ucs2.encode(aB))}aC=!aC;aA=0}else{aA++}if(aA>=az.length){aB=az.splice(0,aA);if(aB.length){aD.push(ag.ucs2.encode(aB))}}}return aD}function ap(az){return[32,13,10,9,45].indexOf(az)!==-1}function N(az){return(/[^\u0000-\u00ff]/).test(az)}B.exports=ad},{"./color":3,"./fontmetrics":7,"./log":13,"./nodecontainer":14,"./pseudoelementcontainer":18,"./stackingcontext":21,"./textcontainer":25,"./utils":26,punycode:1}],16:[function(z,A,D){var G=z("./xhr");var L=z("./utils");var C=z("./log");var K=z("./clone");var F=L.decode64;function E(P,R,N){var M=("withCredentials" in new XMLHttpRequest());if(!R){return Promise.reject("No proxy configured")}var Q=w(M);var O=H(R,P,Q);return M?G(O):(I(N,O,Q).then(function(S){return F(S.content)}))}var x=0;function y(O,R,M){var Q=("crossOrigin" in new Image());var P=w(Q);var N=H(R,O,P);return(Q?Promise.resolve(N):I(M,N,P).then(function(S){return"data:"+S.type+";base64,"+S.content}))}function I(M,N,O){return new Promise(function(S,R){var Q=M.createElement("script");var P=function(){delete window.html2canvas.proxy[O];M.body.removeChild(Q)};window.html2canvas.proxy[O]=function(T){P();S(T)};Q.src=N;Q.onerror=function(T){P();R(T)};M.body.appendChild(Q)})}function w(M){return !M?"html2canvas_"+Date.now()+"_"+(++x)+"_"+Math.round(Math.random()*100000):""}function H(O,M,N){return O+"?url="+encodeURIComponent(M)+(N.length?"&callback=html2canvas.proxy."+N:"")}function B(M){return function(P){var T=new DOMParser(),S;try{S=T.parseFromString(P,"text/html")}catch(R){C("DOMParser not supported, falling back to createHTMLDocument");S=document.implementation.createHTMLDocument("");try{S.open();S.write(P);S.close()}catch(O){C("createHTMLDocument write not supported, falling back to document.body.innerHTML");S.body.innerHTML=P}}var N=S.querySelector("base");if(!N||!N.href.host){var Q=S.createElement("base");Q.href=M;S.head.insertBefore(Q,S.head.firstChild)}return S}}function J(R,P,N,Q,M,O){return new E(R,P,window.document).then(B(R)).then(function(S){return K(S,N,Q,M,O,0,0)})}D.Proxy=E;D.ProxyURL=y;D.loadUrlDocument=J},{"./clone":2,"./log":13,"./utils":26,"./xhr":28}],17:[function(A,z,y){var w=A("./proxy").ProxyURL;function x(E,C){var D=document.createElement("a");D.href=E;E=D.href;this.src=E;this.image=new Image();var B=this;this.promise=new Promise(function(G,F){B.image.crossOrigin="Anonymous";B.image.onload=G;B.image.onerror=F;new w(E,C,document).then(function(H){B.image.src=H})["catch"](F)})}z.exports=x},{"./proxy":16}],18:[function(z,y,x){var w=z("./nodecontainer");function A(D,C,B){w.call(this,D,C);this.isPseudoElement=true;this.before=B===":before"}A.prototype.cloneTo=function(B){A.prototype.cloneTo.call(this,B);B.isPseudoElement=true;B.before=this.before};A.prototype=Object.create(w.prototype);A.prototype.appendToDOM=function(){if(this.before){this.parent.node.insertBefore(this.node,this.parent.node.firstChild)}else{this.parent.node.appendChild(this.node)}this.parent.node.className+=" "+this.getHideClass()};A.prototype.cleanDOM=function(){this.node.parentNode.removeChild(this.node);this.parent.node.className=this.parent.node.className.replace(this.getHideClass(),"")};A.prototype.getHideClass=function(){return this["PSEUDO_HIDE_ELEMENT_CLASS_"+(this.before?"BEFORE":"AFTER")]};A.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE="___html2canvas___pseudoelement_before";A.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER="___html2canvas___pseudoelement_after";y.exports=A},{"./nodecontainer":14}],19:[function(z,x,w){var y=z("./log");function A(F,D,C,E,B){this.width=F;this.height=D;this.images=C;this.options=E;this.document=B}A.prototype.renderImage=function(C,B,J,I){var G=C.cssInt("paddingLeft"),L=C.cssInt("paddingTop"),F=C.cssInt("paddingRight"),E=C.cssInt("paddingBottom"),H=J.borders;var D=B.width-(H[1].width+H[3].width+G+F);var K=B.height-(H[0].width+H[2].width+L+E);this.drawImage(I,0,0,I.image.width||D,I.image.height||K,B.left+G+H[3].width,B.top+L+H[0].width,D,K)};A.prototype.renderBackground=function(B,C,D){if(C.height>0&&C.width>0){this.renderBackgroundColor(B,C);this.renderBackgroundImage(B,C,D)}};A.prototype.renderBackgroundColor=function(B,D){var C=B.color("backgroundColor");if(!C.isTransparent()){this.rectangle(D.left,D.top,D.width,D.height,C)}};A.prototype.renderBorders=function(B){B.forEach(this.renderBorder,this)};A.prototype.renderBorder=function(B){if(!B.color.isTransparent()&&B.args!==null){this.drawShape(B.args,B.color)}};A.prototype.renderBackgroundImage=function(C,D,E){var B=C.parseBackgroundImages();B.reverse().forEach(function(J,G,F){switch(J.method){case"url":var I=this.images.get(J.args[0]);if(I){this.renderBackgroundRepeating(C,D,I,F.length-(G+1),E)}else{y("Error loading background-image",J.args[0])}break;case"linear-gradient":case"gradient":var H=this.images.get(J.value);if(H){this.renderBackgroundGradient(H,D,E)}else{y("Error loading background-image",J.args[0])}break;case"none":break;default:y("Unknown background-image type",J.args[0])}},this)};A.prototype.renderBackgroundRepeating=function(C,G,E,D,I){var F=C.parseBackgroundSize(G,E.image,D);var B=C.parseBackgroundPosition(G,E.image,D,F);var H=C.parseBackgroundRepeat(D);switch(H){case"repeat-x":case"repeat no-repeat":this.backgroundRepeatShape(E,B,F,G,G.left+I[3],G.top+B.top+I[0],99999,F.height,I);break;case"repeat-y":case"no-repeat repeat":this.backgroundRepeatShape(E,B,F,G,G.left+B.left+I[3],G.top+I[0],F.width,99999,I);break;case"no-repeat":this.backgroundRepeatShape(E,B,F,G,G.left+B.left+I[3],G.top+B.top+I[0],F.width,F.height,I);break;default:this.renderBackgroundRepeat(E,B,F,{top:G.top,left:G.left},I[3],I[0]);break}};x.exports=A},{"./log":13}],20:[function(C,z,y){var D=C("../renderer");var x=C("../lineargradientcontainer");var A=C("../log");function w(F,E){D.apply(this,arguments);this.canvas=this.options.canvas||this.document.createElement("canvas");if(!this.options.canvas){this.canvas.width=F;this.canvas.height=E}this.ctx=this.canvas.getContext("2d");this.taintCtx=this.document.createElement("canvas").getContext("2d");this.ctx.textBaseline="bottom";this.variables={};A("Initialized CanvasRenderer with size",F,"x",E)}w.prototype=Object.create(D.prototype);w.prototype.setFillStyle=function(E){this.ctx.fillStyle=typeof(E)==="object"&&!!E.isColor?E.toString():E;return this.ctx};w.prototype.rectangle=function(I,H,G,E,F){this.setFillStyle(F).fillRect(I,H,G,E)};w.prototype.circle=function(H,G,F,E){this.setFillStyle(E);this.ctx.beginPath();this.ctx.arc(H+F/2,G+F/2,F/2,0,Math.PI*2,true);this.ctx.closePath();this.ctx.fill()};w.prototype.circleStroke=function(J,I,F,E,H,G){this.circle(J,I,F,E);this.ctx.strokeStyle=G.toString();this.ctx.stroke()};w.prototype.drawShape=function(F,E){this.shape(F);this.setFillStyle(E).fill()};w.prototype.taints=function(E){if(E.tainted===null){this.taintCtx.drawImage(E.image,0,0);try{this.taintCtx.getImageData(0,0,1,1);E.tainted=false}catch(F){this.taintCtx=document.createElement("canvas").getContext("2d");E.tainted=true}}return E.tainted};w.prototype.drawImage=function(H,J,I,K,F,M,L,E,G){if(!this.taints(H)||this.options.allowTaint){this.ctx.drawImage(H.image,J,I,K,F,M,L,E,G)}};w.prototype.clip=function(E,G,F){this.ctx.save();E.filter(B).forEach(function(H){this.shape(H).clip()},this);G.call(F);this.ctx.restore()};w.prototype.shape=function(E){this.ctx.beginPath();E.forEach(function(F,G){if(F[0]==="rect"){this.ctx.rect.apply(this.ctx,F.slice(1))}else{this.ctx[(G===0)?"moveTo":F[0]+"To"].apply(this.ctx,F.slice(1))}},this);this.ctx.closePath();return this.ctx};w.prototype.font=function(E,I,G,J,F,H){this.setFillStyle(E).font=[I,G,J,F,H].join(" ").split(",")[0]};w.prototype.fontShadow=function(F,E,H,G){this.setVariable("shadowColor",F.toString()).setVariable("shadowOffsetY",E).setVariable("shadowOffsetX",H).setVariable("shadowBlur",G)};w.prototype.clearShadow=function(){this.setVariable("shadowColor","rgba(0,0,0,0)")};w.prototype.setOpacity=function(E){this.ctx.globalAlpha=E};w.prototype.setTransform=function(E){this.ctx.translate(E.origin[0],E.origin[1]);this.ctx.transform.apply(this.ctx,E.matrix);this.ctx.translate(-E.origin[0],-E.origin[1])};w.prototype.setVariable=function(F,E){if(this.variables[F]!==E){this.variables[F]=this.ctx[F]=E}return this};w.prototype.text=function(G,F,E){this.ctx.fillText(G,F,E)};w.prototype.backgroundRepeatShape=function(J,G,N,E,H,K,F,M,L){var I=[["line",Math.round(H),Math.round(K)],["line",Math.round(H+F),Math.round(K)],["line",Math.round(H+F),Math.round(M+K)],["line",Math.round(H),Math.round(M+K)]];this.clip([I],function(){this.renderBackgroundRepeat(J,G,N,E,L[3],L[0])},this)};w.prototype.renderBackgroundRepeat=function(G,F,H,I,J,L){var E=Math.round(I.left+F.left+J),K=Math.round(I.top+F.top+L);this.setFillStyle(this.ctx.createPattern(this.resizeImage(G,H),"repeat"));this.ctx.translate(E,K);this.ctx.fill();this.ctx.translate(-E,-K)};w.prototype.renderBackgroundGradient=function(G,E){if(G instanceof x){var F=this.ctx.createLinearGradient(E.left+E.width*G.x0,E.top+E.height*G.y0,E.left+E.width*G.x1,E.top+E.height*G.y1);G.colorStops.forEach(function(H){F.addColorStop(H.stop,H.color.toString())});this.rectangle(E.left,E.top,E.width,E.height,F)}};w.prototype.resizeImage=function(G,H){var I=G.image;if(I.width===H.width&&I.height===H.height){return I}var E,F=document.createElement("canvas");F.width=H.width;F.height=H.height;E=F.getContext("2d");E.drawImage(I,0,0,I.width,I.height,0,0,H.width,H.height);return F};function B(E){return E.length>0}z.exports=w},{"../lineargradientcontainer":12,"../log":13,"../renderer":19}],21:[function(A,z,y){var w=A("./nodecontainer");function x(D,B,C,E){w.call(this,C,E);this.ownStacking=D;this.contexts=[];this.children=[];this.opacity=(this.parent?this.parent.stack.opacity:1)*B}x.prototype=Object.create(w.prototype);x.prototype.getParentStack=function(C){var B=(this.parent)?this.parent.stack:null;return B?(B.ownStacking?B:B.getParentStack(C)):C.stack};z.exports=x},{"./nodecontainer":14}],22:[function(z,y,x){function w(A){this.rangeBounds=this.testRangeBounds(A);this.cors=this.testCORS();this.svg=this.testSVG()}w.prototype.testRangeBounds=function(A){var C,F,E,B,D=false;if(A.createRange){C=A.createRange();if(C.getBoundingClientRect){F=A.createElement("boundtest");F.style.height="123px";F.style.display="block";A.body.appendChild(F);C.selectNode(F);E=C.getBoundingClientRect();B=E.height;if(B===123){D=true}A.body.removeChild(F)}}return D};w.prototype.testCORS=function(){return typeof((new Image()).crossOrigin)!=="undefined"};w.prototype.testSVG=function(){var B=new Image();var C=document.createElement("canvas");var A=C.getContext("2d");B.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{A.drawImage(B,0,0);C.toDataURL()}catch(D){return false}return true};y.exports=w},{}],23:[function(B,y,w){var A=B("./xhr");var x=B("./utils").decode64;function z(D){this.src=D;this.image=null;var C=this;this.promise=this.hasFabric().then(function(){return(C.isInline(D)?Promise.resolve(C.inlineFormatting(D)):A(D))}).then(function(E){return new Promise(function(F){window.html2canvas.svg.fabric.loadSVGFromString(E,C.createCanvas.call(C,F))})})}z.prototype.hasFabric=function(){return !window.html2canvas.svg||!window.html2canvas.svg.fabric?Promise.reject(new Error("html2canvas.svg.js is not loaded, cannot render svg")):Promise.resolve()};z.prototype.inlineFormatting=function(C){return(/^data:image\/svg\+xml;base64,/.test(C))?this.decode64(this.removeContentType(C)):this.removeContentType(C)};z.prototype.removeContentType=function(C){return C.replace(/^data:image\/svg\+xml(;base64)?,/,"")};z.prototype.isInline=function(C){return(/^data:image\/svg\+xml/i.test(C))};z.prototype.createCanvas=function(D){var C=this;return function(G,F){var E=new window.html2canvas.svg.fabric.StaticCanvas("c");C.image=E.lowerCanvasEl;E.setWidth(F.width).setHeight(F.height).add(window.html2canvas.svg.fabric.util.groupSVGElements(G,F)).renderAll();D(E.lowerCanvasEl)}};z.prototype.decode64=function(C){return(typeof(window.atob)==="function")?window.atob(C):x(C)};y.exports=z},{"./utils":26,"./xhr":28}],24:[function(z,x,w){var y=z("./svgcontainer");function A(C,D){this.src=C;this.image=null;var B=this;this.promise=D?new Promise(function(F,E){B.image=new Image();B.image.onload=F;B.image.onerror=E;B.image.src="data:image/svg+xml,"+(new XMLSerializer()).serializeToString(C);if(B.image.complete===true){F(B.image)}}):this.hasFabric().then(function(){return new Promise(function(E){window.html2canvas.svg.fabric.parseSVGDocument(C,B.createCanvas.call(B,E))})})}A.prototype=Object.create(y.prototype);x.exports=A},{"./svgcontainer":23}],25:[function(B,A,x){var w=B("./nodecontainer");function y(D,C){w.call(this,D,C)}y.prototype=Object.create(w.prototype);y.prototype.applyTextTransform=function(){this.node.data=this.transform(this.parent.css("textTransform"))};y.prototype.transform=function(C){var D=this.node.data;switch(C){case"lowercase":return D.toLowerCase();case"capitalize":return D.replace(/(^|\s|:|-|\(|\))([a-z])/g,z);case"uppercase":return D.toUpperCase();default:return D}};function z(C,E,D){if(C.length>0){return E+D.toUpperCase()}}A.exports=y},{"./nodecontainer":14}],26:[function(y,x,w){w.smallImage=function z(){return"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"};w.bind=function(B,A){return function(){return B.apply(A,arguments)}};w.decode64=function(F){var H="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var G=F.length,E,C,B,A,L,K,J,I;var D="";for(E=0;E<G;E+=4){C=H.indexOf(F[E]);B=H.indexOf(F[E+1]);A=H.indexOf(F[E+2]);L=H.indexOf(F[E+3]);K=(C<<2)|(B>>4);J=((B&15)<<4)|(A>>2);I=((A&3)<<6)|L;if(A===64){D+=String.fromCharCode(K)}else{if(L===64||L===-1){D+=String.fromCharCode(K,J)}else{D+=String.fromCharCode(K,J,I)}}}return D};w.getBounds=function(B){if(B.getBoundingClientRect){var C=B.getBoundingClientRect();var A=B.offsetWidth==null?C.width:B.offsetWidth;return{top:C.top,bottom:C.bottom||(C.top+C.height),right:C.left+A,left:C.left,width:A,height:B.offsetHeight==null?C.height:B.offsetHeight}}return{}};w.offsetBounds=function(B){var A=B.offsetParent?w.offsetBounds(B.offsetParent):{top:0,left:0};return{top:B.offsetTop+A.top,bottom:B.offsetTop+B.offsetHeight+A.top,right:B.offsetLeft+A.left+B.offsetWidth,left:B.offsetLeft+A.left,width:B.offsetWidth,height:B.offsetHeight}};w.parseBackgrounds=function(J){var C=" \r\n\t",B,D,H,M,E,F=[],G=0,K=0,A,I;var L=function(){if(B){if(D.substr(0,1)==='"'){D=D.substr(1,D.length-2)}if(D){I.push(D)}if(B.substr(0,1)==="-"&&(M=B.indexOf("-",1)+1)>0){H=B.substr(0,M);B=B.substr(M)}F.push({prefix:H,method:B.toLowerCase(),value:E,args:I,image:null})}I=[];B=H=D=E=""};I=[];B=H=D=E="";J.split("").forEach(function(N){if(G===0&&C.indexOf(N)>-1){return}switch(N){case'"':if(!A){A=N}else{if(A===N){A=null}}break;case"(":if(A){break}else{if(G===0){G=1;E+=N;return}else{K++}}break;case")":if(A){break}else{if(G===1){if(K===0){G=0;E+=N;L();return}else{K--}}}break;case",":if(A){break}else{if(G===0){L();return}else{if(G===1){if(K===0&&!B.match(/^url$/i)){I.push(D);D="";E+=N;return}}}}break}E+=N;if(G===0){B+=N}else{D+=N}});L();return F}},{}],27:[function(z,y,w){var A=z("./gradientcontainer");function x(B){A.apply(this,arguments);this.type=B.args[0]==="linear"?A.TYPES.LINEAR:A.TYPES.RADIAL}x.prototype=Object.create(A.prototype);y.exports=x},{"./gradientcontainer":9}],28:[function(z,x,w){function y(A){return new Promise(function(C,B){var D=new XMLHttpRequest();D.open("GET",A);D.onload=function(){if(D.status===200){C(D.responseText)}else{B(new Error(D.statusText))}};D.onerror=function(){B(new Error("Network Error"))};D.send()})}x.exports=y},{}]},{},[4])(4)});(function(t){var s;s=(function(){var D,A,w,B,x,C,z,u;v.load=function(F,E,I){var G,H=this;if(typeof E==="function"){I=E}G=new XMLHttpRequest;G.open("GET",F,true);G.responseType="arraybuffer";G.onload=function(){var J,K;J=new Uint8Array(G.response||G.mozResponseArrayBuffer);K=new v(J);if(typeof(E!=null?E.getContext:void 0)==="function"){K.render(E)}return typeof I==="function"?I(K):void 0};return G.send(null)};B=0;w=1;x=2;A=0;D=1;function v(L){var G,E,I,S,N,F,M,O,R,Q,P,T,J,H,K;this.data=L;this.pos=8;this.palette=[];this.imgData=[];this.transparency={};this.animation=null;this.text={};F=null;while(true){G=this.readUInt32();Q=((function(){var V,U;U=[];for(M=V=0;V<4;M=++V){U.push(String.fromCharCode(this.data[this.pos++]))}return U}).call(this)).join("");switch(Q){case"IHDR":this.width=this.readUInt32();this.height=this.readUInt32();this.bits=this.data[this.pos++];this.colorType=this.data[this.pos++];this.compressionMethod=this.data[this.pos++];this.filterMethod=this.data[this.pos++];this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||Infinity,frames:[]};break;case"PLTE":this.palette=this.read(G);break;case"fcTL":if(F){this.animation.frames.push(F)}this.pos+=4;F={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()};N=this.readUInt16();S=this.readUInt16()||100;F.delay=1000*N/S;F.disposeOp=this.data[this.pos++];F.blendOp=this.data[this.pos++];F.data=[];break;case"IDAT":case"fdAT":if(Q==="fdAT"){this.pos+=4;G-=4}L=(F!=null?F.data:void 0)||this.imgData;for(M=J=0;0<=G?J<G:J>G;M=0<=G?++J:--J){L.push(this.data[this.pos++])}break;case"tRNS":this.transparency={};switch(this.colorType){case 3:I=this.palette.length/3;this.transparency.indexed=this.read(G);if(this.transparency.indexed.length>I){throw new Error("More transparent colors than palette size")}P=I-this.transparency.indexed.length;if(P>0){for(M=H=0;0<=P?H<P:H>P;M=0<=P?++H:--H){this.transparency.indexed.push(255)}}break;case 0:this.transparency.grayscale=this.read(G)[0];break;case 2:this.transparency.rgb=this.read(G)}break;case"tEXt":T=this.read(G);O=T.indexOf(0);R=String.fromCharCode.apply(String,T.slice(0,O));this.text[R]=String.fromCharCode.apply(String,T.slice(O+1));break;case"IEND":if(F){this.animation.frames.push(F)}this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this);this.hasAlphaChannel=(K=this.colorType)===4||K===6;E=this.colors+(this.hasAlphaChannel?1:0);this.pixelBitlength=this.bits*E;this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this);this.imgData=new Uint8Array(this.imgData);return;default:this.pos+=G}this.pos+=4;if(this.pos>this.data.length){throw new Error("Incomplete or corrupt PNG file")}}return}v.prototype.read=function(F){var G,H,E;E=[];for(G=H=0;0<=F?H<F:H>F;G=0<=F?++H:--H){E.push(this.data[this.pos++])}return E};v.prototype.readUInt32=function(){var H,G,F,E;H=this.data[this.pos++]<<24;G=this.data[this.pos++]<<16;F=this.data[this.pos++]<<8;E=this.data[this.pos++];return H|G|F|E};v.prototype.readUInt16=function(){var F,E;F=this.data[this.pos++]<<8;E=this.data[this.pos++];return F|E};v.prototype.decodePixels=function(ab){var W,aa,P,X,O,N,U,J,V,H,F,S,T,Q,R,Z,Y,L,M,K,I,G,E;if(ab==null){ab=this.imgData}if(ab.length===0){return new Uint8Array(0)}ab=new q(ab);ab=ab.getBytes();S=this.pixelBitlength/8;Z=S*this.width;T=new Uint8Array(Z*this.height);N=ab.length;R=0;Q=0;aa=0;while(Q<N){switch(ab[Q++]){case 0:for(X=M=0;M<Z;X=M+=1){T[aa++]=ab[Q++]}break;case 1:for(X=K=0;K<Z;X=K+=1){W=ab[Q++];O=X<S?0:T[aa-S];T[aa++]=(W+O)%256}break;case 2:for(X=I=0;I<Z;X=I+=1){W=ab[Q++];P=(X-(X%S))/S;Y=R&&T[(R-1)*Z+P*S+(X%S)];T[aa++]=(Y+W)%256}break;case 3:for(X=G=0;G<Z;X=G+=1){W=ab[Q++];P=(X-(X%S))/S;O=X<S?0:T[aa-S];Y=R&&T[(R-1)*Z+P*S+(X%S)];T[aa++]=(W+Math.floor((O+Y)/2))%256}break;case 4:for(X=E=0;E<Z;X=E+=1){W=ab[Q++];P=(X-(X%S))/S;O=X<S?0:T[aa-S];if(R===0){Y=L=0}else{Y=T[(R-1)*Z+P*S+(X%S)];L=P&&T[(R-1)*Z+(P-1)*S+(X%S)]}U=O+Y-L;J=Math.abs(U-O);H=Math.abs(U-Y);F=Math.abs(U-L);if(J<=H&&J<=F){V=O}else{if(H<=F){V=Y}else{V=L}}T[aa++]=(W+V)%256}break;default:throw new Error("Invalid filter algorithm: "+ab[Q-1])}R++}return T};v.prototype.decodePalette=function(){var M,K,E,F,N,L,G,I,J,H;F=this.palette;G=this.transparency.indexed||[];L=new Uint8Array((G.length||0)+F.length);N=0;E=F.length;M=0;for(K=I=0,J=F.length;I<J;K=I+=3){L[N++]=F[K];L[N++]=F[K+1];L[N++]=F[K+2];L[N++]=(H=G[M++])!=null?H:255}return L};v.prototype.copyToImageData=function(E,I){var K,F,N,O,P,L,J,G,H,Q,M;F=this.colors;H=null;K=this.hasAlphaChannel;if(this.palette.length){H=(M=this._decodedPalette)!=null?M:this._decodedPalette=this.decodePalette();F=4;K=true}N=E.data||E;G=N.length;P=H||I;O=L=0;if(F===1){while(O<G){J=H?I[O/4]*4:L;Q=P[J++];N[O++]=Q;N[O++]=Q;N[O++]=Q;N[O++]=K?P[J++]:255;L=J}}else{while(O<G){J=H?I[O/4]*4:L;N[O++]=P[J++];N[O++]=P[J++];N[O++]=P[J++];N[O++]=K?P[J++]:255;L=J}}};v.prototype.decode=function(){var E;E=new Uint8Array(this.width*this.height*4);this.copyToImageData(E,this.decodePixels());return E};try{z=t.document.createElement("canvas");u=z.getContext("2d")}catch(y){return -1}C=function(F){var E;u.width=F.width;u.height=F.height;u.clearRect(0,0,F.width,F.height);u.putImageData(F,0,0);E=new Image;E.src=z.toDataURL();return E};v.prototype.decodeFrames=function(M){var F,K,E,G,I,L,J,H;if(!this.animation){return}J=this.animation.frames;H=[];for(K=I=0,L=J.length;I<L;K=++I){F=J[K];E=M.createImageData(F.width,F.height);G=this.decodePixels(new Uint8Array(F.data));this.copyToImageData(E,G);F.imageData=E;H.push(F.image=C(E))}return H};v.prototype.renderFrame=function(E,G){var I,H,F;H=this.animation.frames;I=H[G];F=H[G-1];if(G===0){E.clearRect(0,0,this.width,this.height)}if((F!=null?F.disposeOp:void 0)===w){E.clearRect(F.xOffset,F.yOffset,F.width,F.height)}else{if((F!=null?F.disposeOp:void 0)===x){E.putImageData(F.imageData,F.xOffset,F.yOffset)}}if(I.blendOp===A){E.clearRect(I.xOffset,I.yOffset,I.width,I.height)}return E.drawImage(I.image,I.xOffset,I.yOffset)};v.prototype.animate=function(G){var F,K,J,I,E,H,L=this;K=0;H=this.animation,I=H.numFrames,J=H.frames,E=H.numPlays;return(F=function(){var M,N;M=K++%I;N=J[M];L.renderFrame(G,M);if(I>1&&K/I<E){return L.animation._timeout=setTimeout(F,N.delay)}})()};v.prototype.stopAnimation=function(){var E;return clearTimeout((E=this.animation)!=null?E._timeout:void 0)};v.prototype.render=function(F){var E,G;if(F._png){F._png.stopAnimation()}F._png=this;F.width=this.width;F.height=this.height;E=F.getContext("2d");if(this.animation){this.decodeFrames(E);return this.animate(E)}else{G=E.createImageData(this.width,this.height);this.copyToImageData(G,this.decodePixels());return E.putImageData(G,0,0)}};return v})();t.PNG=s})(typeof window!=="undefined"&&window||undefined);var h=(function(){function t(){this.pos=0;this.bufferLength=0;this.eof=false;this.buffer=null}t.prototype={ensureBuffer:function z(G){var C=this.buffer;var F=C?C.byteLength:0;if(G<F){return C}var E=512;while(E<G){E<<=1}var B=new Uint8Array(E);for(var D=0;D<F;++D){B[D]=C[D]}return this.buffer=B},getByte:function s(){var B=this.pos;while(this.bufferLength<=B){if(this.eof){return null}this.readBlock()}return this.buffer[this.pos++]},getBytes:function A(D){var E=this.pos;if(D){this.ensureBuffer(E+D);var C=E+D;while(!this.eof&&this.bufferLength<C){this.readBlock()}var B=this.bufferLength;if(C>B){C=B}}else{while(!this.eof){this.readBlock()}var C=this.bufferLength}this.pos=C;return this.buffer.subarray(E,C)},lookChar:function x(){var B=this.pos;while(this.bufferLength<=B){if(this.eof){return null}this.readBlock()}return String.fromCharCode(this.buffer[this.pos])},getChar:function u(){var B=this.pos;while(this.bufferLength<=B){if(this.eof){return null}this.readBlock()}return String.fromCharCode(this.buffer[this.pos++])},makeSubStream:function w(E,C,D){var B=E+C;while(this.bufferLength<=B&&!this.eof){this.readBlock()}return new Stream(this.buffer,E,C,D)},skip:function v(B){if(!B){B=1}this.pos+=B},reset:function y(){this.pos=0}};return t})();var q=(function(){if(typeof Uint32Array==="undefined"){return undefined}var y=new Uint32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);var t=new Uint32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]);var v=new Uint32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]);var s=[new Uint32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,590000,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9];var x=[new Uint32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5];function u(z){throw new Error(z)}function w(A){var C=0;var B=A[C++];var z=A[C++];if(B==-1||z==-1){u("Invalid header in flate stream")}if((B&15)!=8){u("Unknown compression method in flate stream")}if((((B<<8)+z)%31)!=0){u("Bad FCHECK in flate stream")}if(z&32){u("FDICT bit set in flate stream")}this.bytes=A;this.bytesPos=C;this.codeSize=0;this.codeBuf=0;h.call(this)}w.prototype=Object.create(h.prototype);w.prototype.getBits=function(D){var B=this.codeSize;var C=this.codeBuf;var A=this.bytes;var E=this.bytesPos;var z;while(B<D){if(typeof(z=A[E++])=="undefined"){u("Bad encoding in flate stream")}C|=z<<B;B+=8}z=C&((1<<D)-1);this.codeBuf=C>>D;this.codeSize=B-=D;this.bytesPos=E;return z};w.prototype.getCode=function(G){var z=G[0];var B=G[1];var D=this.codeSize;var H=this.codeBuf;var J=this.bytes;var E=this.bytesPos;while(D<B){var F;if(typeof(F=J[E++])=="undefined"){u("Bad encoding in flate stream")}H|=(F<<D);D+=8}var A=z[H&((1<<B)-1)];var C=A>>16;var I=A&65535;if(D==0||D<C||C==0){u("Bad encoding in flate stream")}this.codeBuf=(H>>C);this.codeSize=(D-C);this.bytesPos=E;return I};w.prototype.generateHuffmanTable=function(D){var C=D.length;var E=0;for(var F=0;F<C;++F){if(D[F]>E){E=D[F]}}var K=1<<E;var z=new Uint32Array(K);for(var G=1,A=0,I=2;G<=E;++G,A<<=1,I<<=1){for(var B=0;B<C;++B){if(D[B]==G){var H=0;var J=A;for(var F=0;F<G;++F){H=(H<<1)|(J&1);J>>=1}for(var F=H;F<K;F+=I){z[F]=(G<<16)|B}++A}}}return[z,E]};w.prototype.readBlock=function(){function L(ag,ah,ac,af,ae){var ad=ag.getBits(ac)+af;while(ad-->0){ah[U++]=ae}}var B=this.getBits(3);if(B&1){this.eof=true}B>>=1;if(B==0){var O=this.bytes;var K=this.bytesPos;var aa;if(typeof(aa=O[K++])=="undefined"){u("Bad block header in flate stream")}var R=aa;if(typeof(aa=O[K++])=="undefined"){u("Bad block header in flate stream")}R|=(aa<<8);if(typeof(aa=O[K++])=="undefined"){u("Bad block header in flate stream")}var Z=aa;if(typeof(aa=O[K++])=="undefined"){u("Bad block header in flate stream")}Z|=(aa<<8);if(Z!=(~R&65535)){u("Bad uncompressed block length in flate stream")}this.codeBuf=0;this.codeSize=0;var G=this.bufferLength;var T=this.ensureBuffer(G+R);var C=G+R;this.bufferLength=C;for(var Q=G;Q<C;++Q){if(typeof(aa=O[K++])=="undefined"){this.eof=true;break}T[Q]=aa}this.bytesPos=K;return}var I;var J;if(B==1){I=s;J=x}else{if(B==2){var ab=this.getBits(5)+257;var M=this.getBits(5)+1;var z=this.getBits(4)+4;var D=Array(y.length);var U=0;while(U<z){D[y[U++]]=this.getBits(3)}var N=this.generateHuffmanTable(D);var V=0;var U=0;var Y=ab+M;var W=new Array(Y);while(U<Y){var A=this.getCode(N);if(A==16){L(this,W,2,3,V)}else{if(A==17){L(this,W,3,3,V=0)}else{if(A==18){L(this,W,7,11,V=0)}else{W[U++]=V=A}}}}I=this.generateHuffmanTable(W.slice(0,ab));J=this.generateHuffmanTable(W.slice(ab,Y))}else{u("Unknown block type in flate stream")}}var T=this.buffer;var X=T?T.length:0;var H=this.bufferLength;while(true){var F=this.getCode(I);if(F<256){if(H+1>=X){T=this.ensureBuffer(H+1);X=T.length}T[H++]=F;continue}if(F==256){this.bufferLength=H;return}F-=257;F=t[F];var E=F>>16;if(E>0){E=this.getBits(E)}var V=(F&65535)+E;F=this.getCode(J);F=v[F];E=F>>16;if(E>0){E=this.getBits(E)}var P=(F&65535)+E;if(H+V>=X){T=this.ensureBuffer(H+V);X=T.length}for(var S=0;S<V;++S,++H){T[H]=T[H-P]}}};return w})();(function(t){var s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";if(typeof t.btoa==="undefined"){t.btoa=function(B){var x,w,v,F,E,D,C,G,A=0,H=0,z="",y=[];if(!B){return B}do{x=B.charCodeAt(A++);w=B.charCodeAt(A++);v=B.charCodeAt(A++);G=x<<16|w<<8|v;F=G>>18&63;E=G>>12&63;D=G>>6&63;C=G&63;y[H++]=s.charAt(F)+s.charAt(E)+s.charAt(D)+s.charAt(C)}while(A<B.length);z=y.join("");var u=B.length%3;return(u?z.slice(0,u-3):z)+"===".slice(u||3)}}if(typeof t.atob==="undefined"){t.atob=function(A){var w,v,u,E,D,C,B,F,z=0,G=0,x="",y=[];if(!A){return A}A+="";do{E=s.indexOf(A.charAt(z++));D=s.indexOf(A.charAt(z++));C=s.indexOf(A.charAt(z++));B=s.indexOf(A.charAt(z++));F=E<<18|D<<12|C<<6|B;w=F>>16&255;v=F>>8&255;u=F&255;if(C==64){y[G++]=String.fromCharCode(w)}else{if(B==64){y[G++]=String.fromCharCode(w,v)}else{y[G++]=String.fromCharCode(w,v,u)}}}while(z<A.length);x=y.join("");return x}}if(!Array.prototype.map){Array.prototype.map=function(w){if(this===void 0||this===null||typeof w!=="function"){throw new TypeError()}var z=Object(this),u=z.length>>>0,y=new Array(u);var v=arguments.length>1?arguments[1]:void 0;for(var x=0;x<u;x++){if(x in z){y[x]=w.call(v,z[x],x,z)}}return y}}if(!Array.isArray){Array.isArray=function(u){return Object.prototype.toString.call(u)==="[object Array]"}}if(!Array.prototype.forEach){Array.prototype.forEach=function(w,v){if(this===void 0||this===null||typeof w!=="function"){throw new TypeError()}var y=Object(this),u=y.length>>>0;for(var x=0;x<u;x++){if(x in y){w.call(v,y[x],x,y)}}}}if(!Object.keys){Object.keys=(function(){var w=Object.prototype.hasOwnProperty,x=!({toString:null}).propertyIsEnumerable("toString"),v=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],u=v.length;return function(A){if(typeof A!=="object"&&(typeof A!=="function"||A===null)){throw new TypeError()}var y=[],B,z;for(B in A){if(w.call(A,B)){y.push(B)}}if(x){for(z=0;z<u;z++){if(w.call(A,v[z])){y.push(v[z])}}}return y}}())}if(!String.prototype.trim){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}}if(!String.prototype.trimLeft){String.prototype.trimLeft=function(){return this.replace(/^\s+/g,"")}}if(!String.prototype.trimRight){String.prototype.trimRight=function(){return this.replace(/\s+$/g,"")}}})(typeof self!=="undefined"&&self||typeof window!=="undefined"&&window||undefined);var i=i;return i}));!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.katex=e():t.katex=e()}("undefined"!=typeof self?self:this,function(){return function(t){var e={};function r(a){if(e[a])return e[a].exports;var n=e[a]={i:a,l:!1,exports:{}};return t[a].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=t,r.c=e,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(a,n,function(e){return t[e]}.bind(null,n));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=1)}([function(t,e,r){},function(t,e,r){"use strict";r.r(e);r(0);var a=function(){function t(t,e,r){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=t,this.start=e,this.end=r}return t.range=function(e,r){return r?e&&e.loc&&r.loc&&e.loc.lexer===r.loc.lexer?new t(e.loc.lexer,e.loc.start,r.loc.end):null:e&&e.loc},t}(),n=function(){function t(t,e){this.text=void 0,this.loc=void 0,this.noexpand=void 0,this.treatAsRelax=void 0,this.text=t,this.loc=e}return t.prototype.range=function(e,r){return new t(r,a.range(this,e))},t}(),i=function t(e,r){this.position=void 0;var a,n="KaTeX parse error: "+e,i=r&&r.loc;if(i&&i.start<=i.end){var o=i.lexer.input;a=i.start;var s=i.end;a===o.length?n+=" at end of input: ":n+=" at position "+(a+1)+": ";var l=o.slice(a,s).replace(/[^]/g,"$&\u0332");n+=(a>15?"\u2026"+o.slice(a-15,a):o.slice(0,a))+l+(s+15<o.length?o.slice(s,s+15)+"\u2026":o.slice(s))}var h=new Error(n);return h.name="ParseError",h.__proto__=t.prototype,h.position=a,h};i.prototype.__proto__=Error.prototype;var o=i,s=/([A-Z])/g,l={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},h=/[&><"']/g;var m=function t(e){return"ordgroup"===e.type?1===e.body.length?t(e.body[0]):e:"color"===e.type?1===e.body.length?t(e.body[0]):e:"font"===e.type?t(e.body):e},c={contains:function(t,e){return-1!==t.indexOf(e)},deflt:function(t,e){return void 0===t?e:t},escape:function(t){return String(t).replace(h,function(t){return l[t]})},hyphenate:function(t){return t.replace(s,"-$1").toLowerCase()},getBaseElem:m,isCharacterBox:function(t){var e=m(t);return"mathord"===e.type||"textord"===e.type||"atom"===e.type},protocolFromUrl:function(t){var e=/^\s*([^\\/#]*?)(?::|&#0*58|&#x0*3a)/i.exec(t);return null!=e?e[1]:"_relative"}},u=function(){function t(t){this.displayMode=void 0,this.output=void 0,this.leqno=void 0,this.fleqn=void 0,this.throwOnError=void 0,this.errorColor=void 0,this.macros=void 0,this.minRuleThickness=void 0,this.colorIsTextColor=void 0,this.strict=void 0,this.trust=void 0,this.maxSize=void 0,this.maxExpand=void 0,this.globalGroup=void 0,t=t||{},this.displayMode=c.deflt(t.displayMode,!1),this.output=c.deflt(t.output,"htmlAndMathml"),this.leqno=c.deflt(t.leqno,!1),this.fleqn=c.deflt(t.fleqn,!1),this.throwOnError=c.deflt(t.throwOnError,!0),this.errorColor=c.deflt(t.errorColor,"#cc0000"),this.macros=t.macros||{},this.minRuleThickness=Math.max(0,c.deflt(t.minRuleThickness,0)),this.colorIsTextColor=c.deflt(t.colorIsTextColor,!1),this.strict=c.deflt(t.strict,"warn"),this.trust=c.deflt(t.trust,!1),this.maxSize=Math.max(0,c.deflt(t.maxSize,1/0)),this.maxExpand=Math.max(0,c.deflt(t.maxExpand,1e3)),this.globalGroup=c.deflt(t.globalGroup,!1)}var e=t.prototype;return e.reportNonstrict=function(t,e,r){var a=this.strict;if("function"==typeof a&&(a=a(t,e,r)),a&&"ignore"!==a){if(!0===a||"error"===a)throw new o("LaTeX-incompatible input and strict mode is set to 'error': "+e+" ["+t+"]",r);"warn"===a?"undefined"!=typeof console&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+e+" ["+t+"]"):"undefined"!=typeof console&&console.warn("LaTeX-incompatible input and strict mode is set to unrecognized '"+a+"': "+e+" ["+t+"]")}},e.useStrictBehavior=function(t,e,r){var a=this.strict;if("function"==typeof a)try{a=a(t,e,r)}catch(t){a="error"}return!(!a||"ignore"===a)&&(!0===a||"error"===a||("warn"===a?("undefined"!=typeof console&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+e+" ["+t+"]"),!1):("undefined"!=typeof console&&console.warn("LaTeX-incompatible input and strict mode is set to unrecognized '"+a+"': "+e+" ["+t+"]"),!1)))},e.isTrusted=function(t){t.url&&!t.protocol&&(t.protocol=c.protocolFromUrl(t.url));var e="function"==typeof this.trust?this.trust(t):this.trust;return Boolean(e)},t}(),p=function(){function t(t,e,r){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=t,this.size=e,this.cramped=r}var e=t.prototype;return e.sup=function(){return d[f[this.id]]},e.sub=function(){return d[g[this.id]]},e.fracNum=function(){return d[x[this.id]]},e.fracDen=function(){return d[v[this.id]]},e.cramp=function(){return d[b[this.id]]},e.text=function(){return d[y[this.id]]},e.isTight=function(){return this.size>=2},t}(),d=[new p(0,0,!1),new p(1,0,!0),new p(2,1,!1),new p(3,1,!0),new p(4,2,!1),new p(5,2,!0),new p(6,3,!1),new p(7,3,!0)],f=[4,5,4,5,6,7,6,7],g=[5,5,5,5,7,7,7,7],x=[2,3,4,5,6,7,6,7],v=[3,3,5,5,7,7,7,7],b=[1,1,3,3,5,5,7,7],y=[0,1,2,3,2,3,2,3],w={DISPLAY:d[0],TEXT:d[2],SCRIPT:d[4],SCRIPTSCRIPT:d[6]},k=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}];var S=[];function M(t){for(var e=0;e<S.length;e+=2)if(t>=S[e]&&t<=S[e+1])return!0;return!1}k.forEach(function(t){return t.blocks.forEach(function(t){return S.push.apply(S,t)})});var z={leftParenInner:"M291 0 H417 V300 H291 z",rightParenInner:"M457 0 H583 V300 H457 z",doubleleftarrow:"M262 157\nl10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3\n 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28\n 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5\nc2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5\n 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87\n-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7\n-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z\nm8 0v40h399730v-40zm0 194v40h399730v-40z",doublerightarrow:"M399738 392l\n-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5\n 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88\n-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68\n-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18\n-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782\nc-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3\n-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z",leftarrow:"M400000 241H110l3-3c68.7-52.7 113.7-120\n 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8\n-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247\nc-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208\n 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3\n 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202\n l-3-3h399890zM100 241v40h399900v-40z",leftbrace:"M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117\n-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7\n 5-6 9-10 13-.7 1-7.3 1-20 1H6z",leftbraceunder:"M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13\n 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688\n 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7\n-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z",leftgroup:"M400000 80\nH435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0\n 435 0h399565z",leftgroupunder:"M400000 262\nH435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219\n 435 219h399565z",leftharpoon:"M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3\n-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5\n-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7\n-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z",leftharpoonplus:"M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5\n 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3\n-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7\n-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z\nm0 0v40h400000v-40z",leftharpoondown:"M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333\n 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5\n 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667\n-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z",leftharpoondownplus:"M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12\n 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7\n-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0\nv40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z",lefthook:"M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5\n-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3\n-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21\n 71.5 23h399859zM103 281v-40h399897v40z",leftlinesegment:"M40 281 V428 H0 V94 H40 V241 H400000 v40z\nM40 281 V428 H0 V94 H40 V241 H400000 v40z",leftmapsto:"M40 281 V448H0V74H40V241H400000v40z\nM40 281 V448H0V74H40V241H400000v40z",leftToFrom:"M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23\n-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8\nc28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3\n 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z",longequal:"M0 50 h400000 v40H0z m0 194h40000v40H0z\nM0 50 h400000 v40H0z m0 194h40000v40H0z",midbrace:"M200428 334\nc-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14\n-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7\n 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11\n 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z",midbraceunder:"M199572 214\nc100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14\n 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3\n 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0\n-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z",oiintSize1:"M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6\n-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z\nm368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8\n60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z",oiintSize2:"M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8\n-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z\nm502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2\nc0 110 84 276 504 276s502.4-166 502.4-276z",oiiintSize1:"M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6\n-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z\nm525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0\n85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z",oiiintSize2:"M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8\n-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z\nm770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1\nc0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z",rightarrow:"M0 241v40h399891c-47.3 35.3-84 78-110 128\n-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20\n 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7\n 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85\n-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5\n-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67\n 151.7 139 205zm0 0v40h399900v-40z",rightbrace:"M400000 542l\n-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5\ns-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1\nc124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z",rightbraceunder:"M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3\n 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237\n-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z",rightgroup:"M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0\n 3-1 3-3v-38c-76-158-257-219-435-219H0z",rightgroupunder:"M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18\n 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z",rightharpoon:"M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3\n-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2\n-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58\n 69.2 92 94.5zm0 0v40h399900v-40z",rightharpoonplus:"M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11\n-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7\n 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z\nm0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z",rightharpoondown:"M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8\n 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5\n-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95\n-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z",rightharpoondownplus:"M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8\n 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3\n 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3\n-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z\nm0-194v40h400000v-40zm0 0v40h400000v-40z",righthook:"M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3\n 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0\n-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21\n 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z",rightlinesegment:"M399960 241 V94 h40 V428 h-40 V281 H0 v-40z\nM399960 241 V94 h40 V428 h-40 V281 H0 v-40z",rightToFrom:"M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23\n 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32\n-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142\n-167z M100 147v40h399900v-40zM0 341v40h399900v-40z",twoheadleftarrow:"M0 167c68 40\n 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69\n-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3\n-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19\n-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101\n 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z",twoheadrightarrow:"M400000 167\nc-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3\n 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42\n 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333\n-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70\n 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z",tilde1:"M200 55.538c-77 0-168 73.953-177 73.953-3 0-7\n-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0\n 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0\n 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128\n-68.267.847-113-73.952-191-73.952z",tilde2:"M344 55.266c-142 0-300.638 81.316-311.5 86.418\n-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9\n 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114\nc1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751\n 181.476 676 181.476c-149 0-189-126.21-332-126.21z",tilde3:"M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457\n-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0\n 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697\n 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696\n -338 0-409-156.573-744-156.573z",tilde4:"M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345\n-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409\n 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9\n 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409\n -175.236-744-175.236z",vec:"M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z",widehat1:"M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22\nc-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z",widehat2:"M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10\n-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z",widehat3:"M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10\n-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z",widehat4:"M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10\n-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z",widecheck1:"M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,\n-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z",widecheck2:"M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,\n-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z",widecheck3:"M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,\n-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z",widecheck4:"M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,\n-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z",baraboveleftarrow:"M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202\nc4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5\nc-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130\ns-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47\n121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6\ns2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11\nc0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z\nM100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z",rightarrowabovebar:"M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32\n-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0\n13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39\n-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5\n-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5\n-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67\n151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z",baraboveshortleftharpoon:"M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11\nc1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17\nc2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21\nc-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40\nc-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z\nM0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z",rightharpoonaboveshortbar:"M0,241 l0,40c399126,0,399993,0,399993,0\nc4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,\n-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6\nc-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z\nM0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z",shortbaraboveleftharpoon:"M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11\nc1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,\n1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,\n-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z\nM93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z",shortrightharpoonabovebar:"M53,241l0,40c398570,0,399437,0,399437,0\nc4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,\n-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6\nc-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z\nM500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z"},A=function(){function t(t){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=t,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}var e=t.prototype;return e.hasClass=function(t){return c.contains(this.classes,t)},e.toNode=function(){for(var t=document.createDocumentFragment(),e=0;e<this.children.length;e++)t.appendChild(this.children[e].toNode());return t},e.toMarkup=function(){for(var t="",e=0;e<this.children.length;e++)t+=this.children[e].toMarkup();return t},e.toText=function(){var t=function(t){return t.toText()};return this.children.map(t).join("")},t}(),T=function(t){return t.filter(function(t){return t}).join(" ")},B=function(t,e,r){if(this.classes=t||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=r||{},e){e.style.isTight()&&this.classes.push("mtight");var a=e.getColor();a&&(this.style.color=a)}},C=function(t){var e=document.createElement(t);for(var r in e.className=T(this.classes),this.style)this.style.hasOwnProperty(r)&&(e.style[r]=this.style[r]);for(var a in this.attributes)this.attributes.hasOwnProperty(a)&&e.setAttribute(a,this.attributes[a]);for(var n=0;n<this.children.length;n++)e.appendChild(this.children[n].toNode());return e},q=function(t){var e="<"+t;this.classes.length&&(e+=' class="'+c.escape(T(this.classes))+'"');var r="";for(var a in this.style)this.style.hasOwnProperty(a)&&(r+=c.hyphenate(a)+":"+this.style[a]+";");for(var n in r&&(e+=' style="'+c.escape(r)+'"'),this.attributes)this.attributes.hasOwnProperty(n)&&(e+=" "+n+'="'+c.escape(this.attributes[n])+'"');e+=">";for(var i=0;i<this.children.length;i++)e+=this.children[i].toMarkup();return e+="</"+t+">"},N=function(){function t(t,e,r,a){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,B.call(this,t,r,a),this.children=e||[]}var e=t.prototype;return e.setAttribute=function(t,e){this.attributes[t]=e},e.hasClass=function(t){return c.contains(this.classes,t)},e.toNode=function(){return C.call(this,"span")},e.toMarkup=function(){return q.call(this,"span")},t}(),I=function(){function t(t,e,r,a){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,B.call(this,e,a),this.children=r||[],this.setAttribute("href",t)}var e=t.prototype;return e.setAttribute=function(t,e){this.attributes[t]=e},e.hasClass=function(t){return c.contains(this.classes,t)},e.toNode=function(){return C.call(this,"a")},e.toMarkup=function(){return q.call(this,"a")},t}(),O=function(){function t(t,e,r){this.src=void 0,this.alt=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.alt=e,this.src=t,this.classes=["mord"],this.style=r}var e=t.prototype;return e.hasClass=function(t){return c.contains(this.classes,t)},e.toNode=function(){var t=document.createElement("img");for(var e in t.src=this.src,t.alt=this.alt,t.className="mord",this.style)this.style.hasOwnProperty(e)&&(t.style[e]=this.style[e]);return t},e.toMarkup=function(){var t="<img  src='"+this.src+" 'alt='"+this.alt+"' ",e="";for(var r in this.style)this.style.hasOwnProperty(r)&&(e+=c.hyphenate(r)+":"+this.style[r]+";");return e&&(t+=' style="'+c.escape(e)+'"'),t+="'/>"},t}(),R={"\xee":"\u0131\u0302","\xef":"\u0131\u0308","\xed":"\u0131\u0301","\xec":"\u0131\u0300"},E=function(){function t(t,e,r,a,n,i,o,s){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=t,this.height=e||0,this.depth=r||0,this.italic=a||0,this.skew=n||0,this.width=i||0,this.classes=o||[],this.style=s||{},this.maxFontSize=0;var l=function(t){for(var e=0;e<k.length;e++)for(var r=k[e],a=0;a<r.blocks.length;a++){var n=r.blocks[a];if(t>=n[0]&&t<=n[1])return r.name}return null}(this.text.charCodeAt(0));l&&this.classes.push(l+"_fallback"),/[\xee\xef\xed\xec]/.test(this.text)&&(this.text=R[this.text])}var e=t.prototype;return e.hasClass=function(t){return c.contains(this.classes,t)},e.toNode=function(){var t=document.createTextNode(this.text),e=null;for(var r in this.italic>0&&((e=document.createElement("span")).style.marginRight=this.italic+"em"),this.classes.length>0&&((e=e||document.createElement("span")).className=T(this.classes)),this.style)this.style.hasOwnProperty(r)&&((e=e||document.createElement("span")).style[r]=this.style[r]);return e?(e.appendChild(t),e):t},e.toMarkup=function(){var t=!1,e="<span";this.classes.length&&(t=!0,e+=' class="',e+=c.escape(T(this.classes)),e+='"');var r="";for(var a in this.italic>0&&(r+="margin-right:"+this.italic+"em;"),this.style)this.style.hasOwnProperty(a)&&(r+=c.hyphenate(a)+":"+this.style[a]+";");r&&(t=!0,e+=' style="'+c.escape(r)+'"');var n=c.escape(this.text);return t?(e+=">",e+=n,e+="</span>"):n},t}(),L=function(){function t(t,e){this.children=void 0,this.attributes=void 0,this.children=t||[],this.attributes=e||{}}var e=t.prototype;return e.toNode=function(){var t=document.createElementNS("http://www.w3.org/2000/svg","svg");for(var e in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,e)&&t.setAttribute(e,this.attributes[e]);for(var r=0;r<this.children.length;r++)t.appendChild(this.children[r].toNode());return t},e.toMarkup=function(){var t="<svg";for(var e in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,e)&&(t+=" "+e+"='"+this.attributes[e]+"'");t+=">";for(var r=0;r<this.children.length;r++)t+=this.children[r].toMarkup();return t+="</svg>"},t}(),P=function(){function t(t,e){this.pathName=void 0,this.alternate=void 0,this.pathName=t,this.alternate=e}var e=t.prototype;return e.toNode=function(){var t=document.createElementNS("http://www.w3.org/2000/svg","path");return this.alternate?t.setAttribute("d",this.alternate):t.setAttribute("d",z[this.pathName]),t},e.toMarkup=function(){return this.alternate?"<path d='"+this.alternate+"'/>":"<path d='"+z[this.pathName]+"'/>"},t}(),D=function(){function t(t){this.attributes=void 0,this.attributes=t||{}}var e=t.prototype;return e.toNode=function(){var t=document.createElementNS("http://www.w3.org/2000/svg","line");for(var e in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,e)&&t.setAttribute(e,this.attributes[e]);return t},e.toMarkup=function(){var t="<line";for(var e in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,e)&&(t+=" "+e+"='"+this.attributes[e]+"'");return t+="/>"},t}();function H(t){if(t instanceof E)return t;throw new Error("Expected symbolNode but got "+String(t)+".")}var F={"AMS-Regular":{32:[0,0,0,0,.25],65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],160:[0,0,0,0,.25],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{32:[0,0,0,0,.25],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:[0,0,0,0,.25]},"Fraktur-Regular":{32:[0,0,0,0,.25],33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:[0,0,0,0,.25],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],160:[0,0,0,0,.25],163:[0,.69444,0,0,.86853],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{32:[0,0,0,0,.25],33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:[0,0,0,0,.25],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:[0,0,0,0,.25],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],163:[0,.69444,0,0,.76909],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.12,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,1],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.67,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.9,0,0,.278],8943:[-.19,.31,0,0,1.172],8945:[-.1,.82,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.744,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.744,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{32:[0,0,0,0,.25],48:[0,.44444,0,0,.575],49:[0,.44444,0,0,.575],50:[0,.44444,0,0,.575],51:[.19444,.44444,0,0,.575],52:[.19444,.44444,0,0,.575],53:[.19444,.44444,0,0,.575],54:[0,.64444,0,0,.575],55:[.19444,.44444,0,0,.575],56:[0,.64444,0,0,.575],57:[.19444,.44444,0,0,.575],65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:[0,0,0,0,.25],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:[0,0,0,0,.25],48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:[0,0,0,0,.25],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:[0,0,0,0,.25],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:[0,0,0,0,.25],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:[0,0,0,0,.25],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{32:[0,0,0,0,.25],65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:[0,0,0,0,.25]},"Size1-Regular":{32:[0,0,0,0,.25],40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],160:[0,0,0,0,.25],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{32:[0,0,0,0,.25],40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],160:[0,0,0,0,.25],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{32:[0,0,0,0,.25],40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],160:[0,0,0,0,.25],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{32:[0,0,0,0,.25],40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],160:[0,0,0,0,.25],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}},V={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04],ptPerEm:[10,10,10],doubleRuleSep:[.2,.2,.2],arrayRuleWidth:[.04,.04,.04],fboxsep:[.3,.3,.3],fboxrule:[.04,.04,.04]},U={"\xc5":"A","\xc7":"C","\xd0":"D","\xde":"o","\xe5":"a","\xe7":"c","\xf0":"d","\xfe":"o","\u0410":"A","\u0411":"B","\u0412":"B","\u0413":"F","\u0414":"A","\u0415":"E","\u0416":"K","\u0417":"3","\u0418":"N","\u0419":"N","\u041a":"K","\u041b":"N","\u041c":"M","\u041d":"H","\u041e":"O","\u041f":"N","\u0420":"P","\u0421":"C","\u0422":"T","\u0423":"y","\u0424":"O","\u0425":"X","\u0426":"U","\u0427":"h","\u0428":"W","\u0429":"W","\u042a":"B","\u042b":"X","\u042c":"B","\u042d":"3","\u042e":"X","\u042f":"R","\u0430":"a","\u0431":"b","\u0432":"a","\u0433":"r","\u0434":"y","\u0435":"e","\u0436":"m","\u0437":"e","\u0438":"n","\u0439":"n","\u043a":"n","\u043b":"n","\u043c":"m","\u043d":"n","\u043e":"o","\u043f":"n","\u0440":"p","\u0441":"c","\u0442":"o","\u0443":"y","\u0444":"b","\u0445":"x","\u0446":"n","\u0447":"n","\u0448":"w","\u0449":"w","\u044a":"a","\u044b":"m","\u044c":"a","\u044d":"e","\u044e":"m","\u044f":"r"};function G(t,e,r){if(!F[e])throw new Error("Font metrics not found for font: "+e+".");var a=t.charCodeAt(0),n=F[e][a];if(!n&&t[0]in U&&(a=U[t[0]].charCodeAt(0),n=F[e][a]),n||"text"!==r||M(a)&&(n=F[e][77]),n)return{depth:n[0],height:n[1],italic:n[2],skew:n[3],width:n[4]}}var Y={};var W={bin:1,close:1,inner:1,open:1,punct:1,rel:1},X={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},_={math:{},text:{}},j=_;function $(t,e,r,a,n,i){_[t][n]={font:e,group:r,replace:a},i&&a&&(_[t][a]=_[t][n])}var Z="main",K="ams",J="bin",Q="mathord",tt="op-token",et="rel";$("math",Z,et,"\u2261","\\equiv",!0),$("math",Z,et,"\u227a","\\prec",!0),$("math",Z,et,"\u227b","\\succ",!0),$("math",Z,et,"\u223c","\\sim",!0),$("math",Z,et,"\u22a5","\\perp"),$("math",Z,et,"\u2aaf","\\preceq",!0),$("math",Z,et,"\u2ab0","\\succeq",!0),$("math",Z,et,"\u2243","\\simeq",!0),$("math",Z,et,"\u2223","\\mid",!0),$("math",Z,et,"\u226a","\\ll",!0),$("math",Z,et,"\u226b","\\gg",!0),$("math",Z,et,"\u224d","\\asymp",!0),$("math",Z,et,"\u2225","\\parallel"),$("math",Z,et,"\u22c8","\\bowtie",!0),$("math",Z,et,"\u2323","\\smile",!0),$("math",Z,et,"\u2291","\\sqsubseteq",!0),$("math",Z,et,"\u2292","\\sqsupseteq",!0),$("math",Z,et,"\u2250","\\doteq",!0),$("math",Z,et,"\u2322","\\frown",!0),$("math",Z,et,"\u220b","\\ni",!0),$("math",Z,et,"\u221d","\\propto",!0),$("math",Z,et,"\u22a2","\\vdash",!0),$("math",Z,et,"\u22a3","\\dashv",!0),$("math",Z,et,"\u220b","\\owns"),$("math",Z,"punct",".","\\ldotp"),$("math",Z,"punct","\u22c5","\\cdotp"),$("math",Z,"textord","#","\\#"),$("text",Z,"textord","#","\\#"),$("math",Z,"textord","&","\\&"),$("text",Z,"textord","&","\\&"),$("math",Z,"textord","\u2135","\\aleph",!0),$("math",Z,"textord","\u2200","\\forall",!0),$("math",Z,"textord","\u210f","\\hbar",!0),$("math",Z,"textord","\u2203","\\exists",!0),$("math",Z,"textord","\u2207","\\nabla",!0),$("math",Z,"textord","\u266d","\\flat",!0),$("math",Z,"textord","\u2113","\\ell",!0),$("math",Z,"textord","\u266e","\\natural",!0),$("math",Z,"textord","\u2663","\\clubsuit",!0),$("math",Z,"textord","\u2118","\\wp",!0),$("math",Z,"textord","\u266f","\\sharp",!0),$("math",Z,"textord","\u2662","\\diamondsuit",!0),$("math",Z,"textord","\u211c","\\Re",!0),$("math",Z,"textord","\u2661","\\heartsuit",!0),$("math",Z,"textord","\u2111","\\Im",!0),$("math",Z,"textord","\u2660","\\spadesuit",!0),$("text",Z,"textord","\xa7","\\S",!0),$("text",Z,"textord","\xb6","\\P",!0),$("math",Z,"textord","\u2020","\\dag"),$("text",Z,"textord","\u2020","\\dag"),$("text",Z,"textord","\u2020","\\textdagger"),$("math",Z,"textord","\u2021","\\ddag"),$("text",Z,"textord","\u2021","\\ddag"),$("text",Z,"textord","\u2021","\\textdaggerdbl"),$("math",Z,"close","\u23b1","\\rmoustache",!0),$("math",Z,"open","\u23b0","\\lmoustache",!0),$("math",Z,"close","\u27ef","\\rgroup",!0),$("math",Z,"open","\u27ee","\\lgroup",!0),$("math",Z,J,"\u2213","\\mp",!0),$("math",Z,J,"\u2296","\\ominus",!0),$("math",Z,J,"\u228e","\\uplus",!0),$("math",Z,J,"\u2293","\\sqcap",!0),$("math",Z,J,"\u2217","\\ast"),$("math",Z,J,"\u2294","\\sqcup",!0),$("math",Z,J,"\u25ef","\\bigcirc"),$("math",Z,J,"\u2219","\\bullet"),$("math",Z,J,"\u2021","\\ddagger"),$("math",Z,J,"\u2240","\\wr",!0),$("math",Z,J,"\u2a3f","\\amalg"),$("math",Z,J,"&","\\And"),$("math",Z,et,"\u27f5","\\longleftarrow",!0),$("math",Z,et,"\u21d0","\\Leftarrow",!0),$("math",Z,et,"\u27f8","\\Longleftarrow",!0),$("math",Z,et,"\u27f6","\\longrightarrow",!0),$("math",Z,et,"\u21d2","\\Rightarrow",!0),$("math",Z,et,"\u27f9","\\Longrightarrow",!0),$("math",Z,et,"\u2194","\\leftrightarrow",!0),$("math",Z,et,"\u27f7","\\longleftrightarrow",!0),$("math",Z,et,"\u21d4","\\Leftrightarrow",!0),$("math",Z,et,"\u27fa","\\Longleftrightarrow",!0),$("math",Z,et,"\u21a6","\\mapsto",!0),$("math",Z,et,"\u27fc","\\longmapsto",!0),$("math",Z,et,"\u2197","\\nearrow",!0),$("math",Z,et,"\u21a9","\\hookleftarrow",!0),$("math",Z,et,"\u21aa","\\hookrightarrow",!0),$("math",Z,et,"\u2198","\\searrow",!0),$("math",Z,et,"\u21bc","\\leftharpoonup",!0),$("math",Z,et,"\u21c0","\\rightharpoonup",!0),$("math",Z,et,"\u2199","\\swarrow",!0),$("math",Z,et,"\u21bd","\\leftharpoondown",!0),$("math",Z,et,"\u21c1","\\rightharpoondown",!0),$("math",Z,et,"\u2196","\\nwarrow",!0),$("math",Z,et,"\u21cc","\\rightleftharpoons",!0),$("math",K,et,"\u226e","\\nless",!0),$("math",K,et,"\ue010","\\@nleqslant"),$("math",K,et,"\ue011","\\@nleqq"),$("math",K,et,"\u2a87","\\lneq",!0),$("math",K,et,"\u2268","\\lneqq",!0),$("math",K,et,"\ue00c","\\@lvertneqq"),$("math",K,et,"\u22e6","\\lnsim",!0),$("math",K,et,"\u2a89","\\lnapprox",!0),$("math",K,et,"\u2280","\\nprec",!0),$("math",K,et,"\u22e0","\\npreceq",!0),$("math",K,et,"\u22e8","\\precnsim",!0),$("math",K,et,"\u2ab9","\\precnapprox",!0),$("math",K,et,"\u2241","\\nsim",!0),$("math",K,et,"\ue006","\\@nshortmid"),$("math",K,et,"\u2224","\\nmid",!0),$("math",K,et,"\u22ac","\\nvdash",!0),$("math",K,et,"\u22ad","\\nvDash",!0),$("math",K,et,"\u22ea","\\ntriangleleft"),$("math",K,et,"\u22ec","\\ntrianglelefteq",!0),$("math",K,et,"\u228a","\\subsetneq",!0),$("math",K,et,"\ue01a","\\@varsubsetneq"),$("math",K,et,"\u2acb","\\subsetneqq",!0),$("math",K,et,"\ue017","\\@varsubsetneqq"),$("math",K,et,"\u226f","\\ngtr",!0),$("math",K,et,"\ue00f","\\@ngeqslant"),$("math",K,et,"\ue00e","\\@ngeqq"),$("math",K,et,"\u2a88","\\gneq",!0),$("math",K,et,"\u2269","\\gneqq",!0),$("math",K,et,"\ue00d","\\@gvertneqq"),$("math",K,et,"\u22e7","\\gnsim",!0),$("math",K,et,"\u2a8a","\\gnapprox",!0),$("math",K,et,"\u2281","\\nsucc",!0),$("math",K,et,"\u22e1","\\nsucceq",!0),$("math",K,et,"\u22e9","\\succnsim",!0),$("math",K,et,"\u2aba","\\succnapprox",!0),$("math",K,et,"\u2246","\\ncong",!0),$("math",K,et,"\ue007","\\@nshortparallel"),$("math",K,et,"\u2226","\\nparallel",!0),$("math",K,et,"\u22af","\\nVDash",!0),$("math",K,et,"\u22eb","\\ntriangleright"),$("math",K,et,"\u22ed","\\ntrianglerighteq",!0),$("math",K,et,"\ue018","\\@nsupseteqq"),$("math",K,et,"\u228b","\\supsetneq",!0),$("math",K,et,"\ue01b","\\@varsupsetneq"),$("math",K,et,"\u2acc","\\supsetneqq",!0),$("math",K,et,"\ue019","\\@varsupsetneqq"),$("math",K,et,"\u22ae","\\nVdash",!0),$("math",K,et,"\u2ab5","\\precneqq",!0),$("math",K,et,"\u2ab6","\\succneqq",!0),$("math",K,et,"\ue016","\\@nsubseteqq"),$("math",K,J,"\u22b4","\\unlhd"),$("math",K,J,"\u22b5","\\unrhd"),$("math",K,et,"\u219a","\\nleftarrow",!0),$("math",K,et,"\u219b","\\nrightarrow",!0),$("math",K,et,"\u21cd","\\nLeftarrow",!0),$("math",K,et,"\u21cf","\\nRightarrow",!0),$("math",K,et,"\u21ae","\\nleftrightarrow",!0),$("math",K,et,"\u21ce","\\nLeftrightarrow",!0),$("math",K,et,"\u25b3","\\vartriangle"),$("math",K,"textord","\u210f","\\hslash"),$("math",K,"textord","\u25bd","\\triangledown"),$("math",K,"textord","\u25ca","\\lozenge"),$("math",K,"textord","\u24c8","\\circledS"),$("math",K,"textord","\xae","\\circledR"),$("text",K,"textord","\xae","\\circledR"),$("math",K,"textord","\u2221","\\measuredangle",!0),$("math",K,"textord","\u2204","\\nexists"),$("math",K,"textord","\u2127","\\mho"),$("math",K,"textord","\u2132","\\Finv",!0),$("math",K,"textord","\u2141","\\Game",!0),$("math",K,"textord","\u2035","\\backprime"),$("math",K,"textord","\u25b2","\\blacktriangle"),$("math",K,"textord","\u25bc","\\blacktriangledown"),$("math",K,"textord","\u25a0","\\blacksquare"),$("math",K,"textord","\u29eb","\\blacklozenge"),$("math",K,"textord","\u2605","\\bigstar"),$("math",K,"textord","\u2222","\\sphericalangle",!0),$("math",K,"textord","\u2201","\\complement",!0),$("math",K,"textord","\xf0","\\eth",!0),$("text",Z,"textord","\xf0","\xf0"),$("math",K,"textord","\u2571","\\diagup"),$("math",K,"textord","\u2572","\\diagdown"),$("math",K,"textord","\u25a1","\\square"),$("math",K,"textord","\u25a1","\\Box"),$("math",K,"textord","\u25ca","\\Diamond"),$("math",K,"textord","\xa5","\\yen",!0),$("text",K,"textord","\xa5","\\yen",!0),$("math",K,"textord","\u2713","\\checkmark",!0),$("text",K,"textord","\u2713","\\checkmark"),$("math",K,"textord","\u2136","\\beth",!0),$("math",K,"textord","\u2138","\\daleth",!0),$("math",K,"textord","\u2137","\\gimel",!0),$("math",K,"textord","\u03dd","\\digamma",!0),$("math",K,"textord","\u03f0","\\varkappa"),$("math",K,"open","\u250c","\\@ulcorner",!0),$("math",K,"close","\u2510","\\@urcorner",!0),$("math",K,"open","\u2514","\\@llcorner",!0),$("math",K,"close","\u2518","\\@lrcorner",!0),$("math",K,et,"\u2266","\\leqq",!0),$("math",K,et,"\u2a7d","\\leqslant",!0),$("math",K,et,"\u2a95","\\eqslantless",!0),$("math",K,et,"\u2272","\\lesssim",!0),$("math",K,et,"\u2a85","\\lessapprox",!0),$("math",K,et,"\u224a","\\approxeq",!0),$("math",K,J,"\u22d6","\\lessdot"),$("math",K,et,"\u22d8","\\lll",!0),$("math",K,et,"\u2276","\\lessgtr",!0),$("math",K,et,"\u22da","\\lesseqgtr",!0),$("math",K,et,"\u2a8b","\\lesseqqgtr",!0),$("math",K,et,"\u2251","\\doteqdot"),$("math",K,et,"\u2253","\\risingdotseq",!0),$("math",K,et,"\u2252","\\fallingdotseq",!0),$("math",K,et,"\u223d","\\backsim",!0),$("math",K,et,"\u22cd","\\backsimeq",!0),$("math",K,et,"\u2ac5","\\subseteqq",!0),$("math",K,et,"\u22d0","\\Subset",!0),$("math",K,et,"\u228f","\\sqsubset",!0),$("math",K,et,"\u227c","\\preccurlyeq",!0),$("math",K,et,"\u22de","\\curlyeqprec",!0),$("math",K,et,"\u227e","\\precsim",!0),$("math",K,et,"\u2ab7","\\precapprox",!0),$("math",K,et,"\u22b2","\\vartriangleleft"),$("math",K,et,"\u22b4","\\trianglelefteq"),$("math",K,et,"\u22a8","\\vDash",!0),$("math",K,et,"\u22aa","\\Vvdash",!0),$("math",K,et,"\u2323","\\smallsmile"),$("math",K,et,"\u2322","\\smallfrown"),$("math",K,et,"\u224f","\\bumpeq",!0),$("math",K,et,"\u224e","\\Bumpeq",!0),$("math",K,et,"\u2267","\\geqq",!0),$("math",K,et,"\u2a7e","\\geqslant",!0),$("math",K,et,"\u2a96","\\eqslantgtr",!0),$("math",K,et,"\u2273","\\gtrsim",!0),$("math",K,et,"\u2a86","\\gtrapprox",!0),$("math",K,J,"\u22d7","\\gtrdot"),$("math",K,et,"\u22d9","\\ggg",!0),$("math",K,et,"\u2277","\\gtrless",!0),$("math",K,et,"\u22db","\\gtreqless",!0),$("math",K,et,"\u2a8c","\\gtreqqless",!0),$("math",K,et,"\u2256","\\eqcirc",!0),$("math",K,et,"\u2257","\\circeq",!0),$("math",K,et,"\u225c","\\triangleq",!0),$("math",K,et,"\u223c","\\thicksim"),$("math",K,et,"\u2248","\\thickapprox"),$("math",K,et,"\u2ac6","\\supseteqq",!0),$("math",K,et,"\u22d1","\\Supset",!0),$("math",K,et,"\u2290","\\sqsupset",!0),$("math",K,et,"\u227d","\\succcurlyeq",!0),$("math",K,et,"\u22df","\\curlyeqsucc",!0),$("math",K,et,"\u227f","\\succsim",!0),$("math",K,et,"\u2ab8","\\succapprox",!0),$("math",K,et,"\u22b3","\\vartriangleright"),$("math",K,et,"\u22b5","\\trianglerighteq"),$("math",K,et,"\u22a9","\\Vdash",!0),$("math",K,et,"\u2223","\\shortmid"),$("math",K,et,"\u2225","\\shortparallel"),$("math",K,et,"\u226c","\\between",!0),$("math",K,et,"\u22d4","\\pitchfork",!0),$("math",K,et,"\u221d","\\varpropto"),$("math",K,et,"\u25c0","\\blacktriangleleft"),$("math",K,et,"\u2234","\\therefore",!0),$("math",K,et,"\u220d","\\backepsilon"),$("math",K,et,"\u25b6","\\blacktriangleright"),$("math",K,et,"\u2235","\\because",!0),$("math",K,et,"\u22d8","\\llless"),$("math",K,et,"\u22d9","\\gggtr"),$("math",K,J,"\u22b2","\\lhd"),$("math",K,J,"\u22b3","\\rhd"),$("math",K,et,"\u2242","\\eqsim",!0),$("math",Z,et,"\u22c8","\\Join"),$("math",K,et,"\u2251","\\Doteq",!0),$("math",K,J,"\u2214","\\dotplus",!0),$("math",K,J,"\u2216","\\smallsetminus"),$("math",K,J,"\u22d2","\\Cap",!0),$("math",K,J,"\u22d3","\\Cup",!0),$("math",K,J,"\u2a5e","\\doublebarwedge",!0),$("math",K,J,"\u229f","\\boxminus",!0),$("math",K,J,"\u229e","\\boxplus",!0),$("math",K,J,"\u22c7","\\divideontimes",!0),$("math",K,J,"\u22c9","\\ltimes",!0),$("math",K,J,"\u22ca","\\rtimes",!0),$("math",K,J,"\u22cb","\\leftthreetimes",!0),$("math",K,J,"\u22cc","\\rightthreetimes",!0),$("math",K,J,"\u22cf","\\curlywedge",!0),$("math",K,J,"\u22ce","\\curlyvee",!0),$("math",K,J,"\u229d","\\circleddash",!0),$("math",K,J,"\u229b","\\circledast",!0),$("math",K,J,"\u22c5","\\centerdot"),$("math",K,J,"\u22ba","\\intercal",!0),$("math",K,J,"\u22d2","\\doublecap"),$("math",K,J,"\u22d3","\\doublecup"),$("math",K,J,"\u22a0","\\boxtimes",!0),$("math",K,et,"\u21e2","\\dashrightarrow",!0),$("math",K,et,"\u21e0","\\dashleftarrow",!0),$("math",K,et,"\u21c7","\\leftleftarrows",!0),$("math",K,et,"\u21c6","\\leftrightarrows",!0),$("math",K,et,"\u21da","\\Lleftarrow",!0),$("math",K,et,"\u219e","\\twoheadleftarrow",!0),$("math",K,et,"\u21a2","\\leftarrowtail",!0),$("math",K,et,"\u21ab","\\looparrowleft",!0),$("math",K,et,"\u21cb","\\leftrightharpoons",!0),$("math",K,et,"\u21b6","\\curvearrowleft",!0),$("math",K,et,"\u21ba","\\circlearrowleft",!0),$("math",K,et,"\u21b0","\\Lsh",!0),$("math",K,et,"\u21c8","\\upuparrows",!0),$("math",K,et,"\u21bf","\\upharpoonleft",!0),$("math",K,et,"\u21c3","\\downharpoonleft",!0),$("math",K,et,"\u22b8","\\multimap",!0),$("math",K,et,"\u21ad","\\leftrightsquigarrow",!0),$("math",K,et,"\u21c9","\\rightrightarrows",!0),$("math",K,et,"\u21c4","\\rightleftarrows",!0),$("math",K,et,"\u21a0","\\twoheadrightarrow",!0),$("math",K,et,"\u21a3","\\rightarrowtail",!0),$("math",K,et,"\u21ac","\\looparrowright",!0),$("math",K,et,"\u21b7","\\curvearrowright",!0),$("math",K,et,"\u21bb","\\circlearrowright",!0),$("math",K,et,"\u21b1","\\Rsh",!0),$("math",K,et,"\u21ca","\\downdownarrows",!0),$("math",K,et,"\u21be","\\upharpoonright",!0),$("math",K,et,"\u21c2","\\downharpoonright",!0),$("math",K,et,"\u21dd","\\rightsquigarrow",!0),$("math",K,et,"\u21dd","\\leadsto"),$("math",K,et,"\u21db","\\Rrightarrow",!0),$("math",K,et,"\u21be","\\restriction"),$("math",Z,"textord","\u2018","`"),$("math",Z,"textord","$","\\$"),$("text",Z,"textord","$","\\$"),$("text",Z,"textord","$","\\textdollar"),$("math",Z,"textord","%","\\%"),$("text",Z,"textord","%","\\%"),$("math",Z,"textord","_","\\_"),$("text",Z,"textord","_","\\_"),$("text",Z,"textord","_","\\textunderscore"),$("math",Z,"textord","\u2220","\\angle",!0),$("math",Z,"textord","\u221e","\\infty",!0),$("math",Z,"textord","\u2032","\\prime"),$("math",Z,"textord","\u25b3","\\triangle"),$("math",Z,"textord","\u0393","\\Gamma",!0),$("math",Z,"textord","\u0394","\\Delta",!0),$("math",Z,"textord","\u0398","\\Theta",!0),$("math",Z,"textord","\u039b","\\Lambda",!0),$("math",Z,"textord","\u039e","\\Xi",!0),$("math",Z,"textord","\u03a0","\\Pi",!0),$("math",Z,"textord","\u03a3","\\Sigma",!0),$("math",Z,"textord","\u03a5","\\Upsilon",!0),$("math",Z,"textord","\u03a6","\\Phi",!0),$("math",Z,"textord","\u03a8","\\Psi",!0),$("math",Z,"textord","\u03a9","\\Omega",!0),$("math",Z,"textord","A","\u0391"),$("math",Z,"textord","B","\u0392"),$("math",Z,"textord","E","\u0395"),$("math",Z,"textord","Z","\u0396"),$("math",Z,"textord","H","\u0397"),$("math",Z,"textord","I","\u0399"),$("math",Z,"textord","K","\u039a"),$("math",Z,"textord","M","\u039c"),$("math",Z,"textord","N","\u039d"),$("math",Z,"textord","O","\u039f"),$("math",Z,"textord","P","\u03a1"),$("math",Z,"textord","T","\u03a4"),$("math",Z,"textord","X","\u03a7"),$("math",Z,"textord","\xac","\\neg",!0),$("math",Z,"textord","\xac","\\lnot"),$("math",Z,"textord","\u22a4","\\top"),$("math",Z,"textord","\u22a5","\\bot"),$("math",Z,"textord","\u2205","\\emptyset"),$("math",K,"textord","\u2205","\\varnothing"),$("math",Z,Q,"\u03b1","\\alpha",!0),$("math",Z,Q,"\u03b2","\\beta",!0),$("math",Z,Q,"\u03b3","\\gamma",!0),$("math",Z,Q,"\u03b4","\\delta",!0),$("math",Z,Q,"\u03f5","\\epsilon",!0),$("math",Z,Q,"\u03b6","\\zeta",!0),$("math",Z,Q,"\u03b7","\\eta",!0),$("math",Z,Q,"\u03b8","\\theta",!0),$("math",Z,Q,"\u03b9","\\iota",!0),$("math",Z,Q,"\u03ba","\\kappa",!0),$("math",Z,Q,"\u03bb","\\lambda",!0),$("math",Z,Q,"\u03bc","\\mu",!0),$("math",Z,Q,"\u03bd","\\nu",!0),$("math",Z,Q,"\u03be","\\xi",!0),$("math",Z,Q,"\u03bf","\\omicron",!0),$("math",Z,Q,"\u03c0","\\pi",!0),$("math",Z,Q,"\u03c1","\\rho",!0),$("math",Z,Q,"\u03c3","\\sigma",!0),$("math",Z,Q,"\u03c4","\\tau",!0),$("math",Z,Q,"\u03c5","\\upsilon",!0),$("math",Z,Q,"\u03d5","\\phi",!0),$("math",Z,Q,"\u03c7","\\chi",!0),$("math",Z,Q,"\u03c8","\\psi",!0),$("math",Z,Q,"\u03c9","\\omega",!0),$("math",Z,Q,"\u03b5","\\varepsilon",!0),$("math",Z,Q,"\u03d1","\\vartheta",!0),$("math",Z,Q,"\u03d6","\\varpi",!0),$("math",Z,Q,"\u03f1","\\varrho",!0),$("math",Z,Q,"\u03c2","\\varsigma",!0),$("math",Z,Q,"\u03c6","\\varphi",!0),$("math",Z,J,"\u2217","*"),$("math",Z,J,"+","+"),$("math",Z,J,"\u2212","-"),$("math",Z,J,"\u22c5","\\cdot",!0),$("math",Z,J,"\u2218","\\circ"),$("math",Z,J,"\xf7","\\div",!0),$("math",Z,J,"\xb1","\\pm",!0),$("math",Z,J,"\xd7","\\times",!0),$("math",Z,J,"\u2229","\\cap",!0),$("math",Z,J,"\u222a","\\cup",!0),$("math",Z,J,"\u2216","\\setminus"),$("math",Z,J,"\u2227","\\land"),$("math",Z,J,"\u2228","\\lor"),$("math",Z,J,"\u2227","\\wedge",!0),$("math",Z,J,"\u2228","\\vee",!0),$("math",Z,"textord","\u221a","\\surd"),$("math",Z,"open","\u27e8","\\langle",!0),$("math",Z,"open","\u2223","\\lvert"),$("math",Z,"open","\u2225","\\lVert"),$("math",Z,"close","?","?"),$("math",Z,"close","!","!"),$("math",Z,"close","\u27e9","\\rangle",!0),$("math",Z,"close","\u2223","\\rvert"),$("math",Z,"close","\u2225","\\rVert"),$("math",Z,et,"=","="),$("math",Z,et,":",":"),$("math",Z,et,"\u2248","\\approx",!0),$("math",Z,et,"\u2245","\\cong",!0),$("math",Z,et,"\u2265","\\ge"),$("math",Z,et,"\u2265","\\geq",!0),$("math",Z,et,"\u2190","\\gets"),$("math",Z,et,">","\\gt",!0),$("math",Z,et,"\u2208","\\in",!0),$("math",Z,et,"\ue020","\\@not"),$("math",Z,et,"\u2282","\\subset",!0),$("math",Z,et,"\u2283","\\supset",!0),$("math",Z,et,"\u2286","\\subseteq",!0),$("math",Z,et,"\u2287","\\supseteq",!0),$("math",K,et,"\u2288","\\nsubseteq",!0),$("math",K,et,"\u2289","\\nsupseteq",!0),$("math",Z,et,"\u22a8","\\models"),$("math",Z,et,"\u2190","\\leftarrow",!0),$("math",Z,et,"\u2264","\\le"),$("math",Z,et,"\u2264","\\leq",!0),$("math",Z,et,"<","\\lt",!0),$("math",Z,et,"\u2192","\\rightarrow",!0),$("math",Z,et,"\u2192","\\to"),$("math",K,et,"\u2271","\\ngeq",!0),$("math",K,et,"\u2270","\\nleq",!0),$("math",Z,"spacing","\xa0","\\ "),$("math",Z,"spacing","\xa0","~"),$("math",Z,"spacing","\xa0","\\space"),$("math",Z,"spacing","\xa0","\\nobreakspace"),$("text",Z,"spacing","\xa0","\\ "),$("text",Z,"spacing","\xa0"," "),$("text",Z,"spacing","\xa0","~"),$("text",Z,"spacing","\xa0","\\space"),$("text",Z,"spacing","\xa0","\\nobreakspace"),$("math",Z,"spacing",null,"\\nobreak"),$("math",Z,"spacing",null,"\\allowbreak"),$("math",Z,"punct",",",","),$("math",Z,"punct",";",";"),$("math",K,J,"\u22bc","\\barwedge",!0),$("math",K,J,"\u22bb","\\veebar",!0),$("math",Z,J,"\u2299","\\odot",!0),$("math",Z,J,"\u2295","\\oplus",!0),$("math",Z,J,"\u2297","\\otimes",!0),$("math",Z,"textord","\u2202","\\partial",!0),$("math",Z,J,"\u2298","\\oslash",!0),$("math",K,J,"\u229a","\\circledcirc",!0),$("math",K,J,"\u22a1","\\boxdot",!0),$("math",Z,J,"\u25b3","\\bigtriangleup"),$("math",Z,J,"\u25bd","\\bigtriangledown"),$("math",Z,J,"\u2020","\\dagger"),$("math",Z,J,"\u22c4","\\diamond"),$("math",Z,J,"\u22c6","\\star"),$("math",Z,J,"\u25c3","\\triangleleft"),$("math",Z,J,"\u25b9","\\triangleright"),$("math",Z,"open","{","\\{"),$("text",Z,"textord","{","\\{"),$("text",Z,"textord","{","\\textbraceleft"),$("math",Z,"close","}","\\}"),$("text",Z,"textord","}","\\}"),$("text",Z,"textord","}","\\textbraceright"),$("math",Z,"open","{","\\lbrace"),$("math",Z,"close","}","\\rbrace"),$("math",Z,"open","[","\\lbrack",!0),$("text",Z,"textord","[","\\lbrack",!0),$("math",Z,"close","]","\\rbrack",!0),$("text",Z,"textord","]","\\rbrack",!0),$("math",Z,"open","(","\\lparen",!0),$("math",Z,"close",")","\\rparen",!0),$("text",Z,"textord","<","\\textless",!0),$("text",Z,"textord",">","\\textgreater",!0),$("math",Z,"open","\u230a","\\lfloor",!0),$("math",Z,"close","\u230b","\\rfloor",!0),$("math",Z,"open","\u2308","\\lceil",!0),$("math",Z,"close","\u2309","\\rceil",!0),$("math",Z,"textord","\\","\\backslash"),$("math",Z,"textord","\u2223","|"),$("math",Z,"textord","\u2223","\\vert"),$("text",Z,"textord","|","\\textbar",!0),$("math",Z,"textord","\u2225","\\|"),$("math",Z,"textord","\u2225","\\Vert"),$("text",Z,"textord","\u2225","\\textbardbl"),$("text",Z,"textord","~","\\textasciitilde"),$("text",Z,"textord","\\","\\textbackslash"),$("text",Z,"textord","^","\\textasciicircum"),$("math",Z,et,"\u2191","\\uparrow",!0),$("math",Z,et,"\u21d1","\\Uparrow",!0),$("math",Z,et,"\u2193","\\downarrow",!0),$("math",Z,et,"\u21d3","\\Downarrow",!0),$("math",Z,et,"\u2195","\\updownarrow",!0),$("math",Z,et,"\u21d5","\\Updownarrow",!0),$("math",Z,tt,"\u2210","\\coprod"),$("math",Z,tt,"\u22c1","\\bigvee"),$("math",Z,tt,"\u22c0","\\bigwedge"),$("math",Z,tt,"\u2a04","\\biguplus"),$("math",Z,tt,"\u22c2","\\bigcap"),$("math",Z,tt,"\u22c3","\\bigcup"),$("math",Z,tt,"\u222b","\\int"),$("math",Z,tt,"\u222b","\\intop"),$("math",Z,tt,"\u222c","\\iint"),$("math",Z,tt,"\u222d","\\iiint"),$("math",Z,tt,"\u220f","\\prod"),$("math",Z,tt,"\u2211","\\sum"),$("math",Z,tt,"\u2a02","\\bigotimes"),$("math",Z,tt,"\u2a01","\\bigoplus"),$("math",Z,tt,"\u2a00","\\bigodot"),$("math",Z,tt,"\u222e","\\oint"),$("math",Z,tt,"\u2a06","\\bigsqcup"),$("math",Z,tt,"\u222b","\\smallint"),$("text",Z,"inner","\u2026","\\textellipsis"),$("math",Z,"inner","\u2026","\\mathellipsis"),$("text",Z,"inner","\u2026","\\ldots",!0),$("math",Z,"inner","\u2026","\\ldots",!0),$("math",Z,"inner","\u22ef","\\@cdots",!0),$("math",Z,"inner","\u22f1","\\ddots",!0),$("math",Z,"textord","\u22ee","\\varvdots"),$("math",Z,"accent-token","\u02ca","\\acute"),$("math",Z,"accent-token","\u02cb","\\grave"),$("math",Z,"accent-token","\xa8","\\ddot"),$("math",Z,"accent-token","~","\\tilde"),$("math",Z,"accent-token","\u02c9","\\bar"),$("math",Z,"accent-token","\u02d8","\\breve"),$("math",Z,"accent-token","\u02c7","\\check"),$("math",Z,"accent-token","^","\\hat"),$("math",Z,"accent-token","\u20d7","\\vec"),$("math",Z,"accent-token","\u02d9","\\dot"),$("math",Z,"accent-token","\u02da","\\mathring"),$("math",Z,Q,"\ue131","\\@imath"),$("math",Z,Q,"\ue237","\\@jmath"),$("math",Z,"textord","\u0131","\u0131"),$("math",Z,"textord","\u0237","\u0237"),$("text",Z,"textord","\u0131","\\i",!0),$("text",Z,"textord","\u0237","\\j",!0),$("text",Z,"textord","\xdf","\\ss",!0),$("text",Z,"textord","\xe6","\\ae",!0),$("text",Z,"textord","\u0153","\\oe",!0),$("text",Z,"textord","\xf8","\\o",!0),$("text",Z,"textord","\xc6","\\AE",!0),$("text",Z,"textord","\u0152","\\OE",!0),$("text",Z,"textord","\xd8","\\O",!0),$("text",Z,"accent-token","\u02ca","\\'"),$("text",Z,"accent-token","\u02cb","\\`"),$("text",Z,"accent-token","\u02c6","\\^"),$("text",Z,"accent-token","\u02dc","\\~"),$("text",Z,"accent-token","\u02c9","\\="),$("text",Z,"accent-token","\u02d8","\\u"),$("text",Z,"accent-token","\u02d9","\\."),$("text",Z,"accent-token","\u02da","\\r"),$("text",Z,"accent-token","\u02c7","\\v"),$("text",Z,"accent-token","\xa8",'\\"'),$("text",Z,"accent-token","\u02dd","\\H"),$("text",Z,"accent-token","\u25ef","\\textcircled");var rt={"--":!0,"---":!0,"``":!0,"''":!0};$("text",Z,"textord","\u2013","--",!0),$("text",Z,"textord","\u2013","\\textendash"),$("text",Z,"textord","\u2014","---",!0),$("text",Z,"textord","\u2014","\\textemdash"),$("text",Z,"textord","\u2018","`",!0),$("text",Z,"textord","\u2018","\\textquoteleft"),$("text",Z,"textord","\u2019","'",!0),$("text",Z,"textord","\u2019","\\textquoteright"),$("text",Z,"textord","\u201c","``",!0),$("text",Z,"textord","\u201c","\\textquotedblleft"),$("text",Z,"textord","\u201d","''",!0),$("text",Z,"textord","\u201d","\\textquotedblright"),$("math",Z,"textord","\xb0","\\degree",!0),$("text",Z,"textord","\xb0","\\degree"),$("text",Z,"textord","\xb0","\\textdegree",!0),$("math",Z,"textord","\xa3","\\pounds"),$("math",Z,"textord","\xa3","\\mathsterling",!0),$("text",Z,"textord","\xa3","\\pounds"),$("text",Z,"textord","\xa3","\\textsterling",!0),$("math",K,"textord","\u2720","\\maltese"),$("text",K,"textord","\u2720","\\maltese");for(var at=0;at<'0123456789/@."'.length;at++){var nt='0123456789/@."'.charAt(at);$("math",Z,"textord",nt,nt)}for(var it=0;it<'0123456789!@*()-=+";:?/.,'.length;it++){var ot='0123456789!@*()-=+";:?/.,'.charAt(it);$("text",Z,"textord",ot,ot)}for(var st="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",lt=0;lt<st.length;lt++){var ht=st.charAt(lt);$("math",Z,Q,ht,ht),$("text",Z,"textord",ht,ht)}$("math",K,"textord","C","\u2102"),$("text",K,"textord","C","\u2102"),$("math",K,"textord","H","\u210d"),$("text",K,"textord","H","\u210d"),$("math",K,"textord","N","\u2115"),$("text",K,"textord","N","\u2115"),$("math",K,"textord","P","\u2119"),$("text",K,"textord","P","\u2119"),$("math",K,"textord","Q","\u211a"),$("text",K,"textord","Q","\u211a"),$("math",K,"textord","R","\u211d"),$("text",K,"textord","R","\u211d"),$("math",K,"textord","Z","\u2124"),$("text",K,"textord","Z","\u2124"),$("math",Z,Q,"h","\u210e"),$("text",Z,Q,"h","\u210e");for(var mt="",ct=0;ct<st.length;ct++){var ut=st.charAt(ct);$("math",Z,Q,ut,mt=String.fromCharCode(55349,56320+ct)),$("text",Z,"textord",ut,mt),$("math",Z,Q,ut,mt=String.fromCharCode(55349,56372+ct)),$("text",Z,"textord",ut,mt),$("math",Z,Q,ut,mt=String.fromCharCode(55349,56424+ct)),$("text",Z,"textord",ut,mt),$("math",Z,Q,ut,mt=String.fromCharCode(55349,56580+ct)),$("text",Z,"textord",ut,mt),$("math",Z,Q,ut,mt=String.fromCharCode(55349,56736+ct)),$("text",Z,"textord",ut,mt),$("math",Z,Q,ut,mt=String.fromCharCode(55349,56788+ct)),$("text",Z,"textord",ut,mt),$("math",Z,Q,ut,mt=String.fromCharCode(55349,56840+ct)),$("text",Z,"textord",ut,mt),$("math",Z,Q,ut,mt=String.fromCharCode(55349,56944+ct)),$("text",Z,"textord",ut,mt),ct<26&&($("math",Z,Q,ut,mt=String.fromCharCode(55349,56632+ct)),$("text",Z,"textord",ut,mt),$("math",Z,Q,ut,mt=String.fromCharCode(55349,56476+ct)),$("text",Z,"textord",ut,mt))}$("math",Z,Q,"k",mt=String.fromCharCode(55349,56668)),$("text",Z,"textord","k",mt);for(var pt=0;pt<10;pt++){var dt=pt.toString();$("math",Z,Q,dt,mt=String.fromCharCode(55349,57294+pt)),$("text",Z,"textord",dt,mt),$("math",Z,Q,dt,mt=String.fromCharCode(55349,57314+pt)),$("text",Z,"textord",dt,mt),$("math",Z,Q,dt,mt=String.fromCharCode(55349,57324+pt)),$("text",Z,"textord",dt,mt),$("math",Z,Q,dt,mt=String.fromCharCode(55349,57334+pt)),$("text",Z,"textord",dt,mt)}for(var ft=0;ft<"\xc7\xd0\xde\xe7\xfe".length;ft++){var gt="\xc7\xd0\xde\xe7\xfe".charAt(ft);$("math",Z,Q,gt,gt),$("text",Z,"textord",gt,gt)}var xt=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathnormal","textit","Math-Italic"],["mathnormal","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["","",""],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],vt=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],bt=[[1,1,1],[2,1,1],[3,1,1],[4,2,1],[5,2,1],[6,3,1],[7,4,2],[8,6,3],[9,7,6],[10,8,7],[11,10,9]],yt=[.5,.6,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],wt=function(t,e){return e.size<2?t:bt[t-1][e.size-1]},kt=function(){function t(e){this.style=void 0,this.color=void 0,this.size=void 0,this.textSize=void 0,this.phantom=void 0,this.font=void 0,this.fontFamily=void 0,this.fontWeight=void 0,this.fontShape=void 0,this.sizeMultiplier=void 0,this.maxSize=void 0,this.minRuleThickness=void 0,this._fontMetrics=void 0,this.style=e.style,this.color=e.color,this.size=e.size||t.BASESIZE,this.textSize=e.textSize||this.size,this.phantom=!!e.phantom,this.font=e.font||"",this.fontFamily=e.fontFamily||"",this.fontWeight=e.fontWeight||"",this.fontShape=e.fontShape||"",this.sizeMultiplier=yt[this.size-1],this.maxSize=e.maxSize,this.minRuleThickness=e.minRuleThickness,this._fontMetrics=void 0}var e=t.prototype;return e.extend=function(e){var r={style:this.style,size:this.size,textSize:this.textSize,color:this.color,phantom:this.phantom,font:this.font,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize,minRuleThickness:this.minRuleThickness};for(var a in e)e.hasOwnProperty(a)&&(r[a]=e[a]);return new t(r)},e.havingStyle=function(t){return this.style===t?this:this.extend({style:t,size:wt(this.textSize,t)})},e.havingCrampedStyle=function(){return this.havingStyle(this.style.cramp())},e.havingSize=function(t){return this.size===t&&this.textSize===t?this:this.extend({style:this.style.text(),size:t,textSize:t,sizeMultiplier:yt[t-1]})},e.havingBaseStyle=function(e){e=e||this.style.text();var r=wt(t.BASESIZE,e);return this.size===r&&this.textSize===t.BASESIZE&&this.style===e?this:this.extend({style:e,size:r})},e.havingBaseSizing=function(){var t;switch(this.style.id){case 4:case 5:t=3;break;case 6:case 7:t=1;break;default:t=6}return this.extend({style:this.style.text(),size:t})},e.withColor=function(t){return this.extend({color:t})},e.withPhantom=function(){return this.extend({phantom:!0})},e.withFont=function(t){return this.extend({font:t})},e.withTextFontFamily=function(t){return this.extend({fontFamily:t,font:""})},e.withTextFontWeight=function(t){return this.extend({fontWeight:t,font:""})},e.withTextFontShape=function(t){return this.extend({fontShape:t,font:""})},e.sizingClasses=function(t){return t.size!==this.size?["sizing","reset-size"+t.size,"size"+this.size]:[]},e.baseSizingClasses=function(){return this.size!==t.BASESIZE?["sizing","reset-size"+this.size,"size"+t.BASESIZE]:[]},e.fontMetrics=function(){return this._fontMetrics||(this._fontMetrics=function(t){var e;if(!Y[e=t>=5?0:t>=3?1:2]){var r=Y[e]={cssEmPerMu:V.quad[e]/18};for(var a in V)V.hasOwnProperty(a)&&(r[a]=V[a][e])}return Y[e]}(this.size)),this._fontMetrics},e.getColor=function(){return this.phantom?"transparent":this.color},t}();kt.BASESIZE=6;var St=kt,Mt={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:1.00375,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:1.00375},zt={ex:!0,em:!0,mu:!0},At=function(t){return"string"!=typeof t&&(t=t.unit),t in Mt||t in zt||"ex"===t},Tt=function(t,e){var r;if(t.unit in Mt)r=Mt[t.unit]/e.fontMetrics().ptPerEm/e.sizeMultiplier;else if("mu"===t.unit)r=e.fontMetrics().cssEmPerMu;else{var a;if(a=e.style.isTight()?e.havingStyle(e.style.text()):e,"ex"===t.unit)r=a.fontMetrics().xHeight;else{if("em"!==t.unit)throw new o("Invalid unit: '"+t.unit+"'");r=a.fontMetrics().quad}a!==e&&(r*=a.sizeMultiplier/e.sizeMultiplier)}return Math.min(t.number*r,e.maxSize)},Bt=function(t,e,r){return j[r][t]&&j[r][t].replace&&(t=j[r][t].replace),{value:t,metrics:G(t,e,r)}},Ct=function(t,e,r,a,n){var i,o=Bt(t,e,r),s=o.metrics;if(t=o.value,s){var l=s.italic;("text"===r||a&&"mathit"===a.font)&&(l=0),i=new E(t,s.height,s.depth,l,s.skew,s.width,n)}else"undefined"!=typeof console&&console.warn("No character metrics for '"+t+"' in style '"+e+"' and mode '"+r+"'"),i=new E(t,0,0,0,0,0,n);if(a){i.maxFontSize=a.sizeMultiplier,a.style.isTight()&&i.classes.push("mtight");var h=a.getColor();h&&(i.style.color=h)}return i},qt=function(t,e){if(T(t.classes)!==T(e.classes)||t.skew!==e.skew||t.maxFontSize!==e.maxFontSize)return!1;for(var r in t.style)if(t.style.hasOwnProperty(r)&&t.style[r]!==e.style[r])return!1;for(var a in e.style)if(e.style.hasOwnProperty(a)&&t.style[a]!==e.style[a])return!1;return!0},Nt=function(t){for(var e=0,r=0,a=0,n=0;n<t.children.length;n++){var i=t.children[n];i.height>e&&(e=i.height),i.depth>r&&(r=i.depth),i.maxFontSize>a&&(a=i.maxFontSize)}t.height=e,t.depth=r,t.maxFontSize=a},It=function(t,e,r,a){var n=new N(t,e,r,a);return Nt(n),n},Ot=function(t,e,r,a){return new N(t,e,r,a)},Rt=function(t){var e=new A(t);return Nt(e),e},Et=function(t,e,r){var a="";switch(t){case"amsrm":a="AMS";break;case"textrm":a="Main";break;case"textsf":a="SansSerif";break;case"texttt":a="Typewriter";break;default:a=t}return a+"-"+("textbf"===e&&"textit"===r?"BoldItalic":"textbf"===e?"Bold":"textit"===e?"Italic":"Regular")},Lt={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathnormal:{variant:"italic",fontName:"Math-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},Pt={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659],leftParenInner:["leftParenInner",.875,.3],rightParenInner:["rightParenInner",.875,.3]},Dt={fontMap:Lt,makeSymbol:Ct,mathsym:function(t,e,r,a){return void 0===a&&(a=[]),"boldsymbol"===r.font&&Bt(t,"Main-Bold",e).metrics?Ct(t,"Main-Bold",e,r,a.concat(["mathbf"])):"\\"===t||"main"===j[e][t].font?Ct(t,"Main-Regular",e,r,a):Ct(t,"AMS-Regular",e,r,a.concat(["amsrm"]))},makeSpan:It,makeSvgSpan:Ot,makeLineSpan:function(t,e,r){var a=It([t],[],e);return a.height=Math.max(r||e.fontMetrics().defaultRuleThickness,e.minRuleThickness),a.style.borderBottomWidth=a.height+"em",a.maxFontSize=1,a},makeAnchor:function(t,e,r,a){var n=new I(t,e,r,a);return Nt(n),n},makeFragment:Rt,wrapFragment:function(t,e){return t instanceof A?It([],[t],e):t},makeVList:function(t,e){for(var r=function(t){if("individualShift"===t.positionType){for(var e=t.children,r=[e[0]],a=-e[0].shift-e[0].elem.depth,n=a,i=1;i<e.length;i++){var o=-e[i].shift-n-e[i].elem.depth,s=o-(e[i-1].elem.height+e[i-1].elem.depth);n+=o,r.push({type:"kern",size:s}),r.push(e[i])}return{children:r,depth:a}}var l;if("top"===t.positionType){for(var h=t.positionData,m=0;m<t.children.length;m++){var c=t.children[m];h-="kern"===c.type?c.size:c.elem.height+c.elem.depth}l=h}else if("bottom"===t.positionType)l=-t.positionData;else{var u=t.children[0];if("elem"!==u.type)throw new Error('First child must have type "elem".');if("shift"===t.positionType)l=-u.elem.depth-t.positionData;else{if("firstBaseline"!==t.positionType)throw new Error("Invalid positionType "+t.positionType+".");l=-u.elem.depth}}return{children:t.children,depth:l}}(t),a=r.children,n=r.depth,i=0,o=0;o<a.length;o++){var s=a[o];if("elem"===s.type){var l=s.elem;i=Math.max(i,l.maxFontSize,l.height)}}i+=2;var h=It(["pstrut"],[]);h.style.height=i+"em";for(var m=[],c=n,u=n,p=n,d=0;d<a.length;d++){var f=a[d];if("kern"===f.type)p+=f.size;else{var g=f.elem,x=f.wrapperClasses||[],v=f.wrapperStyle||{},b=It(x,[h,g],void 0,v);b.style.top=-i-p-g.depth+"em",f.marginLeft&&(b.style.marginLeft=f.marginLeft),f.marginRight&&(b.style.marginRight=f.marginRight),m.push(b),p+=g.height+g.depth}c=Math.min(c,p),u=Math.max(u,p)}var y,w=It(["vlist"],m);if(w.style.height=u+"em",c<0){var k=It([],[]),S=It(["vlist"],[k]);S.style.height=-c+"em";var M=It(["vlist-s"],[new E("\u200b")]);y=[It(["vlist-r"],[w,M]),It(["vlist-r"],[S])]}else y=[It(["vlist-r"],[w])];var z=It(["vlist-t"],y);return 2===y.length&&z.classes.push("vlist-t2"),z.height=u,z.depth=-c,z},makeOrd:function(t,e,r){var a=t.mode,n=t.text,i=["mord"],s="math"===a||"text"===a&&e.font,l=s?e.font:e.fontFamily;if(55349===n.charCodeAt(0)){var h=function(t,e){var r=1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536,a="math"===e?0:1;if(119808<=r&&r<120484){var n=Math.floor((r-119808)/26);return[xt[n][2],xt[n][a]]}if(120782<=r&&r<=120831){var i=Math.floor((r-120782)/10);return[vt[i][2],vt[i][a]]}if(120485===r||120486===r)return[xt[0][2],xt[0][a]];if(120486<r&&r<120782)return["",""];throw new o("Unsupported character: "+t)}(n,a),m=h[0],c=h[1];return Ct(n,m,a,e,i.concat(c))}if(l){var u,p;if("boldsymbol"===l){var d=function(t,e,r,a,n){return"textord"!==n&&Bt(t,"Math-BoldItalic",e).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"}}(n,a,0,0,r);u=d.fontName,p=[d.fontClass]}else s?(u=Lt[l].fontName,p=[l]):(u=Et(l,e.fontWeight,e.fontShape),p=[l,e.fontWeight,e.fontShape]);if(Bt(n,u,a).metrics)return Ct(n,u,a,e,i.concat(p));if(rt.hasOwnProperty(n)&&"Typewriter"===u.substr(0,10)){for(var f=[],g=0;g<n.length;g++)f.push(Ct(n[g],u,a,e,i.concat(p)));return Rt(f)}}if("mathord"===r)return Ct(n,"Math-Italic",a,e,i.concat(["mathnormal"]));if("textord"===r){var x=j[a][n]&&j[a][n].font;if("ams"===x){var v=Et("amsrm",e.fontWeight,e.fontShape);return Ct(n,v,a,e,i.concat("amsrm",e.fontWeight,e.fontShape))}if("main"!==x&&x){var b=Et(x,e.fontWeight,e.fontShape);return Ct(n,b,a,e,i.concat(b,e.fontWeight,e.fontShape))}var y=Et("textrm",e.fontWeight,e.fontShape);return Ct(n,y,a,e,i.concat(e.fontWeight,e.fontShape))}throw new Error("unexpected type: "+r+" in makeOrd")},makeGlue:function(t,e){var r=It(["mspace"],[],e),a=Tt(t,e);return r.style.marginRight=a+"em",r},staticSvg:function(t,e){var r=Pt[t],a=r[0],n=r[1],i=r[2],o=new P(a),s=new L([o],{width:n+"em",height:i+"em",style:"width:"+n+"em",viewBox:"0 0 "+1e3*n+" "+1e3*i,preserveAspectRatio:"xMinYMin"}),l=Ot(["overlay"],[s],e);return l.height=i,l.style.height=i+"em",l.style.width=n+"em",l},svgData:Pt,tryCombineChars:function(t){for(var e=0;e<t.length-1;e++){var r=t[e],a=t[e+1];r instanceof E&&a instanceof E&&qt(r,a)&&(r.text+=a.text,r.height=Math.max(r.height,a.height),r.depth=Math.max(r.depth,a.depth),r.italic=a.italic,t.splice(e+1,1),e--)}return t}},Ht={number:3,unit:"mu"},Ft={number:4,unit:"mu"},Vt={number:5,unit:"mu"},Ut={mord:{mop:Ht,mbin:Ft,mrel:Vt,minner:Ht},mop:{mord:Ht,mop:Ht,mrel:Vt,minner:Ht},mbin:{mord:Ft,mop:Ft,mopen:Ft,minner:Ft},mrel:{mord:Vt,mop:Vt,mopen:Vt,minner:Vt},mopen:{},mclose:{mop:Ht,mbin:Ft,mrel:Vt,minner:Ht},mpunct:{mord:Ht,mop:Ht,mrel:Vt,mopen:Ht,mclose:Ht,mpunct:Ht,minner:Ht},minner:{mord:Ht,mop:Ht,mbin:Ft,mrel:Vt,mopen:Ht,mpunct:Ht,minner:Ht}},Gt={mord:{mop:Ht},mop:{mord:Ht,mop:Ht},mbin:{},mrel:{},mopen:{},mclose:{mop:Ht},mpunct:{},minner:{mop:Ht}},Yt={},Wt={},Xt={};function _t(t){for(var e=t.type,r=t.names,a=t.props,n=t.handler,i=t.htmlBuilder,o=t.mathmlBuilder,s={type:e,numArgs:a.numArgs,argTypes:a.argTypes,greediness:void 0===a.greediness?1:a.greediness,allowedInText:!!a.allowedInText,allowedInMath:void 0===a.allowedInMath||a.allowedInMath,numOptionalArgs:a.numOptionalArgs||0,infix:!!a.infix,handler:n},l=0;l<r.length;++l)Yt[r[l]]=s;e&&(i&&(Wt[e]=i),o&&(Xt[e]=o))}function jt(t){_t({type:t.type,names:[],props:{numArgs:0},handler:function(){throw new Error("Should never be called.")},htmlBuilder:t.htmlBuilder,mathmlBuilder:t.mathmlBuilder})}var $t=function(t){return"ordgroup"===t.type?t.body:[t]},Zt=Dt.makeSpan,Kt=["leftmost","mbin","mopen","mrel","mop","mpunct"],Jt=["rightmost","mrel","mclose","mpunct"],Qt={display:w.DISPLAY,text:w.TEXT,script:w.SCRIPT,scriptscript:w.SCRIPTSCRIPT},te={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},ee=function(t,e,r,a){void 0===a&&(a=[null,null]);for(var n=[],i=0;i<t.length;i++){var o=oe(t[i],e);if(o instanceof A){var s=o.children;n.push.apply(n,s)}else n.push(o)}if(!r)return n;var l=e;if(1===t.length){var h=t[0];"sizing"===h.type?l=e.havingSize(h.size):"styling"===h.type&&(l=e.havingStyle(Qt[h.style]))}var m=Zt([a[0]||"leftmost"],[],e),u=Zt([a[1]||"rightmost"],[],e),p="root"===r;return re(n,function(t,e){var r=e.classes[0],a=t.classes[0];"mbin"===r&&c.contains(Jt,a)?e.classes[0]="mord":"mbin"===a&&c.contains(Kt,r)&&(t.classes[0]="mord")},{node:m},u,p),re(n,function(t,e){var r=ne(e),a=ne(t),n=r&&a?t.hasClass("mtight")?Gt[r][a]:Ut[r][a]:null;if(n)return Dt.makeGlue(n,l)},{node:m},u,p),n},re=function t(e,r,a,n,i){n&&e.push(n);for(var o=0;o<e.length;o++){var s=e[o],l=ae(s);if(l)t(l.children,r,a,null,i);else{var h=!s.hasClass("mspace");if(h){var m=r(s,a.node);m&&(a.insertAfter?a.insertAfter(m):(e.unshift(m),o++))}h?a.node=s:i&&s.hasClass("newline")&&(a.node=Zt(["leftmost"])),a.insertAfter=function(t){return function(r){e.splice(t+1,0,r),o++}}(o)}}n&&e.pop()},ae=function(t){return t instanceof A||t instanceof I||t instanceof N&&t.hasClass("enclosing")?t:null},ne=function(t,e){return t?(e&&(t=function t(e,r){var a=ae(e);if(a){var n=a.children;if(n.length){if("right"===r)return t(n[n.length-1],"right");if("left"===r)return t(n[0],"left")}}return e}(t,e)),te[t.classes[0]]||null):null},ie=function(t,e){var r=["nulldelimiter"].concat(t.baseSizingClasses());return Zt(e.concat(r))},oe=function(t,e,r){if(!t)return Zt();if(Wt[t.type]){var a=Wt[t.type](t,e);if(r&&e.size!==r.size){a=Zt(e.sizingClasses(r),[a],e);var n=e.sizeMultiplier/r.sizeMultiplier;a.height*=n,a.depth*=n}return a}throw new o("Got group of unknown type: '"+t.type+"'")};function se(t,e){var r=Zt(["base"],t,e),a=Zt(["strut"]);return a.style.height=r.height+r.depth+"em",a.style.verticalAlign=-r.depth+"em",r.children.unshift(a),r}function le(t,e){var r=null;1===t.length&&"tag"===t[0].type&&(r=t[0].tag,t=t[0].body);for(var a,n=ee(t,e,"root"),i=[],o=[],s=0;s<n.length;s++)if(o.push(n[s]),n[s].hasClass("mbin")||n[s].hasClass("mrel")||n[s].hasClass("allowbreak")){for(var l=!1;s<n.length-1&&n[s+1].hasClass("mspace")&&!n[s+1].hasClass("newline");)s++,o.push(n[s]),n[s].hasClass("nobreak")&&(l=!0);l||(i.push(se(o,e)),o=[])}else n[s].hasClass("newline")&&(o.pop(),o.length>0&&(i.push(se(o,e)),o=[]),i.push(n[s]));o.length>0&&i.push(se(o,e)),r&&((a=se(ee(r,e,!0))).classes=["tag"],i.push(a));var h=Zt(["katex-html"],i);if(h.setAttribute("aria-hidden","true"),a){var m=a.children[0];m.style.height=h.height+h.depth+"em",m.style.verticalAlign=-h.depth+"em"}return h}function he(t){return new A(t)}var me=function(){function t(t,e){this.type=void 0,this.attributes=void 0,this.children=void 0,this.type=t,this.attributes={},this.children=e||[]}var e=t.prototype;return e.setAttribute=function(t,e){this.attributes[t]=e},e.getAttribute=function(t){return this.attributes[t]},e.toNode=function(){var t=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(var e in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,e)&&t.setAttribute(e,this.attributes[e]);for(var r=0;r<this.children.length;r++)t.appendChild(this.children[r].toNode());return t},e.toMarkup=function(){var t="<"+this.type;for(var e in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,e)&&(t+=" "+e+'="',t+=c.escape(this.attributes[e]),t+='"');t+=">";for(var r=0;r<this.children.length;r++)t+=this.children[r].toMarkup();return t+="</"+this.type+">"},e.toText=function(){return this.children.map(function(t){return t.toText()}).join("")},t}(),ce=function(){function t(t){this.text=void 0,this.text=t}var e=t.prototype;return e.toNode=function(){return document.createTextNode(this.text)},e.toMarkup=function(){return c.escape(this.toText())},e.toText=function(){return this.text},t}(),ue={MathNode:me,TextNode:ce,SpaceNode:function(){function t(t){this.width=void 0,this.character=void 0,this.width=t,this.character=t>=.05555&&t<=.05556?"\u200a":t>=.1666&&t<=.1667?"\u2009":t>=.2222&&t<=.2223?"\u2005":t>=.2777&&t<=.2778?"\u2005\u200a":t>=-.05556&&t<=-.05555?"\u200a\u2063":t>=-.1667&&t<=-.1666?"\u2009\u2063":t>=-.2223&&t<=-.2222?"\u205f\u2063":t>=-.2778&&t<=-.2777?"\u2005\u2063":null}var e=t.prototype;return e.toNode=function(){if(this.character)return document.createTextNode(this.character);var t=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return t.setAttribute("width",this.width+"em"),t},e.toMarkup=function(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+this.width+'em"/>'},e.toText=function(){return this.character?this.character:" "},t}(),newDocumentFragment:he},pe=function(t,e,r){return!j[e][t]||!j[e][t].replace||55349===t.charCodeAt(0)||rt.hasOwnProperty(t)&&r&&(r.fontFamily&&"tt"===r.fontFamily.substr(4,2)||r.font&&"tt"===r.font.substr(4,2))||(t=j[e][t].replace),new ue.TextNode(t)},de=function(t){return 1===t.length?t[0]:new ue.MathNode("mrow",t)},fe=function(t,e){if("texttt"===e.fontFamily)return"monospace";if("textsf"===e.fontFamily)return"textit"===e.fontShape&&"textbf"===e.fontWeight?"sans-serif-bold-italic":"textit"===e.fontShape?"sans-serif-italic":"textbf"===e.fontWeight?"bold-sans-serif":"sans-serif";if("textit"===e.fontShape&&"textbf"===e.fontWeight)return"bold-italic";if("textit"===e.fontShape)return"italic";if("textbf"===e.fontWeight)return"bold";var r=e.font;if(!r||"mathnormal"===r)return null;var a=t.mode;if("mathit"===r)return"italic";if("boldsymbol"===r)return"textord"===t.type?"bold":"bold-italic";if("mathbf"===r)return"bold";if("mathbb"===r)return"double-struck";if("mathfrak"===r)return"fraktur";if("mathscr"===r||"mathcal"===r)return"script";if("mathsf"===r)return"sans-serif";if("mathtt"===r)return"monospace";var n=t.text;return c.contains(["\\imath","\\jmath"],n)?null:(j[a][n]&&j[a][n].replace&&(n=j[a][n].replace),G(n,Dt.fontMap[r].fontName,a)?Dt.fontMap[r].variant:null)},ge=function(t,e,r){if(1===t.length){var a=ve(t[0],e);return r&&a instanceof me&&"mo"===a.type&&(a.setAttribute("lspace","0em"),a.setAttribute("rspace","0em")),[a]}for(var n,i=[],o=0;o<t.length;o++){var s=ve(t[o],e);if(s instanceof me&&n instanceof me){if("mtext"===s.type&&"mtext"===n.type&&s.getAttribute("mathvariant")===n.getAttribute("mathvariant")){var l;(l=n.children).push.apply(l,s.children);continue}if("mn"===s.type&&"mn"===n.type){var h;(h=n.children).push.apply(h,s.children);continue}if("mi"===s.type&&1===s.children.length&&"mn"===n.type){var m=s.children[0];if(m instanceof ce&&"."===m.text){var c;(c=n.children).push.apply(c,s.children);continue}}else if("mi"===n.type&&1===n.children.length){var u=n.children[0];if(u instanceof ce&&"\u0338"===u.text&&("mo"===s.type||"mi"===s.type||"mn"===s.type)){var p=s.children[0];p instanceof ce&&p.text.length>0&&(p.text=p.text.slice(0,1)+"\u0338"+p.text.slice(1),i.pop())}}}i.push(s),n=s}return i},xe=function(t,e,r){return de(ge(t,e,r))},ve=function(t,e){if(!t)return new ue.MathNode("mrow");if(Xt[t.type])return Xt[t.type](t,e);throw new o("Got group of unknown type: '"+t.type+"'")};function be(t,e,r,a,n){var i,o=ge(t,r);i=1===o.length&&o[0]instanceof me&&c.contains(["mrow","mtable"],o[0].type)?o[0]:new ue.MathNode("mrow",o);var s=new ue.MathNode("annotation",[new ue.TextNode(e)]);s.setAttribute("encoding","application/x-tex");var l=new ue.MathNode("semantics",[i,s]),h=new ue.MathNode("math",[l]);h.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),a&&h.setAttribute("display","block");var m=n?"katex":"katex-mathml";return Dt.makeSpan([m],[h])}var ye=function(t){return new St({style:t.displayMode?w.DISPLAY:w.TEXT,maxSize:t.maxSize,minRuleThickness:t.minRuleThickness})},we=function(t,e){if(e.displayMode){var r=["katex-display"];e.leqno&&r.push("leqno"),e.fleqn&&r.push("fleqn"),t=Dt.makeSpan(r,[t])}return t},ke=function(t,e,r){var a,n=ye(r);if("mathml"===r.output)return be(t,e,n,r.displayMode,!0);if("html"===r.output){var i=le(t,n);a=Dt.makeSpan(["katex"],[i])}else{var o=be(t,e,n,r.displayMode,!1),s=le(t,n);a=Dt.makeSpan(["katex"],[o,s])}return we(a,r)},Se={widehat:"^",widecheck:"\u02c7",widetilde:"~",utilde:"~",overleftarrow:"\u2190",underleftarrow:"\u2190",xleftarrow:"\u2190",overrightarrow:"\u2192",underrightarrow:"\u2192",xrightarrow:"\u2192",underbrace:"\u23df",overbrace:"\u23de",overgroup:"\u23e0",undergroup:"\u23e1",overleftrightarrow:"\u2194",underleftrightarrow:"\u2194",xleftrightarrow:"\u2194",Overrightarrow:"\u21d2",xRightarrow:"\u21d2",overleftharpoon:"\u21bc",xleftharpoonup:"\u21bc",overrightharpoon:"\u21c0",xrightharpoonup:"\u21c0",xLeftarrow:"\u21d0",xLeftrightarrow:"\u21d4",xhookleftarrow:"\u21a9",xhookrightarrow:"\u21aa",xmapsto:"\u21a6",xrightharpoondown:"\u21c1",xleftharpoondown:"\u21bd",xrightleftharpoons:"\u21cc",xleftrightharpoons:"\u21cb",xtwoheadleftarrow:"\u219e",xtwoheadrightarrow:"\u21a0",xlongequal:"=",xtofrom:"\u21c4",xrightleftarrows:"\u21c4",xrightequilibrium:"\u21cc",xleftequilibrium:"\u21cb"},Me={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},ze=function(t){return"ordgroup"===t.type?t.body.length:1},Ae=function(t,e,r,a){var n,i=t.height+t.depth+2*r;if(/fbox|color/.test(e)){if(n=Dt.makeSpan(["stretchy",e],[],a),"fbox"===e){var o=a.color&&a.getColor();o&&(n.style.borderColor=o)}}else{var s=[];/^[bx]cancel$/.test(e)&&s.push(new D({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(e)&&s.push(new D({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));var l=new L(s,{width:"100%",height:i+"em"});n=Dt.makeSvgSpan([],[l],a)}return n.height=i,n.style.height=i+"em",n},Te=function(t){var e=new ue.MathNode("mo",[new ue.TextNode(Se[t.substr(1)])]);return e.setAttribute("stretchy","true"),e},Be=function(t,e){var r=function(){var r=4e5,a=t.label.substr(1);if(c.contains(["widehat","widecheck","widetilde","utilde"],a)){var n,i,o,s=ze(t.base);if(s>5)"widehat"===a||"widecheck"===a?(n=420,r=2364,o=.42,i=a+"4"):(n=312,r=2340,o=.34,i="tilde4");else{var l=[1,1,2,2,3,3][s];"widehat"===a||"widecheck"===a?(r=[0,1062,2364,2364,2364][l],n=[0,239,300,360,420][l],o=[0,.24,.3,.3,.36,.42][l],i=a+l):(r=[0,600,1033,2339,2340][l],n=[0,260,286,306,312][l],o=[0,.26,.286,.3,.306,.34][l],i="tilde"+l)}var h=new P(i),m=new L([h],{width:"100%",height:o+"em",viewBox:"0 0 "+r+" "+n,preserveAspectRatio:"none"});return{span:Dt.makeSvgSpan([],[m],e),minWidth:0,height:o}}var u,p,d=[],f=Me[a],g=f[0],x=f[1],v=f[2],b=v/1e3,y=g.length;if(1===y)u=["hide-tail"],p=[f[3]];else if(2===y)u=["halfarrow-left","halfarrow-right"],p=["xMinYMin","xMaxYMin"];else{if(3!==y)throw new Error("Correct katexImagesData or update code here to support\n                    "+y+" children.");u=["brace-left","brace-center","brace-right"],p=["xMinYMin","xMidYMin","xMaxYMin"]}for(var w=0;w<y;w++){var k=new P(g[w]),S=new L([k],{width:"400em",height:b+"em",viewBox:"0 0 "+r+" "+v,preserveAspectRatio:p[w]+" slice"}),M=Dt.makeSvgSpan([u[w]],[S],e);if(1===y)return{span:M,minWidth:x,height:b};M.style.height=b+"em",d.push(M)}return{span:Dt.makeSpan(["stretchy"],d,e),minWidth:x,height:b}}(),a=r.span,n=r.minWidth,i=r.height;return a.height=i,a.style.height=i+"em",n>0&&(a.style.minWidth=n+"em"),a};function Ce(t,e){if(!t||t.type!==e)throw new Error("Expected node of type "+e+", but got "+(t?"node of type "+t.type:String(t)));return t}function qe(t){var e=Ne(t);if(!e)throw new Error("Expected node of symbol group type, but got "+(t?"node of type "+t.type:String(t)));return e}function Ne(t){return t&&("atom"===t.type||X.hasOwnProperty(t.type))?t:null}var Ie=function(t,e){var r,a,n;t&&"supsub"===t.type?(r=(a=Ce(t.base,"accent")).base,t.base=r,n=function(t){if(t instanceof N)return t;throw new Error("Expected span<HtmlDomNode> but got "+String(t)+".")}(oe(t,e)),t.base=a):r=(a=Ce(t,"accent")).base;var i=oe(r,e.havingCrampedStyle()),o=0;if(a.isShifty&&c.isCharacterBox(r)){var s=c.getBaseElem(r);o=H(oe(s,e.havingCrampedStyle())).skew}var l,h=Math.min(i.height,e.fontMetrics().xHeight);if(a.isStretchy)l=Be(a,e),l=Dt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:i},{type:"elem",elem:l,wrapperClasses:["svg-align"],wrapperStyle:o>0?{width:"calc(100% - "+2*o+"em)",marginLeft:2*o+"em"}:void 0}]},e);else{var m,u;"\\vec"===a.label?(m=Dt.staticSvg("vec",e),u=Dt.svgData.vec[1]):((m=H(m=Dt.makeOrd({mode:a.mode,text:a.label},e,"textord"))).italic=0,u=m.width),l=Dt.makeSpan(["accent-body"],[m]);var p="\\textcircled"===a.label;p&&(l.classes.push("accent-full"),h=i.height);var d=o;p||(d-=u/2),l.style.left=d+"em","\\textcircled"===a.label&&(l.style.top=".2em"),l=Dt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:i},{type:"kern",size:-h},{type:"elem",elem:l}]},e)}var f=Dt.makeSpan(["mord","accent"],[l],e);return n?(n.children[0]=f,n.height=Math.max(f.height,n.height),n.classes[0]="mord",n):f},Oe=function(t,e){var r=t.isStretchy?Te(t.label):new ue.MathNode("mo",[pe(t.label,t.mode)]),a=new ue.MathNode("mover",[ve(t.base,e),r]);return a.setAttribute("accent","true"),a},Re=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map(function(t){return"\\"+t}).join("|"));_t({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:function(t,e){var r=e[0],a=!Re.test(t.funcName),n=!a||"\\widehat"===t.funcName||"\\widetilde"===t.funcName||"\\widecheck"===t.funcName;return{type:"accent",mode:t.parser.mode,label:t.funcName,isStretchy:a,isShifty:n,base:r}},htmlBuilder:Ie,mathmlBuilder:Oe}),_t({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!1},handler:function(t,e){var r=e[0];return{type:"accent",mode:t.parser.mode,label:t.funcName,isStretchy:!1,isShifty:!0,base:r}},htmlBuilder:Ie,mathmlBuilder:Oe}),_t({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:function(t,e){var r=t.parser,a=t.funcName,n=e[0];return{type:"accentUnder",mode:r.mode,label:a,base:n}},htmlBuilder:function(t,e){var r=oe(t.base,e),a=Be(t,e),n="\\utilde"===t.label?.12:0,i=Dt.makeVList({positionType:"top",positionData:r.height,children:[{type:"elem",elem:a,wrapperClasses:["svg-align"]},{type:"kern",size:n},{type:"elem",elem:r}]},e);return Dt.makeSpan(["mord","accentunder"],[i],e)},mathmlBuilder:function(t,e){var r=Te(t.label),a=new ue.MathNode("munder",[ve(t.base,e),r]);return a.setAttribute("accentunder","true"),a}});var Ee=function(t){var e=new ue.MathNode("mpadded",t?[t]:[]);return e.setAttribute("width","+0.6em"),e.setAttribute("lspace","0.3em"),e};_t({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium"],props:{numArgs:1,numOptionalArgs:1},handler:function(t,e,r){var a=t.parser,n=t.funcName;return{type:"xArrow",mode:a.mode,label:n,body:e[0],below:r[0]}},htmlBuilder:function(t,e){var r,a=e.style,n=e.havingStyle(a.sup()),i=Dt.wrapFragment(oe(t.body,n,e),e);i.classes.push("x-arrow-pad"),t.below&&(n=e.havingStyle(a.sub()),(r=Dt.wrapFragment(oe(t.below,n,e),e)).classes.push("x-arrow-pad"));var o,s=Be(t,e),l=-e.fontMetrics().axisHeight+.5*s.height,h=-e.fontMetrics().axisHeight-.5*s.height-.111;if((i.depth>.25||"\\xleftequilibrium"===t.label)&&(h-=i.depth),r){var m=-e.fontMetrics().axisHeight+r.height+.5*s.height+.111;o=Dt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:i,shift:h},{type:"elem",elem:s,shift:l},{type:"elem",elem:r,shift:m}]},e)}else o=Dt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:i,shift:h},{type:"elem",elem:s,shift:l}]},e);return o.children[0].children[0].children[1].classes.push("svg-align"),Dt.makeSpan(["mrel","x-arrow"],[o],e)},mathmlBuilder:function(t,e){var r,a=Te(t.label);if(t.body){var n=Ee(ve(t.body,e));if(t.below){var i=Ee(ve(t.below,e));r=new ue.MathNode("munderover",[a,i,n])}else r=new ue.MathNode("mover",[a,n])}else if(t.below){var o=Ee(ve(t.below,e));r=new ue.MathNode("munder",[a,o])}else r=Ee(),r=new ue.MathNode("mover",[a,r]);return r}}),_t({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler:function(t,e){for(var r=t.parser,a=Ce(e[0],"ordgroup").body,n="",i=0;i<a.length;i++){n+=Ce(a[i],"textord").text}var s=parseInt(n);if(isNaN(s))throw new o("\\@char has non-numeric argument "+n);return{type:"textord",mode:r.mode,text:String.fromCharCode(s)}}});var Le=function(t,e){var r=ee(t.body,e.withColor(t.color),!1);return Dt.makeFragment(r)},Pe=function(t,e){var r=ge(t.body,e.withColor(t.color)),a=new ue.MathNode("mstyle",r);return a.setAttribute("mathcolor",t.color),a};_t({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,greediness:3,argTypes:["color","original"]},handler:function(t,e){var r=t.parser,a=Ce(e[0],"color-token").color,n=e[1];return{type:"color",mode:r.mode,color:a,body:$t(n)}},htmlBuilder:Le,mathmlBuilder:Pe}),_t({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,greediness:3,argTypes:["color"]},handler:function(t,e){var r=t.parser,a=t.breakOnTokenText,n=Ce(e[0],"color-token").color;r.gullet.macros.set("\\current@color",n);var i=r.parseExpression(!0,a);return{type:"color",mode:r.mode,color:n,body:i}},htmlBuilder:Le,mathmlBuilder:Pe}),_t({type:"cr",names:["\\cr","\\newline"],props:{numArgs:0,numOptionalArgs:1,argTypes:["size"],allowedInText:!0},handler:function(t,e,r){var a=t.parser,n=t.funcName,i=r[0],o="\\cr"===n,s=!1;return o||(s=!a.settings.displayMode||!a.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode")),{type:"cr",mode:a.mode,newLine:s,newRow:o,size:i&&Ce(i,"size").value}},htmlBuilder:function(t,e){if(t.newRow)throw new o("\\cr valid only within a tabular/array environment");var r=Dt.makeSpan(["mspace"],[],e);return t.newLine&&(r.classes.push("newline"),t.size&&(r.style.marginTop=Tt(t.size,e)+"em")),r},mathmlBuilder:function(t,e){var r=new ue.MathNode("mspace");return t.newLine&&(r.setAttribute("linebreak","newline"),t.size&&r.setAttribute("height",Tt(t.size,e)+"em")),r}});var De={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},He=function(t){var e=t.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(e))throw new o("Expected a control sequence",t);return e},Fe=function(t,e,r,a){var n=t.gullet.macros.get(r.text);null==n&&(r.noexpand=!0,n={tokens:[r],numArgs:0,unexpandable:!t.gullet.isExpandable(r.text)}),t.gullet.macros.set(e,n,a)};_t({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler:function(t){var e=t.parser,r=t.funcName;e.consumeSpaces();var a=e.fetch();if(De[a.text])return"\\global"!==r&&"\\\\globallong"!==r||(a.text=De[a.text]),Ce(e.parseFunction(),"internal");throw new o("Invalid token after macro prefix",a)}}),_t({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0},handler:function(t){var e=t.parser,r=t.funcName,a=e.gullet.consumeArgs(1)[0];if(1!==a.length)throw new o("\\gdef's first argument must be a macro name");var n=a[0].text,i=0;for(a=e.gullet.consumeArgs(1)[0];1===a.length&&"#"===a[0].text;){if(1!==(a=e.gullet.consumeArgs(1)[0]).length)throw new o('Invalid argument number length "'+a.length+'"');if(!/^[1-9]$/.test(a[0].text))throw new o('Invalid argument number "'+a[0].text+'"');if(i++,parseInt(a[0].text)!==i)throw new o('Argument number "'+a[0].text+'" out of order');a=e.gullet.consumeArgs(1)[0]}return"\\edef"!==r&&"\\xdef"!==r||(a=e.gullet.expandTokens(a)).reverse(),e.gullet.macros.set(n,{tokens:a,numArgs:i},r===De[r]),{type:"internal",mode:e.mode}}}),_t({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0},handler:function(t){var e=t.parser,r=t.funcName,a=He(e.gullet.popToken());e.gullet.consumeSpaces();var n=function(t){var e=t.gullet.popToken();return"="===e.text&&" "===(e=t.gullet.popToken()).text&&(e=t.gullet.popToken()),e}(e);return Fe(e,a,n,"\\\\globallet"===r),{type:"internal",mode:e.mode}}}),_t({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0},handler:function(t){var e=t.parser,r=t.funcName,a=He(e.gullet.popToken()),n=e.gullet.popToken(),i=e.gullet.popToken();return Fe(e,a,i,"\\\\globalfuture"===r),e.gullet.pushToken(i),e.gullet.pushToken(n),{type:"internal",mode:e.mode}}});var Ve=function(t,e,r){var a=G(j.math[t]&&j.math[t].replace||t,e,r);if(!a)throw new Error("Unsupported symbol "+t+" and font size "+e+".");return a},Ue=function(t,e,r,a){var n=r.havingBaseStyle(e),i=Dt.makeSpan(a.concat(n.sizingClasses(r)),[t],r),o=n.sizeMultiplier/r.sizeMultiplier;return i.height*=o,i.depth*=o,i.maxFontSize=n.sizeMultiplier,i},Ge=function(t,e,r){var a=e.havingBaseStyle(r),n=(1-e.sizeMultiplier/a.sizeMultiplier)*e.fontMetrics().axisHeight;t.classes.push("delimcenter"),t.style.top=n+"em",t.height-=n,t.depth+=n},Ye=function(t,e,r,a,n,i){var o=function(t,e,r,a){return Dt.makeSymbol(t,"Size"+e+"-Regular",r,a)}(t,e,n,a),s=Ue(Dt.makeSpan(["delimsizing","size"+e],[o],a),w.TEXT,a,i);return r&&Ge(s,a,w.TEXT),s},We=function(t,e,r){var a;return a="Size1-Regular"===e?"delim-size1":"delim-size4",{type:"elem",elem:Dt.makeSpan(["delimsizinginner",a],[Dt.makeSpan([],[Dt.makeSymbol(t,e,r)])])}},Xe={type:"kern",size:-.005},_e=function(t,e,r,a,n,i){var o,s,l,h;o=l=h=t,s=null;var m="Size1-Regular";"\\uparrow"===t?l=h="\u23d0":"\\Uparrow"===t?l=h="\u2016":"\\downarrow"===t?o=l="\u23d0":"\\Downarrow"===t?o=l="\u2016":"\\updownarrow"===t?(o="\\uparrow",l="\u23d0",h="\\downarrow"):"\\Updownarrow"===t?(o="\\Uparrow",l="\u2016",h="\\Downarrow"):"["===t||"\\lbrack"===t?(o="\u23a1",l="\u23a2",h="\u23a3",m="Size4-Regular"):"]"===t||"\\rbrack"===t?(o="\u23a4",l="\u23a5",h="\u23a6",m="Size4-Regular"):"\\lfloor"===t||"\u230a"===t?(l=o="\u23a2",h="\u23a3",m="Size4-Regular"):"\\lceil"===t||"\u2308"===t?(o="\u23a1",l=h="\u23a2",m="Size4-Regular"):"\\rfloor"===t||"\u230b"===t?(l=o="\u23a5",h="\u23a6",m="Size4-Regular"):"\\rceil"===t||"\u2309"===t?(o="\u23a4",l=h="\u23a5",m="Size4-Regular"):"("===t||"\\lparen"===t?(o="\u239b",l="\u239c",h="\u239d",m="Size4-Regular"):")"===t||"\\rparen"===t?(o="\u239e",l="\u239f",h="\u23a0",m="Size4-Regular"):"\\{"===t||"\\lbrace"===t?(o="\u23a7",s="\u23a8",h="\u23a9",l="\u23aa",m="Size4-Regular"):"\\}"===t||"\\rbrace"===t?(o="\u23ab",s="\u23ac",h="\u23ad",l="\u23aa",m="Size4-Regular"):"\\lgroup"===t||"\u27ee"===t?(o="\u23a7",h="\u23a9",l="\u23aa",m="Size4-Regular"):"\\rgroup"===t||"\u27ef"===t?(o="\u23ab",h="\u23ad",l="\u23aa",m="Size4-Regular"):"\\lmoustache"===t||"\u23b0"===t?(o="\u23a7",h="\u23ad",l="\u23aa",m="Size4-Regular"):"\\rmoustache"!==t&&"\u23b1"!==t||(o="\u23ab",h="\u23a9",l="\u23aa",m="Size4-Regular");var c=Ve(o,m,n),u=c.height+c.depth,p=Ve(l,m,n),d=p.height+p.depth,f=Ve(h,m,n),g=f.height+f.depth,x=0,v=1;if(null!==s){var b=Ve(s,m,n);x=b.height+b.depth,v=2}var y=u+g+x,k=Math.max(0,Math.ceil((e-y)/(v*d))),S=y+k*v*d,M=a.fontMetrics().axisHeight;r&&(M*=a.sizeMultiplier);var z=S/2-M,A=.005*(k+1)-d,T=[];if(T.push(We(h,m,n)),null===s)for(var B=0;B<k;B++)T.push(Xe),T.push(We(l,m,n));else{for(var C=0;C<k;C++)T.push(Xe),T.push(We(l,m,n));T.push({type:"kern",size:A}),T.push(We(l,m,n)),T.push(Xe),T.push(We(s,m,n));for(var q=0;q<k;q++)T.push(Xe),T.push(We(l,m,n))}if("\u239c"!==l&&"\u239f"!==l||0!==k)T.push({type:"kern",size:A}),T.push(We(l,m,n)),T.push(Xe);else{var N=Dt.svgData.leftParenInner[2]/2;T.push({type:"kern",size:-N});var I="\u239c"===l?"leftParenInner":"rightParenInner",O=Dt.staticSvg(I,a);T.push({type:"elem",elem:O}),T.push({type:"kern",size:-N})}T.push(We(o,m,n));var R=a.havingBaseStyle(w.TEXT),E=Dt.makeVList({positionType:"bottom",positionData:z,children:T},R);return Ue(Dt.makeSpan(["delimsizing","mult"],[E],R),w.TEXT,a,i)},je=function(t,e,r,a,n){var i=function(t,e,r){e*=1e3;var a="";switch(t){case"sqrtMain":a=function(t,e){return"M95,"+(622+t+e)+"\nc-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14\nc0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54\nc44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10\ns173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429\nc69,-144,104.5,-217.7,106.5,-221\nl"+t/2.075+" -"+t+"\nc5.3,-9.3,12,-14,20,-14\nH400000v"+(40+t)+"H845.2724\ns-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7\nc-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z\nM"+(834+t)+" "+e+"h400000v"+(40+t)+"h-400000z"}(e,80);break;case"sqrtSize1":a=function(t,e){return"M263,"+(601+t+e)+"c0.7,0,18,39.7,52,119\nc34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120\nc340,-704.7,510.7,-1060.3,512,-1067\nl"+t/2.084+" -"+t+"\nc4.7,-7.3,11,-11,19,-11\nH40000v"+(40+t)+"H1012.3\ns-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232\nc-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1\ns-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26\nc-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z\nM"+(1001+t)+" "+e+"h400000v"+(40+t)+"h-400000z"}(e,80);break;case"sqrtSize2":a=function(t,e){return"M983 "+(10+t+e)+"\nl"+t/3.13+" -"+t+"\nc4,-6.7,10,-10,18,-10 H400000v"+(40+t)+"\nH1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7\ns-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744\nc-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30\nc26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722\nc56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5\nc53.7,-170.3,84.5,-266.8,92.5,-289.5z\nM"+(1001+t)+" "+e+"h400000v"+(40+t)+"h-400000z"}(e,80);break;case"sqrtSize3":a=function(t,e){return"M424,"+(2398+t+e)+"\nc-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514\nc0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20\ns-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121\ns209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081\nl"+t/4.223+" -"+t+"c4,-6.7,10,-10,18,-10 H400000\nv"+(40+t)+"H1014.6\ns-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185\nc-2,6,-10,9,-24,9\nc-8,0,-12,-0.7,-12,-2z M"+(1001+t)+" "+e+"\nh400000v"+(40+t)+"h-400000z"}(e,80);break;case"sqrtSize4":a=function(t,e){return"M473,"+(2713+t+e)+"\nc339.3,-1799.3,509.3,-2700,510,-2702 l"+t/5.298+" -"+t+"\nc3.3,-7.3,9.3,-11,18,-11 H400000v"+(40+t)+"H1017.7\ns-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9\nc-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200\nc0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26\ns76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,\n606zM"+(1001+t)+" "+e+"h400000v"+(40+t)+"H1017.7z"}(e,80);break;case"sqrtTall":a=function(t,e,r){return"M702 "+(t+e)+"H400000"+(40+t)+"\nH742v"+(r-54-e-t)+"l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1\nh-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170\nc-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667\n219 661 l218 661zM702 "+e+"H400000v"+(40+t)+"H742z"}(e,80,r)}return a}(t,a,r),o=new P(t,i),s=new L([o],{width:"400em",height:e+"em",viewBox:"0 0 400000 "+r,preserveAspectRatio:"xMinYMin slice"});return Dt.makeSvgSpan(["hide-tail"],[s],n)},$e=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","\u230a","\u230b","\\lceil","\\rceil","\u2308","\u2309","\\surd"],Ze=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","\u27ee","\u27ef","\\lmoustache","\\rmoustache","\u23b0","\u23b1"],Ke=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],Je=[0,1.2,1.8,2.4,3],Qe=[{type:"small",style:w.SCRIPTSCRIPT},{type:"small",style:w.SCRIPT},{type:"small",style:w.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],tr=[{type:"small",style:w.SCRIPTSCRIPT},{type:"small",style:w.SCRIPT},{type:"small",style:w.TEXT},{type:"stack"}],er=[{type:"small",style:w.SCRIPTSCRIPT},{type:"small",style:w.SCRIPT},{type:"small",style:w.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],rr=function(t){if("small"===t.type)return"Main-Regular";if("large"===t.type)return"Size"+t.size+"-Regular";if("stack"===t.type)return"Size4-Regular";throw new Error("Add support for delim type '"+t.type+"' here.")},ar=function(t,e,r,a){for(var n=Math.min(2,3-a.style.size);n<r.length&&"stack"!==r[n].type;n++){var i=Ve(t,rr(r[n]),"math"),o=i.height+i.depth;if("small"===r[n].type&&(o*=a.havingBaseStyle(r[n].style).sizeMultiplier),o>e)return r[n]}return r[r.length-1]},nr=function(t,e,r,a,n,i){var o;"<"===t||"\\lt"===t||"\u27e8"===t?t="\\langle":">"!==t&&"\\gt"!==t&&"\u27e9"!==t||(t="\\rangle"),o=c.contains(Ke,t)?Qe:c.contains($e,t)?er:tr;var s=ar(t,e,o,a);return"small"===s.type?function(t,e,r,a,n,i){var o=Dt.makeSymbol(t,"Main-Regular",n,a),s=Ue(o,e,a,i);return r&&Ge(s,a,e),s}(t,s.style,r,a,n,i):"large"===s.type?Ye(t,s.size,r,a,n,i):_e(t,e,r,a,n,i)},ir=function(t,e){var r,a,n=e.havingBaseSizing(),i=ar("\\surd",t*n.sizeMultiplier,er,n),o=n.sizeMultiplier,s=Math.max(0,e.minRuleThickness-e.fontMetrics().sqrtRuleThickness),l=0,h=0,m=0;return"small"===i.type?(t<1?o=1:t<1.4&&(o=.7),h=(1+s)/o,(r=je("sqrtMain",l=(1+s+.08)/o,m=1e3+1e3*s+80,s,e)).style.minWidth="0.853em",a=.833/o):"large"===i.type?(m=1080*Je[i.size],h=(Je[i.size]+s)/o,l=(Je[i.size]+s+.08)/o,(r=je("sqrtSize"+i.size,l,m,s,e)).style.minWidth="1.02em",a=1/o):(l=t+s+.08,h=t+s,m=Math.floor(1e3*t+s)+80,(r=je("sqrtTall",l,m,s,e)).style.minWidth="0.742em",a=1.056),r.height=h,r.style.height=l+"em",{span:r,advanceWidth:a,ruleWidth:(e.fontMetrics().sqrtRuleThickness+s)*o}},or=function(t,e,r,a,n){if("<"===t||"\\lt"===t||"\u27e8"===t?t="\\langle":">"!==t&&"\\gt"!==t&&"\u27e9"!==t||(t="\\rangle"),c.contains($e,t)||c.contains(Ke,t))return Ye(t,e,!1,r,a,n);if(c.contains(Ze,t))return _e(t,Je[e],!1,r,a,n);throw new o("Illegal delimiter: '"+t+"'")},sr=nr,lr=function(t,e,r,a,n,i){var o=a.fontMetrics().axisHeight*a.sizeMultiplier,s=5/a.fontMetrics().ptPerEm,l=Math.max(e-o,r+o),h=Math.max(l/500*901,2*l-s);return nr(t,h,!0,a,n,i)},hr={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},mr=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","\u230a","\u230b","\\lceil","\\rceil","\u2308","\u2309","<",">","\\langle","\u27e8","\\rangle","\u27e9","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","\u27ee","\u27ef","\\lmoustache","\\rmoustache","\u23b0","\u23b1","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."];function cr(t,e){var r=Ne(t);if(r&&c.contains(mr,r.text))return r;throw new o(r?"Invalid delimiter '"+r.text+"' after '"+e.funcName+"'":"Invalid delimiter type '"+t.type+"'",t)}function ur(t){if(!t.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}_t({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1},handler:function(t,e){var r=cr(e[0],t);return{type:"delimsizing",mode:t.parser.mode,size:hr[t.funcName].size,mclass:hr[t.funcName].mclass,delim:r.text}},htmlBuilder:function(t,e){return"."===t.delim?Dt.makeSpan([t.mclass]):or(t.delim,t.size,e,t.mode,[t.mclass])},mathmlBuilder:function(t){var e=[];"."!==t.delim&&e.push(pe(t.delim,t.mode));var r=new ue.MathNode("mo",e);return"mopen"===t.mclass||"mclose"===t.mclass?r.setAttribute("fence","true"):r.setAttribute("fence","false"),r}}),_t({type:"leftright-right",names:["\\right"],props:{numArgs:1},handler:function(t,e){var r=t.parser.gullet.macros.get("\\current@color");if(r&&"string"!=typeof r)throw new o("\\current@color set to non-string in \\right");return{type:"leftright-right",mode:t.parser.mode,delim:cr(e[0],t).text,color:r}}}),_t({type:"leftright",names:["\\left"],props:{numArgs:1},handler:function(t,e){var r=cr(e[0],t),a=t.parser;++a.leftrightDepth;var n=a.parseExpression(!1);--a.leftrightDepth,a.expect("\\right",!1);var i=Ce(a.parseFunction(),"leftright-right");return{type:"leftright",mode:a.mode,body:n,left:r.text,right:i.delim,rightColor:i.color}},htmlBuilder:function(t,e){ur(t);for(var r,a,n=ee(t.body,e,!0,["mopen","mclose"]),i=0,o=0,s=!1,l=0;l<n.length;l++)n[l].isMiddle?s=!0:(i=Math.max(n[l].height,i),o=Math.max(n[l].depth,o));if(i*=e.sizeMultiplier,o*=e.sizeMultiplier,r="."===t.left?ie(e,["mopen"]):lr(t.left,i,o,e,t.mode,["mopen"]),n.unshift(r),s)for(var h=1;h<n.length;h++){var m=n[h].isMiddle;m&&(n[h]=lr(m.delim,i,o,m.options,t.mode,[]))}if("."===t.right)a=ie(e,["mclose"]);else{var c=t.rightColor?e.withColor(t.rightColor):e;a=lr(t.right,i,o,c,t.mode,["mclose"])}return n.push(a),Dt.makeSpan(["minner"],n,e)},mathmlBuilder:function(t,e){ur(t);var r=ge(t.body,e);if("."!==t.left){var a=new ue.MathNode("mo",[pe(t.left,t.mode)]);a.setAttribute("fence","true"),r.unshift(a)}if("."!==t.right){var n=new ue.MathNode("mo",[pe(t.right,t.mode)]);n.setAttribute("fence","true"),t.rightColor&&n.setAttribute("mathcolor",t.rightColor),r.push(n)}return de(r)}}),_t({type:"middle",names:["\\middle"],props:{numArgs:1},handler:function(t,e){var r=cr(e[0],t);if(!t.parser.leftrightDepth)throw new o("\\middle without preceding \\left",r);return{type:"middle",mode:t.parser.mode,delim:r.text}},htmlBuilder:function(t,e){var r;if("."===t.delim)r=ie(e,[]);else{r=or(t.delim,1,e,t.mode,[]);var a={delim:t.delim,options:e};r.isMiddle=a}return r},mathmlBuilder:function(t,e){var r="\\vert"===t.delim||"|"===t.delim?pe("|","text"):pe(t.delim,t.mode),a=new ue.MathNode("mo",[r]);return a.setAttribute("fence","true"),a.setAttribute("lspace","0.05em"),a.setAttribute("rspace","0.05em"),a}});var pr=function(t,e){var r,a,n=Dt.wrapFragment(oe(t.body,e),e),i=t.label.substr(1),o=e.sizeMultiplier,s=0,l=c.isCharacterBox(t.body);if("sout"===i)(r=Dt.makeSpan(["stretchy","sout"])).height=e.fontMetrics().defaultRuleThickness/o,s=-.5*e.fontMetrics().xHeight;else{/cancel/.test(i)?l||n.classes.push("cancel-pad"):n.classes.push("boxpad");var h=0,m=0;/box/.test(i)?(m=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness),h=e.fontMetrics().fboxsep+("colorbox"===i?0:m)):h=l?.2:0,r=Ae(n,i,h,e),/fbox|boxed|fcolorbox/.test(i)&&(r.style.borderStyle="solid",r.style.borderWidth=m+"em"),s=n.depth+h,t.backgroundColor&&(r.style.backgroundColor=t.backgroundColor,t.borderColor&&(r.style.borderColor=t.borderColor))}return a=t.backgroundColor?Dt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:r,shift:s},{type:"elem",elem:n,shift:0}]},e):Dt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:n,shift:0},{type:"elem",elem:r,shift:s,wrapperClasses:/cancel/.test(i)?["svg-align"]:[]}]},e),/cancel/.test(i)&&(a.height=n.height,a.depth=n.depth),/cancel/.test(i)&&!l?Dt.makeSpan(["mord","cancel-lap"],[a],e):Dt.makeSpan(["mord"],[a],e)},dr=function(t,e){var r=0,a=new ue.MathNode(t.label.indexOf("colorbox")>-1?"mpadded":"menclose",[ve(t.body,e)]);switch(t.label){case"\\cancel":a.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":a.setAttribute("notation","downdiagonalstrike");break;case"\\sout":a.setAttribute("notation","horizontalstrike");break;case"\\fbox":a.setAttribute("notation","box");break;case"\\fcolorbox":case"\\colorbox":if(r=e.fontMetrics().fboxsep*e.fontMetrics().ptPerEm,a.setAttribute("width","+"+2*r+"pt"),a.setAttribute("height","+"+2*r+"pt"),a.setAttribute("lspace",r+"pt"),a.setAttribute("voffset",r+"pt"),"\\fcolorbox"===t.label){var n=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness);a.setAttribute("style","border: "+n+"em solid "+String(t.borderColor))}break;case"\\xcancel":a.setAttribute("notation","updiagonalstrike downdiagonalstrike")}return t.backgroundColor&&a.setAttribute("mathbackground",t.backgroundColor),a};_t({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,greediness:3,argTypes:["color","text"]},handler:function(t,e,r){var a=t.parser,n=t.funcName,i=Ce(e[0],"color-token").color,o=e[1];return{type:"enclose",mode:a.mode,label:n,backgroundColor:i,body:o}},htmlBuilder:pr,mathmlBuilder:dr}),_t({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,greediness:3,argTypes:["color","color","text"]},handler:function(t,e,r){var a=t.parser,n=t.funcName,i=Ce(e[0],"color-token").color,o=Ce(e[1],"color-token").color,s=e[2];return{type:"enclose",mode:a.mode,label:n,backgroundColor:o,borderColor:i,body:s}},htmlBuilder:pr,mathmlBuilder:dr}),_t({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler:function(t,e){return{type:"enclose",mode:t.parser.mode,label:"\\fbox",body:e[0]}}}),_t({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout"],props:{numArgs:1},handler:function(t,e,r){var a=t.parser,n=t.funcName,i=e[0];return{type:"enclose",mode:a.mode,label:n,body:i}},htmlBuilder:pr,mathmlBuilder:dr});var fr={};function gr(t){for(var e=t.type,r=t.names,a=t.props,n=t.handler,i=t.htmlBuilder,o=t.mathmlBuilder,s={type:e,numArgs:a.numArgs||0,greediness:1,allowedInText:!1,numOptionalArgs:0,handler:n},l=0;l<r.length;++l)fr[r[l]]=s;i&&(Wt[e]=i),o&&(Xt[e]=o)}function xr(t){var e=[];t.consumeSpaces();for(var r=t.fetch().text;"\\hline"===r||"\\hdashline"===r;)t.consume(),e.push("\\hdashline"===r),t.consumeSpaces(),r=t.fetch().text;return e}function vr(t,e,r){var a=e.hskipBeforeAndAfter,n=e.addJot,i=e.cols,s=e.arraystretch,l=e.colSeparationType;if(t.gullet.beginGroup(),t.gullet.macros.set("\\\\","\\cr"),!s){var h=t.gullet.expandMacroAsText("\\arraystretch");if(null==h)s=1;else if(!(s=parseFloat(h))||s<0)throw new o("Invalid \\arraystretch: "+h)}t.gullet.beginGroup();var m=[],c=[m],u=[],p=[];for(p.push(xr(t));;){var d=t.parseExpression(!1,"\\cr");t.gullet.endGroup(),t.gullet.beginGroup(),d={type:"ordgroup",mode:t.mode,body:d},r&&(d={type:"styling",mode:t.mode,style:r,body:[d]}),m.push(d);var f=t.fetch().text;if("&"===f)t.consume();else{if("\\end"===f){1===m.length&&"styling"===d.type&&0===d.body[0].body.length&&c.pop(),p.length<c.length+1&&p.push([]);break}if("\\cr"!==f)throw new o("Expected & or \\\\ or \\cr or \\end",t.nextToken);var g=Ce(t.parseFunction(),"cr");u.push(g.size),p.push(xr(t)),m=[],c.push(m)}}return t.gullet.endGroup(),t.gullet.endGroup(),{type:"array",mode:t.mode,addJot:n,arraystretch:s,body:c,cols:i,rowGaps:u,hskipBeforeAndAfter:a,hLinesBeforeRow:p,colSeparationType:l}}function br(t){return"d"===t.substr(0,1)?"display":"text"}var yr=function(t,e){var r,a,n=t.body.length,i=t.hLinesBeforeRow,s=0,l=new Array(n),h=[],m=Math.max(e.fontMetrics().arrayRuleWidth,e.minRuleThickness),u=1/e.fontMetrics().ptPerEm,p=5*u;t.colSeparationType&&"small"===t.colSeparationType&&(p=e.havingStyle(w.SCRIPT).sizeMultiplier/e.sizeMultiplier*.2778);var d=12*u,f=3*u,g=t.arraystretch*d,x=.7*g,v=.3*g,b=0;function y(t){for(var e=0;e<t.length;++e)e>0&&(b+=.25),h.push({pos:b,isDashed:t[e]})}for(y(i[0]),r=0;r<t.body.length;++r){var k=t.body[r],S=x,M=v;s<k.length&&(s=k.length);var z=new Array(k.length);for(a=0;a<k.length;++a){var A=oe(k[a],e);M<A.depth&&(M=A.depth),S<A.height&&(S=A.height),z[a]=A}var T=t.rowGaps[r],B=0;T&&(B=Tt(T,e))>0&&(M<(B+=v)&&(M=B),B=0),t.addJot&&(M+=f),z.height=S,z.depth=M,b+=S,z.pos=b,b+=M+B,l[r]=z,y(i[r+1])}var C,q,N=b/2+e.fontMetrics().axisHeight,I=t.cols||[],O=[];for(a=0,q=0;a<s||q<I.length;++a,++q){for(var R=I[q]||{},E=!0;"separator"===R.type;){if(E||((C=Dt.makeSpan(["arraycolsep"],[])).style.width=e.fontMetrics().doubleRuleSep+"em",O.push(C)),"|"!==R.separator&&":"!==R.separator)throw new o("Invalid separator type: "+R.separator);var L="|"===R.separator?"solid":"dashed",P=Dt.makeSpan(["vertical-separator"],[],e);P.style.height=b+"em",P.style.borderRightWidth=m+"em",P.style.borderRightStyle=L,P.style.margin="0 -"+m/2+"em",P.style.verticalAlign=-(b-N)+"em",O.push(P),R=I[++q]||{},E=!1}if(!(a>=s)){var D=void 0;(a>0||t.hskipBeforeAndAfter)&&0!==(D=c.deflt(R.pregap,p))&&((C=Dt.makeSpan(["arraycolsep"],[])).style.width=D+"em",O.push(C));var H=[];for(r=0;r<n;++r){var F=l[r],V=F[a];if(V){var U=F.pos-N;V.depth=F.depth,V.height=F.height,H.push({type:"elem",elem:V,shift:U})}}H=Dt.makeVList({positionType:"individualShift",children:H},e),H=Dt.makeSpan(["col-align-"+(R.align||"c")],[H]),O.push(H),(a<s-1||t.hskipBeforeAndAfter)&&0!==(D=c.deflt(R.postgap,p))&&((C=Dt.makeSpan(["arraycolsep"],[])).style.width=D+"em",O.push(C))}}if(l=Dt.makeSpan(["mtable"],O),h.length>0){for(var G=Dt.makeLineSpan("hline",e,m),Y=Dt.makeLineSpan("hdashline",e,m),W=[{type:"elem",elem:l,shift:0}];h.length>0;){var X=h.pop(),_=X.pos-N;X.isDashed?W.push({type:"elem",elem:Y,shift:_}):W.push({type:"elem",elem:G,shift:_})}l=Dt.makeVList({positionType:"individualShift",children:W},e)}return Dt.makeSpan(["mord"],[l],e)},wr={c:"center ",l:"left ",r:"right "},kr=function(t,e){var r=new ue.MathNode("mtable",t.body.map(function(t){return new ue.MathNode("mtr",t.map(function(t){return new ue.MathNode("mtd",[ve(t,e)])}))})),a=.5===t.arraystretch?.1:.16+t.arraystretch-1+(t.addJot?.09:0);r.setAttribute("rowspacing",a+"em");var n="",i="";if(t.cols&&t.cols.length>0){var o=t.cols,s="",l=!1,h=0,m=o.length;"separator"===o[0].type&&(n+="top ",h=1),"separator"===o[o.length-1].type&&(n+="bottom ",m-=1);for(var c=h;c<m;c++)"align"===o[c].type?(i+=wr[o[c].align],l&&(s+="none "),l=!0):"separator"===o[c].type&&l&&(s+="|"===o[c].separator?"solid ":"dashed ",l=!1);r.setAttribute("columnalign",i.trim()),/[sd]/.test(s)&&r.setAttribute("columnlines",s.trim())}if("align"===t.colSeparationType){for(var u=t.cols||[],p="",d=1;d<u.length;d++)p+=d%2?"0em ":"1em ";r.setAttribute("columnspacing",p.trim())}else"alignat"===t.colSeparationType?r.setAttribute("columnspacing","0em"):"small"===t.colSeparationType?r.setAttribute("columnspacing","0.2778em"):r.setAttribute("columnspacing","1em");var f="",g=t.hLinesBeforeRow;n+=g[0].length>0?"left ":"",n+=g[g.length-1].length>0?"right ":"";for(var x=1;x<g.length-1;x++)f+=0===g[x].length?"none ":g[x][0]?"dashed ":"solid ";return/[sd]/.test(f)&&r.setAttribute("rowlines",f.trim()),""!==n&&(r=new ue.MathNode("menclose",[r])).setAttribute("notation",n.trim()),t.arraystretch&&t.arraystretch<1&&(r=new ue.MathNode("mstyle",[r])).setAttribute("scriptlevel","1"),r},Sr=function(t,e){var r,a=[],n=vr(t.parser,{cols:a,addJot:!0},"display"),i=0,s={type:"ordgroup",mode:t.mode,body:[]};if(e[0]&&"ordgroup"===e[0].type){for(var l="",h=0;h<e[0].body.length;h++){l+=Ce(e[0].body[h],"textord").text}r=Number(l),i=2*r}var m=!i;n.body.forEach(function(t){for(var e=1;e<t.length;e+=2){var a=Ce(t[e],"styling");Ce(a.body[0],"ordgroup").body.unshift(s)}if(m)i<t.length&&(i=t.length);else{var n=t.length/2;if(r<n)throw new o("Too many math in a row: expected "+r+", but got "+n,t[0])}});for(var c=0;c<i;++c){var u="r",p=0;c%2==1?u="l":c>0&&m&&(p=1),a[c]={type:"align",align:u,pregap:p,postgap:0}}return n.colSeparationType=m?"align":"alignat",n};gr({type:"array",names:["array","darray"],props:{numArgs:1},handler:function(t,e){var r={cols:(Ne(e[0])?[e[0]]:Ce(e[0],"ordgroup").body).map(function(t){var e=qe(t).text;if(-1!=="lcr".indexOf(e))return{type:"align",align:e};if("|"===e)return{type:"separator",separator:"|"};if(":"===e)return{type:"separator",separator:":"};throw new o("Unknown column alignment: "+e,t)}),hskipBeforeAndAfter:!0};return vr(t.parser,r,br(t.envName))},htmlBuilder:yr,mathmlBuilder:kr}),gr({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix"],props:{numArgs:0},handler:function(t){var e={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[t.envName],r=vr(t.parser,{hskipBeforeAndAfter:!1},br(t.envName));return e?{type:"leftright",mode:t.mode,body:[r],left:e[0],right:e[1],rightColor:void 0}:r},htmlBuilder:yr,mathmlBuilder:kr}),gr({type:"array",names:["smallmatrix"],props:{numArgs:0},handler:function(t){var e=vr(t.parser,{arraystretch:.5},"script");return e.colSeparationType="small",e},htmlBuilder:yr,mathmlBuilder:kr}),gr({type:"array",names:["subarray"],props:{numArgs:1},handler:function(t,e){var r=(Ne(e[0])?[e[0]]:Ce(e[0],"ordgroup").body).map(function(t){var e=qe(t).text;if(-1!=="lc".indexOf(e))return{type:"align",align:e};throw new o("Unknown column alignment: "+e,t)});if(r.length>1)throw new o("{subarray} can contain only one column");var a={cols:r,hskipBeforeAndAfter:!1,arraystretch:.5};if((a=vr(t.parser,a,"script")).body.length>0&&a.body[0].length>1)throw new o("{subarray} can contain only one column");return a},htmlBuilder:yr,mathmlBuilder:kr}),gr({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler:function(t){var e=vr(t.parser,{arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},br(t.envName));return{type:"leftright",mode:t.mode,body:[e],left:t.envName.indexOf("r")>-1?".":"\\{",right:t.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},htmlBuilder:yr,mathmlBuilder:kr}),gr({type:"array",names:["aligned"],props:{numArgs:0},handler:Sr,htmlBuilder:yr,mathmlBuilder:kr}),gr({type:"array",names:["gathered"],props:{numArgs:0},handler:function(t){return vr(t.parser,{cols:[{type:"align",align:"c"}],addJot:!0},"display")},htmlBuilder:yr,mathmlBuilder:kr}),gr({type:"array",names:["alignedat"],props:{numArgs:1},handler:Sr,htmlBuilder:yr,mathmlBuilder:kr}),_t({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler:function(t,e){throw new o(t.funcName+" valid only within array environment")}});var Mr=fr;_t({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler:function(t,e){var r=t.parser,a=t.funcName,n=e[0];if("ordgroup"!==n.type)throw new o("Invalid environment name",n);for(var i="",s=0;s<n.body.length;++s)i+=Ce(n.body[s],"textord").text;if("\\begin"===a){if(!Mr.hasOwnProperty(i))throw new o("No such environment: "+i,n);var l=Mr[i],h=r.parseArguments("\\begin{"+i+"}",l),m=h.args,c=h.optArgs,u={mode:r.mode,envName:i,parser:r},p=l.handler(u,m,c);r.expect("\\end",!1);var d=r.nextToken,f=Ce(r.parseFunction(),"environment");if(f.name!==i)throw new o("Mismatch: \\begin{"+i+"} matched by \\end{"+f.name+"}",d);return p}return{type:"environment",mode:r.mode,name:i,nameGroup:n}}});var zr=Dt.makeSpan;function Ar(t,e){var r=ee(t.body,e,!0);return zr([t.mclass],r,e)}function Tr(t,e){var r,a=ge(t.body,e);return"minner"===t.mclass?ue.newDocumentFragment(a):("mord"===t.mclass?t.isCharacterBox?(r=a[0]).type="mi":r=new ue.MathNode("mi",a):(t.isCharacterBox?(r=a[0]).type="mo":r=new ue.MathNode("mo",a),"mbin"===t.mclass?(r.attributes.lspace="0.22em",r.attributes.rspace="0.22em"):"mpunct"===t.mclass?(r.attributes.lspace="0em",r.attributes.rspace="0.17em"):"mopen"!==t.mclass&&"mclose"!==t.mclass||(r.attributes.lspace="0em",r.attributes.rspace="0em")),r)}_t({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1},handler:function(t,e){var r=t.parser,a=t.funcName,n=e[0];return{type:"mclass",mode:r.mode,mclass:"m"+a.substr(5),body:$t(n),isCharacterBox:c.isCharacterBox(n)}},htmlBuilder:Ar,mathmlBuilder:Tr});var Br=function(t){var e="ordgroup"===t.type&&t.body.length?t.body[0]:t;return"atom"!==e.type||"bin"!==e.family&&"rel"!==e.family?"mord":"m"+e.family};_t({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler:function(t,e){return{type:"mclass",mode:t.parser.mode,mclass:Br(e[0]),body:[e[1]],isCharacterBox:c.isCharacterBox(e[1])}}}),_t({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler:function(t,e){var r,a=t.parser,n=t.funcName,i=e[1],o=e[0];r="\\stackrel"!==n?Br(i):"mrel";var s={type:"op",mode:i.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:"\\stackrel"!==n,body:$t(i)},l={type:"supsub",mode:o.mode,base:s,sup:"\\underset"===n?null:o,sub:"\\underset"===n?o:null};return{type:"mclass",mode:a.mode,mclass:r,body:[l],isCharacterBox:c.isCharacterBox(l)}},htmlBuilder:Ar,mathmlBuilder:Tr});var Cr=function(t,e){var r=t.font,a=e.withFont(r);return oe(t.body,a)},qr=function(t,e){var r=t.font,a=e.withFont(r);return ve(t.body,a)},Nr={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};_t({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,greediness:2},handler:function(t,e){var r=t.parser,a=t.funcName,n=e[0],i=a;return i in Nr&&(i=Nr[i]),{type:"font",mode:r.mode,font:i.slice(1),body:n}},htmlBuilder:Cr,mathmlBuilder:qr}),_t({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1,greediness:2},handler:function(t,e){var r=t.parser,a=e[0],n=c.isCharacterBox(a);return{type:"mclass",mode:r.mode,mclass:Br(a),body:[{type:"font",mode:r.mode,font:"boldsymbol",body:a}],isCharacterBox:n}}}),_t({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:function(t,e){var r=t.parser,a=t.funcName,n=t.breakOnTokenText,i=r.mode,o=r.parseExpression(!0,n);return{type:"font",mode:i,font:"math"+a.slice(1),body:{type:"ordgroup",mode:r.mode,body:o}}},htmlBuilder:Cr,mathmlBuilder:qr});var Ir=function(t,e){var r=e;return"display"===t?r=r.id>=w.SCRIPT.id?r.text():w.DISPLAY:"text"===t&&r.size===w.DISPLAY.size?r=w.TEXT:"script"===t?r=w.SCRIPT:"scriptscript"===t&&(r=w.SCRIPTSCRIPT),r},Or=function(t,e){var r,a=Ir(t.size,e.style),n=a.fracNum(),i=a.fracDen();r=e.havingStyle(n);var o=oe(t.numer,r,e);if(t.continued){var s=8.5/e.fontMetrics().ptPerEm,l=3.5/e.fontMetrics().ptPerEm;o.height=o.height<s?s:o.height,o.depth=o.depth<l?l:o.depth}r=e.havingStyle(i);var h,m,c,u,p,d,f,g,x,v,b=oe(t.denom,r,e);if(t.hasBarLine?(t.barSize?(m=Tt(t.barSize,e),h=Dt.makeLineSpan("frac-line",e,m)):h=Dt.makeLineSpan("frac-line",e),m=h.height,c=h.height):(h=null,m=0,c=e.fontMetrics().defaultRuleThickness),a.size===w.DISPLAY.size||"display"===t.size?(u=e.fontMetrics().num1,p=m>0?3*c:7*c,d=e.fontMetrics().denom1):(m>0?(u=e.fontMetrics().num2,p=c):(u=e.fontMetrics().num3,p=3*c),d=e.fontMetrics().denom2),h){var y=e.fontMetrics().axisHeight;u-o.depth-(y+.5*m)<p&&(u+=p-(u-o.depth-(y+.5*m))),y-.5*m-(b.height-d)<p&&(d+=p-(y-.5*m-(b.height-d)));var k=-(y-.5*m);f=Dt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:b,shift:d},{type:"elem",elem:h,shift:k},{type:"elem",elem:o,shift:-u}]},e)}else{var S=u-o.depth-(b.height-d);S<p&&(u+=.5*(p-S),d+=.5*(p-S)),f=Dt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:b,shift:d},{type:"elem",elem:o,shift:-u}]},e)}return r=e.havingStyle(a),f.height*=r.sizeMultiplier/e.sizeMultiplier,f.depth*=r.sizeMultiplier/e.sizeMultiplier,g=a.size===w.DISPLAY.size?e.fontMetrics().delim1:e.fontMetrics().delim2,x=null==t.leftDelim?ie(e,["mopen"]):sr(t.leftDelim,g,!0,e.havingStyle(a),t.mode,["mopen"]),v=t.continued?Dt.makeSpan([]):null==t.rightDelim?ie(e,["mclose"]):sr(t.rightDelim,g,!0,e.havingStyle(a),t.mode,["mclose"]),Dt.makeSpan(["mord"].concat(r.sizingClasses(e)),[x,Dt.makeSpan(["mfrac"],[f]),v],e)},Rr=function(t,e){var r=new ue.MathNode("mfrac",[ve(t.numer,e),ve(t.denom,e)]);if(t.hasBarLine){if(t.barSize){var a=Tt(t.barSize,e);r.setAttribute("linethickness",a+"em")}}else r.setAttribute("linethickness","0px");var n=Ir(t.size,e.style);if(n.size!==e.style.size){r=new ue.MathNode("mstyle",[r]);var i=n.size===w.DISPLAY.size?"true":"false";r.setAttribute("displaystyle",i),r.setAttribute("scriptlevel","0")}if(null!=t.leftDelim||null!=t.rightDelim){var o=[];if(null!=t.leftDelim){var s=new ue.MathNode("mo",[new ue.TextNode(t.leftDelim.replace("\\",""))]);s.setAttribute("fence","true"),o.push(s)}if(o.push(r),null!=t.rightDelim){var l=new ue.MathNode("mo",[new ue.TextNode(t.rightDelim.replace("\\",""))]);l.setAttribute("fence","true"),o.push(l)}return de(o)}return r};_t({type:"genfrac",names:["\\cfrac","\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,greediness:2},handler:function(t,e){var r,a=t.parser,n=t.funcName,i=e[0],o=e[1],s=null,l=null,h="auto";switch(n){case"\\cfrac":case"\\dfrac":case"\\frac":case"\\tfrac":r=!0;break;case"\\\\atopfrac":r=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":r=!1,s="(",l=")";break;case"\\\\bracefrac":r=!1,s="\\{",l="\\}";break;case"\\\\brackfrac":r=!1,s="[",l="]";break;default:throw new Error("Unrecognized genfrac command")}switch(n){case"\\cfrac":case"\\dfrac":case"\\dbinom":h="display";break;case"\\tfrac":case"\\tbinom":h="text"}return{type:"genfrac",mode:a.mode,continued:"\\cfrac"===n,numer:i,denom:o,hasBarLine:r,leftDelim:s,rightDelim:l,size:h,barSize:null}},htmlBuilder:Or,mathmlBuilder:Rr}),_t({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler:function(t){var e,r=t.parser,a=t.funcName,n=t.token;switch(a){case"\\over":e="\\frac";break;case"\\choose":e="\\binom";break;case"\\atop":e="\\\\atopfrac";break;case"\\brace":e="\\\\bracefrac";break;case"\\brack":e="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:r.mode,replaceWith:e,token:n}}});var Er=["display","text","script","scriptscript"],Lr=function(t){var e=null;return t.length>0&&(e="."===(e=t)?null:e),e};_t({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,greediness:6,argTypes:["math","math","size","text","math","math"]},handler:function(t,e){var r,a=t.parser,n=e[4],i=e[5],o="atom"===e[0].type&&"open"===e[0].family?Lr(e[0].text):null,s="atom"===e[1].type&&"close"===e[1].family?Lr(e[1].text):null,l=Ce(e[2],"size"),h=null;r=!!l.isBlank||(h=l.value).number>0;var m="auto",c=e[3];if("ordgroup"===c.type){if(c.body.length>0){var u=Ce(c.body[0],"textord");m=Er[Number(u.text)]}}else c=Ce(c,"textord"),m=Er[Number(c.text)];return{type:"genfrac",mode:a.mode,numer:n,denom:i,continued:!1,hasBarLine:r,barSize:h,leftDelim:o,rightDelim:s,size:m}},htmlBuilder:Or,mathmlBuilder:Rr}),_t({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler:function(t,e){var r=t.parser,a=(t.funcName,t.token);return{type:"infix",mode:r.mode,replaceWith:"\\\\abovefrac",size:Ce(e[0],"size").value,token:a}}}),_t({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:function(t,e){var r=t.parser,a=(t.funcName,e[0]),n=function(t){if(!t)throw new Error("Expected non-null, but got "+String(t));return t}(Ce(e[1],"infix").size),i=e[2],o=n.number>0;return{type:"genfrac",mode:r.mode,numer:a,denom:i,continued:!1,hasBarLine:o,barSize:n,leftDelim:null,rightDelim:null,size:"auto"}},htmlBuilder:Or,mathmlBuilder:Rr});var Pr=function(t,e){var r,a,n=e.style;"supsub"===t.type?(r=t.sup?oe(t.sup,e.havingStyle(n.sup()),e):oe(t.sub,e.havingStyle(n.sub()),e),a=Ce(t.base,"horizBrace")):a=Ce(t,"horizBrace");var i,o=oe(a.base,e.havingBaseStyle(w.DISPLAY)),s=Be(a,e);if(a.isOver?(i=Dt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:o},{type:"kern",size:.1},{type:"elem",elem:s}]},e)).children[0].children[0].children[1].classes.push("svg-align"):(i=Dt.makeVList({positionType:"bottom",positionData:o.depth+.1+s.height,children:[{type:"elem",elem:s},{type:"kern",size:.1},{type:"elem",elem:o}]},e)).children[0].children[0].children[0].classes.push("svg-align"),r){var l=Dt.makeSpan(["mord",a.isOver?"mover":"munder"],[i],e);i=a.isOver?Dt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:l},{type:"kern",size:.2},{type:"elem",elem:r}]},e):Dt.makeVList({positionType:"bottom",positionData:l.depth+.2+r.height+r.depth,children:[{type:"elem",elem:r},{type:"kern",size:.2},{type:"elem",elem:l}]},e)}return Dt.makeSpan(["mord",a.isOver?"mover":"munder"],[i],e)};_t({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler:function(t,e){var r=t.parser,a=t.funcName;return{type:"horizBrace",mode:r.mode,label:a,isOver:/^\\over/.test(a),base:e[0]}},htmlBuilder:Pr,mathmlBuilder:function(t,e){var r=Te(t.label);return new ue.MathNode(t.isOver?"mover":"munder",[ve(t.base,e),r])}}),_t({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:function(t,e){var r=t.parser,a=e[1],n=Ce(e[0],"url").url;return r.settings.isTrusted({command:"\\href",url:n})?{type:"href",mode:r.mode,href:n,body:$t(a)}:r.formatUnsupportedCmd("\\href")},htmlBuilder:function(t,e){var r=ee(t.body,e,!1);return Dt.makeAnchor(t.href,[],r,e)},mathmlBuilder:function(t,e){var r=xe(t.body,e);return r instanceof me||(r=new me("mrow",[r])),r.setAttribute("href",t.href),r}}),_t({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:function(t,e){var r=t.parser,a=Ce(e[0],"url").url;if(!r.settings.isTrusted({command:"\\url",url:a}))return r.formatUnsupportedCmd("\\url");for(var n=[],i=0;i<a.length;i++){var o=a[i];"~"===o&&(o="\\textasciitilde"),n.push({type:"textord",mode:"text",text:o})}var s={type:"text",mode:r.mode,font:"\\texttt",body:n};return{type:"href",mode:r.mode,href:a,body:$t(s)}}}),_t({type:"html",names:["\\htmlClass","\\htmlId","\\htmlStyle","\\htmlData"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:function(t,e){var r,a=t.parser,n=t.funcName,i=(t.token,Ce(e[0],"raw").string),s=e[1];a.settings.strict&&a.settings.reportNonstrict("htmlExtension","HTML extension is disabled on strict mode");var l={};switch(n){case"\\htmlClass":l.class=i,r={command:"\\htmlClass",class:i};break;case"\\htmlId":l.id=i,r={command:"\\htmlId",id:i};break;case"\\htmlStyle":l.style=i,r={command:"\\htmlStyle",style:i};break;case"\\htmlData":for(var h=i.split(","),m=0;m<h.length;m++){var c=h[m].split("=");if(2!==c.length)throw new o("Error parsing key-value for \\htmlData");l["data-"+c[0].trim()]=c[1].trim()}r={command:"\\htmlData",attributes:l};break;default:throw new Error("Unrecognized html command")}return a.settings.isTrusted(r)?{type:"html",mode:a.mode,attributes:l,body:$t(s)}:a.formatUnsupportedCmd(n)},htmlBuilder:function(t,e){var r=ee(t.body,e,!1),a=["enclosing"];t.attributes.class&&a.push.apply(a,t.attributes.class.trim().split(/\s+/));var n=Dt.makeSpan(a,r,e);for(var i in t.attributes)"class"!==i&&t.attributes.hasOwnProperty(i)&&n.setAttribute(i,t.attributes[i]);return n},mathmlBuilder:function(t,e){return xe(t.body,e)}}),_t({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:function(t,e){return{type:"htmlmathml",mode:t.parser.mode,html:$t(e[0]),mathml:$t(e[1])}},htmlBuilder:function(t,e){var r=ee(t.html,e,!1);return Dt.makeFragment(r)},mathmlBuilder:function(t,e){return xe(t.mathml,e)}});var Dr=function(t){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(t))return{number:+t,unit:"bp"};var e=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(t);if(!e)throw new o("Invalid size: '"+t+"' in \\includegraphics");var r={number:+(e[1]+e[2]),unit:e[3]};if(!At(r))throw new o("Invalid unit: '"+r.unit+"' in \\includegraphics.");return r};_t({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:function(t,e,r){var a=t.parser,n={number:0,unit:"em"},i={number:.9,unit:"em"},s={number:0,unit:"em"},l="";if(r[0])for(var h=Ce(r[0],"raw").string.split(","),m=0;m<h.length;m++){var c=h[m].split("=");if(2===c.length){var u=c[1].trim();switch(c[0].trim()){case"alt":l=u;break;case"width":n=Dr(u);break;case"height":i=Dr(u);break;case"totalheight":s=Dr(u);break;default:throw new o("Invalid key: '"+c[0]+"' in \\includegraphics.")}}}var p=Ce(e[0],"url").url;return""===l&&(l=(l=(l=p).replace(/^.*[\\/]/,"")).substring(0,l.lastIndexOf("."))),a.settings.isTrusted({command:"\\includegraphics",url:p})?{type:"includegraphics",mode:a.mode,alt:l,width:n,height:i,totalheight:s,src:p}:a.formatUnsupportedCmd("\\includegraphics")},htmlBuilder:function(t,e){var r=Tt(t.height,e),a=0;t.totalheight.number>0&&(a=Tt(t.totalheight,e)-r,a=Number(a.toFixed(2)));var n=0;t.width.number>0&&(n=Tt(t.width,e));var i={height:r+a+"em"};n>0&&(i.width=n+"em"),a>0&&(i.verticalAlign=-a+"em");var o=new O(t.src,t.alt,i);return o.height=r,o.depth=a,o},mathmlBuilder:function(t,e){var r=new ue.MathNode("mglyph",[]);r.setAttribute("alt",t.alt);var a=Tt(t.height,e),n=0;if(t.totalheight.number>0&&(n=(n=Tt(t.totalheight,e)-a).toFixed(2),r.setAttribute("valign","-"+n+"em")),r.setAttribute("height",a+n+"em"),t.width.number>0){var i=Tt(t.width,e);r.setAttribute("width",i+"em")}return r.setAttribute("src",t.src),r}}),_t({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],allowedInText:!0},handler:function(t,e){var r=t.parser,a=t.funcName,n=Ce(e[0],"size");if(r.settings.strict){var i="m"===a[1],o="mu"===n.value.unit;i?(o||r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+a+" supports only mu units, not "+n.value.unit+" units"),"math"!==r.mode&&r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+a+" works only in math mode")):o&&r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+a+" doesn't support mu units")}return{type:"kern",mode:r.mode,dimension:n.value}},htmlBuilder:function(t,e){return Dt.makeGlue(t.dimension,e)},mathmlBuilder:function(t,e){var r=Tt(t.dimension,e);return new ue.SpaceNode(r)}}),_t({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:function(t,e){var r=t.parser,a=t.funcName,n=e[0];return{type:"lap",mode:r.mode,alignment:a.slice(5),body:n}},htmlBuilder:function(t,e){var r;"clap"===t.alignment?(r=Dt.makeSpan([],[oe(t.body,e)]),r=Dt.makeSpan(["inner"],[r],e)):r=Dt.makeSpan(["inner"],[oe(t.body,e)]);var a=Dt.makeSpan(["fix"],[]),n=Dt.makeSpan([t.alignment],[r,a],e),i=Dt.makeSpan(["strut"]);return i.style.height=n.height+n.depth+"em",i.style.verticalAlign=-n.depth+"em",n.children.unshift(i),n=Dt.makeSpan(["thinbox"],[n],e),Dt.makeSpan(["mord","vbox"],[n],e)},mathmlBuilder:function(t,e){var r=new ue.MathNode("mpadded",[ve(t.body,e)]);if("rlap"!==t.alignment){var a="llap"===t.alignment?"-1":"-0.5";r.setAttribute("lspace",a+"width")}return r.setAttribute("width","0px"),r}}),_t({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler:function(t,e){var r=t.funcName,a=t.parser,n=a.mode;a.switchMode("math");var i="\\("===r?"\\)":"$",o=a.parseExpression(!1,i);return a.expect(i),a.switchMode(n),{type:"styling",mode:a.mode,style:"text",body:o}}}),_t({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler:function(t,e){throw new o("Mismatched "+t.funcName)}});var Hr=function(t,e){switch(e.style.size){case w.DISPLAY.size:return t.display;case w.TEXT.size:return t.text;case w.SCRIPT.size:return t.script;case w.SCRIPTSCRIPT.size:return t.scriptscript;default:return t.text}};_t({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4},handler:function(t,e){return{type:"mathchoice",mode:t.parser.mode,display:$t(e[0]),text:$t(e[1]),script:$t(e[2]),scriptscript:$t(e[3])}},htmlBuilder:function(t,e){var r=Hr(t,e),a=ee(r,e,!1);return Dt.makeFragment(a)},mathmlBuilder:function(t,e){var r=Hr(t,e);return xe(r,e)}});var Fr=function(t,e,r,a,n,i,o){var s,l,h;if(t=Dt.makeSpan([],[t]),e){var m=oe(e,a.havingStyle(n.sup()),a);l={elem:m,kern:Math.max(a.fontMetrics().bigOpSpacing1,a.fontMetrics().bigOpSpacing3-m.depth)}}if(r){var c=oe(r,a.havingStyle(n.sub()),a);s={elem:c,kern:Math.max(a.fontMetrics().bigOpSpacing2,a.fontMetrics().bigOpSpacing4-c.height)}}if(l&&s){var u=a.fontMetrics().bigOpSpacing5+s.elem.height+s.elem.depth+s.kern+t.depth+o;h=Dt.makeVList({positionType:"bottom",positionData:u,children:[{type:"kern",size:a.fontMetrics().bigOpSpacing5},{type:"elem",elem:s.elem,marginLeft:-i+"em"},{type:"kern",size:s.kern},{type:"elem",elem:t},{type:"kern",size:l.kern},{type:"elem",elem:l.elem,marginLeft:i+"em"},{type:"kern",size:a.fontMetrics().bigOpSpacing5}]},a)}else if(s){var p=t.height-o;h=Dt.makeVList({positionType:"top",positionData:p,children:[{type:"kern",size:a.fontMetrics().bigOpSpacing5},{type:"elem",elem:s.elem,marginLeft:-i+"em"},{type:"kern",size:s.kern},{type:"elem",elem:t}]},a)}else{if(!l)return t;var d=t.depth+o;h=Dt.makeVList({positionType:"bottom",positionData:d,children:[{type:"elem",elem:t},{type:"kern",size:l.kern},{type:"elem",elem:l.elem,marginLeft:i+"em"},{type:"kern",size:a.fontMetrics().bigOpSpacing5}]},a)}return Dt.makeSpan(["mop","op-limits"],[h],a)},Vr=["\\smallint"],Ur=function(t,e){var r,a,n,i=!1;"supsub"===t.type?(r=t.sup,a=t.sub,n=Ce(t.base,"op"),i=!0):n=Ce(t,"op");var o,s=e.style,l=!1;if(s.size===w.DISPLAY.size&&n.symbol&&!c.contains(Vr,n.name)&&(l=!0),n.symbol){var h=l?"Size2-Regular":"Size1-Regular",m="";if("\\oiint"!==n.name&&"\\oiiint"!==n.name||(m=n.name.substr(1),n.name="oiint"===m?"\\iint":"\\iiint"),o=Dt.makeSymbol(n.name,h,"math",e,["mop","op-symbol",l?"large-op":"small-op"]),m.length>0){var u=o.italic,p=Dt.staticSvg(m+"Size"+(l?"2":"1"),e);o=Dt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:o,shift:0},{type:"elem",elem:p,shift:l?.08:0}]},e),n.name="\\"+m,o.classes.unshift("mop"),o.italic=u}}else if(n.body){var d=ee(n.body,e,!0);1===d.length&&d[0]instanceof E?(o=d[0]).classes[0]="mop":o=Dt.makeSpan(["mop"],Dt.tryCombineChars(d),e)}else{for(var f=[],g=1;g<n.name.length;g++)f.push(Dt.mathsym(n.name[g],n.mode,e));o=Dt.makeSpan(["mop"],f,e)}var x=0,v=0;return(o instanceof E||"\\oiint"===n.name||"\\oiiint"===n.name)&&!n.suppressBaseShift&&(x=(o.height-o.depth)/2-e.fontMetrics().axisHeight,v=o.italic),i?Fr(o,r,a,e,s,v,x):(x&&(o.style.position="relative",o.style.top=x+"em"),o)},Gr=function(t,e){var r;if(t.symbol)r=new me("mo",[pe(t.name,t.mode)]),c.contains(Vr,t.name)&&r.setAttribute("largeop","false");else if(t.body)r=new me("mo",ge(t.body,e));else{r=new me("mi",[new ce(t.name.slice(1))]);var a=new me("mo",[pe("\u2061","text")]);r=t.parentIsSupSub?new me("mo",[r,a]):he([r,a])}return r},Yr={"\u220f":"\\prod","\u2210":"\\coprod","\u2211":"\\sum","\u22c0":"\\bigwedge","\u22c1":"\\bigvee","\u22c2":"\\bigcap","\u22c3":"\\bigcup","\u2a00":"\\bigodot","\u2a01":"\\bigoplus","\u2a02":"\\bigotimes","\u2a04":"\\biguplus","\u2a06":"\\bigsqcup"};_t({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","\u220f","\u2210","\u2211","\u22c0","\u22c1","\u22c2","\u22c3","\u2a00","\u2a01","\u2a02","\u2a04","\u2a06"],props:{numArgs:0},handler:function(t,e){var r=t.parser,a=t.funcName;return 1===a.length&&(a=Yr[a]),{type:"op",mode:r.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:a}},htmlBuilder:Ur,mathmlBuilder:Gr}),_t({type:"op",names:["\\mathop"],props:{numArgs:1},handler:function(t,e){var r=t.parser,a=e[0];return{type:"op",mode:r.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:$t(a)}},htmlBuilder:Ur,mathmlBuilder:Gr});var Wr={"\u222b":"\\int","\u222c":"\\iint","\u222d":"\\iiint","\u222e":"\\oint","\u222f":"\\oiint","\u2230":"\\oiiint"};_t({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler:function(t){var e=t.parser,r=t.funcName;return{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:r}},htmlBuilder:Ur,mathmlBuilder:Gr}),_t({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler:function(t){var e=t.parser,r=t.funcName;return{type:"op",mode:e.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:r}},htmlBuilder:Ur,mathmlBuilder:Gr}),_t({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","\u222b","\u222c","\u222d","\u222e","\u222f","\u2230"],props:{numArgs:0},handler:function(t){var e=t.parser,r=t.funcName;return 1===r.length&&(r=Wr[r]),{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:r}},htmlBuilder:Ur,mathmlBuilder:Gr});var Xr=function(t,e){var r,a,n,i,o=!1;if("supsub"===t.type?(r=t.sup,a=t.sub,n=Ce(t.base,"operatorname"),o=!0):n=Ce(t,"operatorname"),n.body.length>0){for(var s=n.body.map(function(t){var e=t.text;return"string"==typeof e?{type:"textord",mode:t.mode,text:e}:t}),l=ee(s,e.withFont("mathrm"),!0),h=0;h<l.length;h++){var m=l[h];m instanceof E&&(m.text=m.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}i=Dt.makeSpan(["mop"],l,e)}else i=Dt.makeSpan(["mop"],[],e);return o?Fr(i,r,a,e,e.style,0,0):i};function _r(t,e,r){for(var a=ee(t,e,!1),n=e.sizeMultiplier/r.sizeMultiplier,i=0;i<a.length;i++){var o=a[i].classes.indexOf("sizing");o<0?Array.prototype.push.apply(a[i].classes,e.sizingClasses(r)):a[i].classes[o+1]==="reset-size"+e.size&&(a[i].classes[o+1]="reset-size"+r.size),a[i].height*=n,a[i].depth*=n}return Dt.makeFragment(a)}_t({type:"operatorname",names:["\\operatorname","\\operatorname*"],props:{numArgs:1},handler:function(t,e){var r=t.parser,a=t.funcName,n=e[0];return{type:"operatorname",mode:r.mode,body:$t(n),alwaysHandleSupSub:"\\operatorname*"===a,limits:!1,parentIsSupSub:!1}},htmlBuilder:Xr,mathmlBuilder:function(t,e){for(var r=ge(t.body,e.withFont("mathrm")),a=!0,n=0;n<r.length;n++){var i=r[n];if(i instanceof ue.SpaceNode);else if(i instanceof ue.MathNode)switch(i.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":var o=i.children[0];1===i.children.length&&o instanceof ue.TextNode?o.text=o.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):a=!1;break;default:a=!1}else a=!1}if(a){var s=r.map(function(t){return t.toText()}).join("");r=[new ue.TextNode(s)]}var l=new ue.MathNode("mi",r);l.setAttribute("mathvariant","normal");var h=new ue.MathNode("mo",[pe("\u2061","text")]);return t.parentIsSupSub?new ue.MathNode("mo",[l,h]):ue.newDocumentFragment([l,h])}}),jt({type:"ordgroup",htmlBuilder:function(t,e){return t.semisimple?Dt.makeFragment(ee(t.body,e,!1)):Dt.makeSpan(["mord"],ee(t.body,e,!0),e)},mathmlBuilder:function(t,e){return xe(t.body,e,!0)}}),_t({type:"overline",names:["\\overline"],props:{numArgs:1},handler:function(t,e){var r=t.parser,a=e[0];return{type:"overline",mode:r.mode,body:a}},htmlBuilder:function(t,e){var r=oe(t.body,e.havingCrampedStyle()),a=Dt.makeLineSpan("overline-line",e),n=e.fontMetrics().defaultRuleThickness,i=Dt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r},{type:"kern",size:3*n},{type:"elem",elem:a},{type:"kern",size:n}]},e);return Dt.makeSpan(["mord","overline"],[i],e)},mathmlBuilder:function(t,e){var r=new ue.MathNode("mo",[new ue.TextNode("\u203e")]);r.setAttribute("stretchy","true");var a=new ue.MathNode("mover",[ve(t.body,e),r]);return a.setAttribute("accent","true"),a}}),_t({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:function(t,e){var r=t.parser,a=e[0];return{type:"phantom",mode:r.mode,body:$t(a)}},htmlBuilder:function(t,e){var r=ee(t.body,e.withPhantom(),!1);return Dt.makeFragment(r)},mathmlBuilder:function(t,e){var r=ge(t.body,e);return new ue.MathNode("mphantom",r)}}),_t({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:function(t,e){var r=t.parser,a=e[0];return{type:"hphantom",mode:r.mode,body:a}},htmlBuilder:function(t,e){var r=Dt.makeSpan([],[oe(t.body,e.withPhantom())]);if(r.height=0,r.depth=0,r.children)for(var a=0;a<r.children.length;a++)r.children[a].height=0,r.children[a].depth=0;return r=Dt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r}]},e),Dt.makeSpan(["mord"],[r],e)},mathmlBuilder:function(t,e){var r=ge($t(t.body),e),a=new ue.MathNode("mphantom",r),n=new ue.MathNode("mpadded",[a]);return n.setAttribute("height","0px"),n.setAttribute("depth","0px"),n}}),_t({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:function(t,e){var r=t.parser,a=e[0];return{type:"vphantom",mode:r.mode,body:a}},htmlBuilder:function(t,e){var r=Dt.makeSpan(["inner"],[oe(t.body,e.withPhantom())]),a=Dt.makeSpan(["fix"],[]);return Dt.makeSpan(["mord","rlap"],[r,a],e)},mathmlBuilder:function(t,e){var r=ge($t(t.body),e),a=new ue.MathNode("mphantom",r),n=new ue.MathNode("mpadded",[a]);return n.setAttribute("width","0px"),n}}),_t({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler:function(t,e){var r=t.parser,a=Ce(e[0],"size").value,n=e[1];return{type:"raisebox",mode:r.mode,dy:a,body:n}},htmlBuilder:function(t,e){var r=oe(t.body,e),a=Tt(t.dy,e);return Dt.makeVList({positionType:"shift",positionData:-a,children:[{type:"elem",elem:r}]},e)},mathmlBuilder:function(t,e){var r=new ue.MathNode("mpadded",[ve(t.body,e)]),a=t.dy.number+t.dy.unit;return r.setAttribute("voffset",a),r}}),_t({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,argTypes:["size","size","size"]},handler:function(t,e,r){var a=t.parser,n=r[0],i=Ce(e[0],"size"),o=Ce(e[1],"size");return{type:"rule",mode:a.mode,shift:n&&Ce(n,"size").value,width:i.value,height:o.value}},htmlBuilder:function(t,e){var r=Dt.makeSpan(["mord","rule"],[],e),a=Tt(t.width,e),n=Tt(t.height,e),i=t.shift?Tt(t.shift,e):0;return r.style.borderRightWidth=a+"em",r.style.borderTopWidth=n+"em",r.style.bottom=i+"em",r.width=a,r.height=n+i,r.depth=-i,r.maxFontSize=1.125*n*e.sizeMultiplier,r},mathmlBuilder:function(t,e){var r=Tt(t.width,e),a=Tt(t.height,e),n=t.shift?Tt(t.shift,e):0,i=e.color&&e.getColor()||"black",o=new ue.MathNode("mspace");o.setAttribute("mathbackground",i),o.setAttribute("width",r+"em"),o.setAttribute("height",a+"em");var s=new ue.MathNode("mpadded",[o]);return n>=0?s.setAttribute("height","+"+n+"em"):(s.setAttribute("height",n+"em"),s.setAttribute("depth","+"+-n+"em")),s.setAttribute("voffset",n+"em"),s}});var jr=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"];_t({type:"sizing",names:jr,props:{numArgs:0,allowedInText:!0},handler:function(t,e){var r=t.breakOnTokenText,a=t.funcName,n=t.parser,i=n.parseExpression(!1,r);return{type:"sizing",mode:n.mode,size:jr.indexOf(a)+1,body:i}},htmlBuilder:function(t,e){var r=e.havingSize(t.size);return _r(t.body,r,e)},mathmlBuilder:function(t,e){var r=e.havingSize(t.size),a=ge(t.body,r),n=new ue.MathNode("mstyle",a);return n.setAttribute("mathsize",r.sizeMultiplier+"em"),n}}),_t({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:function(t,e,r){var a=t.parser,n=!1,i=!1,o=r[0]&&Ce(r[0],"ordgroup");if(o)for(var s="",l=0;l<o.body.length;++l){if("t"===(s=o.body[l].text))n=!0;else{if("b"!==s){n=!1,i=!1;break}i=!0}}else n=!0,i=!0;var h=e[0];return{type:"smash",mode:a.mode,body:h,smashHeight:n,smashDepth:i}},htmlBuilder:function(t,e){var r=Dt.makeSpan([],[oe(t.body,e)]);if(!t.smashHeight&&!t.smashDepth)return r;if(t.smashHeight&&(r.height=0,r.children))for(var a=0;a<r.children.length;a++)r.children[a].height=0;if(t.smashDepth&&(r.depth=0,r.children))for(var n=0;n<r.children.length;n++)r.children[n].depth=0;var i=Dt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r}]},e);return Dt.makeSpan(["mord"],[i],e)},mathmlBuilder:function(t,e){var r=new ue.MathNode("mpadded",[ve(t.body,e)]);return t.smashHeight&&r.setAttribute("height","0px"),t.smashDepth&&r.setAttribute("depth","0px"),r}}),_t({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler:function(t,e,r){var a=t.parser,n=r[0],i=e[0];return{type:"sqrt",mode:a.mode,body:i,index:n}},htmlBuilder:function(t,e){var r=oe(t.body,e.havingCrampedStyle());0===r.height&&(r.height=e.fontMetrics().xHeight),r=Dt.wrapFragment(r,e);var a=e.fontMetrics().defaultRuleThickness,n=a;e.style.id<w.TEXT.id&&(n=e.fontMetrics().xHeight);var i=a+n/4,o=r.height+r.depth+i+a,s=ir(o,e),l=s.span,h=s.ruleWidth,m=s.advanceWidth,c=l.height-h;c>r.height+r.depth+i&&(i=(i+c-r.height-r.depth)/2);var u=l.height-r.height-i-h;r.style.paddingLeft=m+"em";var p=Dt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r,wrapperClasses:["svg-align"]},{type:"kern",size:-(r.height+u)},{type:"elem",elem:l},{type:"kern",size:h}]},e);if(t.index){var d=e.havingStyle(w.SCRIPTSCRIPT),f=oe(t.index,d,e),g=.6*(p.height-p.depth),x=Dt.makeVList({positionType:"shift",positionData:-g,children:[{type:"elem",elem:f}]},e),v=Dt.makeSpan(["root"],[x]);return Dt.makeSpan(["mord","sqrt"],[v,p],e)}return Dt.makeSpan(["mord","sqrt"],[p],e)},mathmlBuilder:function(t,e){var r=t.body,a=t.index;return a?new ue.MathNode("mroot",[ve(r,e),ve(a,e)]):new ue.MathNode("msqrt",[ve(r,e)])}});var $r={display:w.DISPLAY,text:w.TEXT,script:w.SCRIPT,scriptscript:w.SCRIPTSCRIPT};_t({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0},handler:function(t,e){var r=t.breakOnTokenText,a=t.funcName,n=t.parser,i=n.parseExpression(!0,r),o=a.slice(1,a.length-5);return{type:"styling",mode:n.mode,style:o,body:i}},htmlBuilder:function(t,e){var r=$r[t.style],a=e.havingStyle(r).withFont("");return _r(t.body,a,e)},mathmlBuilder:function(t,e){var r=$r[t.style],a=e.havingStyle(r),n=ge(t.body,a),i=new ue.MathNode("mstyle",n),o={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]}[t.style];return i.setAttribute("scriptlevel",o[0]),i.setAttribute("displaystyle",o[1]),i}});jt({type:"supsub",htmlBuilder:function(t,e){var r=function(t,e){var r=t.base;return r?"op"===r.type?r.limits&&(e.style.size===w.DISPLAY.size||r.alwaysHandleSupSub)?Ur:null:"operatorname"===r.type?r.alwaysHandleSupSub&&(e.style.size===w.DISPLAY.size||r.limits)?Xr:null:"accent"===r.type?c.isCharacterBox(r.base)?Ie:null:"horizBrace"===r.type&&!t.sub===r.isOver?Pr:null:null}(t,e);if(r)return r(t,e);var a,n,i,o=t.base,s=t.sup,l=t.sub,h=oe(o,e),m=e.fontMetrics(),u=0,p=0,d=o&&c.isCharacterBox(o);if(s){var f=e.havingStyle(e.style.sup());a=oe(s,f,e),d||(u=h.height-f.fontMetrics().supDrop*f.sizeMultiplier/e.sizeMultiplier)}if(l){var g=e.havingStyle(e.style.sub());n=oe(l,g,e),d||(p=h.depth+g.fontMetrics().subDrop*g.sizeMultiplier/e.sizeMultiplier)}i=e.style===w.DISPLAY?m.sup1:e.style.cramped?m.sup3:m.sup2;var x,v=e.sizeMultiplier,b=.5/m.ptPerEm/v+"em",y=null;if(n){var k=t.base&&"op"===t.base.type&&t.base.name&&("\\oiint"===t.base.name||"\\oiiint"===t.base.name);(h instanceof E||k)&&(y=-h.italic+"em")}if(a&&n){u=Math.max(u,i,a.depth+.25*m.xHeight),p=Math.max(p,m.sub2);var S=4*m.defaultRuleThickness;if(u-a.depth-(n.height-p)<S){p=S-(u-a.depth)+n.height;var M=.8*m.xHeight-(u-a.depth);M>0&&(u+=M,p-=M)}var z=[{type:"elem",elem:n,shift:p,marginRight:b,marginLeft:y},{type:"elem",elem:a,shift:-u,marginRight:b}];x=Dt.makeVList({positionType:"individualShift",children:z},e)}else if(n){p=Math.max(p,m.sub1,n.height-.8*m.xHeight);var A=[{type:"elem",elem:n,marginLeft:y,marginRight:b}];x=Dt.makeVList({positionType:"shift",positionData:p,children:A},e)}else{if(!a)throw new Error("supsub must have either sup or sub.");u=Math.max(u,i,a.depth+.25*m.xHeight),x=Dt.makeVList({positionType:"shift",positionData:-u,children:[{type:"elem",elem:a,marginRight:b}]},e)}var T=ne(h,"right")||"mord";return Dt.makeSpan([T],[h,Dt.makeSpan(["msupsub"],[x])],e)},mathmlBuilder:function(t,e){var r,a=!1;t.base&&"horizBrace"===t.base.type&&!!t.sup===t.base.isOver&&(a=!0,r=t.base.isOver),!t.base||"op"!==t.base.type&&"operatorname"!==t.base.type||(t.base.parentIsSupSub=!0);var n,i=[ve(t.base,e)];if(t.sub&&i.push(ve(t.sub,e)),t.sup&&i.push(ve(t.sup,e)),a)n=r?"mover":"munder";else if(t.sub)if(t.sup){var o=t.base;n=o&&"op"===o.type&&o.limits&&e.style===w.DISPLAY?"munderover":o&&"operatorname"===o.type&&o.alwaysHandleSupSub&&(e.style===w.DISPLAY||o.limits)?"munderover":"msubsup"}else{var s=t.base;n=s&&"op"===s.type&&s.limits&&(e.style===w.DISPLAY||s.alwaysHandleSupSub)?"munder":s&&"operatorname"===s.type&&s.alwaysHandleSupSub&&(s.limits||e.style===w.DISPLAY)?"munder":"msub"}else{var l=t.base;n=l&&"op"===l.type&&l.limits&&(e.style===w.DISPLAY||l.alwaysHandleSupSub)?"mover":l&&"operatorname"===l.type&&l.alwaysHandleSupSub&&(l.limits||e.style===w.DISPLAY)?"mover":"msup"}return new ue.MathNode(n,i)}}),jt({type:"atom",htmlBuilder:function(t,e){return Dt.mathsym(t.text,t.mode,e,["m"+t.family])},mathmlBuilder:function(t,e){var r=new ue.MathNode("mo",[pe(t.text,t.mode)]);if("bin"===t.family){var a=fe(t,e);"bold-italic"===a&&r.setAttribute("mathvariant",a)}else"punct"===t.family?r.setAttribute("separator","true"):"open"!==t.family&&"close"!==t.family||r.setAttribute("stretchy","false");return r}});var Zr={mi:"italic",mn:"normal",mtext:"normal"};jt({type:"mathord",htmlBuilder:function(t,e){return Dt.makeOrd(t,e,"mathord")},mathmlBuilder:function(t,e){var r=new ue.MathNode("mi",[pe(t.text,t.mode,e)]),a=fe(t,e)||"italic";return a!==Zr[r.type]&&r.setAttribute("mathvariant",a),r}}),jt({type:"textord",htmlBuilder:function(t,e){return Dt.makeOrd(t,e,"textord")},mathmlBuilder:function(t,e){var r,a=pe(t.text,t.mode,e),n=fe(t,e)||"normal";return r="text"===t.mode?new ue.MathNode("mtext",[a]):/[0-9]/.test(t.text)?new ue.MathNode("mn",[a]):"\\prime"===t.text?new ue.MathNode("mo",[a]):new ue.MathNode("mi",[a]),n!==Zr[r.type]&&r.setAttribute("mathvariant",n),r}});var Kr={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},Jr={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};jt({type:"spacing",htmlBuilder:function(t,e){if(Jr.hasOwnProperty(t.text)){var r=Jr[t.text].className||"";if("text"===t.mode){var a=Dt.makeOrd(t,e,"textord");return a.classes.push(r),a}return Dt.makeSpan(["mspace",r],[Dt.mathsym(t.text,t.mode,e)],e)}if(Kr.hasOwnProperty(t.text))return Dt.makeSpan(["mspace",Kr[t.text]],[],e);throw new o('Unknown type of space "'+t.text+'"')},mathmlBuilder:function(t,e){if(!Jr.hasOwnProperty(t.text)){if(Kr.hasOwnProperty(t.text))return new ue.MathNode("mspace");throw new o('Unknown type of space "'+t.text+'"')}return new ue.MathNode("mtext",[new ue.TextNode("\xa0")])}});var Qr=function(){var t=new ue.MathNode("mtd",[]);return t.setAttribute("width","50%"),t};jt({type:"tag",mathmlBuilder:function(t,e){var r=new ue.MathNode("mtable",[new ue.MathNode("mtr",[Qr(),new ue.MathNode("mtd",[xe(t.body,e)]),Qr(),new ue.MathNode("mtd",[xe(t.tag,e)])])]);return r.setAttribute("width","100%"),r}});var ta={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},ea={"\\textbf":"textbf","\\textmd":"textmd"},ra={"\\textit":"textit","\\textup":"textup"},aa=function(t,e){var r=t.font;return r?ta[r]?e.withTextFontFamily(ta[r]):ea[r]?e.withTextFontWeight(ea[r]):e.withTextFontShape(ra[r]):e};_t({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textmd","\\textit","\\textup"],props:{numArgs:1,argTypes:["text"],greediness:2,allowedInText:!0},handler:function(t,e){var r=t.parser,a=t.funcName,n=e[0];return{type:"text",mode:r.mode,body:$t(n),font:a}},htmlBuilder:function(t,e){var r=aa(t,e),a=ee(t.body,r,!0);return Dt.makeSpan(["mord","text"],Dt.tryCombineChars(a),r)},mathmlBuilder:function(t,e){var r=aa(t,e);return xe(t.body,r)}}),_t({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler:function(t,e){return{type:"underline",mode:t.parser.mode,body:e[0]}},htmlBuilder:function(t,e){var r=oe(t.body,e),a=Dt.makeLineSpan("underline-line",e),n=e.fontMetrics().defaultRuleThickness,i=Dt.makeVList({positionType:"top",positionData:r.height,children:[{type:"kern",size:n},{type:"elem",elem:a},{type:"kern",size:3*n},{type:"elem",elem:r}]},e);return Dt.makeSpan(["mord","underline"],[i],e)},mathmlBuilder:function(t,e){var r=new ue.MathNode("mo",[new ue.TextNode("\u203e")]);r.setAttribute("stretchy","true");var a=new ue.MathNode("munder",[ve(t.body,e),r]);return a.setAttribute("accentunder","true"),a}}),_t({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler:function(t,e,r){throw new o("\\verb ended by end of line instead of matching delimiter")},htmlBuilder:function(t,e){for(var r=na(t),a=[],n=e.havingStyle(e.style.text()),i=0;i<r.length;i++){var o=r[i];"~"===o&&(o="\\textasciitilde"),a.push(Dt.makeSymbol(o,"Typewriter-Regular",t.mode,n,["mord","texttt"]))}return Dt.makeSpan(["mord","text"].concat(n.sizingClasses(e)),Dt.tryCombineChars(a),n)},mathmlBuilder:function(t,e){var r=new ue.TextNode(na(t)),a=new ue.MathNode("mtext",[r]);return a.setAttribute("mathvariant","monospace"),a}});var na=function(t){return t.body.replace(/ /g,t.star?"\u2423":"\xa0")},ia=Yt,oa=new RegExp("^(\\\\[a-zA-Z@]+)[ \r\n\t]*$"),sa=new RegExp("[\u0300-\u036f]+$"),la="([ \r\n\t]+)|([!-\\[\\]-\u2027\u202a-\ud7ff\uf900-\uffff][\u0300-\u036f]*|[\ud800-\udbff][\udc00-\udfff][\u0300-\u036f]*|\\\\verb\\*([^]).*?\\3|\\\\verb([^*a-zA-Z]).*?\\4|\\\\operatorname\\*|\\\\[a-zA-Z@]+[ \r\n\t]*|\\\\[^\ud800-\udfff])",ha=function(){function t(t,e){this.input=void 0,this.settings=void 0,this.tokenRegex=void 0,this.catcodes=void 0,this.input=t,this.settings=e,this.tokenRegex=new RegExp(la,"g"),this.catcodes={"%":14}}var e=t.prototype;return e.setCatcode=function(t,e){this.catcodes[t]=e},e.lex=function(){var t=this.input,e=this.tokenRegex.lastIndex;if(e===t.length)return new n("EOF",new a(this,e,e));var r=this.tokenRegex.exec(t);if(null===r||r.index!==e)throw new o("Unexpected character: '"+t[e]+"'",new n(t[e],new a(this,e,e+1)));var i=r[2]||" ";if(14===this.catcodes[i]){var s=t.indexOf("\n",this.tokenRegex.lastIndex);return-1===s?(this.tokenRegex.lastIndex=t.length,this.settings.reportNonstrict("commentAtEnd","% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")):this.tokenRegex.lastIndex=s+1,this.lex()}var l=i.match(oa);return l&&(i=l[1]),new n(i,new a(this,e,this.tokenRegex.lastIndex))},t}(),ma=function(){function t(t,e){void 0===t&&(t={}),void 0===e&&(e={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=e,this.builtins=t,this.undefStack=[]}var e=t.prototype;return e.beginGroup=function(){this.undefStack.push({})},e.endGroup=function(){if(0===this.undefStack.length)throw new o("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");var t=this.undefStack.pop();for(var e in t)t.hasOwnProperty(e)&&(void 0===t[e]?delete this.current[e]:this.current[e]=t[e])},e.has=function(t){return this.current.hasOwnProperty(t)||this.builtins.hasOwnProperty(t)},e.get=function(t){return this.current.hasOwnProperty(t)?this.current[t]:this.builtins[t]},e.set=function(t,e,r){if(void 0===r&&(r=!1),r){for(var a=0;a<this.undefStack.length;a++)delete this.undefStack[a][t];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][t]=e)}else{var n=this.undefStack[this.undefStack.length-1];n&&!n.hasOwnProperty(t)&&(n[t]=this.current[t])}this.current[t]=e},t}(),ca={},ua=ca;function pa(t,e){ca[t]=e}pa("\\noexpand",function(t){var e=t.popToken();return t.isExpandable(e.text)&&(e.noexpand=!0,e.treatAsRelax=!0),{tokens:[e],numArgs:0}}),pa("\\expandafter",function(t){var e=t.popToken();return t.expandOnce(!0),{tokens:[e],numArgs:0}}),pa("\\@firstoftwo",function(t){return{tokens:t.consumeArgs(2)[0],numArgs:0}}),pa("\\@secondoftwo",function(t){return{tokens:t.consumeArgs(2)[1],numArgs:0}}),pa("\\@ifnextchar",function(t){var e=t.consumeArgs(3);t.consumeSpaces();var r=t.future();return 1===e[0].length&&e[0][0].text===r.text?{tokens:e[1],numArgs:0}:{tokens:e[2],numArgs:0}}),pa("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}"),pa("\\TextOrMath",function(t){var e=t.consumeArgs(2);return"text"===t.mode?{tokens:e[0],numArgs:0}:{tokens:e[1],numArgs:0}});var da={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};pa("\\char",function(t){var e,r=t.popToken(),a="";if("'"===r.text)e=8,r=t.popToken();else if('"'===r.text)e=16,r=t.popToken();else if("`"===r.text)if("\\"===(r=t.popToken()).text[0])a=r.text.charCodeAt(1);else{if("EOF"===r.text)throw new o("\\char` missing argument");a=r.text.charCodeAt(0)}else e=10;if(e){if(null==(a=da[r.text])||a>=e)throw new o("Invalid base-"+e+" digit "+r.text);for(var n;null!=(n=da[t.future().text])&&n<e;)a*=e,a+=n,t.popToken()}return"\\@char{"+a+"}"});var fa=function(t,e,r){var a=t.consumeArgs(1)[0];if(1!==a.length)throw new o("\\newcommand's first argument must be a macro name");var n=a[0].text,i=t.isDefined(n);if(i&&!e)throw new o("\\newcommand{"+n+"} attempting to redefine "+n+"; use \\renewcommand");if(!i&&!r)throw new o("\\renewcommand{"+n+"} when command "+n+" does not yet exist; use \\newcommand");var s=0;if(1===(a=t.consumeArgs(1)[0]).length&&"["===a[0].text){for(var l="",h=t.expandNextToken();"]"!==h.text&&"EOF"!==h.text;)l+=h.text,h=t.expandNextToken();if(!l.match(/^\s*[0-9]+\s*$/))throw new o("Invalid number of arguments: "+l);s=parseInt(l),a=t.consumeArgs(1)[0]}return t.macros.set(n,{tokens:a,numArgs:s}),""};pa("\\newcommand",function(t){return fa(t,!1,!0)}),pa("\\renewcommand",function(t){return fa(t,!0,!1)}),pa("\\providecommand",function(t){return fa(t,!0,!0)}),pa("\\message",function(t){var e=t.consumeArgs(1)[0];return console.log(e.reverse().map(function(t){return t.text}).join("")),""}),pa("\\errmessage",function(t){var e=t.consumeArgs(1)[0];return console.error(e.reverse().map(function(t){return t.text}).join("")),""}),pa("\\show",function(t){var e=t.popToken(),r=e.text;return console.log(e,t.macros.get(r),ia[r],j.math[r],j.text[r]),""}),pa("\\bgroup","{"),pa("\\egroup","}"),pa("\\lq","`"),pa("\\rq","'"),pa("\\aa","\\r a"),pa("\\AA","\\r A"),pa("\\textcopyright","\\html@mathml{\\textcircled{c}}{\\char`\xa9}"),pa("\\copyright","\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}"),pa("\\textregistered","\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`\xae}"),pa("\u212c","\\mathscr{B}"),pa("\u2130","\\mathscr{E}"),pa("\u2131","\\mathscr{F}"),pa("\u210b","\\mathscr{H}"),pa("\u2110","\\mathscr{I}"),pa("\u2112","\\mathscr{L}"),pa("\u2133","\\mathscr{M}"),pa("\u211b","\\mathscr{R}"),pa("\u212d","\\mathfrak{C}"),pa("\u210c","\\mathfrak{H}"),pa("\u2128","\\mathfrak{Z}"),pa("\\Bbbk","\\Bbb{k}"),pa("\xb7","\\cdotp"),pa("\\llap","\\mathllap{\\textrm{#1}}"),pa("\\rlap","\\mathrlap{\\textrm{#1}}"),pa("\\clap","\\mathclap{\\textrm{#1}}"),pa("\\not",'\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}'),pa("\\neq","\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`\u2260}}"),pa("\\ne","\\neq"),pa("\u2260","\\neq"),pa("\\notin","\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`\u2209}}"),pa("\u2209","\\notin"),pa("\u2258","\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`\u2258}}"),pa("\u2259","\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`\u2258}}"),pa("\u225a","\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`\u225a}}"),pa("\u225b","\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`\u225b}}"),pa("\u225d","\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`\u225d}}"),pa("\u225e","\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`\u225e}}"),pa("\u225f","\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`\u225f}}"),pa("\u27c2","\\perp"),pa("\u203c","\\mathclose{!\\mkern-0.8mu!}"),pa("\u220c","\\notni"),pa("\u231c","\\ulcorner"),pa("\u231d","\\urcorner"),pa("\u231e","\\llcorner"),pa("\u231f","\\lrcorner"),pa("\xa9","\\copyright"),pa("\xae","\\textregistered"),pa("\ufe0f","\\textregistered"),pa("\\ulcorner",'\\html@mathml{\\@ulcorner}{\\mathop{\\char"231c}}'),pa("\\urcorner",'\\html@mathml{\\@urcorner}{\\mathop{\\char"231d}}'),pa("\\llcorner",'\\html@mathml{\\@llcorner}{\\mathop{\\char"231e}}'),pa("\\lrcorner",'\\html@mathml{\\@lrcorner}{\\mathop{\\char"231f}}'),pa("\\vdots","\\mathord{\\varvdots\\rule{0pt}{15pt}}"),pa("\u22ee","\\vdots"),pa("\\varGamma","\\mathit{\\Gamma}"),pa("\\varDelta","\\mathit{\\Delta}"),pa("\\varTheta","\\mathit{\\Theta}"),pa("\\varLambda","\\mathit{\\Lambda}"),pa("\\varXi","\\mathit{\\Xi}"),pa("\\varPi","\\mathit{\\Pi}"),pa("\\varSigma","\\mathit{\\Sigma}"),pa("\\varUpsilon","\\mathit{\\Upsilon}"),pa("\\varPhi","\\mathit{\\Phi}"),pa("\\varPsi","\\mathit{\\Psi}"),pa("\\varOmega","\\mathit{\\Omega}"),pa("\\substack","\\begin{subarray}{c}#1\\end{subarray}"),pa("\\colon","\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu"),pa("\\boxed","\\fbox{$\\displaystyle{#1}$}"),pa("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;"),pa("\\implies","\\DOTSB\\;\\Longrightarrow\\;"),pa("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;");var ga={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};pa("\\dots",function(t){var e="\\dotso",r=t.expandAfterFuture().text;return r in ga?e=ga[r]:"\\not"===r.substr(0,4)?e="\\dotsb":r in j.math&&c.contains(["bin","rel"],j.math[r].group)&&(e="\\dotsb"),e});var xa={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};pa("\\dotso",function(t){return t.future().text in xa?"\\ldots\\,":"\\ldots"}),pa("\\dotsc",function(t){var e=t.future().text;return e in xa&&","!==e?"\\ldots\\,":"\\ldots"}),pa("\\cdots",function(t){return t.future().text in xa?"\\@cdots\\,":"\\@cdots"}),pa("\\dotsb","\\cdots"),pa("\\dotsm","\\cdots"),pa("\\dotsi","\\!\\cdots"),pa("\\dotsx","\\ldots\\,"),pa("\\DOTSI","\\relax"),pa("\\DOTSB","\\relax"),pa("\\DOTSX","\\relax"),pa("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax"),pa("\\,","\\tmspace+{3mu}{.1667em}"),pa("\\thinspace","\\,"),pa("\\>","\\mskip{4mu}"),pa("\\:","\\tmspace+{4mu}{.2222em}"),pa("\\medspace","\\:"),pa("\\;","\\tmspace+{5mu}{.2777em}"),pa("\\thickspace","\\;"),pa("\\!","\\tmspace-{3mu}{.1667em}"),pa("\\negthinspace","\\!"),pa("\\negmedspace","\\tmspace-{4mu}{.2222em}"),pa("\\negthickspace","\\tmspace-{5mu}{.277em}"),pa("\\enspace","\\kern.5em "),pa("\\enskip","\\hskip.5em\\relax"),pa("\\quad","\\hskip1em\\relax"),pa("\\qquad","\\hskip2em\\relax"),pa("\\tag","\\@ifstar\\tag@literal\\tag@paren"),pa("\\tag@paren","\\tag@literal{({#1})}"),pa("\\tag@literal",function(t){if(t.macros.get("\\df@tag"))throw new o("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"}),pa("\\bmod","\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}"),pa("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)"),pa("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}"),pa("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1"),pa("\\pmb","\\html@mathml{\\@binrel{#1}{\\mathrlap{#1}\\kern0.5px#1}}{\\mathbf{#1}}"),pa("\\\\","\\newline"),pa("\\TeX","\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}");var va=F["Main-Regular"]["T".charCodeAt(0)][1]-.7*F["Main-Regular"]["A".charCodeAt(0)][1]+"em";pa("\\LaTeX","\\textrm{\\html@mathml{L\\kern-.36em\\raisebox{"+va+"}{\\scriptstyle A}\\kern-.15em\\TeX}{LaTeX}}"),pa("\\KaTeX","\\textrm{\\html@mathml{K\\kern-.17em\\raisebox{"+va+"}{\\scriptstyle A}\\kern-.15em\\TeX}{KaTeX}}"),pa("\\hspace","\\@ifstar\\@hspacer\\@hspace"),pa("\\@hspace","\\hskip #1\\relax"),pa("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax"),pa("\\ordinarycolon",":"),pa("\\vcentcolon","\\mathrel{\\mathop\\ordinarycolon}"),pa("\\dblcolon",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}'),pa("\\coloneqq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}'),pa("\\Coloneqq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}'),pa("\\coloneq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}'),pa("\\Coloneq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}'),pa("\\eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}'),pa("\\Eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}'),pa("\\eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}'),pa("\\Eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}'),pa("\\colonapprox",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}'),pa("\\Colonapprox",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}'),pa("\\colonsim",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}'),pa("\\Colonsim",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}'),pa("\u2237","\\dblcolon"),pa("\u2239","\\eqcolon"),pa("\u2254","\\coloneqq"),pa("\u2255","\\eqqcolon"),pa("\u2a74","\\Coloneqq"),pa("\\ratio","\\vcentcolon"),pa("\\coloncolon","\\dblcolon"),pa("\\colonequals","\\coloneqq"),pa("\\coloncolonequals","\\Coloneqq"),pa("\\equalscolon","\\eqqcolon"),pa("\\equalscoloncolon","\\Eqqcolon"),pa("\\colonminus","\\coloneq"),pa("\\coloncolonminus","\\Coloneq"),pa("\\minuscolon","\\eqcolon"),pa("\\minuscoloncolon","\\Eqcolon"),pa("\\coloncolonapprox","\\Colonapprox"),pa("\\coloncolonsim","\\Colonsim"),pa("\\simcolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}"),pa("\\simcoloncolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}"),pa("\\approxcolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}"),pa("\\approxcoloncolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}"),pa("\\notni","\\html@mathml{\\not\\ni}{\\mathrel{\\char`\u220c}}"),pa("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}"),pa("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}"),pa("\\gvertneqq","\\html@mathml{\\@gvertneqq}{\u2269}"),pa("\\lvertneqq","\\html@mathml{\\@lvertneqq}{\u2268}"),pa("\\ngeqq","\\html@mathml{\\@ngeqq}{\u2271}"),pa("\\ngeqslant","\\html@mathml{\\@ngeqslant}{\u2271}"),pa("\\nleqq","\\html@mathml{\\@nleqq}{\u2270}"),pa("\\nleqslant","\\html@mathml{\\@nleqslant}{\u2270}"),pa("\\nshortmid","\\html@mathml{\\@nshortmid}{\u2224}"),pa("\\nshortparallel","\\html@mathml{\\@nshortparallel}{\u2226}"),pa("\\nsubseteqq","\\html@mathml{\\@nsubseteqq}{\u2288}"),pa("\\nsupseteqq","\\html@mathml{\\@nsupseteqq}{\u2289}"),pa("\\varsubsetneq","\\html@mathml{\\@varsubsetneq}{\u228a}"),pa("\\varsubsetneqq","\\html@mathml{\\@varsubsetneqq}{\u2acb}"),pa("\\varsupsetneq","\\html@mathml{\\@varsupsetneq}{\u228b}"),pa("\\varsupsetneqq","\\html@mathml{\\@varsupsetneqq}{\u2acc}"),pa("\\imath","\\html@mathml{\\@imath}{\u0131}"),pa("\\jmath","\\html@mathml{\\@jmath}{\u0237}"),pa("\\llbracket","\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`\u27e6}}"),pa("\\rrbracket","\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`\u27e7}}"),pa("\u27e6","\\llbracket"),pa("\u27e7","\\rrbracket"),pa("\\lBrace","\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`\u2983}}"),pa("\\rBrace","\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`\u2984}}"),pa("\u2983","\\lBrace"),pa("\u2984","\\rBrace"),pa("\\minuso","\\mathbin{\\html@mathml{{\\mathrlap{\\mathchoice{\\kern{0.145em}}{\\kern{0.145em}}{\\kern{0.1015em}}{\\kern{0.0725em}}\\circ}{-}}}{\\char`\u29b5}}"),pa("\u29b5","\\minuso"),pa("\\darr","\\downarrow"),pa("\\dArr","\\Downarrow"),pa("\\Darr","\\Downarrow"),pa("\\lang","\\langle"),pa("\\rang","\\rangle"),pa("\\uarr","\\uparrow"),pa("\\uArr","\\Uparrow"),pa("\\Uarr","\\Uparrow"),pa("\\N","\\mathbb{N}"),pa("\\R","\\mathbb{R}"),pa("\\Z","\\mathbb{Z}"),pa("\\alef","\\aleph"),pa("\\alefsym","\\aleph"),pa("\\Alpha","\\mathrm{A}"),pa("\\Beta","\\mathrm{B}"),pa("\\bull","\\bullet"),pa("\\Chi","\\mathrm{X}"),pa("\\clubs","\\clubsuit"),pa("\\cnums","\\mathbb{C}"),pa("\\Complex","\\mathbb{C}"),pa("\\Dagger","\\ddagger"),pa("\\diamonds","\\diamondsuit"),pa("\\empty","\\emptyset"),pa("\\Epsilon","\\mathrm{E}"),pa("\\Eta","\\mathrm{H}"),pa("\\exist","\\exists"),pa("\\harr","\\leftrightarrow"),pa("\\hArr","\\Leftrightarrow"),pa("\\Harr","\\Leftrightarrow"),pa("\\hearts","\\heartsuit"),pa("\\image","\\Im"),pa("\\infin","\\infty"),pa("\\Iota","\\mathrm{I}"),pa("\\isin","\\in"),pa("\\Kappa","\\mathrm{K}"),pa("\\larr","\\leftarrow"),pa("\\lArr","\\Leftarrow"),pa("\\Larr","\\Leftarrow"),pa("\\lrarr","\\leftrightarrow"),pa("\\lrArr","\\Leftrightarrow"),pa("\\Lrarr","\\Leftrightarrow"),pa("\\Mu","\\mathrm{M}"),pa("\\natnums","\\mathbb{N}"),pa("\\Nu","\\mathrm{N}"),pa("\\Omicron","\\mathrm{O}"),pa("\\plusmn","\\pm"),pa("\\rarr","\\rightarrow"),pa("\\rArr","\\Rightarrow"),pa("\\Rarr","\\Rightarrow"),pa("\\real","\\Re"),pa("\\reals","\\mathbb{R}"),pa("\\Reals","\\mathbb{R}"),pa("\\Rho","\\mathrm{P}"),pa("\\sdot","\\cdot"),pa("\\sect","\\S"),pa("\\spades","\\spadesuit"),pa("\\sub","\\subset"),pa("\\sube","\\subseteq"),pa("\\supe","\\supseteq"),pa("\\Tau","\\mathrm{T}"),pa("\\thetasym","\\vartheta"),pa("\\weierp","\\wp"),pa("\\Zeta","\\mathrm{Z}"),pa("\\argmin","\\DOTSB\\operatorname*{arg\\,min}"),pa("\\argmax","\\DOTSB\\operatorname*{arg\\,max}"),pa("\\plim","\\DOTSB\\mathop{\\operatorname{plim}}\\limits"),pa("\\bra","\\mathinner{\\langle{#1}|}"),pa("\\ket","\\mathinner{|{#1}\\rangle}"),pa("\\braket","\\mathinner{\\langle{#1}\\rangle}"),pa("\\Bra","\\left\\langle#1\\right|"),pa("\\Ket","\\left|#1\\right\\rangle"),pa("\\blue","\\textcolor{##6495ed}{#1}"),pa("\\orange","\\textcolor{##ffa500}{#1}"),pa("\\pink","\\textcolor{##ff00af}{#1}"),pa("\\red","\\textcolor{##df0030}{#1}"),pa("\\green","\\textcolor{##28ae7b}{#1}"),pa("\\gray","\\textcolor{gray}{#1}"),pa("\\purple","\\textcolor{##9d38bd}{#1}"),pa("\\blueA","\\textcolor{##ccfaff}{#1}"),pa("\\blueB","\\textcolor{##80f6ff}{#1}"),pa("\\blueC","\\textcolor{##63d9ea}{#1}"),pa("\\blueD","\\textcolor{##11accd}{#1}"),pa("\\blueE","\\textcolor{##0c7f99}{#1}"),pa("\\tealA","\\textcolor{##94fff5}{#1}"),pa("\\tealB","\\textcolor{##26edd5}{#1}"),pa("\\tealC","\\textcolor{##01d1c1}{#1}"),pa("\\tealD","\\textcolor{##01a995}{#1}"),pa("\\tealE","\\textcolor{##208170}{#1}"),pa("\\greenA","\\textcolor{##b6ffb0}{#1}"),pa("\\greenB","\\textcolor{##8af281}{#1}"),pa("\\greenC","\\textcolor{##74cf70}{#1}"),pa("\\greenD","\\textcolor{##1fab54}{#1}"),pa("\\greenE","\\textcolor{##0d923f}{#1}"),pa("\\goldA","\\textcolor{##ffd0a9}{#1}"),pa("\\goldB","\\textcolor{##ffbb71}{#1}"),pa("\\goldC","\\textcolor{##ff9c39}{#1}"),pa("\\goldD","\\textcolor{##e07d10}{#1}"),pa("\\goldE","\\textcolor{##a75a05}{#1}"),pa("\\redA","\\textcolor{##fca9a9}{#1}"),pa("\\redB","\\textcolor{##ff8482}{#1}"),pa("\\redC","\\textcolor{##f9685d}{#1}"),pa("\\redD","\\textcolor{##e84d39}{#1}"),pa("\\redE","\\textcolor{##bc2612}{#1}"),pa("\\maroonA","\\textcolor{##ffbde0}{#1}"),pa("\\maroonB","\\textcolor{##ff92c6}{#1}"),pa("\\maroonC","\\textcolor{##ed5fa6}{#1}"),pa("\\maroonD","\\textcolor{##ca337c}{#1}"),pa("\\maroonE","\\textcolor{##9e034e}{#1}"),pa("\\purpleA","\\textcolor{##ddd7ff}{#1}"),pa("\\purpleB","\\textcolor{##c6b9fc}{#1}"),pa("\\purpleC","\\textcolor{##aa87ff}{#1}"),pa("\\purpleD","\\textcolor{##7854ab}{#1}"),pa("\\purpleE","\\textcolor{##543b78}{#1}"),pa("\\mintA","\\textcolor{##f5f9e8}{#1}"),pa("\\mintB","\\textcolor{##edf2df}{#1}"),pa("\\mintC","\\textcolor{##e0e5cc}{#1}"),pa("\\grayA","\\textcolor{##f6f7f7}{#1}"),pa("\\grayB","\\textcolor{##f0f1f2}{#1}"),pa("\\grayC","\\textcolor{##e3e5e6}{#1}"),pa("\\grayD","\\textcolor{##d6d8da}{#1}"),pa("\\grayE","\\textcolor{##babec2}{#1}"),pa("\\grayF","\\textcolor{##888d93}{#1}"),pa("\\grayG","\\textcolor{##626569}{#1}"),pa("\\grayH","\\textcolor{##3b3e40}{#1}"),pa("\\grayI","\\textcolor{##21242c}{#1}"),pa("\\kaBlue","\\textcolor{##314453}{#1}"),pa("\\kaGreen","\\textcolor{##71B307}{#1}");var ba={"\\relax":!0,"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0},ya=function(){function t(t,e,r){this.settings=void 0,this.expansionCount=void 0,this.lexer=void 0,this.macros=void 0,this.stack=void 0,this.mode=void 0,this.settings=e,this.expansionCount=0,this.feed(t),this.macros=new ma(ua,e.macros),this.mode=r,this.stack=[]}var e=t.prototype;return e.feed=function(t){this.lexer=new ha(t,this.settings)},e.switchMode=function(t){this.mode=t},e.beginGroup=function(){this.macros.beginGroup()},e.endGroup=function(){this.macros.endGroup()},e.future=function(){return 0===this.stack.length&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]},e.popToken=function(){return this.future(),this.stack.pop()},e.pushToken=function(t){this.stack.push(t)},e.pushTokens=function(t){var e;(e=this.stack).push.apply(e,t)},e.consumeSpaces=function(){for(;;){if(" "!==this.future().text)break;this.stack.pop()}},e.consumeArgs=function(t){for(var e=[],r=0;r<t;++r){this.consumeSpaces();var a=this.popToken();if("{"===a.text){for(var n=[],i=1;0!==i;){var s=this.popToken();if(n.push(s),"{"===s.text)++i;else if("}"===s.text)--i;else if("EOF"===s.text)throw new o("End of input in macro argument",a)}n.pop(),n.reverse(),e[r]=n}else{if("EOF"===a.text)throw new o("End of input expecting macro argument");e[r]=[a]}}return e},e.expandOnce=function(t){var e=this.popToken(),r=e.text,a=e.noexpand?null:this._getExpansion(r);if(null==a||t&&a.unexpandable){if(t&&null==a&&"\\"===r[0]&&!this.isDefined(r))throw new o("Undefined control sequence: "+r);return this.pushToken(e),e}if(this.expansionCount++,this.expansionCount>this.settings.maxExpand)throw new o("Too many expansions: infinite loop or need to increase maxExpand setting");var n=a.tokens;if(a.numArgs)for(var i=this.consumeArgs(a.numArgs),s=(n=n.slice()).length-1;s>=0;--s){var l=n[s];if("#"===l.text){if(0===s)throw new o("Incomplete placeholder at end of macro body",l);if("#"===(l=n[--s]).text)n.splice(s+1,1);else{if(!/^[1-9]$/.test(l.text))throw new o("Not a valid argument number",l);var h;(h=n).splice.apply(h,[s,2].concat(i[+l.text-1]))}}}return this.pushTokens(n),n},e.expandAfterFuture=function(){return this.expandOnce(),this.future()},e.expandNextToken=function(){for(;;){var t=this.expandOnce();if(t instanceof n){if("\\relax"!==t.text&&!t.treatAsRelax)return this.stack.pop();this.stack.pop()}}throw new Error},e.expandMacro=function(t){return this.macros.has(t)?this.expandTokens([new n(t)]):void 0},e.expandTokens=function(t){var e=[],r=this.stack.length;for(this.pushTokens(t);this.stack.length>r;){var a=this.expandOnce(!0);a instanceof n&&(a.treatAsRelax&&(a.noexpand=!1,a.treatAsRelax=!1),e.push(this.stack.pop()))}return e},e.expandMacroAsText=function(t){var e=this.expandMacro(t);return e?e.map(function(t){return t.text}).join(""):e},e._getExpansion=function(t){var e=this.macros.get(t);if(null==e)return e;var r="function"==typeof e?e(this):e;if("string"==typeof r){var a=0;if(-1!==r.indexOf("#"))for(var n=r.replace(/##/g,"");-1!==n.indexOf("#"+(a+1));)++a;for(var i=new ha(r,this.settings),o=[],s=i.lex();"EOF"!==s.text;)o.push(s),s=i.lex();return o.reverse(),{tokens:o,numArgs:a}}return r},e.isDefined=function(t){return this.macros.has(t)||ia.hasOwnProperty(t)||j.math.hasOwnProperty(t)||j.text.hasOwnProperty(t)||ba.hasOwnProperty(t)},e.isExpandable=function(t){var e=this.macros.get(t);return null!=e?"string"==typeof e||"function"==typeof e||!e.unexpandable:ia.hasOwnProperty(t)},t}(),wa={"\u0301":{text:"\\'",math:"\\acute"},"\u0300":{text:"\\`",math:"\\grave"},"\u0308":{text:'\\"',math:"\\ddot"},"\u0303":{text:"\\~",math:"\\tilde"},"\u0304":{text:"\\=",math:"\\bar"},"\u0306":{text:"\\u",math:"\\breve"},"\u030c":{text:"\\v",math:"\\check"},"\u0302":{text:"\\^",math:"\\hat"},"\u0307":{text:"\\.",math:"\\dot"},"\u030a":{text:"\\r",math:"\\mathring"},"\u030b":{text:"\\H"}},ka={"\xe1":"a\u0301","\xe0":"a\u0300","\xe4":"a\u0308","\u01df":"a\u0308\u0304","\xe3":"a\u0303","\u0101":"a\u0304","\u0103":"a\u0306","\u1eaf":"a\u0306\u0301","\u1eb1":"a\u0306\u0300","\u1eb5":"a\u0306\u0303","\u01ce":"a\u030c","\xe2":"a\u0302","\u1ea5":"a\u0302\u0301","\u1ea7":"a\u0302\u0300","\u1eab":"a\u0302\u0303","\u0227":"a\u0307","\u01e1":"a\u0307\u0304","\xe5":"a\u030a","\u01fb":"a\u030a\u0301","\u1e03":"b\u0307","\u0107":"c\u0301","\u010d":"c\u030c","\u0109":"c\u0302","\u010b":"c\u0307","\u010f":"d\u030c","\u1e0b":"d\u0307","\xe9":"e\u0301","\xe8":"e\u0300","\xeb":"e\u0308","\u1ebd":"e\u0303","\u0113":"e\u0304","\u1e17":"e\u0304\u0301","\u1e15":"e\u0304\u0300","\u0115":"e\u0306","\u011b":"e\u030c","\xea":"e\u0302","\u1ebf":"e\u0302\u0301","\u1ec1":"e\u0302\u0300","\u1ec5":"e\u0302\u0303","\u0117":"e\u0307","\u1e1f":"f\u0307","\u01f5":"g\u0301","\u1e21":"g\u0304","\u011f":"g\u0306","\u01e7":"g\u030c","\u011d":"g\u0302","\u0121":"g\u0307","\u1e27":"h\u0308","\u021f":"h\u030c","\u0125":"h\u0302","\u1e23":"h\u0307","\xed":"i\u0301","\xec":"i\u0300","\xef":"i\u0308","\u1e2f":"i\u0308\u0301","\u0129":"i\u0303","\u012b":"i\u0304","\u012d":"i\u0306","\u01d0":"i\u030c","\xee":"i\u0302","\u01f0":"j\u030c","\u0135":"j\u0302","\u1e31":"k\u0301","\u01e9":"k\u030c","\u013a":"l\u0301","\u013e":"l\u030c","\u1e3f":"m\u0301","\u1e41":"m\u0307","\u0144":"n\u0301","\u01f9":"n\u0300","\xf1":"n\u0303","\u0148":"n\u030c","\u1e45":"n\u0307","\xf3":"o\u0301","\xf2":"o\u0300","\xf6":"o\u0308","\u022b":"o\u0308\u0304","\xf5":"o\u0303","\u1e4d":"o\u0303\u0301","\u1e4f":"o\u0303\u0308","\u022d":"o\u0303\u0304","\u014d":"o\u0304","\u1e53":"o\u0304\u0301","\u1e51":"o\u0304\u0300","\u014f":"o\u0306","\u01d2":"o\u030c","\xf4":"o\u0302","\u1ed1":"o\u0302\u0301","\u1ed3":"o\u0302\u0300","\u1ed7":"o\u0302\u0303","\u022f":"o\u0307","\u0231":"o\u0307\u0304","\u0151":"o\u030b","\u1e55":"p\u0301","\u1e57":"p\u0307","\u0155":"r\u0301","\u0159":"r\u030c","\u1e59":"r\u0307","\u015b":"s\u0301","\u1e65":"s\u0301\u0307","\u0161":"s\u030c","\u1e67":"s\u030c\u0307","\u015d":"s\u0302","\u1e61":"s\u0307","\u1e97":"t\u0308","\u0165":"t\u030c","\u1e6b":"t\u0307","\xfa":"u\u0301","\xf9":"u\u0300","\xfc":"u\u0308","\u01d8":"u\u0308\u0301","\u01dc":"u\u0308\u0300","\u01d6":"u\u0308\u0304","\u01da":"u\u0308\u030c","\u0169":"u\u0303","\u1e79":"u\u0303\u0301","\u016b":"u\u0304","\u1e7b":"u\u0304\u0308","\u016d":"u\u0306","\u01d4":"u\u030c","\xfb":"u\u0302","\u016f":"u\u030a","\u0171":"u\u030b","\u1e7d":"v\u0303","\u1e83":"w\u0301","\u1e81":"w\u0300","\u1e85":"w\u0308","\u0175":"w\u0302","\u1e87":"w\u0307","\u1e98":"w\u030a","\u1e8d":"x\u0308","\u1e8b":"x\u0307","\xfd":"y\u0301","\u1ef3":"y\u0300","\xff":"y\u0308","\u1ef9":"y\u0303","\u0233":"y\u0304","\u0177":"y\u0302","\u1e8f":"y\u0307","\u1e99":"y\u030a","\u017a":"z\u0301","\u017e":"z\u030c","\u1e91":"z\u0302","\u017c":"z\u0307","\xc1":"A\u0301","\xc0":"A\u0300","\xc4":"A\u0308","\u01de":"A\u0308\u0304","\xc3":"A\u0303","\u0100":"A\u0304","\u0102":"A\u0306","\u1eae":"A\u0306\u0301","\u1eb0":"A\u0306\u0300","\u1eb4":"A\u0306\u0303","\u01cd":"A\u030c","\xc2":"A\u0302","\u1ea4":"A\u0302\u0301","\u1ea6":"A\u0302\u0300","\u1eaa":"A\u0302\u0303","\u0226":"A\u0307","\u01e0":"A\u0307\u0304","\xc5":"A\u030a","\u01fa":"A\u030a\u0301","\u1e02":"B\u0307","\u0106":"C\u0301","\u010c":"C\u030c","\u0108":"C\u0302","\u010a":"C\u0307","\u010e":"D\u030c","\u1e0a":"D\u0307","\xc9":"E\u0301","\xc8":"E\u0300","\xcb":"E\u0308","\u1ebc":"E\u0303","\u0112":"E\u0304","\u1e16":"E\u0304\u0301","\u1e14":"E\u0304\u0300","\u0114":"E\u0306","\u011a":"E\u030c","\xca":"E\u0302","\u1ebe":"E\u0302\u0301","\u1ec0":"E\u0302\u0300","\u1ec4":"E\u0302\u0303","\u0116":"E\u0307","\u1e1e":"F\u0307","\u01f4":"G\u0301","\u1e20":"G\u0304","\u011e":"G\u0306","\u01e6":"G\u030c","\u011c":"G\u0302","\u0120":"G\u0307","\u1e26":"H\u0308","\u021e":"H\u030c","\u0124":"H\u0302","\u1e22":"H\u0307","\xcd":"I\u0301","\xcc":"I\u0300","\xcf":"I\u0308","\u1e2e":"I\u0308\u0301","\u0128":"I\u0303","\u012a":"I\u0304","\u012c":"I\u0306","\u01cf":"I\u030c","\xce":"I\u0302","\u0130":"I\u0307","\u0134":"J\u0302","\u1e30":"K\u0301","\u01e8":"K\u030c","\u0139":"L\u0301","\u013d":"L\u030c","\u1e3e":"M\u0301","\u1e40":"M\u0307","\u0143":"N\u0301","\u01f8":"N\u0300","\xd1":"N\u0303","\u0147":"N\u030c","\u1e44":"N\u0307","\xd3":"O\u0301","\xd2":"O\u0300","\xd6":"O\u0308","\u022a":"O\u0308\u0304","\xd5":"O\u0303","\u1e4c":"O\u0303\u0301","\u1e4e":"O\u0303\u0308","\u022c":"O\u0303\u0304","\u014c":"O\u0304","\u1e52":"O\u0304\u0301","\u1e50":"O\u0304\u0300","\u014e":"O\u0306","\u01d1":"O\u030c","\xd4":"O\u0302","\u1ed0":"O\u0302\u0301","\u1ed2":"O\u0302\u0300","\u1ed6":"O\u0302\u0303","\u022e":"O\u0307","\u0230":"O\u0307\u0304","\u0150":"O\u030b","\u1e54":"P\u0301","\u1e56":"P\u0307","\u0154":"R\u0301","\u0158":"R\u030c","\u1e58":"R\u0307","\u015a":"S\u0301","\u1e64":"S\u0301\u0307","\u0160":"S\u030c","\u1e66":"S\u030c\u0307","\u015c":"S\u0302","\u1e60":"S\u0307","\u0164":"T\u030c","\u1e6a":"T\u0307","\xda":"U\u0301","\xd9":"U\u0300","\xdc":"U\u0308","\u01d7":"U\u0308\u0301","\u01db":"U\u0308\u0300","\u01d5":"U\u0308\u0304","\u01d9":"U\u0308\u030c","\u0168":"U\u0303","\u1e78":"U\u0303\u0301","\u016a":"U\u0304","\u1e7a":"U\u0304\u0308","\u016c":"U\u0306","\u01d3":"U\u030c","\xdb":"U\u0302","\u016e":"U\u030a","\u0170":"U\u030b","\u1e7c":"V\u0303","\u1e82":"W\u0301","\u1e80":"W\u0300","\u1e84":"W\u0308","\u0174":"W\u0302","\u1e86":"W\u0307","\u1e8c":"X\u0308","\u1e8a":"X\u0307","\xdd":"Y\u0301","\u1ef2":"Y\u0300","\u0178":"Y\u0308","\u1ef8":"Y\u0303","\u0232":"Y\u0304","\u0176":"Y\u0302","\u1e8e":"Y\u0307","\u0179":"Z\u0301","\u017d":"Z\u030c","\u1e90":"Z\u0302","\u017b":"Z\u0307","\u03ac":"\u03b1\u0301","\u1f70":"\u03b1\u0300","\u1fb1":"\u03b1\u0304","\u1fb0":"\u03b1\u0306","\u03ad":"\u03b5\u0301","\u1f72":"\u03b5\u0300","\u03ae":"\u03b7\u0301","\u1f74":"\u03b7\u0300","\u03af":"\u03b9\u0301","\u1f76":"\u03b9\u0300","\u03ca":"\u03b9\u0308","\u0390":"\u03b9\u0308\u0301","\u1fd2":"\u03b9\u0308\u0300","\u1fd1":"\u03b9\u0304","\u1fd0":"\u03b9\u0306","\u03cc":"\u03bf\u0301","\u1f78":"\u03bf\u0300","\u03cd":"\u03c5\u0301","\u1f7a":"\u03c5\u0300","\u03cb":"\u03c5\u0308","\u03b0":"\u03c5\u0308\u0301","\u1fe2":"\u03c5\u0308\u0300","\u1fe1":"\u03c5\u0304","\u1fe0":"\u03c5\u0306","\u03ce":"\u03c9\u0301","\u1f7c":"\u03c9\u0300","\u038e":"\u03a5\u0301","\u1fea":"\u03a5\u0300","\u03ab":"\u03a5\u0308","\u1fe9":"\u03a5\u0304","\u1fe8":"\u03a5\u0306","\u038f":"\u03a9\u0301","\u1ffa":"\u03a9\u0300"},Sa=function(){function t(t,e){this.mode=void 0,this.gullet=void 0,this.settings=void 0,this.leftrightDepth=void 0,this.nextToken=void 0,this.mode="math",this.gullet=new ya(t,e,this.mode),this.settings=e,this.leftrightDepth=0}var e=t.prototype;return e.expect=function(t,e){if(void 0===e&&(e=!0),this.fetch().text!==t)throw new o("Expected '"+t+"', got '"+this.fetch().text+"'",this.fetch());e&&this.consume()},e.consume=function(){this.nextToken=null},e.fetch=function(){return null==this.nextToken&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken},e.switchMode=function(t){this.mode=t,this.gullet.switchMode(t)},e.parse=function(){this.settings.globalGroup||this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");var t=this.parseExpression(!1);return this.expect("EOF"),this.settings.globalGroup||this.gullet.endGroup(),t},e.parseExpression=function(e,r){for(var a=[];;){"math"===this.mode&&this.consumeSpaces();var n=this.fetch();if(-1!==t.endOfExpression.indexOf(n.text))break;if(r&&n.text===r)break;if(e&&ia[n.text]&&ia[n.text].infix)break;var i=this.parseAtom(r);if(!i)break;"internal"!==i.type&&a.push(i)}return"text"===this.mode&&this.formLigatures(a),this.handleInfixNodes(a)},e.handleInfixNodes=function(t){for(var e,r=-1,a=0;a<t.length;a++)if("infix"===t[a].type){if(-1!==r)throw new o("only one infix operator per group",t[a].token);r=a,e=t[a].replaceWith}if(-1!==r&&e){var n,i,s=t.slice(0,r),l=t.slice(r+1);return n=1===s.length&&"ordgroup"===s[0].type?s[0]:{type:"ordgroup",mode:this.mode,body:s},i=1===l.length&&"ordgroup"===l[0].type?l[0]:{type:"ordgroup",mode:this.mode,body:l},["\\\\abovefrac"===e?this.callFunction(e,[n,t[r],i],[]):this.callFunction(e,[n,i],[])]}return t},e.handleSupSubscript=function(e){var r=this.fetch(),a=r.text;this.consume();var n=this.parseGroup(e,!1,t.SUPSUB_GREEDINESS,void 0,void 0,!0);if(!n)throw new o("Expected group after '"+a+"'",r);return n},e.formatUnsupportedCmd=function(t){for(var e=[],r=0;r<t.length;r++)e.push({type:"textord",mode:"text",text:t[r]});var a={type:"text",mode:this.mode,body:e};return{type:"color",mode:this.mode,color:this.settings.errorColor,body:[a]}},e.parseAtom=function(t){var e,r,a=this.parseGroup("atom",!1,null,t);if("text"===this.mode)return a;for(;;){this.consumeSpaces();var n=this.fetch();if("\\limits"===n.text||"\\nolimits"===n.text){if(a&&"op"===a.type){var i="\\limits"===n.text;a.limits=i,a.alwaysHandleSupSub=!0}else{if(!a||"operatorname"!==a.type||!a.alwaysHandleSupSub)throw new o("Limit controls must follow a math operator",n);var s="\\limits"===n.text;a.limits=s}this.consume()}else if("^"===n.text){if(e)throw new o("Double superscript",n);e=this.handleSupSubscript("superscript")}else if("_"===n.text){if(r)throw new o("Double subscript",n);r=this.handleSupSubscript("subscript")}else{if("'"!==n.text)break;if(e)throw new o("Double superscript",n);var l={type:"textord",mode:this.mode,text:"\\prime"},h=[l];for(this.consume();"'"===this.fetch().text;)h.push(l),this.consume();"^"===this.fetch().text&&h.push(this.handleSupSubscript("superscript")),e={type:"ordgroup",mode:this.mode,body:h}}}return e||r?{type:"supsub",mode:this.mode,base:a,sup:e,sub:r}:a},e.parseFunction=function(t,e,r){var a=this.fetch(),n=a.text,i=ia[n];if(!i)return null;if(this.consume(),null!=r&&i.greediness<=r)throw new o("Got function '"+n+"' with no arguments"+(e?" as "+e:""),a);if("text"===this.mode&&!i.allowedInText)throw new o("Can't use function '"+n+"' in text mode",a);if("math"===this.mode&&!1===i.allowedInMath)throw new o("Can't use function '"+n+"' in math mode",a);var s=this.parseArguments(n,i),l=s.args,h=s.optArgs;return this.callFunction(n,l,h,a,t)},e.callFunction=function(t,e,r,a,n){var i={funcName:t,parser:this,token:a,breakOnTokenText:n},s=ia[t];if(s&&s.handler)return s.handler(i,e,r);throw new o("No function handler for "+t)},e.parseArguments=function(t,e){var r=e.numArgs+e.numOptionalArgs;if(0===r)return{args:[],optArgs:[]};for(var a=e.greediness,n=[],i=[],s=0;s<r;s++){var l=e.argTypes&&e.argTypes[s],h=s<e.numOptionalArgs,m=s>0&&!h||0===s&&!h&&"math"===this.mode,c=this.parseGroupOfType("argument to '"+t+"'",l,h,a,m);if(!c){if(h){i.push(null);continue}throw new o("Expected group after '"+t+"'",this.fetch())}(h?i:n).push(c)}return{args:n,optArgs:i}},e.parseGroupOfType=function(t,e,r,a,n){switch(e){case"color":return n&&this.consumeSpaces(),this.parseColorGroup(r);case"size":return n&&this.consumeSpaces(),this.parseSizeGroup(r);case"url":return this.parseUrlGroup(r,n);case"math":case"text":return this.parseGroup(t,r,a,void 0,e,n);case"hbox":var i=this.parseGroup(t,r,a,void 0,"text",n);return i?{type:"styling",mode:i.mode,body:[i],style:"text"}:i;case"raw":if(n&&this.consumeSpaces(),r&&"{"===this.fetch().text)return null;var s=this.parseStringGroup("raw",r,!0);if(s)return{type:"raw",mode:"text",string:s.text};throw new o("Expected raw group",this.fetch());case"original":case null:case void 0:return this.parseGroup(t,r,a,void 0,void 0,n);default:throw new o("Unknown group type as "+t,this.fetch())}},e.consumeSpaces=function(){for(;" "===this.fetch().text;)this.consume()},e.parseStringGroup=function(t,e,r){var a=e?"[":"{",n=e?"]":"}",i=this.fetch();if(i.text!==a){if(e)return null;if(r&&"EOF"!==i.text&&/[^{}[\]]/.test(i.text))return this.consume(),i}var s=this.mode;this.mode="text",this.expect(a);for(var l,h="",m=this.fetch(),c=0,u=m;(l=this.fetch()).text!==n||r&&c>0;){switch(l.text){case"EOF":throw new o("Unexpected end of input in "+t,m.range(u,h));case a:c++;break;case n:c--}h+=(u=l).text,this.consume()}return this.expect(n),this.mode=s,m.range(u,h)},e.parseRegexGroup=function(t,e){var r=this.mode;this.mode="text";for(var a,n=this.fetch(),i=n,s="";"EOF"!==(a=this.fetch()).text&&t.test(s+a.text);)s+=(i=a).text,this.consume();if(""===s)throw new o("Invalid "+e+": '"+n.text+"'",n);return this.mode=r,n.range(i,s)},e.parseColorGroup=function(t){var e=this.parseStringGroup("color",t);if(!e)return null;var r=/^(#[a-f0-9]{3}|#?[a-f0-9]{6}|[a-z]+)$/i.exec(e.text);if(!r)throw new o("Invalid color: '"+e.text+"'",e);var a=r[0];return/^[0-9a-f]{6}$/i.test(a)&&(a="#"+a),{type:"color-token",mode:this.mode,color:a}},e.parseSizeGroup=function(t){var e,r=!1;if(!(e=t||"{"===this.fetch().text?this.parseStringGroup("size",t):this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size")))return null;t||0!==e.text.length||(e.text="0pt",r=!0);var a=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(e.text);if(!a)throw new o("Invalid size: '"+e.text+"'",e);var n={number:+(a[1]+a[2]),unit:a[3]};if(!At(n))throw new o("Invalid unit: '"+n.unit+"'",e);return{type:"size",mode:this.mode,value:n,isBlank:r}},e.parseUrlGroup=function(t,e){this.gullet.lexer.setCatcode("%",13);var r=this.parseStringGroup("url",t,!0);if(this.gullet.lexer.setCatcode("%",14),!r)return null;var a=r.text.replace(/\\([#$%&~_^{}])/g,"$1");return{type:"url",mode:this.mode,url:a}},e.parseGroup=function(e,r,n,i,s,l){var h=this.mode;s&&this.switchMode(s),l&&this.consumeSpaces();var m,c=this.fetch(),u=c.text;if(r?"["===u:"{"===u||"\\begingroup"===u){this.consume();var p=t.endOfGroup[u];this.gullet.beginGroup();var d=this.parseExpression(!1,p),f=this.fetch();this.expect(p),this.gullet.endGroup(),m={type:"ordgroup",mode:this.mode,loc:a.range(c,f),body:d,semisimple:"\\begingroup"===u||void 0}}else if(r)m=null;else if(null==(m=this.parseFunction(i,e,n)||this.parseSymbol())&&"\\"===u[0]&&!ba.hasOwnProperty(u)){if(this.settings.throwOnError)throw new o("Undefined control sequence: "+u,c);m=this.formatUnsupportedCmd(u),this.consume()}return s&&this.switchMode(h),m},e.formLigatures=function(t){for(var e=t.length-1,r=0;r<e;++r){var n=t[r],i=n.text;"-"===i&&"-"===t[r+1].text&&(r+1<e&&"-"===t[r+2].text?(t.splice(r,3,{type:"textord",mode:"text",loc:a.range(n,t[r+2]),text:"---"}),e-=2):(t.splice(r,2,{type:"textord",mode:"text",loc:a.range(n,t[r+1]),text:"--"}),e-=1)),"'"!==i&&"`"!==i||t[r+1].text!==i||(t.splice(r,2,{type:"textord",mode:"text",loc:a.range(n,t[r+1]),text:i+i}),e-=1)}},e.parseSymbol=function(){var t=this.fetch(),e=t.text;if(/^\\verb[^a-zA-Z]/.test(e)){this.consume();var r=e.slice(5),n="*"===r.charAt(0);if(n&&(r=r.slice(1)),r.length<2||r.charAt(0)!==r.slice(-1))throw new o("\\verb assertion failed --\n                    please report what input caused this bug");return{type:"verb",mode:"text",body:r=r.slice(1,-1),star:n}}ka.hasOwnProperty(e[0])&&!j[this.mode][e[0]]&&(this.settings.strict&&"math"===this.mode&&this.settings.reportNonstrict("unicodeTextInMathMode",'Accented Unicode text character "'+e[0]+'" used in math mode',t),e=ka[e[0]]+e.substr(1));var i,s=sa.exec(e);if(s&&("i"===(e=e.substring(0,s.index))?e="\u0131":"j"===e&&(e="\u0237")),j[this.mode][e]){this.settings.strict&&"math"===this.mode&&"\xc7\xd0\xde\xe7\xfe".indexOf(e)>=0&&this.settings.reportNonstrict("unicodeTextInMathMode",'Latin-1/Unicode text character "'+e[0]+'" used in math mode',t);var l,h=j[this.mode][e].group,m=a.range(t);if(W.hasOwnProperty(h)){var c=h;l={type:"atom",mode:this.mode,family:c,loc:m,text:e}}else l={type:h,mode:this.mode,loc:m,text:e};i=l}else{if(!(e.charCodeAt(0)>=128))return null;this.settings.strict&&(M(e.charCodeAt(0))?"math"===this.mode&&this.settings.reportNonstrict("unicodeTextInMathMode",'Unicode text character "'+e[0]+'" used in math mode',t):this.settings.reportNonstrict("unknownSymbol",'Unrecognized Unicode character "'+e[0]+'" ('+e.charCodeAt(0)+")",t)),i={type:"textord",mode:"text",loc:a.range(t),text:e}}if(this.consume(),s)for(var u=0;u<s[0].length;u++){var p=s[0][u];if(!wa[p])throw new o("Unknown accent ' "+p+"'",t);var d=wa[p][this.mode];if(!d)throw new o("Accent "+p+" unsupported in "+this.mode+" mode",t);i={type:"accent",mode:this.mode,loc:a.range(t),label:d,isStretchy:!1,isShifty:!0,base:i}}return i},t}();Sa.endOfExpression=["}","\\endgroup","\\end","\\right","&"],Sa.endOfGroup={"[":"]","{":"}","\\begingroup":"\\endgroup"},Sa.SUPSUB_GREEDINESS=1;var Ma=function(t,e){if(!("string"==typeof t||t instanceof String))throw new TypeError("KaTeX can only parse string typed expression");var r=new Sa(t,e);delete r.gullet.macros.current["\\df@tag"];var a=r.parse();if(r.gullet.macros.get("\\df@tag")){if(!e.displayMode)throw new o("\\tag works only in display equations");r.gullet.feed("\\df@tag"),a=[{type:"tag",mode:"text",body:a,tag:r.parse()}]}return a},za=function(t,e,r){e.textContent="";var a=Ta(t,r).toNode();e.appendChild(a)};"undefined"!=typeof document&&"CSS1Compat"!==document.compatMode&&("undefined"!=typeof console&&console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype."),za=function(){throw new o("KaTeX doesn't work in quirks mode.")});var Aa=function(t,e,r){if(r.throwOnError||!(t instanceof o))throw t;var a=Dt.makeSpan(["katex-error"],[new E(e)]);return a.setAttribute("title",t.toString()),a.setAttribute("style","color:"+r.errorColor),a},Ta=function(t,e){var r=new u(e);try{var a=Ma(t,r);return ke(a,t,r)}catch(e){return Aa(e,t,r)}},Ba={version:"0.12.0",render:za,renderToString:function(t,e){return Ta(t,e).toMarkup()},ParseError:o,__parse:function(t,e){var r=new u(e);return Ma(t,r)},__renderToDomTree:Ta,__renderToHTMLTree:function(t,e){var r=new u(e);try{return function(t,e,r){var a=le(t,ye(r)),n=Dt.makeSpan(["katex"],[a]);return we(n,r)}(Ma(t,r),0,r)}catch(e){return Aa(e,t,r)}},__setFontMetrics:function(t,e){F[t]=e},__defineSymbol:$,__defineMacro:pa,__domTree:{Span:N,Anchor:I,SymbolNode:E,SvgNode:L,PathNode:P,LineNode:D}};e.default=Ba}]).default});